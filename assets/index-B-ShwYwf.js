const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-vtRboCKw.js","assets/deflate-B9JhHpvg.js","assets/pako.esm-Cram60i4.js","assets/packbits-DDWKfGV_.js","assets/lerc-BGsRiwbr.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
function aD(e,t){for(var i=0;i<t.length;i++){const o=t[i];if(typeof o!="string"&&!Array.isArray(o)){for(const d in o)if(d!=="default"&&!(d in e)){const y=Object.getOwnPropertyDescriptor(o,d);y&&Object.defineProperty(e,d,y.get?y:{enumerable:!0,get:()=>o[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function i(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function o(d){if(d.ep)return;d.ep=!0;const y=i(d);fetch(d.href,y)}})();function El(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o_={exports:{}},Eg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function oD(){if(Uw)return Eg;Uw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(o,d,y){var g=null;if(y!==void 0&&(g=""+y),d.key!==void 0&&(g=""+d.key),"key"in d){y={};for(var u in d)u!=="key"&&(y[u]=d[u])}else y=d;return d=y.ref,{$$typeof:e,type:o,key:g,ref:d!==void 0?d:null,props:y}}return Eg.Fragment=t,Eg.jsx=i,Eg.jsxs=i,Eg}var Gw;function sD(){return Gw||(Gw=1,o_.exports=oD()),o_.exports}var Ee=sD(),s_={exports:{}},Ar={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function lD(){if(Vw)return Ar;Vw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),g=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),j=Symbol.iterator;function N(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=j&&Ae[j]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,W={};function oe(Ae,Ve,xt){this.props=Ae,this.context=Ve,this.refs=W,this.updater=xt||$}oe.prototype.isReactComponent={},oe.prototype.setState=function(Ae,Ve){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,Ve,"setState")},oe.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function le(){}le.prototype=oe.prototype;function ue(Ae,Ve,xt){this.props=Ae,this.context=Ve,this.refs=W,this.updater=xt||$}var Oe=ue.prototype=new le;Oe.constructor=ue,X(Oe,oe.prototype),Oe.isPureReactComponent=!0;var Be=Array.isArray;function Le(){}var qe={H:null,A:null,T:null,S:null},at=Object.prototype.hasOwnProperty;function Mt(Ae,Ve,xt){var Pt=xt.ref;return{$$typeof:e,type:Ae,key:Ve,ref:Pt!==void 0?Pt:null,props:xt}}function Ot(Ae,Ve){return Mt(Ae.type,Ve,Ae.props)}function ft(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function gt(Ae){var Ve={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(xt){return Ve[xt]})}var Ft=/\/+/g;function Ht(Ae,Ve){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?gt(""+Ae.key):Ve.toString(36)}function Kt(Ae){switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason;default:switch(typeof Ae.status=="string"?Ae.then(Le,Le):(Ae.status="pending",Ae.then(function(Ve){Ae.status==="pending"&&(Ae.status="fulfilled",Ae.value=Ve)},function(Ve){Ae.status==="pending"&&(Ae.status="rejected",Ae.reason=Ve)})),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason}}throw Ae}function $e(Ae,Ve,xt,Pt,Rt){var Gt=typeof Ae;(Gt==="undefined"||Gt==="boolean")&&(Ae=null);var or=!1;if(Ae===null)or=!0;else switch(Gt){case"bigint":case"string":case"number":or=!0;break;case"object":switch(Ae.$$typeof){case e:case t:or=!0;break;case C:return or=Ae._init,$e(or(Ae._payload),Ve,xt,Pt,Rt)}}if(or)return Rt=Rt(Ae),or=Pt===""?"."+Ht(Ae,0):Pt,Be(Rt)?(xt="",or!=null&&(xt=or.replace(Ft,"$&/")+"/"),$e(Rt,Ve,xt,"",function(Wt){return Wt})):Rt!=null&&(ft(Rt)&&(Rt=Ot(Rt,xt+(Rt.key==null||Ae&&Ae.key===Rt.key?"":(""+Rt.key).replace(Ft,"$&/")+"/")+or)),Ve.push(Rt)),1;or=0;var kr=Pt===""?".":Pt+":";if(Be(Ae))for(var vt=0;vt<Ae.length;vt++)Pt=Ae[vt],Gt=kr+Ht(Pt,vt),or+=$e(Pt,Ve,xt,Gt,Rt);else if(vt=N(Ae),typeof vt=="function")for(Ae=vt.call(Ae),vt=0;!(Pt=Ae.next()).done;)Pt=Pt.value,Gt=kr+Ht(Pt,vt++),or+=$e(Pt,Ve,xt,Gt,Rt);else if(Gt==="object"){if(typeof Ae.then=="function")return $e(Kt(Ae),Ve,xt,Pt,Rt);throw Ve=String(Ae),Error("Objects are not valid as a React child (found: "+(Ve==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":Ve)+"). If you meant to render a collection of children, use an array instead.")}return or}function ot(Ae,Ve,xt){if(Ae==null)return Ae;var Pt=[],Rt=0;return $e(Ae,Pt,"","",function(Gt){return Ve.call(xt,Gt,Rt++)}),Pt}function Dt(Ae){if(Ae._status===-1){var Ve=Ae._result;Ve=Ve(),Ve.then(function(xt){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=xt)},function(xt){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=xt)}),Ae._status===-1&&(Ae._status=0,Ae._result=Ve)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var bt=typeof reportError=="function"?reportError:function(Ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ae=="object"&&Ae!==null&&typeof Ae.message=="string"?String(Ae.message):String(Ae),error:Ae});if(!window.dispatchEvent(Ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ae);return}console.error(Ae)},tr={map:ot,forEach:function(Ae,Ve,xt){ot(Ae,function(){Ve.apply(this,arguments)},xt)},count:function(Ae){var Ve=0;return ot(Ae,function(){Ve++}),Ve},toArray:function(Ae){return ot(Ae,function(Ve){return Ve})||[]},only:function(Ae){if(!ft(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}};return Ar.Activity=z,Ar.Children=tr,Ar.Component=oe,Ar.Fragment=i,Ar.Profiler=d,Ar.PureComponent=ue,Ar.StrictMode=o,Ar.Suspense=E,Ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qe,Ar.__COMPILER_RUNTIME={__proto__:null,c:function(Ae){return qe.H.useMemoCache(Ae)}},Ar.cache=function(Ae){return function(){return Ae.apply(null,arguments)}},Ar.cacheSignal=function(){return null},Ar.cloneElement=function(Ae,Ve,xt){if(Ae==null)throw Error("The argument must be a React element, but you passed "+Ae+".");var Pt=X({},Ae.props),Rt=Ae.key;if(Ve!=null)for(Gt in Ve.key!==void 0&&(Rt=""+Ve.key),Ve)!at.call(Ve,Gt)||Gt==="key"||Gt==="__self"||Gt==="__source"||Gt==="ref"&&Ve.ref===void 0||(Pt[Gt]=Ve[Gt]);var Gt=arguments.length-2;if(Gt===1)Pt.children=xt;else if(1<Gt){for(var or=Array(Gt),kr=0;kr<Gt;kr++)or[kr]=arguments[kr+2];Pt.children=or}return Mt(Ae.type,Rt,Pt)},Ar.createContext=function(Ae){return Ae={$$typeof:g,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null},Ae.Provider=Ae,Ae.Consumer={$$typeof:y,_context:Ae},Ae},Ar.createElement=function(Ae,Ve,xt){var Pt,Rt={},Gt=null;if(Ve!=null)for(Pt in Ve.key!==void 0&&(Gt=""+Ve.key),Ve)at.call(Ve,Pt)&&Pt!=="key"&&Pt!=="__self"&&Pt!=="__source"&&(Rt[Pt]=Ve[Pt]);var or=arguments.length-2;if(or===1)Rt.children=xt;else if(1<or){for(var kr=Array(or),vt=0;vt<or;vt++)kr[vt]=arguments[vt+2];Rt.children=kr}if(Ae&&Ae.defaultProps)for(Pt in or=Ae.defaultProps,or)Rt[Pt]===void 0&&(Rt[Pt]=or[Pt]);return Mt(Ae,Gt,Rt)},Ar.createRef=function(){return{current:null}},Ar.forwardRef=function(Ae){return{$$typeof:u,render:Ae}},Ar.isValidElement=ft,Ar.lazy=function(Ae){return{$$typeof:C,_payload:{_status:-1,_result:Ae},_init:Dt}},Ar.memo=function(Ae,Ve){return{$$typeof:P,type:Ae,compare:Ve===void 0?null:Ve}},Ar.startTransition=function(Ae){var Ve=qe.T,xt={};qe.T=xt;try{var Pt=Ae(),Rt=qe.S;Rt!==null&&Rt(xt,Pt),typeof Pt=="object"&&Pt!==null&&typeof Pt.then=="function"&&Pt.then(Le,bt)}catch(Gt){bt(Gt)}finally{Ve!==null&&xt.types!==null&&(Ve.types=xt.types),qe.T=Ve}},Ar.unstable_useCacheRefresh=function(){return qe.H.useCacheRefresh()},Ar.use=function(Ae){return qe.H.use(Ae)},Ar.useActionState=function(Ae,Ve,xt){return qe.H.useActionState(Ae,Ve,xt)},Ar.useCallback=function(Ae,Ve){return qe.H.useCallback(Ae,Ve)},Ar.useContext=function(Ae){return qe.H.useContext(Ae)},Ar.useDebugValue=function(){},Ar.useDeferredValue=function(Ae,Ve){return qe.H.useDeferredValue(Ae,Ve)},Ar.useEffect=function(Ae,Ve){return qe.H.useEffect(Ae,Ve)},Ar.useEffectEvent=function(Ae){return qe.H.useEffectEvent(Ae)},Ar.useId=function(){return qe.H.useId()},Ar.useImperativeHandle=function(Ae,Ve,xt){return qe.H.useImperativeHandle(Ae,Ve,xt)},Ar.useInsertionEffect=function(Ae,Ve){return qe.H.useInsertionEffect(Ae,Ve)},Ar.useLayoutEffect=function(Ae,Ve){return qe.H.useLayoutEffect(Ae,Ve)},Ar.useMemo=function(Ae,Ve){return qe.H.useMemo(Ae,Ve)},Ar.useOptimistic=function(Ae,Ve){return qe.H.useOptimistic(Ae,Ve)},Ar.useReducer=function(Ae,Ve,xt){return qe.H.useReducer(Ae,Ve,xt)},Ar.useRef=function(Ae){return qe.H.useRef(Ae)},Ar.useState=function(Ae){return qe.H.useState(Ae)},Ar.useSyncExternalStore=function(Ae,Ve,xt){return qe.H.useSyncExternalStore(Ae,Ve,xt)},Ar.useTransition=function(){return qe.H.useTransition()},Ar.version="19.2.0",Ar}var qw;function um(){return qw||(qw=1,s_.exports=lD()),s_.exports}var ae=um();const cD=El(ae),uD=aD({__proto__:null,default:cD},[ae]);var l_={exports:{}},Pg={},c_={exports:{}},u_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function hD(){return $w||($w=1,(function(e){function t($e,ot){var Dt=$e.length;$e.push(ot);e:for(;0<Dt;){var bt=Dt-1>>>1,tr=$e[bt];if(0<d(tr,ot))$e[bt]=ot,$e[Dt]=tr,Dt=bt;else break e}}function i($e){return $e.length===0?null:$e[0]}function o($e){if($e.length===0)return null;var ot=$e[0],Dt=$e.pop();if(Dt!==ot){$e[0]=Dt;e:for(var bt=0,tr=$e.length,Ae=tr>>>1;bt<Ae;){var Ve=2*(bt+1)-1,xt=$e[Ve],Pt=Ve+1,Rt=$e[Pt];if(0>d(xt,Dt))Pt<tr&&0>d(Rt,xt)?($e[bt]=Rt,$e[Pt]=Dt,bt=Pt):($e[bt]=xt,$e[Ve]=Dt,bt=Ve);else if(Pt<tr&&0>d(Rt,Dt))$e[bt]=Rt,$e[Pt]=Dt,bt=Pt;else break e}}return ot}function d($e,ot){var Dt=$e.sortIndex-ot.sortIndex;return Dt!==0?Dt:$e.id-ot.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var E=[],P=[],C=1,z=null,j=3,N=!1,$=!1,X=!1,W=!1,oe=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function Oe($e){for(var ot=i(P);ot!==null;){if(ot.callback===null)o(P);else if(ot.startTime<=$e)o(P),ot.sortIndex=ot.expirationTime,t(E,ot);else break;ot=i(P)}}function Be($e){if(X=!1,Oe($e),!$)if(i(E)!==null)$=!0,Le||(Le=!0,gt());else{var ot=i(P);ot!==null&&Kt(Be,ot.startTime-$e)}}var Le=!1,qe=-1,at=5,Mt=-1;function Ot(){return W?!0:!(e.unstable_now()-Mt<at)}function ft(){if(W=!1,Le){var $e=e.unstable_now();Mt=$e;var ot=!0;try{e:{$=!1,X&&(X=!1,le(qe),qe=-1),N=!0;var Dt=j;try{t:{for(Oe($e),z=i(E);z!==null&&!(z.expirationTime>$e&&Ot());){var bt=z.callback;if(typeof bt=="function"){z.callback=null,j=z.priorityLevel;var tr=bt(z.expirationTime<=$e);if($e=e.unstable_now(),typeof tr=="function"){z.callback=tr,Oe($e),ot=!0;break t}z===i(E)&&o(E),Oe($e)}else o(E);z=i(E)}if(z!==null)ot=!0;else{var Ae=i(P);Ae!==null&&Kt(Be,Ae.startTime-$e),ot=!1}}break e}finally{z=null,j=Dt,N=!1}ot=void 0}}finally{ot?gt():Le=!1}}}var gt;if(typeof ue=="function")gt=function(){ue(ft)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Ht=Ft.port2;Ft.port1.onmessage=ft,gt=function(){Ht.postMessage(null)}}else gt=function(){oe(ft,0)};function Kt($e,ot){qe=oe(function(){$e(e.unstable_now())},ot)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function($e){switch(j){case 1:case 2:case 3:var ot=3;break;default:ot=j}var Dt=j;j=ot;try{return $e()}finally{j=Dt}},e.unstable_requestPaint=function(){W=!0},e.unstable_runWithPriority=function($e,ot){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Dt=j;j=$e;try{return ot()}finally{j=Dt}},e.unstable_scheduleCallback=function($e,ot,Dt){var bt=e.unstable_now();switch(typeof Dt=="object"&&Dt!==null?(Dt=Dt.delay,Dt=typeof Dt=="number"&&0<Dt?bt+Dt:bt):Dt=bt,$e){case 1:var tr=-1;break;case 2:tr=250;break;case 5:tr=1073741823;break;case 4:tr=1e4;break;default:tr=5e3}return tr=Dt+tr,$e={id:C++,callback:ot,priorityLevel:$e,startTime:Dt,expirationTime:tr,sortIndex:-1},Dt>bt?($e.sortIndex=Dt,t(P,$e),i(E)===null&&$e===i(P)&&(X?(le(qe),qe=-1):X=!0,Kt(Be,Dt-bt))):($e.sortIndex=tr,t(E,$e),$||N||($=!0,Le||(Le=!0,gt()))),$e},e.unstable_shouldYield=Ot,e.unstable_wrapCallback=function($e){var ot=j;return function(){var Dt=j;j=ot;try{return $e.apply(this,arguments)}finally{j=Dt}}}})(u_)),u_}var Zw;function fD(){return Zw||(Zw=1,c_.exports=hD()),c_.exports}var h_={exports:{}},Qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function dD(){if(Hw)return Qa;Hw=1;var e=um();function t(E){var P="https://react.dev/errors/"+E;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)P+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+E+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(E,P,C){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:z==null?null:""+z,children:E,containerInfo:P,implementation:C}}var g=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(E,P){if(E==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return Qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Qa.createPortal=function(E,P){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(t(299));return y(E,P,null,C)},Qa.flushSync=function(E){var P=g.T,C=o.p;try{if(g.T=null,o.p=2,E)return E()}finally{g.T=P,o.p=C,o.d.f()}},Qa.preconnect=function(E,P){typeof E=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,o.d.C(E,P))},Qa.prefetchDNS=function(E){typeof E=="string"&&o.d.D(E)},Qa.preinit=function(E,P){if(typeof E=="string"&&P&&typeof P.as=="string"){var C=P.as,z=u(C,P.crossOrigin),j=typeof P.integrity=="string"?P.integrity:void 0,N=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;C==="style"?o.d.S(E,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:z,integrity:j,fetchPriority:N}):C==="script"&&o.d.X(E,{crossOrigin:z,integrity:j,fetchPriority:N,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},Qa.preinitModule=function(E,P){if(typeof E=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var C=u(P.as,P.crossOrigin);o.d.M(E,{crossOrigin:C,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&o.d.M(E)},Qa.preload=function(E,P){if(typeof E=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var C=P.as,z=u(C,P.crossOrigin);o.d.L(E,C,{crossOrigin:z,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},Qa.preloadModule=function(E,P){if(typeof E=="string")if(P){var C=u(P.as,P.crossOrigin);o.d.m(E,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:C,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else o.d.m(E)},Qa.requestFormReset=function(E){o.d.r(E)},Qa.unstable_batchedUpdates=function(E,P){return E(P)},Qa.useFormState=function(E,P,C){return g.H.useFormState(E,P,C)},Qa.useFormStatus=function(){return g.H.useHostTransitionStatus()},Qa.version="19.2.0",Qa}var Yw;function HA(){if(Yw)return h_.exports;Yw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),h_.exports=dD(),h_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function pD(){if(Xw)return Pg;Xw=1;var e=fD(),t=um(),i=HA();function o(a){var h="https://react.dev/errors/"+a;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+a+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function y(a){var h=a,m=a;if(a.alternate)for(;h.return;)h=h.return;else{a=h;do h=a,(h.flags&4098)!==0&&(m=h.return),a=h.return;while(a)}return h.tag===3?m:null}function g(a){if(a.tag===13){var h=a.memoizedState;if(h===null&&(a=a.alternate,a!==null&&(h=a.memoizedState)),h!==null)return h.dehydrated}return null}function u(a){if(a.tag===31){var h=a.memoizedState;if(h===null&&(a=a.alternate,a!==null&&(h=a.memoizedState)),h!==null)return h.dehydrated}return null}function E(a){if(y(a)!==a)throw Error(o(188))}function P(a){var h=a.alternate;if(!h){if(h=y(a),h===null)throw Error(o(188));return h!==a?null:a}for(var m=a,b=h;;){var D=m.return;if(D===null)break;var k=D.alternate;if(k===null){if(b=D.return,b!==null){m=b;continue}break}if(D.child===k.child){for(k=D.child;k;){if(k===m)return E(D),a;if(k===b)return E(D),h;k=k.sibling}throw Error(o(188))}if(m.return!==b.return)m=D,b=k;else{for(var H=!1,ie=D.child;ie;){if(ie===m){H=!0,m=D,b=k;break}if(ie===b){H=!0,b=D,m=k;break}ie=ie.sibling}if(!H){for(ie=k.child;ie;){if(ie===m){H=!0,m=k,b=D;break}if(ie===b){H=!0,b=k,m=D;break}ie=ie.sibling}if(!H)throw Error(o(189))}}if(m.alternate!==b)throw Error(o(190))}if(m.tag!==3)throw Error(o(188));return m.stateNode.current===m?a:h}function C(a){var h=a.tag;if(h===5||h===26||h===27||h===6)return a;for(a=a.child;a!==null;){if(h=C(a),h!==null)return h;a=a.sibling}return null}var z=Object.assign,j=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Mt=Symbol.for("react.activity"),Ot=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function gt(a){return a===null||typeof a!="object"?null:(a=ft&&a[ft]||a["@@iterator"],typeof a=="function"?a:null)}var Ft=Symbol.for("react.client.reference");function Ht(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Ft?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case X:return"Fragment";case oe:return"Profiler";case W:return"StrictMode";case Be:return"Suspense";case Le:return"SuspenseList";case Mt:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case $:return"Portal";case ue:return a.displayName||"Context";case le:return(a._context.displayName||"Context")+".Consumer";case Oe:var h=a.render;return a=a.displayName,a||(a=h.displayName||h.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case qe:return h=a.displayName||null,h!==null?h:Ht(a.type)||"Memo";case at:h=a._payload,a=a._init;try{return Ht(a(h))}catch{}}return null}var Kt=Array.isArray,$e=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dt={pending:!1,data:null,method:null,action:null},bt=[],tr=-1;function Ae(a){return{current:a}}function Ve(a){0>tr||(a.current=bt[tr],bt[tr]=null,tr--)}function xt(a,h){tr++,bt[tr]=a.current,a.current=h}var Pt=Ae(null),Rt=Ae(null),Gt=Ae(null),or=Ae(null);function kr(a,h){switch(xt(Gt,h),xt(Rt,a),xt(Pt,null),h.nodeType){case 9:case 11:a=(a=h.documentElement)&&(a=a.namespaceURI)?ic(a):0;break;default:if(a=h.tagName,h=h.namespaceURI)h=ic(h),a=yg(h,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ve(Pt),xt(Pt,a)}function vt(){Ve(Pt),Ve(Rt),Ve(Gt)}function Wt(a){a.memoizedState!==null&&xt(or,a);var h=Pt.current,m=yg(h,a.type);h!==m&&(xt(Rt,a),xt(Pt,m))}function ur(a){Rt.current===a&&(Ve(Pt),Ve(Rt)),or.current===a&&(Ve(or),lt._currentValue=Dt)}var dt,_r;function Qt(a){if(dt===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);dt=h&&h[1]||"",_r=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+a+_r}var Jr=!1;function un(a,h){if(!a||Jr)return"";Jr=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(h){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(Je){var Ke=Je}Reflect.construct(a,[],ht)}else{try{ht.call()}catch(Je){Ke=Je}a.call(ht.prototype)}}else{try{throw Error()}catch(Je){Ke=Je}(ht=a())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(Je){if(Je&&Ke&&typeof Je.stack=="string")return[Je.stack,Ke.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=b.DetermineComponentFrameRoot(),H=k[0],ie=k[1];if(H&&ie){var Te=H.split(`
`),Xe=ie.split(`
`);for(D=b=0;b<Te.length&&!Te[b].includes("DetermineComponentFrameRoot");)b++;for(;D<Xe.length&&!Xe[D].includes("DetermineComponentFrameRoot");)D++;if(b===Te.length||D===Xe.length)for(b=Te.length-1,D=Xe.length-1;1<=b&&0<=D&&Te[b]!==Xe[D];)D--;for(;1<=b&&0<=D;b--,D--)if(Te[b]!==Xe[D]){if(b!==1||D!==1)do if(b--,D--,0>D||Te[b]!==Xe[D]){var nt=`
`+Te[b].replace(" at new "," at ");return a.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",a.displayName)),nt}while(1<=b&&0<=D);break}}}finally{Jr=!1,Error.prepareStackTrace=m}return(m=a?a.displayName||a.name:"")?Qt(m):""}function qi(a,h){switch(a.tag){case 26:case 27:case 5:return Qt(a.type);case 16:return Qt("Lazy");case 13:return a.child!==h&&h!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return un(a.type,!1);case 11:return un(a.type.render,!1);case 1:return un(a.type,!0);case 31:return Qt("Activity");default:return""}}function na(a){try{var h="",m=null;do h+=qi(a,m),m=a,a=a.return;while(a);return h}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var ja=Object.prototype.hasOwnProperty,ks=e.unstable_scheduleCallback,mo=e.unstable_cancelCallback,Bs=e.unstable_shouldYield,Ls=e.unstable_requestPaint,li=e.unstable_now,js=e.unstable_getCurrentPriorityLevel,Ko=e.unstable_ImmediatePriority,Wo=e.unstable_UserBlockingPriority,Qo=e.unstable_NormalPriority,De=e.unstable_LowPriority,ee=e.unstable_IdlePriority,te=e.log,se=e.unstable_setDisableYieldValue,_e=null,we=null;function Ce(a){if(typeof te=="function"&&se(a),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(_e,a)}catch{}}var Ne=Math.clz32?Math.clz32:pt,ke=Math.log,Qe=Math.LN2;function pt(a){return a>>>=0,a===0?32:31-(ke(a)/Qe|0)|0}var et=256,It=262144,Re=4194304;function Yt(a){var h=a&42;if(h!==0)return h;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function gr(a,h,m){var b=a.pendingLanes;if(b===0)return 0;var D=0,k=a.suspendedLanes,H=a.pingedLanes;a=a.warmLanes;var ie=b&134217727;return ie!==0?(b=ie&~k,b!==0?D=Yt(b):(H&=ie,H!==0?D=Yt(H):m||(m=ie&~a,m!==0&&(D=Yt(m))))):(ie=b&~k,ie!==0?D=Yt(ie):H!==0?D=Yt(H):m||(m=b&~a,m!==0&&(D=Yt(m)))),D===0?0:h!==0&&h!==D&&(h&k)===0&&(k=D&-D,m=h&-h,k>=m||k===32&&(m&4194048)!==0)?h:D}function Lt(a,h){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&h)===0}function hr(a,h){switch(a){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var a=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),a}function An(a){for(var h=[],m=0;31>m;m++)h.push(a);return h}function Mn(a,h){a.pendingLanes|=h,h!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ci(a,h,m,b,D,k){var H=a.pendingLanes;a.pendingLanes=m,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=m,a.entangledLanes&=m,a.errorRecoveryDisabledLanes&=m,a.shellSuspendCounter=0;var ie=a.entanglements,Te=a.expirationTimes,Xe=a.hiddenUpdates;for(m=H&~m;0<m;){var nt=31-Ne(m),ht=1<<nt;ie[nt]=0,Te[nt]=-1;var Ke=Xe[nt];if(Ke!==null)for(Xe[nt]=null,nt=0;nt<Ke.length;nt++){var Je=Ke[nt];Je!==null&&(Je.lane&=-536870913)}m&=~ht}b!==0&&ei(a,b,0),k!==0&&D===0&&a.tag!==0&&(a.suspendedLanes|=k&~(H&~h))}function ei(a,h,m){a.pendingLanes|=h,a.suspendedLanes&=~h;var b=31-Ne(h);a.entangledLanes|=h,a.entanglements[b]=a.entanglements[b]|1073741824|m&261930}function tn(a,h){var m=a.entangledLanes|=h;for(a=a.entanglements;m;){var b=31-Ne(m),D=1<<b;D&h|a[b]&h&&(a[b]|=h),m&=~D}}function Bn(a,h){var m=h&-h;return m=(m&42)!==0?1:rt(m),(m&(a.suspendedLanes|h))!==0?0:m}function rt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function En(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ia(){var a=ot.p;return a!==0?a:(a=window.event,a===void 0?32:Ka(a.type))}function Ns(a,h){var m=ot.p;try{return ot.p=a,h()}finally{ot.p=m}}var Pn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Pn,$t="__reactProps$"+Pn,ir="__reactContainer$"+Pn,ui="__reactEvents$"+Pn,Il="__reactListeners$"+Pn,Fs="__reactHandles$"+Pn,sr="__reactResources$"+Pn,Us="__reactMarker$"+Pn;function go(a){delete a[ut],delete a[$t],delete a[ui],delete a[Il],delete a[Fs]}function Jo(a){var h=a[ut];if(h)return h;for(var m=a.parentNode;m;){if(h=m[ir]||m[ut]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(a=nv(a);a!==null;){if(m=a[ut])return m;a=nv(a)}return h}a=m,m=a.parentNode}return null}function $i(a){if(a=a[ut]||a[ir]){var h=a.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return a}return null}function yo(a){var h=a.tag;if(h===5||h===26||h===27||h===6)return a.stateNode;throw Error(o(33))}function rn(a){var h=a[sr];return h||(h=a[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Un(a){a[Us]=!0}var Zi=new Set,Hr={};function Gs(a,h){vo(a,h),vo(a+"Capture",h)}function vo(a,h){for(Hr[a]=h,a=0;a<h.length;a++)Zi.add(h[a])}var vf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),es={},ts={};function _f(a){return ja.call(ts,a)?!0:ja.call(es,a)?!1:vf.test(a)?ts[a]=!0:(es[a]=!0,!1)}function au(a,h,m){if(_f(h))if(m===null)a.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":a.removeAttribute(h);return;case"boolean":var b=h.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){a.removeAttribute(h);return}}a.setAttribute(h,""+m)}}function ou(a,h,m){if(m===null)a.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttribute(h,""+m)}}function aa(a,h,m,b){if(b===null)a.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(m);return}a.setAttributeNS(h,m,""+b)}}function Aa(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Hd(a){var h=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Sm(a,h,m){var b=Object.getOwnPropertyDescriptor(a.constructor.prototype,h);if(!a.hasOwnProperty(h)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,k=b.set;return Object.defineProperty(a,h,{configurable:!0,get:function(){return D.call(this)},set:function(H){m=""+H,k.call(this,H)}}),Object.defineProperty(a,h,{enumerable:b.enumerable}),{getValue:function(){return m},setValue:function(H){m=""+H},stopTracking:function(){a._valueTracker=null,delete a[h]}}}}function bf(a){if(!a._valueTracker){var h=Hd(a)?"checked":"value";a._valueTracker=Sm(a,h,""+a[h])}}function dh(a){if(!a)return!1;var h=a._valueTracker;if(!h)return!0;var m=h.getValue(),b="";return a&&(b=Hd(a)?a.checked?"true":"false":a.value),a=b,a!==m?(h.setValue(a),!0):!1}function rs(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xf=/[\n"\\]/g;function oa(a){return a.replace(xf,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Vs(a,h,m,b,D,k,H,ie){a.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?a.type=H:a.removeAttribute("type"),h!=null?H==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+Aa(h)):a.value!==""+Aa(h)&&(a.value=""+Aa(h)):H!=="submit"&&H!=="reset"||a.removeAttribute("value"),h!=null?su(a,H,Aa(h)):m!=null?su(a,H,Aa(m)):b!=null&&a.removeAttribute("value"),D==null&&k!=null&&(a.defaultChecked=!!k),D!=null&&(a.checked=D&&typeof D!="function"&&typeof D!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?a.name=""+Aa(ie):a.removeAttribute("name")}function ph(a,h,m,b,D,k,H,ie){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.type=k),h!=null||m!=null){if(!(k!=="submit"&&k!=="reset"||h!=null)){bf(a);return}m=m!=null?""+Aa(m):"",h=h!=null?""+Aa(h):m,ie||h===a.value||(a.value=h),a.defaultValue=h}b=b??D,b=typeof b!="function"&&typeof b!="symbol"&&!!b,a.checked=ie?a.checked:!!b,a.defaultChecked=!!b,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.name=H),bf(a)}function su(a,h,m){h==="number"&&rs(a.ownerDocument)===a||a.defaultValue===""+m||(a.defaultValue=""+m)}function pc(a,h,m,b){if(a=a.options,h){h={};for(var D=0;D<m.length;D++)h["$"+m[D]]=!0;for(m=0;m<a.length;m++)D=h.hasOwnProperty("$"+a[m].value),a[m].selected!==D&&(a[m].selected=D),D&&b&&(a[m].defaultSelected=!0)}else{for(m=""+Aa(m),h=null,D=0;D<a.length;D++){if(a[D].value===m){a[D].selected=!0,b&&(a[D].defaultSelected=!0);return}h!==null||a[D].disabled||(h=a[D])}h!==null&&(h.selected=!0)}}function Ol(a,h,m){if(h!=null&&(h=""+Aa(h),h!==a.value&&(a.value=h),m==null)){a.defaultValue!==h&&(a.defaultValue=h);return}a.defaultValue=m!=null?""+Aa(m):""}function mc(a,h,m,b){if(h==null){if(b!=null){if(m!=null)throw Error(o(92));if(Kt(b)){if(1<b.length)throw Error(o(93));b=b[0]}m=b}m==null&&(m=""),h=m}m=Aa(h),a.defaultValue=m,b=a.textContent,b===m&&b!==""&&b!==null&&(a.value=b),bf(a)}function zi(a,h){if(h){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=h;return}}a.textContent=h}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qs(a,h,m){var b=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?b?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="":b?a.setProperty(h,m):typeof m!="number"||m===0||br.has(h)?h==="float"?a.cssFloat=m:a[h]=(""+m).trim():a[h]=m+"px"}function ns(a,h,m){if(h!=null&&typeof h!="object")throw Error(o(62));if(a=a.style,m!=null){for(var b in m)!m.hasOwnProperty(b)||h!=null&&h.hasOwnProperty(b)||(b.indexOf("--")===0?a.setProperty(b,""):b==="float"?a.cssFloat="":a[b]="");for(var D in h)b=h[D],h.hasOwnProperty(D)&&m[D]!==b&&qs(a,D,b)}else for(var k in h)h.hasOwnProperty(k)&&qs(a,k,h[k])}function to(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(a){return xr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Na(){}var gc=null;function Pi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cn=null,ti=null;function Gn(a){var h=$i(a);if(h&&(a=h.stateNode)){var m=a[$t]||null;e:switch(a=h.stateNode,h.type){case"input":if(Vs(a,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+oa(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var b=m[h];if(b!==a&&b.form===a.form){var D=b[$t]||null;if(!D)throw Error(o(90));Vs(b,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(h=0;h<m.length;h++)b=m[h],b.form===a.form&&dh(b)}break e;case"textarea":Ol(a,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&pc(a,!!m.multiple,h,!1)}}}var Gr=!1;function wf(a,h,m){if(Gr)return a(h,m);Gr=!0;try{var b=a(h);return b}finally{if(Gr=!1,(Cn!==null||ti!==null)&&(Dp(),Cn&&(h=Cn,a=ti,ti=Cn=null,Gn(h),a)))for(h=0;h<a.length;h++)Gn(a[h])}}function hi(a,h){var m=a.stateNode;if(m===null)return null;var b=m[$t]||null;if(b===null)return null;m=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(o(231,h,typeof m));return m}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if(Vn)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{_i=!1}var sa=null,Zt=null,rr=null;function bo(){if(rr)return rr;var a,h=Zt,m=h.length,b,D="value"in sa?sa.value:sa.textContent,k=D.length;for(a=0;a<m&&h[a]===D[a];a++);var H=m-a;for(b=1;b<=H&&h[m-b]===D[k-b];b++);return rr=D.slice(a,1<b?1-b:void 0)}function Tr(a){var h=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&h===13&&(a=13)):a=h,a===10&&(a=13),32<=a||a===13?a:0}function Ri(){return!0}function ro(){return!1}function Dn(a){function h(m,b,D,k,H){this._reactName=m,this._targetInst=D,this.type=b,this.nativeEvent=k,this.target=H,this.currentTarget=null;for(var ie in a)a.hasOwnProperty(ie)&&(m=a[ie],this[ie]=m?m(k):k[ie]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Ri:ro,this.isPropagationStopped=ro,this}return z(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),h}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=Dn(xo),wo=z({},xo,{view:0,detail:0}),lu=Dn(wo),vc,_c,$s,la=z({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==$s&&($s&&a.type==="mousemove"?(vc=a.screenX-$s.screenX,_c=a.screenY-$s.screenY):_c=vc=0,$s=a),vc)},movementY:function(a){return"movementY"in a?a.movementY:_c}}),fi=Dn(la),bc=z({},la,{dataTransfer:0}),cu=Dn(bc),Rl=z({},wo,{relatedTarget:0}),wn=Dn(Rl),Yd=z({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=Dn(Yd),Sf=z({},xo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Tm=Dn(Sf),xc=z({},xo,{data:0}),bi=Dn(xc),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},So={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(a){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(a):(a=fu[a])?!!h[a]:!1}function kl(){return du}var ki=z({},wo,{key:function(a){if(a.key){var h=hu[a.key]||a.key;if(h!=="Unidentified")return h}return a.type==="keypress"?(a=Tr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?So[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kl,charCode:function(a){return a.type==="keypress"?Tr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Tr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Xd=Dn(ki),mh=z({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=Dn(mh),Tf=z({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kl}),Am=Dn(Tf),Mm=z({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gh=Dn(Mm),Af=z({},la,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Bl=Dn(Af),Mf=z({},xo,{newState:0,oldState:0}),yh=Dn(Mf),no=[9,13,27,32],Ef=Vn&&"CompositionEvent"in window,Zs=null;Vn&&"documentMode"in document&&(Zs=document.documentMode);var pu=Vn&&"TextEvent"in window&&!Zs,wc=Vn&&(!Ef||Zs&&8<Zs&&11>=Zs),Wd=" ",mu=!1;function Qd(a,h){switch(a){case"keyup":return no.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hs(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ll=!1;function Pf(a,h){switch(a){case"compositionend":return Hs(h);case"keypress":return h.which!==32?null:(mu=!0,Wd);case"textInput":return a=h.data,a===Wd&&mu?null:a;default:return null}}function Em(a,h){if(Ll)return a==="compositionend"||!Ef&&Qd(a,h)?(a=bo(),rr=Zt=sa=null,Ll=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return wc&&h.locale!=="ko"?null:h.data;default:return null}}var Jd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(a){var h=a&&a.nodeName&&a.nodeName.toLowerCase();return h==="input"?!!Jd[a.type]:h==="textarea"}function Cf(a,h,m,b){Cn?ti?ti.push(b):ti=[b]:Cn=b,h=Wh(h,"onChange"),0<h.length&&(m=new yc("onChange","change",null,m,b),a.push({event:m,listeners:h}))}var Ys=null,Sc=null;function ep(a){Yy(a,0)}function To(a){var h=yo(a);if(dh(h))return a}function _h(a,h){if(a==="change")return h}var bh=!1;if(Vn){var jl;if(Vn){var Df="oninput"in document;if(!Df){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),Df=typeof Tc.oninput=="function"}jl=Df}else jl=!1;bh=jl&&(!document.documentMode||9<document.documentMode)}function If(){Ys&&(Ys.detachEvent("onpropertychange",tp),Sc=Ys=null)}function tp(a){if(a.propertyName==="value"&&To(Sc)){var h=[];Cf(h,Sc,a,Pi(a)),wf(ep,h)}}function rp(a,h,m){a==="focusin"?(If(),Ys=h,Sc=m,Ys.attachEvent("onpropertychange",tp)):a==="focusout"&&If()}function np(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return To(Sc)}function Of(a,h){if(a==="click")return To(h)}function zf(a,h){if(a==="input"||a==="change")return To(h)}function ip(a,h){return a===h&&(a!==0||1/a===1/h)||a!==a&&h!==h}var Bi=typeof Object.is=="function"?Object.is:ip;function Ma(a,h){if(Bi(a,h))return!0;if(typeof a!="object"||a===null||typeof h!="object"||h===null)return!1;var m=Object.keys(a),b=Object.keys(h);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var D=m[b];if(!ja.call(h,D)||!Bi(a[D],h[D]))return!1}return!0}function Or(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xh(a,h){var m=Or(a);a=0;for(var b;m;){if(m.nodeType===3){if(b=a+m.textContent.length,a<=h&&b>=h)return{node:m,offset:h-a};a=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Or(m)}}function wh(a,h){return a&&h?a===h?!0:a&&a.nodeType===3?!1:h&&h.nodeType===3?wh(a,h.parentNode):"contains"in a?a.contains(h):a.compareDocumentPosition?!!(a.compareDocumentPosition(h)&16):!1:!1}function Rf(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var h=rs(a.document);h instanceof a.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)a=h.contentWindow;else break;h=rs(a.document)}return h}function gu(a){var h=a&&a.nodeName&&a.nodeName.toLowerCase();return h&&(h==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||h==="textarea"||a.contentEditable==="true")}var Nl=Vn&&"documentMode"in document&&11>=document.documentMode,Xs=null,kf=null,yu=null,Bf=!1;function ap(a,h,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Bf||Xs==null||Xs!==rs(b)||(b=Xs,"selectionStart"in b&&gu(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),yu&&Ma(yu,b)||(yu=b,b=Wh(kf,"onSelect"),0<b.length&&(h=new yc("onSelect","select",null,h,m),a.push({event:h,listeners:b}),h.target=Xs)))}function Ks(a,h){var m={};return m[a.toLowerCase()]=h.toLowerCase(),m["Webkit"+a]="webkit"+h,m["Moz"+a]="moz"+h,m}var Ac={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Sh={},vu={};Vn&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function Ao(a){if(Sh[a])return Sh[a];if(!Ac[a])return a;var h=Ac[a],m;for(m in h)if(h.hasOwnProperty(m)&&m in vu)return Sh[a]=h[m];return a}var _u=Ao("animationend"),Th=Ao("animationiteration"),Ws=Ao("animationstart"),bu=Ao("transitionrun"),Mc=Ao("transitionstart"),Fa=Ao("transitioncancel"),Lf=Ao("transitionend"),jf=new Map,xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xu.push("scrollEnd");function Ci(a,h){jf.set(a,h),Gs(h,[a])}var Fl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Hi=[],Mo=0,Ec=0;function wu(){for(var a=Mo,h=Ec=Mo=0;h<a;){var m=Hi[h];Hi[h++]=null;var b=Hi[h];Hi[h++]=null;var D=Hi[h];Hi[h++]=null;var k=Hi[h];if(Hi[h++]=null,b!==null&&D!==null){var H=b.pending;H===null?D.next=D:(D.next=H.next,H.next=D),b.pending=D}k!==0&&Ah(m,D,k)}}function is(a,h,m,b){Hi[Mo++]=a,Hi[Mo++]=h,Hi[Mo++]=m,Hi[Mo++]=b,Ec|=b,a.lanes|=b,a=a.alternate,a!==null&&(a.lanes|=b)}function Eo(a,h,m,b){return is(a,h,m,b),yr(a)}function Qs(a,h){return is(a,null,null,h),yr(a)}function Ah(a,h,m){a.lanes|=m;var b=a.alternate;b!==null&&(b.lanes|=m);for(var D=!1,k=a.return;k!==null;)k.childLanes|=m,b=k.alternate,b!==null&&(b.childLanes|=m),k.tag===22&&(a=k.stateNode,a===null||a._visibility&1||(D=!0)),a=k,k=k.return;return a.tag===3?(k=a.stateNode,D&&h!==null&&(D=31-Ne(m),a=k.hiddenUpdates,b=a[D],b===null?a[D]=[h]:b.push(h),h.lane=m|536870912),k):null}function yr(a){if(50<Vu)throw Vu=0,Hc=null,Error(o(185));for(var h=a.return;h!==null;)a=h,h=a.return;return a.tag===3?a.stateNode:null}var Po={};function Pm(a,h,m,b){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(a,h,m,b){return new Pm(a,h,m,b)}function Co(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Do(a,h){var m=a.alternate;return m===null?(m=ca(a.tag,h,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=h,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&65011712,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,h=a.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m.refCleanup=a.refCleanup,m}function op(a,h){a.flags&=65011714;var m=a.alternate;return m===null?(a.childLanes=0,a.lanes=h,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=m.childLanes,a.lanes=m.lanes,a.child=m.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=m.memoizedProps,a.memoizedState=m.memoizedState,a.updateQueue=m.updateQueue,a.type=m.type,h=m.dependencies,a.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),a}function Su(a,h,m,b,D,k){var H=0;if(b=a,typeof a=="function")Co(a)&&(H=1);else if(typeof a=="string")H=J(a,m,Pt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Mt:return a=ca(31,m,h,D),a.elementType=Mt,a.lanes=k,a;case X:return Ul(m.children,D,k,h);case W:H=8,D|=24;break;case oe:return a=ca(12,m,h,D|2),a.elementType=oe,a.lanes=k,a;case Be:return a=ca(13,m,h,D),a.elementType=Be,a.lanes=k,a;case Le:return a=ca(19,m,h,D),a.elementType=Le,a.lanes=k,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ue:H=10;break e;case le:H=9;break e;case Oe:H=11;break e;case qe:H=14;break e;case at:H=16,b=null;break e}H=29,m=Error(o(130,a===null?"null":typeof a,"")),b=null}return h=ca(H,m,h,D),h.elementType=a,h.type=b,h.lanes=k,h}function Ul(a,h,m,b){return a=ca(7,a,b,h),a.lanes=m,a}function Tu(a,h,m){return a=ca(6,a,null,h),a.lanes=m,a}function Au(a){var h=ca(18,null,null,0);return h.stateNode=a,h}function Gl(a,h,m){return h=ca(4,a.children!==null?a.children:[],a.key,h),h.lanes=m,h.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},h}var Pc=new WeakMap;function ua(a,h){if(typeof a=="object"&&a!==null){var m=Pc.get(a);return m!==void 0?m:(h={value:a,source:h,stack:na(h)},Pc.set(a,h),h)}return{value:a,source:h,stack:na(h)}}var Vl=[],Io=0,Js=null,as=0,xi=[],Li=0,Oo=null,ji=1,Ua="";function Ea(a,h){Vl[Io++]=as,Vl[Io++]=Js,Js=a,as=h}function Mu(a,h,m){xi[Li++]=ji,xi[Li++]=Ua,xi[Li++]=Oo,Oo=a;var b=ji;a=Ua;var D=32-Ne(b)-1;b&=~(1<<D),m+=1;var k=32-Ne(h)+D;if(30<k){var H=D-D%5;k=(b&(1<<H)-1).toString(32),b>>=H,D-=H,ji=1<<32-Ne(h)+D|m<<D|b,Ua=k+a}else ji=1<<k|m<<D|b,Ua=a}function Eu(a){a.return!==null&&(Ea(a,1),Mu(a,1,0))}function Mh(a){for(;a===Js;)Js=Vl[--Io],Vl[Io]=null,as=Vl[--Io],Vl[Io]=null;for(;a===Oo;)Oo=xi[--Li],xi[Li]=null,Ua=xi[--Li],xi[Li]=null,ji=xi[--Li],xi[Li]=null}function Nf(a,h){xi[Li++]=ji,xi[Li++]=Ua,xi[Li++]=Oo,ji=h.id,Ua=h.overflow,Oo=a}var ri=null,nn=null,Pr=!1,zo=null,Cr=!1,os=Error(o(519));function ni(a){var h=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ls(ua(h,a)),os}function Pu(a){var h=a.stateNode,m=a.type,b=a.memoizedProps;switch(h[ut]=a,h[$t]=b,m){case"dialog":Mr("cancel",h),Mr("close",h);break;case"iframe":case"object":case"embed":Mr("load",h);break;case"video":case"audio":for(m=0;m<yd.length;m++)Mr(yd[m],h);break;case"source":Mr("error",h);break;case"img":case"image":case"link":Mr("error",h),Mr("load",h);break;case"details":Mr("toggle",h);break;case"input":Mr("invalid",h),ph(h,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Mr("invalid",h);break;case"textarea":Mr("invalid",h),mc(h,b.value,b.defaultValue,b.children)}m=b.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||b.suppressHydrationWarning===!0||Xa(h.textContent,m)?(b.popover!=null&&(Mr("beforetoggle",h),Mr("toggle",h)),b.onScroll!=null&&Mr("scroll",h),b.onScrollEnd!=null&&Mr("scrollend",h),b.onClick!=null&&(h.onclick=Na),h=!0):h=!1,h||ni(a,!0)}function Cu(a){for(ri=a.return;ri;)switch(ri.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:ri=ri.return}}function el(a){if(a!==ri)return!1;if(!Pr)return Cu(a),Pr=!0,!1;var h=a.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=a.type,m=!(m!=="form"&&m!=="button")||Up(a.type,a.memoizedProps)),m=!m),m&&nn&&ni(a),Cu(a),h===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));nn=$p(a)}else if(h===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));nn=$p(a)}else h===27?(h=nn,ac(a.type)?(a=qp,qp=null,nn=a):nn=h):nn=ri?co(a.stateNode.nextSibling):null;return!0}function Pa(){nn=ri=null,Pr=!1}function ss(){var a=zo;return a!==null&&(Wi===null?Wi=a:Wi.push.apply(Wi,a),zo=null),a}function ls(a){zo===null?zo=[a]:zo.push(a)}var Du=Ae(null),tl=null,Ro=null;function cs(a,h,m){xt(Du,h._currentValue),h._currentValue=m}function ko(a){a._currentValue=Du.current,Ve(Du)}function rl(a,h,m){for(;a!==null;){var b=a.alternate;if((a.childLanes&h)!==h?(a.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),a===m)break;a=a.return}}function Ca(a,h,m,b){var D=a.child;for(D!==null&&(D.return=a);D!==null;){var k=D.dependencies;if(k!==null){var H=D.child;k=k.firstContext;e:for(;k!==null;){var ie=k;k=D;for(var Te=0;Te<h.length;Te++)if(ie.context===h[Te]){k.lanes|=m,ie=k.alternate,ie!==null&&(ie.lanes|=m),rl(k.return,m,a),b||(H=null);break e}k=ie.next}}else if(D.tag===18){if(H=D.return,H===null)throw Error(o(341));H.lanes|=m,k=H.alternate,k!==null&&(k.lanes|=m),rl(H,m,a),H=null}else H=D.child;if(H!==null)H.return=D;else for(H=D;H!==null;){if(H===a){H=null;break}if(D=H.sibling,D!==null){D.return=H.return,H=D;break}H=H.return}D=H}}function di(a,h,m,b){a=null;for(var D=h,k=!1;D!==null;){if(!k){if((D.flags&524288)!==0)k=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var H=D.alternate;if(H===null)throw Error(o(387));if(H=H.memoizedProps,H!==null){var ie=D.type;Bi(D.pendingProps.value,H.value)||(a!==null?a.push(ie):a=[ie])}}else if(D===or.current){if(H=D.alternate,H===null)throw Error(o(387));H.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(a!==null?a.push(lt):a=[lt])}D=D.return}a!==null&&Ca(h,a,m,b),h.flags|=262144}function us(a){for(a=a.firstContext;a!==null;){if(!Bi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function hs(a){tl=a,Ro=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wi(a){return ql(tl,a)}function Iu(a,h){return tl===null&&hs(a),ql(a,h)}function ql(a,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Ro===null){if(a===null)throw Error(o(308));Ro=h,a.dependencies={lanes:0,firstContext:h},a.flags|=524288}else Ro=Ro.next=h;return m}var Ff=typeof AbortController<"u"?AbortController:function(){var a=[],h=this.signal={aborted:!1,addEventListener:function(m,b){a.push(b)}};this.abort=function(){h.aborted=!0,a.forEach(function(m){return m()})}},Eh=e.unstable_scheduleCallback,Ph=e.unstable_NormalPriority,In={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ha(){return{controller:new Ff,data:new Map,refCount:0}}function pi(a){a.refCount--,a.refCount===0&&Eh(Ph,function(){a.controller.abort()})}var Cc=null,Da=0,io=0,Bo=null;function Cm(a,h){if(Cc===null){var m=Cc=[];Da=0,io=Bp(),Bo={status:"pending",value:void 0,then:function(b){m.push(b)}}}return Da++,h.then(sp,sp),h}function sp(){if(--Da===0&&Cc!==null){Bo!==null&&(Bo.status="fulfilled");var a=Cc;Cc=null,io=0,Bo=null;for(var h=0;h<a.length;h++)(0,a[h])()}}function Ch(a,h){var m=[],b={status:"pending",value:null,reason:null,then:function(D){m.push(D)}};return a.then(function(){b.status="fulfilled",b.value=h;for(var D=0;D<m.length;D++)(0,m[D])(h)},function(D){for(b.status="rejected",b.reason=D,D=0;D<m.length;D++)(0,m[D])(void 0)}),b}var Uf=$e.S;$e.S=function(a,h){By=li(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&Cm(a,h),Uf!==null&&Uf(a,h)};var Ia=Ae(null);function fa(){var a=Ia.current;return a!==null?a:mn.pooledCache}function Et(a,h){h===null?xt(Ia,Ia.current):xt(Ia,h.pool)}function Dh(){var a=fa();return a===null?null:{parent:In._currentValue,pool:a}}var fs=Error(o(460)),Ou=Error(o(474)),Lo=Error(o(542)),ds={then:function(){}};function Ih(a){return a=a.status,a==="fulfilled"||a==="rejected"}function wr(a,h,m){switch(m=a[m],m===void 0?a.push(h):m!==h&&(h.then(Na,Na),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw a=h.reason,Gf(a),a;default:if(typeof h.status=="string")h.then(Na,Na);else{if(a=mn,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=h,a.status="pending",a.then(function(b){if(h.status==="pending"){var D=h;D.status="fulfilled",D.value=b}},function(b){if(h.status==="pending"){var D=h;D.status="rejected",D.reason=b}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw a=h.reason,Gf(a),a}throw nl=h,fs}}function ps(a){try{var h=a._init;return h(a._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(nl=m,fs):m}}var nl=null;function Oh(){if(nl===null)throw Error(o(459));var a=nl;return nl=null,a}function Gf(a){if(a===fs||a===Lo)throw Error(o(483))}var $l=null,Dc=0;function Ic(a){var h=Dc;return Dc+=1,$l===null&&($l=[]),wr($l,a,h)}function Zl(a,h){h=h.props.ref,a.ref=h!==void 0?h:null}function zu(a,h){throw h.$$typeof===j?Error(o(525)):(a=Object.prototype.toString.call(h),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":a)))}function zh(a){function h(je,Ie){if(a){var Ye=je.deletions;Ye===null?(je.deletions=[Ie],je.flags|=16):Ye.push(Ie)}}function m(je,Ie){if(!a)return null;for(;Ie!==null;)h(je,Ie),Ie=Ie.sibling;return null}function b(je){for(var Ie=new Map;je!==null;)je.key!==null?Ie.set(je.key,je):Ie.set(je.index,je),je=je.sibling;return Ie}function D(je,Ie){return je=Do(je,Ie),je.index=0,je.sibling=null,je}function k(je,Ie,Ye){return je.index=Ye,a?(Ye=je.alternate,Ye!==null?(Ye=Ye.index,Ye<Ie?(je.flags|=67108866,Ie):Ye):(je.flags|=67108866,Ie)):(je.flags|=1048576,Ie)}function H(je){return a&&je.alternate===null&&(je.flags|=67108866),je}function ie(je,Ie,Ye,ct){return Ie===null||Ie.tag!==6?(Ie=Tu(Ye,je.mode,ct),Ie.return=je,Ie):(Ie=D(Ie,Ye),Ie.return=je,Ie)}function Te(je,Ie,Ye,ct){var er=Ye.type;return er===X?nt(je,Ie,Ye.props.children,ct,Ye.key):Ie!==null&&(Ie.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===at&&ps(er)===Ie.type)?(Ie=D(Ie,Ye.props),Zl(Ie,Ye),Ie.return=je,Ie):(Ie=Su(Ye.type,Ye.key,Ye.props,null,je.mode,ct),Zl(Ie,Ye),Ie.return=je,Ie)}function Xe(je,Ie,Ye,ct){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ye.containerInfo||Ie.stateNode.implementation!==Ye.implementation?(Ie=Gl(Ye,je.mode,ct),Ie.return=je,Ie):(Ie=D(Ie,Ye.children||[]),Ie.return=je,Ie)}function nt(je,Ie,Ye,ct,er){return Ie===null||Ie.tag!==7?(Ie=Ul(Ye,je.mode,ct,er),Ie.return=je,Ie):(Ie=D(Ie,Ye),Ie.return=je,Ie)}function ht(je,Ie,Ye){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Tu(""+Ie,je.mode,Ye),Ie.return=je,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case N:return Ye=Su(Ie.type,Ie.key,Ie.props,null,je.mode,Ye),Zl(Ye,Ie),Ye.return=je,Ye;case $:return Ie=Gl(Ie,je.mode,Ye),Ie.return=je,Ie;case at:return Ie=ps(Ie),ht(je,Ie,Ye)}if(Kt(Ie)||gt(Ie))return Ie=Ul(Ie,je.mode,Ye,null),Ie.return=je,Ie;if(typeof Ie.then=="function")return ht(je,Ic(Ie),Ye);if(Ie.$$typeof===ue)return ht(je,Iu(je,Ie),Ye);zu(je,Ie)}return null}function Ke(je,Ie,Ye,ct){var er=Ie!==null?Ie.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return er!==null?null:ie(je,Ie,""+Ye,ct);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case N:return Ye.key===er?Te(je,Ie,Ye,ct):null;case $:return Ye.key===er?Xe(je,Ie,Ye,ct):null;case at:return Ye=ps(Ye),Ke(je,Ie,Ye,ct)}if(Kt(Ye)||gt(Ye))return er!==null?null:nt(je,Ie,Ye,ct,null);if(typeof Ye.then=="function")return Ke(je,Ie,Ic(Ye),ct);if(Ye.$$typeof===ue)return Ke(je,Ie,Iu(je,Ye),ct);zu(je,Ye)}return null}function Je(je,Ie,Ye,ct,er){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return je=je.get(Ye)||null,ie(Ie,je,""+ct,er);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case N:return je=je.get(ct.key===null?Ye:ct.key)||null,Te(Ie,je,ct,er);case $:return je=je.get(ct.key===null?Ye:ct.key)||null,Xe(Ie,je,ct,er);case at:return ct=ps(ct),Je(je,Ie,Ye,ct,er)}if(Kt(ct)||gt(ct))return je=je.get(Ye)||null,nt(Ie,je,ct,er,null);if(typeof ct.then=="function")return Je(je,Ie,Ye,Ic(ct),er);if(ct.$$typeof===ue)return Je(je,Ie,Ye,Iu(Ie,ct),er);zu(Ie,ct)}return null}function Ut(je,Ie,Ye,ct){for(var er=null,cr=null,zt=Ie,fr=Ie=0,pr=null;zt!==null&&fr<Ye.length;fr++){zt.index>fr?(pr=zt,zt=null):pr=zt.sibling;var Ir=Ke(je,zt,Ye[fr],ct);if(Ir===null){zt===null&&(zt=pr);break}a&&zt&&Ir.alternate===null&&h(je,zt),Ie=k(Ir,Ie,fr),cr===null?er=Ir:cr.sibling=Ir,cr=Ir,zt=pr}if(fr===Ye.length)return m(je,zt),Pr&&Ea(je,fr),er;if(zt===null){for(;fr<Ye.length;fr++)zt=ht(je,Ye[fr],ct),zt!==null&&(Ie=k(zt,Ie,fr),cr===null?er=zt:cr.sibling=zt,cr=zt);return Pr&&Ea(je,fr),er}for(zt=b(zt);fr<Ye.length;fr++)pr=Je(zt,je,fr,Ye[fr],ct),pr!==null&&(a&&pr.alternate!==null&&zt.delete(pr.key===null?fr:pr.key),Ie=k(pr,Ie,fr),cr===null?er=pr:cr.sibling=pr,cr=pr);return a&&zt.forEach(function(Ji){return h(je,Ji)}),Pr&&Ea(je,fr),er}function ar(je,Ie,Ye,ct){if(Ye==null)throw Error(o(151));for(var er=null,cr=null,zt=Ie,fr=Ie=0,pr=null,Ir=Ye.next();zt!==null&&!Ir.done;fr++,Ir=Ye.next()){zt.index>fr?(pr=zt,zt=null):pr=zt.sibling;var Ji=Ke(je,zt,Ir.value,ct);if(Ji===null){zt===null&&(zt=pr);break}a&&zt&&Ji.alternate===null&&h(je,zt),Ie=k(Ji,Ie,fr),cr===null?er=Ji:cr.sibling=Ji,cr=Ji,zt=pr}if(Ir.done)return m(je,zt),Pr&&Ea(je,fr),er;if(zt===null){for(;!Ir.done;fr++,Ir=Ye.next())Ir=ht(je,Ir.value,ct),Ir!==null&&(Ie=k(Ir,Ie,fr),cr===null?er=Ir:cr.sibling=Ir,cr=Ir);return Pr&&Ea(je,fr),er}for(zt=b(zt);!Ir.done;fr++,Ir=Ye.next())Ir=Je(zt,je,fr,Ir.value,ct),Ir!==null&&(a&&Ir.alternate!==null&&zt.delete(Ir.key===null?fr:Ir.key),Ie=k(Ir,Ie,fr),cr===null?er=Ir:cr.sibling=Ir,cr=Ir);return a&&zt.forEach(function(iD){return h(je,iD)}),Pr&&Ea(je,fr),er}function Dr(je,Ie,Ye,ct){if(typeof Ye=="object"&&Ye!==null&&Ye.type===X&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case N:e:{for(var er=Ye.key;Ie!==null;){if(Ie.key===er){if(er=Ye.type,er===X){if(Ie.tag===7){m(je,Ie.sibling),ct=D(Ie,Ye.props.children),ct.return=je,je=ct;break e}}else if(Ie.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===at&&ps(er)===Ie.type){m(je,Ie.sibling),ct=D(Ie,Ye.props),Zl(ct,Ye),ct.return=je,je=ct;break e}m(je,Ie);break}else h(je,Ie);Ie=Ie.sibling}Ye.type===X?(ct=Ul(Ye.props.children,je.mode,ct,Ye.key),ct.return=je,je=ct):(ct=Su(Ye.type,Ye.key,Ye.props,null,je.mode,ct),Zl(ct,Ye),ct.return=je,je=ct)}return H(je);case $:e:{for(er=Ye.key;Ie!==null;){if(Ie.key===er)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ye.containerInfo&&Ie.stateNode.implementation===Ye.implementation){m(je,Ie.sibling),ct=D(Ie,Ye.children||[]),ct.return=je,je=ct;break e}else{m(je,Ie);break}else h(je,Ie);Ie=Ie.sibling}ct=Gl(Ye,je.mode,ct),ct.return=je,je=ct}return H(je);case at:return Ye=ps(Ye),Dr(je,Ie,Ye,ct)}if(Kt(Ye))return Ut(je,Ie,Ye,ct);if(gt(Ye)){if(er=gt(Ye),typeof er!="function")throw Error(o(150));return Ye=er.call(Ye),ar(je,Ie,Ye,ct)}if(typeof Ye.then=="function")return Dr(je,Ie,Ic(Ye),ct);if(Ye.$$typeof===ue)return Dr(je,Ie,Iu(je,Ye),ct);zu(je,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Ie!==null&&Ie.tag===6?(m(je,Ie.sibling),ct=D(Ie,Ye),ct.return=je,je=ct):(m(je,Ie),ct=Tu(Ye,je.mode,ct),ct.return=je,je=ct),H(je)):m(je,Ie)}return function(je,Ie,Ye,ct){try{Dc=0;var er=Dr(je,Ie,Ye,ct);return $l=null,er}catch(zt){if(zt===fs||zt===Lo)throw zt;var cr=ca(29,zt,null,je.mode);return cr.lanes=ct,cr.return=je,cr}finally{}}}var il=zh(!0),Ru=zh(!1),Yi=!1;function Lr(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vf(a,h){a=a.updateQueue,h.updateQueue===a&&(h.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ao(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function oo(a,h,m){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(Zr&2)!==0){var D=b.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),b.pending=h,h=yr(a),Ah(a,null,m),h}return is(a,b,h,m),yr(a)}function Hl(a,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var b=h.lanes;b&=a.pendingLanes,m|=b,h.lanes=m,tn(a,m)}}function ku(a,h){var m=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var D=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var H={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};k===null?D=k=H:k=k.next=H,m=m.next}while(m!==null);k===null?D=k=h:k=k.next=h}else D=k=h;m={baseState:b.baseState,firstBaseUpdate:D,lastBaseUpdate:k,shared:b.shared,callbacks:b.callbacks},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=h:a.next=h,m.lastBaseUpdate=h}var Rh=!1;function Bu(){if(Rh){var a=Bo;if(a!==null)throw a}}function da(a,h,m,b){Rh=!1;var D=a.updateQueue;Yi=!1;var k=D.firstBaseUpdate,H=D.lastBaseUpdate,ie=D.shared.pending;if(ie!==null){D.shared.pending=null;var Te=ie,Xe=Te.next;Te.next=null,H===null?k=Xe:H.next=Xe,H=Te;var nt=a.alternate;nt!==null&&(nt=nt.updateQueue,ie=nt.lastBaseUpdate,ie!==H&&(ie===null?nt.firstBaseUpdate=Xe:ie.next=Xe,nt.lastBaseUpdate=Te))}if(k!==null){var ht=D.baseState;H=0,nt=Xe=Te=null,ie=k;do{var Ke=ie.lane&-536870913,Je=Ke!==ie.lane;if(Je?(Rr&Ke)===Ke:(b&Ke)===Ke){Ke!==0&&Ke===io&&(Rh=!0),nt!==null&&(nt=nt.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Ut=a,ar=ie;Ke=h;var Dr=m;switch(ar.tag){case 1:if(Ut=ar.payload,typeof Ut=="function"){ht=Ut.call(Dr,ht,Ke);break e}ht=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=ar.payload,Ke=typeof Ut=="function"?Ut.call(Dr,ht,Ke):Ut,Ke==null)break e;ht=z({},ht,Ke);break e;case 2:Yi=!0}}Ke=ie.callback,Ke!==null&&(a.flags|=64,Je&&(a.flags|=8192),Je=D.callbacks,Je===null?D.callbacks=[Ke]:Je.push(Ke))}else Je={lane:Ke,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},nt===null?(Xe=nt=Je,Te=ht):nt=nt.next=Je,H|=Ke;if(ie=ie.next,ie===null){if(ie=D.shared.pending,ie===null)break;Je=ie,ie=Je.next,Je.next=null,D.lastBaseUpdate=Je,D.shared.pending=null}}while(!0);nt===null&&(Te=ht),D.baseState=Te,D.firstBaseUpdate=Xe,D.lastBaseUpdate=nt,k===null&&(D.shared.lanes=0),tc|=H,a.lanes=H,a.memoizedState=ht}}function Lu(a,h){if(typeof a!="function")throw Error(o(191,a));a.call(h)}function kt(a,h){var m=a.callbacks;if(m!==null)for(a.callbacks=null,a=0;a<m.length;a++)Lu(m[a],h)}var jt=Ae(null),al=Ae(0);function qf(a,h){a=ec,xt(al,a),xt(jt,h),ec=a|h.baseLanes}function Oc(){xt(al,ec),xt(jt,jt.current)}function Si(){ec=al.current,Ve(jt),Ve(al)}var pa=Ae(null),Ln=null;function ma(a){var h=a.alternate;xt(vn,vn.current&1),xt(pa,a),Ln===null&&(h===null||jt.current!==null||h.memoizedState!==null)&&(Ln=a)}function ol(a){xt(vn,vn.current),xt(pa,a),Ln===null&&(Ln=a)}function an(a){a.tag===22?(xt(vn,vn.current),xt(pa,a),Ln===null&&(Ln=a)):qr()}function qr(){xt(vn,vn.current),xt(pa,pa.current)}function Ni(a){Ve(pa),Ln===a&&(Ln=null),Ve(vn)}var vn=Ae(0);function jo(a){for(var h=a;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Kc(m)||Mi(m)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Xi=0,dr=null,jr=null,Kr=null,zc=!1,sl=!1,No=!1,Rc=0,w=0,r=null,c=0;function p(){throw Error(o(321))}function _(a,h){if(h===null)return!1;for(var m=0;m<h.length&&m<a.length;m++)if(!Bi(a[m],h[m]))return!1;return!0}function S(a,h,m,b,D,k){return Xi=k,dr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,$e.H=a===null||a.memoizedState===null?cp:up,No=!1,k=m(b,D),No=!1,sl&&(k=O(h,m,b,D)),A(a),k}function A(a){$e.H=Lh;var h=jr!==null&&jr.next!==null;if(Xi=0,Kr=jr=dr=null,zc=!1,w=0,r=null,h)throw Error(o(300));a===null||On||(a=a.dependencies,a!==null&&us(a)&&(On=!0))}function O(a,h,m,b){dr=a;var D=0;do{if(sl&&(r=null),w=0,sl=!1,25<=D)throw Error(o(301));if(D+=1,Kr=jr=null,a.updateQueue!=null){var k=a.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}$e.H=jc,k=h(m,b)}while(sl);return k}function R(){var a=$e.H,h=a.useState()[0];return h=typeof h.then=="function"?he(h):h,a=a.useState()[0],(jr!==null?jr.memoizedState:null)!==a&&(dr.flags|=1024),h}function U(){var a=Rc!==0;return Rc=0,a}function G(a,h,m){h.updateQueue=a.updateQueue,h.flags&=-2053,a.lanes&=~m}function Z(a){if(zc){for(a=a.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}zc=!1}Xi=0,Kr=jr=dr=null,sl=!1,w=Rc=0,r=null}function q(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?dr.memoizedState=Kr=a:Kr=Kr.next=a,Kr}function K(){if(jr===null){var a=dr.alternate;a=a!==null?a.memoizedState:null}else a=jr.next;var h=Kr===null?dr.memoizedState:Kr.next;if(h!==null)Kr=h,jr=a;else{if(a===null)throw dr.alternate===null?Error(o(467)):Error(o(310));jr=a,a={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Kr===null?dr.memoizedState=Kr=a:Kr=Kr.next=a}return Kr}function re(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function he(a){var h=w;return w+=1,r===null&&(r=[]),a=wr(r,a,h),h=dr,(Kr===null?h.memoizedState:Kr.next)===null&&(h=h.alternate,$e.H=h===null||h.memoizedState===null?cp:up),a}function fe(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return he(a);if(a.$$typeof===ue)return wi(a)}throw Error(o(438,String(a)))}function de(a){var h=null,m=dr.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var b=dr.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(h={data:b.data.map(function(D){return D.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=re(),dr.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(a),b=0;b<a;b++)m[b]=Ot;return h.index++,m}function pe(a,h){return typeof h=="function"?h(a):h}function ye(a){var h=K();return ge(h,jr,a)}function ge(a,h,m){var b=a.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=m;var D=a.baseQueue,k=b.pending;if(k!==null){if(D!==null){var H=D.next;D.next=k.next,k.next=H}h.baseQueue=D=k,b.pending=null}if(k=a.baseState,D===null)a.memoizedState=k;else{h=D.next;var ie=H=null,Te=null,Xe=h,nt=!1;do{var ht=Xe.lane&-536870913;if(ht!==Xe.lane?(Rr&ht)===ht:(Xi&ht)===ht){var Ke=Xe.revertLane;if(Ke===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),ht===io&&(nt=!0);else if((Xi&Ke)===Ke){Xe=Xe.next,Ke===io&&(nt=!0);continue}else ht={lane:0,revertLane:Xe.revertLane,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Te===null?(ie=Te=ht,H=k):Te=Te.next=ht,dr.lanes|=Ke,tc|=Ke;ht=Xe.action,No&&m(k,ht),k=Xe.hasEagerState?Xe.eagerState:m(k,ht)}else Ke={lane:ht,revertLane:Xe.revertLane,gesture:Xe.gesture,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Te===null?(ie=Te=Ke,H=k):Te=Te.next=Ke,dr.lanes|=ht,tc|=ht;Xe=Xe.next}while(Xe!==null&&Xe!==h);if(Te===null?H=k:Te.next=ie,!Bi(k,a.memoizedState)&&(On=!0,nt&&(m=Bo,m!==null)))throw m;a.memoizedState=k,a.baseState=H,a.baseQueue=Te,b.lastRenderedState=k}return D===null&&(b.lanes=0),[a.memoizedState,b.dispatch]}function xe(a){var h=K(),m=h.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=a;var b=m.dispatch,D=m.pending,k=h.memoizedState;if(D!==null){m.pending=null;var H=D=D.next;do k=a(k,H.action),H=H.next;while(H!==D);Bi(k,h.memoizedState)||(On=!0),h.memoizedState=k,h.baseQueue===null&&(h.baseState=k),m.lastRenderedState=k}return[k,b]}function Me(a,h,m){var b=dr,D=K(),k=Pr;if(k){if(m===void 0)throw Error(o(407));m=m()}else m=h();var H=!Bi((jr||D).memoizedState,m);if(H&&(D.memoizedState=m,On=!0),D=D.queue,Fo(Ze.bind(null,b,D,a),[a]),D.getSnapshot!==h||H||Kr!==null&&Kr.memoizedState.tag&1){if(b.flags|=2048,Yr(9,{destroy:void 0},Pe.bind(null,b,D,m,h),null),mn===null)throw Error(o(349));k||(Xi&127)!==0||ve(b,h,m)}return m}function ve(a,h,m){a.flags|=16384,a={getSnapshot:h,value:m},h=dr.updateQueue,h===null?(h=re(),dr.updateQueue=h,h.stores=[a]):(m=h.stores,m===null?h.stores=[a]:m.push(a))}function Pe(a,h,m,b){h.value=m,h.getSnapshot=b,Ue(h)&&Ge(a)}function Ze(a,h,m){return m(function(){Ue(h)&&Ge(a)})}function Ue(a){var h=a.getSnapshot;a=a.value;try{var m=h();return!Bi(a,m)}catch{return!0}}function Ge(a){var h=Qs(a,2);h!==null&&Ya(h,a,2)}function He(a){var h=q();if(typeof a=="function"){var m=a;if(a=m(),No){Ce(!0);try{m()}finally{Ce(!1)}}}return h.memoizedState=h.baseState=a,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:a},h}function yt(a,h,m,b){return a.baseState=m,ge(a,jr,typeof b=="function"?b:pe)}function mt(a,h,m,b,D){if(Xl(a))throw Error(o(485));if(a=h.action,a!==null){var k={payload:D,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){k.listeners.push(H)}};$e.T!==null?m(!0):k.isTransition=!1,b(k),m=h.pending,m===null?(k.next=h.pending=k,st(h,k)):(k.next=m.next,h.pending=m.next=k)}}function st(a,h){var m=h.action,b=h.payload,D=a.state;if(h.isTransition){var k=$e.T,H={};$e.T=H;try{var ie=m(D,b),Te=$e.S;Te!==null&&Te(H,ie),Ct(a,h,ie)}catch(Xe){Br(a,h,Xe)}finally{k!==null&&H.types!==null&&(k.types=H.types),$e.T=k}}else try{k=m(D,b),Ct(a,h,k)}catch(Xe){Br(a,h,Xe)}}function Ct(a,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(b){lr(a,h,b)},function(b){return Br(a,h,b)}):lr(a,h,m)}function lr(a,h,m){h.status="fulfilled",h.value=m,on(h),a.state=m,h=a.pending,h!==null&&(m=h.next,m===h?a.pending=null:(m=m.next,h.next=m,st(a,m)))}function Br(a,h,m){var b=a.pending;if(a.pending=null,b!==null){b=b.next;do h.status="rejected",h.reason=m,on(h),h=h.next;while(h!==b)}a.action=null}function on(a){a=a.listeners;for(var h=0;h<a.length;h++)(0,a[h])()}function Wr(a,h){return h}function hn(a,h){if(Pr){var m=mn.formState;if(m!==null){e:{var b=dr;if(Pr){if(nn){t:{for(var D=nn,k=Cr;D.nodeType!==8;){if(!k){D=null;break t}if(D=co(D.nextSibling),D===null){D=null;break t}}k=D.data,D=k==="F!"||k==="F"?D:null}if(D){nn=co(D.nextSibling),b=D.data==="F!";break e}}ni(b)}b=!1}b&&(h=m[0])}}return m=q(),m.memoizedState=m.baseState=h,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:h},m.queue=b,m=Go.bind(null,dr,b),b.dispatch=m,b=He(!1),k=Nu.bind(null,dr,!1,b.queue),b=q(),D={state:h,dispatch:null,action:a,pending:null},b.queue=D,m=mt.bind(null,dr,D,k,m),D.dispatch=m,b.memoizedState=a,[h,m,!1]}function sn(a){var h=K();return ii(h,jr,a)}function ii(a,h,m){if(h=ge(a,h,Wr)[0],a=ye(pe)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var b=he(h)}catch(H){throw H===fs?Lo:H}else b=h;h=K();var D=h.queue,k=D.dispatch;return m!==h.memoizedState&&(dr.flags|=2048,Yr(9,{destroy:void 0},fn.bind(null,D,m),null)),[b,k,a]}function fn(a,h){a.action=h}function $r(a){var h=K(),m=jr;if(m!==null)return ii(h,m,a);K(),h=h.memoizedState,m=K();var b=m.queue.dispatch;return m.memoizedState=a,[h,b,!1]}function Yr(a,h,m,b){return a={tag:a,create:m,deps:b,inst:h,next:null},h=dr.updateQueue,h===null&&(h=re(),dr.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=a.next=a:(b=m.next,m.next=a,a.next=b,h.lastEffect=a),a}function vr(){return K().memoizedState}function ai(a,h,m,b){var D=q();dr.flags|=a,D.memoizedState=Yr(1|h,{destroy:void 0},m,b===void 0?null:b)}function Ga(a,h,m,b){var D=K();b=b===void 0?null:b;var k=D.memoizedState.inst;jr!==null&&b!==null&&_(b,jr.memoizedState.deps)?D.memoizedState=Yr(h,k,m,b):(dr.flags|=a,D.memoizedState=Yr(1|h,k,m,b))}function ll(a,h){ai(8390656,8,a,h)}function Fo(a,h){Ga(2048,8,a,h)}function Yl(a){dr.flags|=4;var h=dr.updateQueue;if(h===null)h=re(),dr.updateQueue=h,h.events=[a];else{var m=h.events;m===null?h.events=[a]:m.push(a)}}function kc(a){var h=K().memoizedState;return Yl({ref:h,nextImpl:a}),function(){if((Zr&2)!==0)throw Error(o(440));return h.impl.apply(void 0,arguments)}}function ms(a,h){return Ga(4,2,a,h)}function cl(a,h){return Ga(4,4,a,h)}function ga(a,h){if(typeof h=="function"){a=a();var m=h(a);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return a=a(),h.current=a,function(){h.current=null}}function gs(a,h,m){m=m!=null?m.concat([a]):null,Ga(4,4,ga.bind(null,h,a),m)}function so(){}function ys(a,h){var m=K();h=h===void 0?null:h;var b=m.memoizedState;return h!==null&&_(h,b[1])?b[0]:(m.memoizedState=[a,h],a)}function qn(a,h){var m=K();h=h===void 0?null:h;var b=m.memoizedState;if(h!==null&&_(h,b[1]))return b[0];if(b=a(),No){Ce(!0);try{a()}finally{Ce(!1)}}return m.memoizedState=[b,h],b}function jn(a,h,m){return m===void 0||(Xi&1073741824)!==0&&(Rr&261930)===0?a.memoizedState=h:(a.memoizedState=m,a=Ly(),dr.lanes|=a,tc|=a,m)}function Fi(a,h,m,b){return Bi(m,h)?m:jt.current!==null?(a=jn(a,m,b),Bi(a,h)||(On=!0),a):(Xi&42)===0||(Xi&1073741824)!==0&&(Rr&261930)===0?(On=!0,a.memoizedState=m):(a=Ly(),dr.lanes|=a,tc|=a,h)}function ln(a,h,m,b,D){var k=ot.p;ot.p=k!==0&&8>k?k:8;var H=$e.T,ie={};$e.T=ie,Nu(a,!1,h,m);try{var Te=D(),Xe=$e.S;if(Xe!==null&&Xe(ie,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var nt=Ch(Te,b);ul(a,h,nt,Ha(a))}else ul(a,h,b,Ha(a))}catch(ht){ul(a,h,{then:function(){},status:"rejected",reason:ht},Ha())}finally{ot.p=k,H!==null&&ie.types!==null&&(H.types=ie.types),$e.T=H}}function kh(){}function Bh(a,h,m,b){if(a.tag!==5)throw Error(o(476));var D=$f(a).queue;ln(a,D,h,Dt,m===null?kh:function(){return lp(a),m(b)})}function $f(a){var h=a.memoizedState;if(h!==null)return h;h={memoizedState:Dt,baseState:Dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:Dt},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:m},next:null},a.memoizedState=h,a=a.alternate,a!==null&&(a.memoizedState=h),h}function lp(a){var h=$f(a);h.next===null&&(h=a.alternate.memoizedState),ul(a,h.next.queue,{},Ha())}function ju(){return wi(lt)}function Bc(){return K().memoizedState}function ya(){return K().memoizedState}function Uo(a){for(var h=a.return;h!==null;){switch(h.tag){case 24:case 3:var m=Ha();a=ao(m);var b=oo(h,a,m);b!==null&&(Ya(b,h,m),Hl(b,h,m)),h={cache:ha()},a.payload=h;return}h=h.return}}function Va(a,h,m){var b=Ha();m={lane:b,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Xl(a)?Lc(h,m):(m=Eo(a,h,m,b),m!==null&&(Ya(m,a,b),yy(m,h,b)))}function Go(a,h,m){var b=Ha();ul(a,h,m,b)}function ul(a,h,m,b){var D={lane:b,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Xl(a))Lc(h,D);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=h.lastRenderedReducer,k!==null))try{var H=h.lastRenderedState,ie=k(H,m);if(D.hasEagerState=!0,D.eagerState=ie,Bi(ie,H))return is(a,h,D,0),mn===null&&wu(),!1}catch{}finally{}if(m=Eo(a,h,D,b),m!==null)return Ya(m,a,b),yy(m,h,b),!0}return!1}function Nu(a,h,m,b){if(b={lane:2,revertLane:Bp(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Xl(a)){if(h)throw Error(o(479))}else h=Eo(a,m,b,2),h!==null&&Ya(h,a,2)}function Xl(a){var h=a.alternate;return a===dr||h!==null&&h===dr}function Lc(a,h){sl=zc=!0;var m=a.pending;m===null?h.next=h:(h.next=m.next,m.next=h),a.pending=h}function yy(a,h,m){if((m&4194048)!==0){var b=h.lanes;b&=a.pendingLanes,m|=b,h.lanes=m,tn(a,m)}}var Lh={readContext:wi,use:fe,useCallback:p,useContext:p,useEffect:p,useImperativeHandle:p,useLayoutEffect:p,useInsertionEffect:p,useMemo:p,useReducer:p,useRef:p,useState:p,useDebugValue:p,useDeferredValue:p,useTransition:p,useSyncExternalStore:p,useId:p,useHostTransitionStatus:p,useFormState:p,useActionState:p,useOptimistic:p,useMemoCache:p,useCacheRefresh:p};Lh.useEffectEvent=p;var cp={readContext:wi,use:fe,useCallback:function(a,h){return q().memoizedState=[a,h===void 0?null:h],a},useContext:wi,useEffect:ll,useImperativeHandle:function(a,h,m){m=m!=null?m.concat([a]):null,ai(4194308,4,ga.bind(null,h,a),m)},useLayoutEffect:function(a,h){return ai(4194308,4,a,h)},useInsertionEffect:function(a,h){ai(4,2,a,h)},useMemo:function(a,h){var m=q();h=h===void 0?null:h;var b=a();if(No){Ce(!0);try{a()}finally{Ce(!1)}}return m.memoizedState=[b,h],b},useReducer:function(a,h,m){var b=q();if(m!==void 0){var D=m(h);if(No){Ce(!0);try{m(h)}finally{Ce(!1)}}}else D=h;return b.memoizedState=b.baseState=D,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:D},b.queue=a,a=a.dispatch=Va.bind(null,dr,a),[b.memoizedState,a]},useRef:function(a){var h=q();return a={current:a},h.memoizedState=a},useState:function(a){a=He(a);var h=a.queue,m=Go.bind(null,dr,h);return h.dispatch=m,[a.memoizedState,m]},useDebugValue:so,useDeferredValue:function(a,h){var m=q();return jn(m,a,h)},useTransition:function(){var a=He(!1);return a=ln.bind(null,dr,a.queue,!0,!1),q().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,h,m){var b=dr,D=q();if(Pr){if(m===void 0)throw Error(o(407));m=m()}else{if(m=h(),mn===null)throw Error(o(349));(Rr&127)!==0||ve(b,h,m)}D.memoizedState=m;var k={value:m,getSnapshot:h};return D.queue=k,ll(Ze.bind(null,b,k,a),[a]),b.flags|=2048,Yr(9,{destroy:void 0},Pe.bind(null,b,k,m,h),null),m},useId:function(){var a=q(),h=mn.identifierPrefix;if(Pr){var m=Ua,b=ji;m=(b&~(1<<32-Ne(b)-1)).toString(32)+m,h="_"+h+"R_"+m,m=Rc++,0<m&&(h+="H"+m.toString(32)),h+="_"}else m=c++,h="_"+h+"r_"+m.toString(32)+"_";return a.memoizedState=h},useHostTransitionStatus:ju,useFormState:hn,useActionState:hn,useOptimistic:function(a){var h=q();h.memoizedState=h.baseState=a;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Nu.bind(null,dr,!0,m),m.dispatch=h,[a,h]},useMemoCache:de,useCacheRefresh:function(){return q().memoizedState=Uo.bind(null,dr)},useEffectEvent:function(a){var h=q(),m={impl:a};return h.memoizedState=m,function(){if((Zr&2)!==0)throw Error(o(440));return m.impl.apply(void 0,arguments)}}},up={readContext:wi,use:fe,useCallback:ys,useContext:wi,useEffect:Fo,useImperativeHandle:gs,useInsertionEffect:ms,useLayoutEffect:cl,useMemo:qn,useReducer:ye,useRef:vr,useState:function(){return ye(pe)},useDebugValue:so,useDeferredValue:function(a,h){var m=K();return Fi(m,jr.memoizedState,a,h)},useTransition:function(){var a=ye(pe)[0],h=K().memoizedState;return[typeof a=="boolean"?a:he(a),h]},useSyncExternalStore:Me,useId:Bc,useHostTransitionStatus:ju,useFormState:sn,useActionState:sn,useOptimistic:function(a,h){var m=K();return yt(m,jr,a,h)},useMemoCache:de,useCacheRefresh:ya};up.useEffectEvent=kc;var jc={readContext:wi,use:fe,useCallback:ys,useContext:wi,useEffect:Fo,useImperativeHandle:gs,useInsertionEffect:ms,useLayoutEffect:cl,useMemo:qn,useReducer:xe,useRef:vr,useState:function(){return xe(pe)},useDebugValue:so,useDeferredValue:function(a,h){var m=K();return jr===null?jn(m,a,h):Fi(m,jr.memoizedState,a,h)},useTransition:function(){var a=xe(pe)[0],h=K().memoizedState;return[typeof a=="boolean"?a:he(a),h]},useSyncExternalStore:Me,useId:Bc,useHostTransitionStatus:ju,useFormState:$r,useActionState:$r,useOptimistic:function(a,h){var m=K();return jr!==null?yt(m,jr,a,h):(m.baseState=a,[a,m.queue.dispatch])},useMemoCache:de,useCacheRefresh:ya};jc.useEffectEvent=kc;function Kl(a,h,m,b){h=a.memoizedState,m=m(b,h),m=m==null?h:z({},h,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var hp={enqueueSetState:function(a,h,m){a=a._reactInternals;var b=Ha(),D=ao(b);D.payload=h,m!=null&&(D.callback=m),h=oo(a,D,b),h!==null&&(Ya(h,a,b),Hl(h,a,b))},enqueueReplaceState:function(a,h,m){a=a._reactInternals;var b=Ha(),D=ao(b);D.tag=1,D.payload=h,m!=null&&(D.callback=m),h=oo(a,D,b),h!==null&&(Ya(h,a,b),Hl(h,a,b))},enqueueForceUpdate:function(a,h){a=a._reactInternals;var m=Ha(),b=ao(m);b.tag=2,h!=null&&(b.callback=h),h=oo(a,b,m),h!==null&&(Ya(h,a,m),Hl(h,a,m))}};function vy(a,h,m,b,D,k,H){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,k,H):h.prototype&&h.prototype.isPureReactComponent?!Ma(m,b)||!Ma(D,k):!0}function fp(a,h,m,b){a=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,b),h.state!==a&&hp.enqueueReplaceState(h,h.state,null)}function Nc(a,h){var m=h;if("ref"in h){m={};for(var b in h)b!=="ref"&&(m[b]=h[b])}if(a=a.defaultProps){m===h&&(m=z({},m));for(var D in a)m[D]===void 0&&(m[D]=a[D])}return m}function Zf(a){Fl(a)}function Dm(a){console.error(a)}function _y(a){Fl(a)}function jh(a,h){try{var m=a.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(b){setTimeout(function(){throw b})}}function by(a,h,m){try{var b=a.onCaughtError;b(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Hf(a,h,m){return m=ao(m),m.tag=3,m.payload={element:null},m.callback=function(){jh(a,h)},m}function Im(a){return a=ao(a),a.tag=3,a}function Om(a,h,m,b){var D=m.type.getDerivedStateFromError;if(typeof D=="function"){var k=b.value;a.payload=function(){return D(k)},a.callback=function(){by(h,m,b)}}var H=m.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(a.callback=function(){by(h,m,b),typeof D!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var ie=b.stack;this.componentDidCatch(b.value,{componentStack:ie!==null?ie:""})})}function Nh(a,h,m,b,D){if(m.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(h=m.alternate,h!==null&&di(h,m,D,!0),m=pa.current,m!==null){switch(m.tag){case 31:case 13:return Ln===null?$h():m.alternate===null&&oi===0&&(oi=3),m.flags&=-257,m.flags|=65536,m.lanes=D,b===ds?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([b]):h.add(b),ig(a,b,D)),!1;case 22:return m.flags|=65536,b===ds?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([b])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([b]):m.add(b)),ig(a,b,D)),!1}throw Error(o(435,m.tag))}return ig(a,b,D),$h(),!1}if(Pr)return h=pa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=D,b!==os&&(a=Error(o(422),{cause:b}),ls(ua(a,m)))):(b!==os&&(h=Error(o(423),{cause:b}),ls(ua(h,m))),a=a.current.alternate,a.flags|=65536,D&=-D,a.lanes|=D,b=ua(b,m),D=Hf(a.stateNode,b,D),ku(a,D),oi!==4&&(oi=2)),!1;var k=Error(o(520),{cause:b});if(k=ua(k,m),cd===null?cd=[k]:cd.push(k),oi!==4&&(oi=2),h===null)return!0;b=ua(b,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,a=D&-D,m.lanes|=a,a=Hf(m.stateNode,b,a),ku(m,a),!1;case 1:if(h=m.type,k=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(nc===null||!nc.has(k))))return m.flags|=65536,D&=-D,m.lanes|=D,D=Im(D),Om(D,a,m,b),ku(m,D),!1}m=m.return}while(m!==null);return!1}var zm=Error(o(461)),On=!1;function Ti(a,h,m,b){h.child=a===null?Ru(h,null,m,b):il(h,a.child,m,b)}function Yf(a,h,m,b,D){m=m.render;var k=h.ref;if("ref"in b){var H={};for(var ie in b)ie!=="ref"&&(H[ie]=b[ie])}else H=b;return hs(h),b=S(a,h,m,H,k,D),ie=U(),a!==null&&!On?(G(a,h,D),Wl(a,h,D)):(Pr&&ie&&Eu(h),h.flags|=1,Ti(a,h,b,D),h.child)}function xy(a,h,m,b,D){if(a===null){var k=m.type;return typeof k=="function"&&!Co(k)&&k.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=k,wy(a,h,k,b,D)):(a=Su(m.type,null,b,h,h.mode,D),a.ref=h.ref,a.return=h,h.child=a)}if(k=a.child,!gp(a,D)){var H=k.memoizedProps;if(m=m.compare,m=m!==null?m:Ma,m(H,b)&&a.ref===h.ref)return Wl(a,h,D)}return h.flags|=1,a=Do(k,b),a.ref=h.ref,a.return=h,h.child=a}function wy(a,h,m,b,D){if(a!==null){var k=a.memoizedProps;if(Ma(k,b)&&a.ref===h.ref)if(On=!1,h.pendingProps=b=k,gp(a,D))(a.flags&131072)!==0&&(On=!0);else return h.lanes=a.lanes,Wl(a,h,D)}return Bm(a,h,m,b,D)}function Sy(a,h,m,b){var D=b.children,k=a!==null?a.memoizedState:null;if(a===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((h.flags&128)!==0){if(k=k!==null?k.baseLanes|m:m,a!==null){for(b=h.child=a.child,D=0;b!==null;)D=D|b.lanes|b.childLanes,b=b.sibling;b=D&~k}else b=0,h.child=null;return Rm(a,h,k,m,b)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},a!==null&&Et(h,k!==null?k.cachePool:null),k!==null?qf(h,k):Oc(),an(h);else return b=h.lanes=536870912,Rm(a,h,k!==null?k.baseLanes|m:m,m,b)}else k!==null?(Et(h,k.cachePool),qf(h,k),qr(),h.memoizedState=null):(a!==null&&Et(h,null),Oc(),qr());return Ti(a,h,D,m),h.child}function Xf(a,h){return a!==null&&a.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Rm(a,h,m,b,D){var k=fa();return k=k===null?null:{parent:In._currentValue,pool:k},h.memoizedState={baseLanes:m,cachePool:k},a!==null&&Et(h,null),Oc(),an(h),a!==null&&di(a,h,b,!0),h.childLanes=D,null}function Fh(a,h){return h=Qf({mode:h.mode,children:h.children},a.mode),h.ref=a.ref,a.child=h,h.return=a,h}function km(a,h,m){return il(h,a.child,null,m),a=Fh(h,h.pendingProps),a.flags|=2,Ni(h),h.memoizedState=null,a}function Ty(a,h,m){var b=h.pendingProps,D=(h.flags&128)!==0;if(h.flags&=-129,a===null){if(Pr){if(b.mode==="hidden")return a=Fh(h,b),h.lanes=536870912,Xf(null,a);if(ol(h),(a=nn)?(a=rv(a,Cr),a=a!==null&&a.data==="&"?a:null,a!==null&&(h.memoizedState={dehydrated:a,treeContext:Oo!==null?{id:ji,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},m=Au(a),m.return=h,h.child=m,ri=h,nn=null)):a=null,a===null)throw ni(h);return h.lanes=536870912,null}return Fh(h,b)}var k=a.memoizedState;if(k!==null){var H=k.dehydrated;if(ol(h),D)if(h.flags&256)h.flags&=-257,h=km(a,h,m);else if(h.memoizedState!==null)h.child=a.child,h.flags|=128,h=null;else throw Error(o(558));else if(On||di(a,h,m,!1),D=(m&a.childLanes)!==0,On||D){if(b=mn,b!==null&&(H=Bn(b,m),H!==0&&H!==k.retryLane))throw k.retryLane=H,Qs(a,H),Ya(b,a,H),zm;$h(),h=km(a,h,m)}else a=k.treeContext,nn=co(H.nextSibling),ri=h,Pr=!0,zo=null,Cr=!1,a!==null&&Nf(h,a),h=Fh(h,b),h.flags|=4096;return h}return a=Do(a.child,{mode:b.mode,children:b.children}),a.ref=h.ref,h.child=a,a.return=h,a}function dp(a,h){var m=h.ref;if(m===null)a!==null&&a.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(o(284));(a===null||a.ref!==m)&&(h.flags|=4194816)}}function Bm(a,h,m,b,D){return hs(h),m=S(a,h,m,b,void 0,D),b=U(),a!==null&&!On?(G(a,h,D),Wl(a,h,D)):(Pr&&b&&Eu(h),h.flags|=1,Ti(a,h,m,D),h.child)}function Lm(a,h,m,b,D,k){return hs(h),h.updateQueue=null,m=O(h,b,m,D),A(a),b=U(),a!==null&&!On?(G(a,h,k),Wl(a,h,k)):(Pr&&b&&Eu(h),h.flags|=1,Ti(a,h,m,k),h.child)}function jm(a,h,m,b,D){if(hs(h),h.stateNode===null){var k=Po,H=m.contextType;typeof H=="object"&&H!==null&&(k=wi(H)),k=new m(b,k),h.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=hp,h.stateNode=k,k._reactInternals=h,k=h.stateNode,k.props=b,k.state=h.memoizedState,k.refs={},Lr(h),H=m.contextType,k.context=typeof H=="object"&&H!==null?wi(H):Po,k.state=h.memoizedState,H=m.getDerivedStateFromProps,typeof H=="function"&&(Kl(h,m,H,b),k.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(H=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),H!==k.state&&hp.enqueueReplaceState(k,k.state,null),da(h,b,k,D),Bu(),k.state=h.memoizedState),typeof k.componentDidMount=="function"&&(h.flags|=4194308),b=!0}else if(a===null){k=h.stateNode;var ie=h.memoizedProps,Te=Nc(m,ie);k.props=Te;var Xe=k.context,nt=m.contextType;H=Po,typeof nt=="object"&&nt!==null&&(H=wi(nt));var ht=m.getDerivedStateFromProps;nt=typeof ht=="function"||typeof k.getSnapshotBeforeUpdate=="function",ie=h.pendingProps!==ie,nt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(ie||Xe!==H)&&fp(h,k,b,H),Yi=!1;var Ke=h.memoizedState;k.state=Ke,da(h,b,k,D),Bu(),Xe=h.memoizedState,ie||Ke!==Xe||Yi?(typeof ht=="function"&&(Kl(h,m,ht,b),Xe=h.memoizedState),(Te=Yi||vy(h,m,Te,b,Ke,Xe,H))?(nt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(h.flags|=4194308)):(typeof k.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=Xe),k.props=b,k.state=Xe,k.context=H,b=Te):(typeof k.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{k=h.stateNode,Vf(a,h),H=h.memoizedProps,nt=Nc(m,H),k.props=nt,ht=h.pendingProps,Ke=k.context,Xe=m.contextType,Te=Po,typeof Xe=="object"&&Xe!==null&&(Te=wi(Xe)),ie=m.getDerivedStateFromProps,(Xe=typeof ie=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(H!==ht||Ke!==Te)&&fp(h,k,b,Te),Yi=!1,Ke=h.memoizedState,k.state=Ke,da(h,b,k,D),Bu();var Je=h.memoizedState;H!==ht||Ke!==Je||Yi||a!==null&&a.dependencies!==null&&us(a.dependencies)?(typeof ie=="function"&&(Kl(h,m,ie,b),Je=h.memoizedState),(nt=Yi||vy(h,m,nt,b,Ke,Je,Te)||a!==null&&a.dependencies!==null&&us(a.dependencies))?(Xe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(b,Je,Te),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(b,Je,Te)),typeof k.componentDidUpdate=="function"&&(h.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof k.componentDidUpdate!="function"||H===a.memoizedProps&&Ke===a.memoizedState||(h.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&Ke===a.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=Je),k.props=b,k.state=Je,k.context=Te,b=nt):(typeof k.componentDidUpdate!="function"||H===a.memoizedProps&&Ke===a.memoizedState||(h.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&Ke===a.memoizedState||(h.flags|=1024),b=!1)}return k=b,dp(a,h),b=(h.flags&128)!==0,k||b?(k=h.stateNode,m=b&&typeof m.getDerivedStateFromError!="function"?null:k.render(),h.flags|=1,a!==null&&b?(h.child=il(h,a.child,null,D),h.child=il(h,null,m,D)):Ti(a,h,m,D),h.memoizedState=k.state,a=h.child):a=Wl(a,h,D),a}function Ay(a,h,m,b){return Pa(),h.flags|=256,Ti(a,h,m,b),h.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pp(a){return{baseLanes:a,cachePool:Dh()}}function Wf(a,h,m){return a=a!==null?a.childLanes&~m:0,h&&(a|=Za),a}function Uh(a,h,m){var b=h.pendingProps,D=!1,k=(h.flags&128)!==0,H;if((H=k)||(H=a!==null&&a.memoizedState===null?!1:(vn.current&2)!==0),H&&(D=!0,h.flags&=-129),H=(h.flags&32)!==0,h.flags&=-33,a===null){if(Pr){if(D?ma(h):qr(),(a=nn)?(a=rv(a,Cr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(h.memoizedState={dehydrated:a,treeContext:Oo!==null?{id:ji,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},m=Au(a),m.return=h,h.child=m,ri=h,nn=null)):a=null,a===null)throw ni(h);return Mi(a)?h.lanes=32:h.lanes=536870912,null}var ie=b.children;return b=b.fallback,D?(qr(),D=h.mode,ie=Qf({mode:"hidden",children:ie},D),b=Ul(b,D,m,null),ie.return=h,b.return=h,ie.sibling=b,h.child=ie,b=h.child,b.memoizedState=pp(m),b.childLanes=Wf(a,H,m),h.memoizedState=Kf,Xf(null,b)):(ma(h),Ki(h,ie))}var Te=a.memoizedState;if(Te!==null&&(ie=Te.dehydrated,ie!==null)){if(k)h.flags&256?(ma(h),h.flags&=-257,h=Jf(a,h,m)):h.memoizedState!==null?(qr(),h.child=a.child,h.flags|=128,h=null):(qr(),ie=b.fallback,D=h.mode,b=Qf({mode:"visible",children:b.children},D),ie=Ul(ie,D,m,null),ie.flags|=2,b.return=h,ie.return=h,b.sibling=ie,h.child=b,il(h,a.child,null,m),b=h.child,b.memoizedState=pp(m),b.childLanes=Wf(a,H,m),h.memoizedState=Kf,h=Xf(null,b));else if(ma(h),Mi(ie)){if(H=ie.nextSibling&&ie.nextSibling.dataset,H)var Xe=H.dgst;H=Xe,b=Error(o(419)),b.stack="",b.digest=H,ls({value:b,source:null,stack:null}),h=Jf(a,h,m)}else if(On||di(a,h,m,!1),H=(m&a.childLanes)!==0,On||H){if(H=mn,H!==null&&(b=Bn(H,m),b!==0&&b!==Te.retryLane))throw Te.retryLane=b,Qs(a,b),Ya(H,a,b),zm;Kc(ie)||$h(),h=Jf(a,h,m)}else Kc(ie)?(h.flags|=192,h.child=a.child,h=null):(a=Te.treeContext,nn=co(ie.nextSibling),ri=h,Pr=!0,zo=null,Cr=!1,a!==null&&Nf(h,a),h=Ki(h,b.children),h.flags|=4096);return h}return D?(qr(),ie=b.fallback,D=h.mode,Te=a.child,Xe=Te.sibling,b=Do(Te,{mode:"hidden",children:b.children}),b.subtreeFlags=Te.subtreeFlags&65011712,Xe!==null?ie=Do(Xe,ie):(ie=Ul(ie,D,m,null),ie.flags|=2),ie.return=h,b.return=h,b.sibling=ie,h.child=b,Xf(null,b),b=h.child,ie=a.child.memoizedState,ie===null?ie=pp(m):(D=ie.cachePool,D!==null?(Te=In._currentValue,D=D.parent!==Te?{parent:Te,pool:Te}:D):D=Dh(),ie={baseLanes:ie.baseLanes|m,cachePool:D}),b.memoizedState=ie,b.childLanes=Wf(a,H,m),h.memoizedState=Kf,Xf(a.child,b)):(ma(h),m=a.child,a=m.sibling,m=Do(m,{mode:"visible",children:b.children}),m.return=h,m.sibling=null,a!==null&&(H=h.deletions,H===null?(h.deletions=[a],h.flags|=16):H.push(a)),h.child=m,h.memoizedState=null,m)}function Ki(a,h){return h=Qf({mode:"visible",children:h},a.mode),h.return=a,a.child=h}function Qf(a,h){return a=ca(22,a,null,h),a.lanes=0,a}function Jf(a,h,m){return il(h,a.child,null,m),a=Ki(h,h.pendingProps.children),a.flags|=2,h.memoizedState=null,a}function My(a,h,m){a.lanes|=h;var b=a.alternate;b!==null&&(b.lanes|=h),rl(a.return,h,m)}function mp(a,h,m,b,D,k){var H=a.memoizedState;H===null?a.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:D,treeForkCount:k}:(H.isBackwards=h,H.rendering=null,H.renderingStartTime=0,H.last=b,H.tail=m,H.tailMode=D,H.treeForkCount=k)}function Ey(a,h,m){var b=h.pendingProps,D=b.revealOrder,k=b.tail;b=b.children;var H=vn.current,ie=(H&2)!==0;if(ie?(H=H&1|2,h.flags|=128):H&=1,xt(vn,H),Ti(a,h,b,m),b=Pr?as:0,!ie&&a!==null&&(a.flags&128)!==0)e:for(a=h.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&My(a,m,h);else if(a.tag===19)My(a,m,h);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===h)break e;for(;a.sibling===null;){if(a.return===null||a.return===h)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(D){case"forwards":for(m=h.child,D=null;m!==null;)a=m.alternate,a!==null&&jo(a)===null&&(D=m),m=m.sibling;m=D,m===null?(D=h.child,h.child=null):(D=m.sibling,m.sibling=null),mp(h,!1,D,m,k,b);break;case"backwards":case"unstable_legacy-backwards":for(m=null,D=h.child,h.child=null;D!==null;){if(a=D.alternate,a!==null&&jo(a)===null){h.child=D;break}a=D.sibling,D.sibling=m,m=D,D=a}mp(h,!0,m,null,k,b);break;case"together":mp(h,!1,null,null,void 0,b);break;default:h.memoizedState=null}return h.child}function Wl(a,h,m){if(a!==null&&(h.dependencies=a.dependencies),tc|=h.lanes,(m&h.childLanes)===0)if(a!==null){if(di(a,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(a!==null&&h.child!==a.child)throw Error(o(153));if(h.child!==null){for(a=h.child,m=Do(a,a.pendingProps),h.child=m,m.return=h;a.sibling!==null;)a=a.sibling,m=m.sibling=Do(a,a.pendingProps),m.return=h;m.sibling=null}return h.child}function gp(a,h){return(a.lanes&h)!==0?!0:(a=a.dependencies,!!(a!==null&&us(a)))}function $0(a,h,m){switch(h.tag){case 3:kr(h,h.stateNode.containerInfo),cs(h,In,a.memoizedState.cache),Pa();break;case 27:case 5:Wt(h);break;case 4:kr(h,h.stateNode.containerInfo);break;case 10:cs(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,ol(h),null;break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(ma(h),h.flags|=128,null):(m&h.child.childLanes)!==0?Uh(a,h,m):(ma(h),a=Wl(a,h,m),a!==null?a.sibling:null);ma(h);break;case 19:var D=(a.flags&128)!==0;if(b=(m&h.childLanes)!==0,b||(di(a,h,m,!1),b=(m&h.childLanes)!==0),D){if(b)return Ey(a,h,m);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),xt(vn,vn.current),b)break;return null;case 22:return h.lanes=0,Sy(a,h,m,h.pendingProps);case 24:cs(h,In,a.memoizedState.cache)}return Wl(a,h,m)}function yp(a,h,m){if(a!==null)if(a.memoizedProps!==h.pendingProps)On=!0;else{if(!gp(a,m)&&(h.flags&128)===0)return On=!1,$0(a,h,m);On=(a.flags&131072)!==0}else On=!1,Pr&&(h.flags&1048576)!==0&&Mu(h,as,h.index);switch(h.lanes=0,h.tag){case 16:e:{var b=h.pendingProps;if(a=ps(h.elementType),h.type=a,typeof a=="function")Co(a)?(b=Nc(a,b),h.tag=1,h=jm(null,h,a,b,m)):(h.tag=0,h=Bm(null,h,a,b,m));else{if(a!=null){var D=a.$$typeof;if(D===Oe){h.tag=11,h=Yf(null,h,a,b,m);break e}else if(D===qe){h.tag=14,h=xy(null,h,a,b,m);break e}}throw h=Ht(a)||a,Error(o(306,h,""))}}return h;case 0:return Bm(a,h,h.type,h.pendingProps,m);case 1:return b=h.type,D=Nc(b,h.pendingProps),jm(a,h,b,D,m);case 3:e:{if(kr(h,h.stateNode.containerInfo),a===null)throw Error(o(387));b=h.pendingProps;var k=h.memoizedState;D=k.element,Vf(a,h),da(h,b,null,m);var H=h.memoizedState;if(b=H.cache,cs(h,In,b),b!==k.cache&&Ca(h,[In],m,!0),Bu(),b=H.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:H.cache},h.updateQueue.baseState=k,h.memoizedState=k,h.flags&256){h=Ay(a,h,b,m);break e}else if(b!==D){D=ua(Error(o(424)),h),ls(D),h=Ay(a,h,b,m);break e}else{switch(a=h.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(nn=co(a.firstChild),ri=h,Pr=!0,zo=null,Cr=!0,m=Ru(h,null,b,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Pa(),b===D){h=Wl(a,h,m);break e}Ti(a,h,b,m)}h=h.child}return h;case 26:return dp(a,h),a===null?(m=l(h.type,null,h.pendingProps,null))?h.memoizedState=m:Pr||(m=h.type,a=h.pendingProps,b=_d(Gt.current).createElement(m),b[ut]=h,b[$t]=a,$n(b,m,a),Un(b),h.stateNode=b):h.memoizedState=l(h.type,a.memoizedProps,h.pendingProps,a.memoizedState),null;case 27:return Wt(h),a===null&&Pr&&(b=h.stateNode=bg(h.type,h.pendingProps,Gt.current),ri=h,Cr=!0,D=nn,ac(h.type)?(qp=D,nn=co(b.firstChild)):nn=D),Ti(a,h,h.pendingProps.children,m),dp(a,h),a===null&&(h.flags|=4194304),h.child;case 5:return a===null&&Pr&&((D=b=nn)&&(b=n_(b,h.type,h.pendingProps,Cr),b!==null?(h.stateNode=b,ri=h,nn=co(b.firstChild),Cr=!1,D=!0):D=!1),D||ni(h)),Wt(h),D=h.type,k=h.pendingProps,H=a!==null?a.memoizedProps:null,b=k.children,Up(D,k)?b=null:H!==null&&Up(D,H)&&(h.flags|=32),h.memoizedState!==null&&(D=S(a,h,R,null,null,m),lt._currentValue=D),dp(a,h),Ti(a,h,b,m),h.child;case 6:return a===null&&Pr&&((a=m=nn)&&(m=i_(m,h.pendingProps,Cr),m!==null?(h.stateNode=m,ri=h,nn=null,a=!0):a=!1),a||ni(h)),null;case 13:return Uh(a,h,m);case 4:return kr(h,h.stateNode.containerInfo),b=h.pendingProps,a===null?h.child=il(h,null,b,m):Ti(a,h,b,m),h.child;case 11:return Yf(a,h,h.type,h.pendingProps,m);case 7:return Ti(a,h,h.pendingProps,m),h.child;case 8:return Ti(a,h,h.pendingProps.children,m),h.child;case 12:return Ti(a,h,h.pendingProps.children,m),h.child;case 10:return b=h.pendingProps,cs(h,h.type,b.value),Ti(a,h,b.children,m),h.child;case 9:return D=h.type._context,b=h.pendingProps.children,hs(h),D=wi(D),b=b(D),h.flags|=1,Ti(a,h,b,m),h.child;case 14:return xy(a,h,h.type,h.pendingProps,m);case 15:return wy(a,h,h.type,h.pendingProps,m);case 19:return Ey(a,h,m);case 31:return Ty(a,h,m);case 22:return Sy(a,h,m,h.pendingProps);case 24:return hs(h),b=wi(In),a===null?(D=fa(),D===null&&(D=mn,k=ha(),D.pooledCache=k,k.refCount++,k!==null&&(D.pooledCacheLanes|=m),D=k),h.memoizedState={parent:b,cache:D},Lr(h),cs(h,In,D)):((a.lanes&m)!==0&&(Vf(a,h),da(h,null,null,m),Bu()),D=a.memoizedState,k=h.memoizedState,D.parent!==b?(D={parent:b,cache:b},h.memoizedState=D,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=D),cs(h,In,b)):(b=k.cache,cs(h,In,b),b!==D.cache&&Ca(h,[In],m,!0))),Ti(a,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(o(156,h.tag))}function hl(a){a.flags|=4}function vp(a,h,m,b,D){if((h=(a.mode&32)!==0)&&(h=!1),h){if(a.flags|=16777216,(D&335544128)===D)if(a.stateNode.complete)a.flags|=8192;else if(Uy())a.flags|=8192;else throw nl=ds,Ou}else a.flags&=-16777217}function Py(a,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!ne(h))if(Uy())a.flags|=8192;else throw nl=ds,Ou}function _p(a,h){h!==null&&(a.flags|=4),a.flags&16384&&(h=a.tag!==22?en():536870912,a.lanes|=h,Gu|=h)}function ed(a,h){if(!Pr)switch(a.tailMode){case"hidden":h=a.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?h||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function dn(a){var h=a.alternate!==null&&a.alternate.child===a.child,m=0,b=0;if(h)for(var D=a.child;D!==null;)m|=D.lanes|D.childLanes,b|=D.subtreeFlags&65011712,b|=D.flags&65011712,D.return=a,D=D.sibling;else for(D=a.child;D!==null;)m|=D.lanes|D.childLanes,b|=D.subtreeFlags,b|=D.flags,D.return=a,D=D.sibling;return a.subtreeFlags|=b,a.childLanes=m,h}function Nm(a,h,m){var b=h.pendingProps;switch(Mh(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(h),null;case 1:return dn(h),null;case 3:return m=h.stateNode,b=null,a!==null&&(b=a.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),ko(In),vt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(el(h)?hl(h):a===null||a.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ss())),dn(h),null;case 26:var D=h.type,k=h.memoizedState;return a===null?(hl(h),k!==null?(dn(h),Py(h,k)):(dn(h),vp(h,D,null,b,m))):k?k!==a.memoizedState?(hl(h),dn(h),Py(h,k)):(dn(h),h.flags&=-16777217):(a=a.memoizedProps,a!==b&&hl(h),dn(h),vp(h,D,a,b,m)),null;case 27:if(ur(h),m=Gt.current,D=h.type,a!==null&&h.stateNode!=null)a.memoizedProps!==b&&hl(h);else{if(!b){if(h.stateNode===null)throw Error(o(166));return dn(h),null}a=Pt.current,el(h)?Pu(h):(a=bg(D,b,m),h.stateNode=a,hl(h))}return dn(h),null;case 5:if(ur(h),D=h.type,a!==null&&h.stateNode!=null)a.memoizedProps!==b&&hl(h);else{if(!b){if(h.stateNode===null)throw Error(o(166));return dn(h),null}if(k=Pt.current,el(h))Pu(h);else{var H=_d(Gt.current);switch(k){case 1:k=H.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:k=H.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":k=H.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":k=H.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":k=H.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof b.is=="string"?H.createElement("select",{is:b.is}):H.createElement("select"),b.multiple?k.multiple=!0:b.size&&(k.size=b.size);break;default:k=typeof b.is=="string"?H.createElement(D,{is:b.is}):H.createElement(D)}}k[ut]=h,k[$t]=b;e:for(H=h.child;H!==null;){if(H.tag===5||H.tag===6)k.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===h)break e;for(;H.sibling===null;){if(H.return===null||H.return===h)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}h.stateNode=k;e:switch($n(k,D,b),D){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&hl(h)}}return dn(h),vp(h,h.type,a===null?null:a.memoizedProps,h.pendingProps,m),null;case 6:if(a&&h.stateNode!=null)a.memoizedProps!==b&&hl(h);else{if(typeof b!="string"&&h.stateNode===null)throw Error(o(166));if(a=Gt.current,el(h)){if(a=h.stateNode,m=h.memoizedProps,b=null,D=ri,D!==null)switch(D.tag){case 27:case 5:b=D.memoizedProps}a[ut]=h,a=!!(a.nodeValue===m||b!==null&&b.suppressHydrationWarning===!0||Xa(a.nodeValue,m)),a||ni(h,!0)}else a=_d(a).createTextNode(b),a[ut]=h,h.stateNode=a}return dn(h),null;case 31:if(m=h.memoizedState,a===null||a.memoizedState!==null){if(b=el(h),m!==null){if(a===null){if(!b)throw Error(o(318));if(a=h.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(557));a[ut]=h}else Pa(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;dn(h),a=!1}else m=ss(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),a=!0;if(!a)return h.flags&256?(Ni(h),h):(Ni(h),null);if((h.flags&128)!==0)throw Error(o(558))}return dn(h),null;case 13:if(b=h.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(D=el(h),b!==null&&b.dehydrated!==null){if(a===null){if(!D)throw Error(o(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(o(317));D[ut]=h}else Pa(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;dn(h),D=!1}else D=ss(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=D),D=!0;if(!D)return h.flags&256?(Ni(h),h):(Ni(h),null)}return Ni(h),(h.flags&128)!==0?(h.lanes=m,h):(m=b!==null,a=a!==null&&a.memoizedState!==null,m&&(b=h.child,D=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(D=b.alternate.memoizedState.cachePool.pool),k=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(k=b.memoizedState.cachePool.pool),k!==D&&(b.flags|=2048)),m!==a&&m&&(h.child.flags|=8192),_p(h,h.updateQueue),dn(h),null);case 4:return vt(),a===null&&jp(h.stateNode.containerInfo),dn(h),null;case 10:return ko(h.type),dn(h),null;case 19:if(Ve(vn),b=h.memoizedState,b===null)return dn(h),null;if(D=(h.flags&128)!==0,k=b.rendering,k===null)if(D)ed(b,!1);else{if(oi!==0||a!==null&&(a.flags&128)!==0)for(a=h.child;a!==null;){if(k=jo(a),k!==null){for(h.flags|=128,ed(b,!1),a=k.updateQueue,h.updateQueue=a,_p(h,a),h.subtreeFlags=0,a=m,m=h.child;m!==null;)op(m,a),m=m.sibling;return xt(vn,vn.current&1|2),Pr&&Ea(h,b.treeForkCount),h.child}a=a.sibling}b.tail!==null&&li()>Ep&&(h.flags|=128,D=!0,ed(b,!1),h.lanes=4194304)}else{if(!D)if(a=jo(k),a!==null){if(h.flags|=128,D=!0,a=a.updateQueue,h.updateQueue=a,_p(h,a),ed(b,!0),b.tail===null&&b.tailMode==="hidden"&&!k.alternate&&!Pr)return dn(h),null}else 2*li()-b.renderingStartTime>Ep&&m!==536870912&&(h.flags|=128,D=!0,ed(b,!1),h.lanes=4194304);b.isBackwards?(k.sibling=h.child,h.child=k):(a=b.last,a!==null?a.sibling=k:h.child=k,b.last=k)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=li(),a.sibling=null,m=vn.current,xt(vn,D?m&1|2:m&1),Pr&&Ea(h,b.treeForkCount),a):(dn(h),null);case 22:case 23:return Ni(h),Si(),b=h.memoizedState!==null,a!==null?a.memoizedState!==null!==b&&(h.flags|=8192):b&&(h.flags|=8192),b?(m&536870912)!==0&&(h.flags&128)===0&&(dn(h),h.subtreeFlags&6&&(h.flags|=8192)):dn(h),m=h.updateQueue,m!==null&&_p(h,m.retryQueue),m=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==m&&(h.flags|=2048),a!==null&&Ve(Ia),null;case 24:return m=null,a!==null&&(m=a.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),ko(In),dn(h),null;case 25:return null;case 30:return null}throw Error(o(156,h.tag))}function Cy(a,h){switch(Mh(h),h.tag){case 1:return a=h.flags,a&65536?(h.flags=a&-65537|128,h):null;case 3:return ko(In),vt(),a=h.flags,(a&65536)!==0&&(a&128)===0?(h.flags=a&-65537|128,h):null;case 26:case 27:case 5:return ur(h),null;case 31:if(h.memoizedState!==null){if(Ni(h),h.alternate===null)throw Error(o(340));Pa()}return a=h.flags,a&65536?(h.flags=a&-65537|128,h):null;case 13:if(Ni(h),a=h.memoizedState,a!==null&&a.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Pa()}return a=h.flags,a&65536?(h.flags=a&-65537|128,h):null;case 19:return Ve(vn),null;case 4:return vt(),null;case 10:return ko(h.type),null;case 22:case 23:return Ni(h),Si(),a!==null&&Ve(Ia),a=h.flags,a&65536?(h.flags=a&-65537|128,h):null;case 24:return ko(In),null;case 25:return null;default:return null}}function Fc(a,h){switch(Mh(h),h.tag){case 3:ko(In),vt();break;case 26:case 27:case 5:ur(h);break;case 4:vt();break;case 31:h.memoizedState!==null&&Ni(h);break;case 13:Ni(h);break;case 19:Ve(vn);break;case 10:ko(h.type);break;case 22:case 23:Ni(h),Si(),a!==null&&Ve(Ia);break;case 24:ko(In)}}function Ql(a,h){try{var m=h.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var D=b.next;m=D;do{if((m.tag&a)===a){b=void 0;var k=m.create,H=m.inst;b=k(),H.destroy=b}m=m.next}while(m!==D)}}catch(ie){cn(h,h.return,ie)}}function Uc(a,h,m){try{var b=h.updateQueue,D=b!==null?b.lastEffect:null;if(D!==null){var k=D.next;b=k;do{if((b.tag&a)===a){var H=b.inst,ie=H.destroy;if(ie!==void 0){H.destroy=void 0,D=h;var Te=m,Xe=ie;try{Xe()}catch(nt){cn(D,Te,nt)}}}b=b.next}while(b!==k)}}catch(nt){cn(h,h.return,nt)}}function Dy(a){var h=a.updateQueue;if(h!==null){var m=a.stateNode;try{kt(h,m)}catch(b){cn(a,a.return,b)}}}function Iy(a,h,m){m.props=Nc(a.type,a.memoizedProps),m.state=a.memoizedState;try{m.componentWillUnmount()}catch(b){cn(a,h,b)}}function td(a,h){try{var m=a.ref;if(m!==null){switch(a.tag){case 26:case 27:case 5:var b=a.stateNode;break;case 30:b=a.stateNode;break;default:b=a.stateNode}typeof m=="function"?a.refCleanup=m(b):m.current=b}}catch(D){cn(a,h,D)}}function fl(a,h){var m=a.ref,b=a.refCleanup;if(m!==null)if(typeof b=="function")try{b()}catch(D){cn(a,h,D)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(D){cn(a,h,D)}else m.current=null}function Oy(a){var h=a.type,m=a.memoizedProps,b=a.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&b.focus();break e;case"img":m.src?b.src=m.src:m.srcSet&&(b.srcset=m.srcSet)}}catch(D){cn(a,a.return,D)}}function Fm(a,h,m){try{var b=a.stateNode;Wy(b,a.type,m,h),b[$t]=h}catch(D){cn(a,a.return,D)}}function bp(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ac(a.type)||a.tag===4}function Um(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||bp(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ac(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function xp(a,h,m){var b=a.tag;if(b===5||b===6)a=a.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(a,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(a),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Na));else if(b!==4&&(b===27&&ac(a.type)&&(m=a.stateNode,h=null),a=a.child,a!==null))for(xp(a,h,m),a=a.sibling;a!==null;)xp(a,h,m),a=a.sibling}function Gc(a,h,m){var b=a.tag;if(b===5||b===6)a=a.stateNode,h?m.insertBefore(a,h):m.appendChild(a);else if(b!==4&&(b===27&&ac(a.type)&&(m=a.stateNode),a=a.child,a!==null))for(Gc(a,h,m),a=a.sibling;a!==null;)Gc(a,h,m),a=a.sibling}function zy(a){var h=a.stateNode,m=a.memoizedProps;try{for(var b=a.type,D=h.attributes;D.length;)h.removeAttributeNode(D[0]);$n(h,b,m),h[ut]=a,h[$t]=m}catch(k){cn(a,a.return,k)}}var Xr=!1,zn=!1,wp=!1,rd=typeof WeakSet=="function"?WeakSet:Set,mi=null;function nd(a,h){if(a=a.containerInfo,Fp=Jt,a=Rf(a),gu(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var D=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break e}var H=0,ie=-1,Te=-1,Xe=0,nt=0,ht=a,Ke=null;t:for(;;){for(var Je;ht!==m||D!==0&&ht.nodeType!==3||(ie=H+D),ht!==k||b!==0&&ht.nodeType!==3||(Te=H+b),ht.nodeType===3&&(H+=ht.nodeValue.length),(Je=ht.firstChild)!==null;)Ke=ht,ht=Je;for(;;){if(ht===a)break t;if(Ke===m&&++Xe===D&&(ie=H),Ke===k&&++nt===b&&(Te=H),(Je=ht.nextSibling)!==null)break;ht=Ke,Ke=ht.parentNode}ht=Je}m=ie===-1||Te===-1?null:{start:ie,end:Te}}else m=null}m=m||{start:0,end:0}}else m=null;for(gg={focusedElem:a,selectionRange:m},Jt=!1,mi=h;mi!==null;)if(h=mi,a=h.child,(h.subtreeFlags&1028)!==0&&a!==null)a.return=h,mi=a;else for(;mi!==null;){switch(h=mi,k=h.alternate,a=h.flags,h.tag){case 0:if((a&4)!==0&&(a=h.updateQueue,a=a!==null?a.events:null,a!==null))for(m=0;m<a.length;m++)D=a[m],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&k!==null){a=void 0,m=h,D=k.memoizedProps,k=k.memoizedState,b=m.stateNode;try{var Ut=Nc(m.type,D);a=b.getSnapshotBeforeUpdate(Ut,k),b.__reactInternalSnapshotBeforeUpdate=a}catch(ar){cn(m,m.return,ar)}}break;case 3:if((a&1024)!==0){if(a=h.stateNode.containerInfo,m=a.nodeType,m===9)Jh(a);else if(m===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Jh(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(o(163))}if(a=h.sibling,a!==null){a.return=h.return,mi=a;break}mi=h.return}}function Gm(a,h,m){var b=m.flags;switch(m.tag){case 0:case 11:case 15:dl(a,m),b&4&&Ql(5,m);break;case 1:if(dl(a,m),b&4)if(a=m.stateNode,h===null)try{a.componentDidMount()}catch(H){cn(m,m.return,H)}else{var D=Nc(m.type,h.memoizedProps);h=h.memoizedState;try{a.componentDidUpdate(D,h,a.__reactInternalSnapshotBeforeUpdate)}catch(H){cn(m,m.return,H)}}b&64&&Dy(m),b&512&&td(m,m.return);break;case 3:if(dl(a,m),b&64&&(a=m.updateQueue,a!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{kt(a,h)}catch(H){cn(m,m.return,H)}}break;case 27:h===null&&b&4&&zy(m);case 26:case 5:dl(a,m),h===null&&b&4&&Oy(m),b&512&&td(m,m.return);break;case 12:dl(a,m);break;case 31:dl(a,m),b&4&&Fu(a,m);break;case 13:dl(a,m),b&4&&Gh(a,m),b&64&&(a=m.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(m=W0.bind(null,m),_g(a,m))));break;case 22:if(b=m.memoizedState!==null||Xr,!b){h=h!==null&&h.memoizedState!==null||zn,D=Xr;var k=zn;Xr=b,(zn=h)&&!k?Jl(a,m,(m.subtreeFlags&8772)!==0):dl(a,m),Xr=D,zn=k}break;case 30:break;default:dl(a,m)}}function Vm(a){var h=a.alternate;h!==null&&(a.alternate=null,Vm(h)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(h=a.stateNode,h!==null&&go(h)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var pn=null,va=!1;function qa(a,h,m){for(m=m.child;m!==null;)id(a,h,m),m=m.sibling}function id(a,h,m){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(_e,m)}catch{}switch(m.tag){case 26:zn||fl(m,h),qa(a,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:zn||fl(m,h);var b=pn,D=va;ac(m.type)&&(pn=m.stateNode,va=!1),qa(a,h,m),ef(m.stateNode),pn=b,va=D;break;case 5:zn||fl(m,h);case 6:if(b=pn,D=va,pn=null,qa(a,h,m),pn=b,va=D,pn!==null)if(va)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(m.stateNode)}catch(k){cn(m,h,k)}else try{pn.removeChild(m.stateNode)}catch(k){cn(m,h,k)}break;case 18:pn!==null&&(va?(a=pn,bd(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,m.stateNode),rf(a)):bd(pn,m.stateNode));break;case 4:b=pn,D=va,pn=m.stateNode.containerInfo,va=!0,qa(a,h,m),pn=b,va=D;break;case 0:case 11:case 14:case 15:Uc(2,m,h),zn||Uc(4,m,h),qa(a,h,m);break;case 1:zn||(fl(m,h),b=m.stateNode,typeof b.componentWillUnmount=="function"&&Iy(m,h,b)),qa(a,h,m);break;case 21:qa(a,h,m);break;case 22:zn=(b=zn)||m.memoizedState!==null,qa(a,h,m),zn=b;break;default:qa(a,h,m)}}function Fu(a,h){if(h.memoizedState===null&&(a=h.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{rf(a)}catch(m){cn(h,h.return,m)}}}function Gh(a,h){if(h.memoizedState===null&&(a=h.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{rf(a)}catch(m){cn(h,h.return,m)}}function Z0(a){switch(a.tag){case 31:case 13:case 19:var h=a.stateNode;return h===null&&(h=a.stateNode=new rd),h;case 22:return a=a.stateNode,h=a._retryCache,h===null&&(h=a._retryCache=new rd),h;default:throw Error(o(435,a.tag))}}function ad(a,h){var m=Z0(a);h.forEach(function(b){if(!m.has(b)){m.add(b);var D=Zy.bind(null,a,b);b.then(D,D)}})}function Ai(a,h){var m=h.deletions;if(m!==null)for(var b=0;b<m.length;b++){var D=m[b],k=a,H=h,ie=H;e:for(;ie!==null;){switch(ie.tag){case 27:if(ac(ie.type)){pn=ie.stateNode,va=!1;break e}break;case 5:pn=ie.stateNode,va=!1;break e;case 3:case 4:pn=ie.stateNode.containerInfo,va=!0;break e}ie=ie.return}if(pn===null)throw Error(o(160));id(k,H,D),pn=null,va=!1,k=D.alternate,k!==null&&(k.return=null),D.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)qm(h,a),h=h.sibling}var vs=null;function qm(a,h){var m=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ai(h,a),Ui(a),b&4&&(Uc(3,a,a.return),Ql(3,a),Uc(5,a,a.return));break;case 1:Ai(h,a),Ui(a),b&512&&(zn||m===null||fl(m,m.return)),b&64&&Xr&&(a=a.updateQueue,a!==null&&(b=a.callbacks,b!==null&&(m=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=m===null?b:m.concat(b))));break;case 26:var D=vs;if(Ai(h,a),Ui(a),b&512&&(zn||m===null||fl(m,m.return)),b&4){var k=m!==null?m.memoizedState:null;if(b=a.memoizedState,m===null)if(b===null)if(a.stateNode===null){e:{b=a.type,m=a.memoizedProps,D=D.ownerDocument||D;t:switch(b){case"title":k=D.getElementsByTagName("title")[0],(!k||k[Us]||k[ut]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=D.createElement(b),D.head.insertBefore(k,D.querySelector("head > title"))),$n(k,b,m),k[ut]=a,Un(k),b=k;break e;case"link":var H=Y("link","href",D).get(b+(m.href||""));if(H){for(var ie=0;ie<H.length;ie++)if(k=H[ie],k.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&k.getAttribute("rel")===(m.rel==null?null:m.rel)&&k.getAttribute("title")===(m.title==null?null:m.title)&&k.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){H.splice(ie,1);break t}}k=D.createElement(b),$n(k,b,m),D.head.appendChild(k);break;case"meta":if(H=Y("meta","content",D).get(b+(m.content||""))){for(ie=0;ie<H.length;ie++)if(k=H[ie],k.getAttribute("content")===(m.content==null?null:""+m.content)&&k.getAttribute("name")===(m.name==null?null:m.name)&&k.getAttribute("property")===(m.property==null?null:m.property)&&k.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&k.getAttribute("charset")===(m.charSet==null?null:m.charSet)){H.splice(ie,1);break t}}k=D.createElement(b),$n(k,b,m),D.head.appendChild(k);break;default:throw Error(o(468,b))}k[ut]=a,Un(k),b=k}a.stateNode=b}else Q(D,a.type,a.stateNode);else a.stateNode=M(D,b,a.memoizedProps);else k!==b?(k===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):k.count--,b===null?Q(D,a.type,a.stateNode):M(D,b,a.memoizedProps)):b===null&&a.stateNode!==null&&Fm(a,a.memoizedProps,m.memoizedProps)}break;case 27:Ai(h,a),Ui(a),b&512&&(zn||m===null||fl(m,m.return)),m!==null&&b&4&&Fm(a,a.memoizedProps,m.memoizedProps);break;case 5:if(Ai(h,a),Ui(a),b&512&&(zn||m===null||fl(m,m.return)),a.flags&32){D=a.stateNode;try{zi(D,"")}catch(Ut){cn(a,a.return,Ut)}}b&4&&a.stateNode!=null&&(D=a.memoizedProps,Fm(a,D,m!==null?m.memoizedProps:D)),b&1024&&(wp=!0);break;case 6:if(Ai(h,a),Ui(a),b&4){if(a.stateNode===null)throw Error(o(162));b=a.memoizedProps,m=a.stateNode;try{m.nodeValue=b}catch(Ut){cn(a,a.return,Ut)}}break;case 3:if(V=null,D=vs,vs=tf(h.containerInfo),Ai(h,a),vs=D,Ui(a),b&4&&m!==null&&m.memoizedState.isDehydrated)try{rf(h.containerInfo)}catch(Ut){cn(a,a.return,Ut)}wp&&(wp=!1,Sp(a));break;case 4:b=vs,vs=tf(a.stateNode.containerInfo),Ai(h,a),Ui(a),vs=b;break;case 12:Ai(h,a),Ui(a);break;case 31:Ai(h,a),Ui(a),b&4&&(b=a.updateQueue,b!==null&&(a.updateQueue=null,ad(a,b)));break;case 13:Ai(h,a),Ui(a),a.child.flags&8192&&a.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(ud=li()),b&4&&(b=a.updateQueue,b!==null&&(a.updateQueue=null,ad(a,b)));break;case 22:D=a.memoizedState!==null;var Te=m!==null&&m.memoizedState!==null,Xe=Xr,nt=zn;if(Xr=Xe||D,zn=nt||Te,Ai(h,a),zn=nt,Xr=Xe,Ui(a),b&8192)e:for(h=a.stateNode,h._visibility=D?h._visibility&-2:h._visibility|1,D&&(m===null||Te||Xr||zn||Vc(a)),m=null,h=a;;){if(h.tag===5||h.tag===26){if(m===null){Te=m=h;try{if(k=Te.stateNode,D)H=k.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{ie=Te.stateNode;var ht=Te.memoizedProps.style,Ke=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;ie.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(Ut){cn(Te,Te.return,Ut)}}}else if(h.tag===6){if(m===null){Te=h;try{Te.stateNode.nodeValue=D?"":Te.memoizedProps}catch(Ut){cn(Te,Te.return,Ut)}}}else if(h.tag===18){if(m===null){Te=h;try{var Je=Te.stateNode;D?xd(Je,!0):xd(Te.stateNode,!1)}catch(Ut){cn(Te,Te.return,Ut)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===a)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break e;for(;h.sibling===null;){if(h.return===null||h.return===a)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}b&4&&(b=a.updateQueue,b!==null&&(m=b.retryQueue,m!==null&&(b.retryQueue=null,ad(a,m))));break;case 19:Ai(h,a),Ui(a),b&4&&(b=a.updateQueue,b!==null&&(a.updateQueue=null,ad(a,b)));break;case 30:break;case 21:break;default:Ai(h,a),Ui(a)}}function Ui(a){var h=a.flags;if(h&2){try{for(var m,b=a.return;b!==null;){if(bp(b)){m=b;break}b=b.return}if(m==null)throw Error(o(160));switch(m.tag){case 27:var D=m.stateNode,k=Um(a);Gc(a,k,D);break;case 5:var H=m.stateNode;m.flags&32&&(zi(H,""),m.flags&=-33);var ie=Um(a);Gc(a,ie,H);break;case 3:case 4:var Te=m.stateNode.containerInfo,Xe=Um(a);xp(a,Xe,Te);break;default:throw Error(o(161))}}catch(nt){cn(a,a.return,nt)}a.flags&=-3}h&4096&&(a.flags&=-4097)}function Sp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var h=a;Sp(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),a=a.sibling}}function dl(a,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Gm(a,h.alternate,h),h=h.sibling}function Vc(a){for(a=a.child;a!==null;){var h=a;switch(h.tag){case 0:case 11:case 14:case 15:Uc(4,h,h.return),Vc(h);break;case 1:fl(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&Iy(h,h.return,m),Vc(h);break;case 27:ef(h.stateNode);case 26:case 5:fl(h,h.return),Vc(h);break;case 22:h.memoizedState===null&&Vc(h);break;case 30:Vc(h);break;default:Vc(h)}a=a.sibling}}function Jl(a,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var b=h.alternate,D=a,k=h,H=k.flags;switch(k.tag){case 0:case 11:case 15:Jl(D,k,m),Ql(4,k);break;case 1:if(Jl(D,k,m),b=k,D=b.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Xe){cn(b,b.return,Xe)}if(b=k,D=b.updateQueue,D!==null){var ie=b.stateNode;try{var Te=D.shared.hiddenCallbacks;if(Te!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Te.length;D++)Lu(Te[D],ie)}catch(Xe){cn(b,b.return,Xe)}}m&&H&64&&Dy(k),td(k,k.return);break;case 27:zy(k);case 26:case 5:Jl(D,k,m),m&&b===null&&H&4&&Oy(k),td(k,k.return);break;case 12:Jl(D,k,m);break;case 31:Jl(D,k,m),m&&H&4&&Fu(D,k);break;case 13:Jl(D,k,m),m&&H&4&&Gh(D,k);break;case 22:k.memoizedState===null&&Jl(D,k,m),td(k,k.return);break;case 30:break;default:Jl(D,k,m)}h=h.sibling}}function $m(a,h){var m=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),a=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(a=h.memoizedState.cachePool.pool),a!==m&&(a!=null&&a.refCount++,m!=null&&pi(m))}function Zm(a,h){a=null,h.alternate!==null&&(a=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==a&&(h.refCount++,a!=null&&pi(a))}function _s(a,h,m,b){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ry(a,h,m,b),h=h.sibling}function Ry(a,h,m,b){var D=h.flags;switch(h.tag){case 0:case 11:case 15:_s(a,h,m,b),D&2048&&Ql(9,h);break;case 1:_s(a,h,m,b);break;case 3:_s(a,h,m,b),D&2048&&(a=null,h.alternate!==null&&(a=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==a&&(h.refCount++,a!=null&&pi(a)));break;case 12:if(D&2048){_s(a,h,m,b),a=h.stateNode;try{var k=h.memoizedProps,H=k.id,ie=k.onPostCommit;typeof ie=="function"&&ie(H,h.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Te){cn(h,h.return,Te)}}else _s(a,h,m,b);break;case 31:_s(a,h,m,b);break;case 13:_s(a,h,m,b);break;case 23:break;case 22:k=h.stateNode,H=h.alternate,h.memoizedState!==null?k._visibility&2?_s(a,h,m,b):od(a,h):k._visibility&2?_s(a,h,m,b):(k._visibility|=2,bs(a,h,m,b,(h.subtreeFlags&10256)!==0||!1)),D&2048&&$m(H,h);break;case 24:_s(a,h,m,b),D&2048&&Zm(h.alternate,h);break;default:_s(a,h,m,b)}}function bs(a,h,m,b,D){for(D=D&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var k=a,H=h,ie=m,Te=b,Xe=H.flags;switch(H.tag){case 0:case 11:case 15:bs(k,H,ie,Te,D),Ql(8,H);break;case 23:break;case 22:var nt=H.stateNode;H.memoizedState!==null?nt._visibility&2?bs(k,H,ie,Te,D):od(k,H):(nt._visibility|=2,bs(k,H,ie,Te,D)),D&&Xe&2048&&$m(H.alternate,H);break;case 24:bs(k,H,ie,Te,D),D&&Xe&2048&&Zm(H.alternate,H);break;default:bs(k,H,ie,Te,D)}h=h.sibling}}function od(a,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=a,b=h,D=b.flags;switch(b.tag){case 22:od(m,b),D&2048&&$m(b.alternate,b);break;case 24:od(m,b),D&2048&&Zm(b.alternate,b);break;default:od(m,b)}h=h.sibling}}var sd=8192;function Uu(a,h,m){if(a.subtreeFlags&sd)for(a=a.child;a!==null;)ky(a,h,m),a=a.sibling}function ky(a,h,m){switch(a.tag){case 26:Uu(a,h,m),a.flags&sd&&a.memoizedState!==null&&ce(m,vs,a.memoizedState,a.memoizedProps);break;case 5:Uu(a,h,m);break;case 3:case 4:var b=vs;vs=tf(a.stateNode.containerInfo),Uu(a,h,m),vs=b;break;case 22:a.memoizedState===null&&(b=a.alternate,b!==null&&b.memoizedState!==null?(b=sd,sd=16777216,Uu(a,h,m),sd=b):Uu(a,h,m));break;default:Uu(a,h,m)}}function Hm(a){var h=a.alternate;if(h!==null&&(a=h.child,a!==null)){h.child=null;do h=a.sibling,a.sibling=null,a=h;while(a!==null)}}function ld(a){var h=a.deletions;if((a.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var b=h[m];mi=b,Ap(b,a)}Hm(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Tp(a),a=a.sibling}function Tp(a){switch(a.tag){case 0:case 11:case 15:ld(a),a.flags&2048&&Uc(9,a,a.return);break;case 3:ld(a);break;case 12:ld(a);break;case 22:var h=a.stateNode;a.memoizedState!==null&&h._visibility&2&&(a.return===null||a.return.tag!==13)?(h._visibility&=-3,qc(a)):ld(a);break;default:ld(a)}}function qc(a){var h=a.deletions;if((a.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var b=h[m];mi=b,Ap(b,a)}Hm(a)}for(a=a.child;a!==null;){switch(h=a,h.tag){case 0:case 11:case 15:Uc(8,h,h.return),qc(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,qc(h));break;default:qc(h)}a=a.sibling}}function Ap(a,h){for(;mi!==null;){var m=mi;switch(m.tag){case 0:case 11:case 15:Uc(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var b=m.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:pi(m.memoizedState.cache)}if(b=m.child,b!==null)b.return=m,mi=b;else e:for(m=a;mi!==null;){b=mi;var D=b.sibling,k=b.return;if(Vm(b),b===m){mi=null;break e}if(D!==null){D.return=k,mi=D;break e}mi=k}}}var H0={getCacheForType:function(a){var h=wi(In),m=h.data.get(a);return m===void 0&&(m=a(),h.data.set(a,m)),m},cacheSignal:function(){return wi(In).controller.signal}},Y0=typeof WeakMap=="function"?WeakMap:Map,Zr=0,mn=null,zr=null,Rr=0,Nr=0,$a=null,$c=!1,Vh=!1,Ym=!1,ec=0,oi=0,tc=0,rc=0,Mp=0,Za=0,Gu=0,cd=null,Wi=null,Xm=!1,ud=0,By=0,Ep=1/0,Pp=null,nc=null,Di=0,Zc=null,pl=null,gn=0,hd=0,Cp=null,Km=null,Vu=0,Hc=null;function Ha(){return(Zr&2)!==0&&Rr!==0?Rr&-Rr:$e.T!==null?Bp():ia()}function Ly(){if(Za===0)if((Rr&536870912)===0||Pr){var a=It;It<<=1,(It&3932160)===0&&(It=262144),Za=a}else Za=536870912;return a=pa.current,a!==null&&(a.flags|=32),Za}function Ya(a,h,m){(a===mn&&(Nr===2||Nr===9)||a.cancelPendingCommit!==null)&&(qh(a,0),Yc(a,Rr,Za,!1)),Mn(a,m),((Zr&2)===0||a!==mn)&&(a===mn&&((Zr&2)===0&&(rc|=m),oi===4&&Yc(a,Rr,Za,!1)),qo(a))}function jy(a,h,m){if((Zr&6)!==0)throw Error(o(327));var b=!m&&(h&127)===0&&(h&a.expiredLanes)===0||Lt(a,h),D=b?fd(a,h):Ip(a,h,!0),k=b;do{if(D===0){Vh&&!b&&Yc(a,h,0,!1);break}else{if(m=a.current.alternate,k&&!X0(m)){D=Ip(a,h,!1),k=!1;continue}if(D===2){if(k=h,a.errorRecoveryDisabledLanes&k)var H=0;else H=a.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){h=H;e:{var ie=a;D=cd;var Te=ie.current.memoizedState.isDehydrated;if(Te&&(qh(ie,H).flags|=256),H=Ip(ie,H,!1),H!==2){if(Ym&&!Te){ie.errorRecoveryDisabledLanes|=k,rc|=k,D=4;break e}k=Wi,Wi=D,k!==null&&(Wi===null?Wi=k:Wi.push.apply(Wi,k))}D=H}if(k=!1,D!==2)continue}}if(D===1){qh(a,0),Yc(a,h,0,!0);break}e:{switch(b=a,k=D,k){case 0:case 1:throw Error(o(345));case 4:if((h&4194048)!==h)break;case 6:Yc(b,h,Za,!$c);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(o(329))}if((h&62914560)===h&&(D=ud+300-li(),10<D)){if(Yc(b,h,Za,!$c),gr(b,0,!0)!==0)break e;gn=h,b.timeoutHandle=ev(Ny.bind(null,b,m,Wi,Pp,Xm,h,Za,rc,Gu,$c,k,"Throttled",-0,0),D);break e}Ny(b,m,Wi,Pp,Xm,h,Za,rc,Gu,$c,k,null,-0,0)}}break}while(!0);qo(a)}function Ny(a,h,m,b,D,k,H,ie,Te,Xe,nt,ht,Ke,Je){if(a.timeoutHandle=-1,ht=h.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},ky(h,k,ht);var Ut=(k&62914560)===k?ud-li():(k&4194048)===k?By-li():0;if(Ut=ze(ht,Ut),Ut!==null){gn=k,a.cancelPendingCommit=Ut(eg.bind(null,a,h,k,m,b,D,H,ie,Te,nt,ht,null,Ke,Je)),Yc(a,k,H,!Xe);return}}eg(a,h,k,m,b,D,H,ie,Te)}function X0(a){for(var h=a;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var b=0;b<m.length;b++){var D=m[b],k=D.getSnapshot;D=D.value;try{if(!Bi(k(),D))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Yc(a,h,m,b){h&=~Mp,h&=~rc,a.suspendedLanes|=h,a.pingedLanes&=~h,b&&(a.warmLanes|=h),b=a.expirationTimes;for(var D=h;0<D;){var k=31-Ne(D),H=1<<k;b[k]=-1,D&=~H}m!==0&&ei(a,m,h)}function Dp(){return(Zr&6)===0?(md(0),!1):!0}function Wm(){if(zr!==null){if(Nr===0)var a=zr.return;else a=zr,Ro=tl=null,Z(a),$l=null,Dc=0,a=zr;for(;a!==null;)Fc(a.alternate,a),a=a.return;zr=null}}function qh(a,h){var m=a.timeoutHandle;m!==-1&&(a.timeoutHandle=-1,r_(m)),m=a.cancelPendingCommit,m!==null&&(a.cancelPendingCommit=null,m()),gn=0,Wm(),mn=a,zr=m=Do(a.current,null),Rr=h,Nr=0,$a=null,$c=!1,Vh=Lt(a,h),Ym=!1,Gu=Za=Mp=rc=tc=oi=0,Wi=cd=null,Xm=!1,(h&8)!==0&&(h|=h&32);var b=a.entangledLanes;if(b!==0)for(a=a.entanglements,b&=h;0<b;){var D=31-Ne(b),k=1<<D;h|=a[D],b&=~k}return ec=h,wu(),m}function Fy(a,h){dr=null,$e.H=Lh,h===fs||h===Lo?(h=Oh(),Nr=3):h===Ou?(h=Oh(),Nr=4):Nr=h===zm?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,$a=h,zr===null&&(oi=1,jh(a,ua(h,a.current)))}function Uy(){var a=pa.current;return a===null?!0:(Rr&4194048)===Rr?Ln===null:(Rr&62914560)===Rr||(Rr&536870912)!==0?a===Ln:!1}function Gy(){var a=$e.H;return $e.H=Lh,a===null?Lh:a}function Qm(){var a=$e.A;return $e.A=H0,a}function $h(){oi=4,$c||(Rr&4194048)!==Rr&&pa.current!==null||(Vh=!0),(tc&134217727)===0&&(rc&134217727)===0||mn===null||Yc(mn,Rr,Za,!1)}function Ip(a,h,m){var b=Zr;Zr|=2;var D=Gy(),k=Qm();(mn!==a||Rr!==h)&&(Pp=null,qh(a,h)),h=!1;var H=oi;e:do try{if(Nr!==0&&zr!==null){var ie=zr,Te=$a;switch(Nr){case 8:Wm(),H=6;break e;case 3:case 2:case 9:case 6:pa.current===null&&(h=!0);var Xe=Nr;if(Nr=0,$a=null,Hh(a,ie,Te,Xe),m&&Vh){H=0;break e}break;default:Xe=Nr,Nr=0,$a=null,Hh(a,ie,Te,Xe)}}Xc(),H=oi;break}catch(nt){Fy(a,nt)}while(!0);return h&&a.shellSuspendCounter++,Ro=tl=null,Zr=b,$e.H=D,$e.A=k,zr===null&&(mn=null,Rr=0,wu()),H}function Xc(){for(;zr!==null;)dd(zr)}function fd(a,h){var m=Zr;Zr|=2;var b=Gy(),D=Qm();mn!==a||Rr!==h?(Pp=null,Ep=li()+500,qh(a,h)):Vh=Lt(a,h);e:do try{if(Nr!==0&&zr!==null){h=zr;var k=$a;t:switch(Nr){case 1:Nr=0,$a=null,Hh(a,h,k,1);break;case 2:case 9:if(Ih(k)){Nr=0,$a=null,pd(h);break}h=function(){Nr!==2&&Nr!==9||mn!==a||(Nr=7),qo(a)},k.then(h,h);break e;case 3:Nr=7;break e;case 4:Nr=5;break e;case 7:Ih(k)?(Nr=0,$a=null,pd(h)):(Nr=0,$a=null,Hh(a,h,k,7));break;case 5:var H=null;switch(zr.tag){case 26:H=zr.memoizedState;case 5:case 27:var ie=zr;if(H?ne(H):ie.stateNode.complete){Nr=0,$a=null;var Te=ie.sibling;if(Te!==null)zr=Te;else{var Xe=ie.return;Xe!==null?(zr=Xe,Op(Xe)):zr=null}break t}}Nr=0,$a=null,Hh(a,h,k,5);break;case 6:Nr=0,$a=null,Hh(a,h,k,6);break;case 8:Wm(),oi=6;break e;default:throw Error(o(462))}}Zh();break}catch(nt){Fy(a,nt)}while(!0);return Ro=tl=null,$e.H=b,$e.A=D,Zr=m,zr!==null?0:(mn=null,Rr=0,wu(),oi)}function Zh(){for(;zr!==null&&!Bs();)dd(zr)}function dd(a){var h=yp(a.alternate,a,ec);a.memoizedProps=a.pendingProps,h===null?Op(a):zr=h}function pd(a){var h=a,m=h.alternate;switch(h.tag){case 15:case 0:h=Lm(m,h,h.pendingProps,h.type,void 0,Rr);break;case 11:h=Lm(m,h,h.pendingProps,h.type.render,h.ref,Rr);break;case 5:Z(h);default:Fc(m,h),h=zr=op(h,ec),h=yp(m,h,ec)}a.memoizedProps=a.pendingProps,h===null?Op(a):zr=h}function Hh(a,h,m,b){Ro=tl=null,Z(h),$l=null,Dc=0;var D=h.return;try{if(Nh(a,D,h,m,Rr)){oi=1,jh(a,ua(m,a.current)),zr=null;return}}catch(k){if(D!==null)throw zr=D,k;oi=1,jh(a,ua(m,a.current)),zr=null;return}h.flags&32768?(Pr||b===1?a=!0:Vh||(Rr&536870912)!==0?a=!1:($c=a=!0,(b===2||b===9||b===3||b===6)&&(b=pa.current,b!==null&&b.tag===13&&(b.flags|=16384))),Jm(h,a)):Op(h)}function Op(a){var h=a;do{if((h.flags&32768)!==0){Jm(h,$c);return}a=h.return;var m=Nm(h.alternate,h,ec);if(m!==null){zr=m;return}if(h=h.sibling,h!==null){zr=h;return}zr=h=a}while(h!==null);oi===0&&(oi=5)}function Jm(a,h){do{var m=Cy(a.alternate,a);if(m!==null){m.flags&=32767,zr=m;return}if(m=a.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(a=a.sibling,a!==null)){zr=a;return}zr=a=m}while(a!==null);oi=6,zr=null}function eg(a,h,m,b,D,k,H,ie,Te){a.cancelPendingCommit=null;do Yh();while(Di!==0);if((Zr&6)!==0)throw Error(o(327));if(h!==null){if(h===a.current)throw Error(o(177));if(k=h.lanes|h.childLanes,k|=Ec,ci(a,m,k,H,ie,Te),a===mn&&(zr=mn=null,Rr=0),pl=h,Zc=a,gn=m,hd=k,Cp=D,Km=b,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Hy(Qo,function(){return qy(),null})):(a.callbackNode=null,a.callbackPriority=0),b=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||b){b=$e.T,$e.T=null,D=ot.p,ot.p=2,H=Zr,Zr|=4;try{nd(a,h,m)}finally{Zr=H,ot.p=D,$e.T=b}}Di=1,Vy(),tg(),rg()}}function Vy(){if(Di===1){Di=0;var a=Zc,h=pl,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=$e.T,$e.T=null;var b=ot.p;ot.p=2;var D=Zr;Zr|=4;try{qm(h,a);var k=gg,H=Rf(a.containerInfo),ie=k.focusedElem,Te=k.selectionRange;if(H!==ie&&ie&&ie.ownerDocument&&wh(ie.ownerDocument.documentElement,ie)){if(Te!==null&&gu(ie)){var Xe=Te.start,nt=Te.end;if(nt===void 0&&(nt=Xe),"selectionStart"in ie)ie.selectionStart=Xe,ie.selectionEnd=Math.min(nt,ie.value.length);else{var ht=ie.ownerDocument||document,Ke=ht&&ht.defaultView||window;if(Ke.getSelection){var Je=Ke.getSelection(),Ut=ie.textContent.length,ar=Math.min(Te.start,Ut),Dr=Te.end===void 0?ar:Math.min(Te.end,Ut);!Je.extend&&ar>Dr&&(H=Dr,Dr=ar,ar=H);var je=xh(ie,ar),Ie=xh(ie,Dr);if(je&&Ie&&(Je.rangeCount!==1||Je.anchorNode!==je.node||Je.anchorOffset!==je.offset||Je.focusNode!==Ie.node||Je.focusOffset!==Ie.offset)){var Ye=ht.createRange();Ye.setStart(je.node,je.offset),Je.removeAllRanges(),ar>Dr?(Je.addRange(Ye),Je.extend(Ie.node,Ie.offset)):(Ye.setEnd(Ie.node,Ie.offset),Je.addRange(Ye))}}}}for(ht=[],Je=ie;Je=Je.parentNode;)Je.nodeType===1&&ht.push({element:Je,left:Je.scrollLeft,top:Je.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<ht.length;ie++){var ct=ht[ie];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}Jt=!!Fp,gg=Fp=null}finally{Zr=D,ot.p=b,$e.T=m}}a.current=h,Di=2}}function tg(){if(Di===2){Di=0;var a=Zc,h=pl,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=$e.T,$e.T=null;var b=ot.p;ot.p=2;var D=Zr;Zr|=4;try{Gm(a,h.alternate,h)}finally{Zr=D,ot.p=b,$e.T=m}}Di=3}}function rg(){if(Di===4||Di===3){Di=0,Ls();var a=Zc,h=pl,m=gn,b=Km;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Di=5:(Di=0,pl=Zc=null,zp(a,a.pendingLanes));var D=a.pendingLanes;if(D===0&&(nc=null),En(m),h=h.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(_e,h,void 0,(h.current.flags&128)===128)}catch{}if(b!==null){h=$e.T,D=ot.p,ot.p=2,$e.T=null;try{for(var k=a.onRecoverableError,H=0;H<b.length;H++){var ie=b[H];k(ie.value,{componentStack:ie.stack})}}finally{$e.T=h,ot.p=D}}(gn&3)!==0&&Yh(),qo(a),D=a.pendingLanes,(m&261930)!==0&&(D&42)!==0?a===Hc?Vu++:(Vu=0,Hc=a):Vu=0,md(0)}}function zp(a,h){(a.pooledCacheLanes&=h)===0&&(h=a.pooledCache,h!=null&&(a.pooledCache=null,pi(h)))}function Yh(){return Vy(),tg(),rg(),qy()}function qy(){if(Di!==5)return!1;var a=Zc,h=hd;hd=0;var m=En(gn),b=$e.T,D=ot.p;try{ot.p=32>m?32:m,$e.T=null,m=Cp,Cp=null;var k=Zc,H=gn;if(Di=0,pl=Zc=null,gn=0,(Zr&6)!==0)throw Error(o(331));var ie=Zr;if(Zr|=4,Tp(k.current),Ry(k,k.current,H,m),Zr=ie,md(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(_e,k)}catch{}return!0}finally{ot.p=D,$e.T=b,zp(a,h)}}function ng(a,h,m){h=ua(m,h),h=Hf(a.stateNode,h,2),a=oo(a,h,2),a!==null&&(Mn(a,2),qo(a))}function cn(a,h,m){if(a.tag===3)ng(a,a,m);else for(;h!==null;){if(h.tag===3){ng(h,a,m);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(nc===null||!nc.has(b))){a=ua(m,a),m=Im(2),b=oo(h,m,2),b!==null&&(Om(m,b,h,a),Mn(b,2),qo(b));break}}h=h.return}}function ig(a,h,m){var b=a.pingCache;if(b===null){b=a.pingCache=new Y0;var D=new Set;b.set(h,D)}else D=b.get(h),D===void 0&&(D=new Set,b.set(h,D));D.has(m)||(Ym=!0,D.add(m),a=K0.bind(null,a,h,m),h.then(a,a))}function K0(a,h,m){var b=a.pingCache;b!==null&&b.delete(h),a.pingedLanes|=a.suspendedLanes&m,a.warmLanes&=~m,mn===a&&(Rr&m)===m&&(oi===4||oi===3&&(Rr&62914560)===Rr&&300>li()-ud?(Zr&2)===0&&qh(a,0):Mp|=m,Gu===Rr&&(Gu=0)),qo(a)}function $y(a,h){h===0&&(h=en()),a=Qs(a,h),a!==null&&(Mn(a,h),qo(a))}function W0(a){var h=a.memoizedState,m=0;h!==null&&(m=h.retryLane),$y(a,m)}function Zy(a,h){var m=0;switch(a.tag){case 31:case 13:var b=a.stateNode,D=a.memoizedState;D!==null&&(m=D.retryLane);break;case 19:b=a.stateNode;break;case 22:b=a.stateNode._retryCache;break;default:throw Error(o(314))}b!==null&&b.delete(h),$y(a,m)}function Hy(a,h){return ks(a,h)}var Vo=null,lo=null,Rp=!1,Xh=!1,ag=!1,xs=0;function qo(a){a!==lo&&a.next===null&&(lo===null?Vo=lo=a:lo=lo.next=a),Xh=!0,Rp||(Rp=!0,cg())}function md(a,h){if(!ag&&Xh){ag=!0;do for(var m=!1,b=Vo;b!==null;){if(a!==0){var D=b.pendingLanes;if(D===0)var k=0;else{var H=b.suspendedLanes,ie=b.pingedLanes;k=(1<<31-Ne(42|a)+1)-1,k&=D&~(H&~ie),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(m=!0,lg(b,k))}else k=Rr,k=gr(b,b===mn?k:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(k&3)===0||Lt(b,k)||(m=!0,lg(b,k));b=b.next}while(m);ag=!1}}function og(){kp()}function kp(){Xh=Rp=!1;var a=0;xs!==0&&Jy()&&(a=xs);for(var h=li(),m=null,b=Vo;b!==null;){var D=b.next,k=qu(b,h);k===0?(b.next=null,m===null?Vo=D:m.next=D,D===null&&(lo=m)):(m=b,(a!==0||(k&3)!==0)&&(Xh=!0)),b=D}Di!==0&&Di!==5||md(a),xs!==0&&(xs=0)}function qu(a,h){for(var m=a.suspendedLanes,b=a.pingedLanes,D=a.expirationTimes,k=a.pendingLanes&-62914561;0<k;){var H=31-Ne(k),ie=1<<H,Te=D[H];Te===-1?((ie&m)===0||(ie&b)!==0)&&(D[H]=hr(ie,h)):Te<=h&&(a.expiredLanes|=ie),k&=~ie}if(h=mn,m=Rr,m=gr(a,a===h?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),b=a.callbackNode,m===0||a===h&&(Nr===2||Nr===9)||a.cancelPendingCommit!==null)return b!==null&&b!==null&&mo(b),a.callbackNode=null,a.callbackPriority=0;if((m&3)===0||Lt(a,m)){if(h=m&-m,h===a.callbackPriority)return h;switch(b!==null&&mo(b),En(m)){case 2:case 8:m=Wo;break;case 32:m=Qo;break;case 268435456:m=ee;break;default:m=Qo}return b=sg.bind(null,a),m=ks(m,b),a.callbackPriority=h,a.callbackNode=m,h}return b!==null&&b!==null&&mo(b),a.callbackPriority=2,a.callbackNode=null,2}function sg(a,h){if(Di!==0&&Di!==5)return a.callbackNode=null,a.callbackPriority=0,null;var m=a.callbackNode;if(Yh()&&a.callbackNode!==m)return null;var b=Rr;return b=gr(a,a===mn?b:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),b===0?null:(jy(a,b,h),qu(a,li()),a.callbackNode!=null&&a.callbackNode===m?sg.bind(null,a):null)}function lg(a,h){if(Yh())return null;jy(a,h,!0)}function cg(){tv(function(){(Zr&6)!==0?ks(Ko,og):kp()})}function Bp(){if(xs===0){var a=io;a===0&&(a=et,et<<=1,(et&261888)===0&&(et=256)),xs=a}return xs}function gd(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:_o(""+a)}function ug(a,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,a.id&&m.setAttribute("form",a.id),h.parentNode.insertBefore(m,h),a=new FormData(a),m.parentNode.removeChild(m),a}function Q0(a,h,m,b,D){if(h==="submit"&&m&&m.stateNode===D){var k=gd((D[$t]||null).action),H=b.submitter;H&&(h=(h=H[$t]||null)?gd(h.formAction):H.getAttribute("formAction"),h!==null&&(k=h,H=null));var ie=new yc("action","action",null,b,D);a.push({event:ie,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(xs!==0){var Te=H?ug(D,H):new FormData(D);Bh(m,{pending:!0,data:Te,method:D.method,action:k},null,Te)}}else typeof k=="function"&&(ie.preventDefault(),Te=H?ug(D,H):new FormData(D),Bh(m,{pending:!0,data:Te,method:D.method,action:k},k,Te))},currentTarget:D}]})}}for(var hg=0;hg<xu.length;hg++){var Lp=xu[hg],J0=Lp.toLowerCase(),e_=Lp[0].toUpperCase()+Lp.slice(1);Ci(J0,"on"+e_)}Ci(_u,"onAnimationEnd"),Ci(Th,"onAnimationIteration"),Ci(Ws,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(bu,"onTransitionRun"),Ci(Mc,"onTransitionStart"),Ci(Fa,"onTransitionCancel"),Ci(Lf,"onTransitionEnd"),vo("onMouseEnter",["mouseout","mouseover"]),vo("onMouseLeave",["mouseout","mouseover"]),vo("onPointerEnter",["pointerout","pointerover"]),vo("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function Yy(a,h){h=(h&4)!==0;for(var m=0;m<a.length;m++){var b=a[m],D=b.event;b=b.listeners;e:{var k=void 0;if(h)for(var H=b.length-1;0<=H;H--){var ie=b[H],Te=ie.instance,Xe=ie.currentTarget;if(ie=ie.listener,Te!==k&&D.isPropagationStopped())break e;k=ie,D.currentTarget=Xe;try{k(D)}catch(nt){Fl(nt)}D.currentTarget=null,k=Te}else for(H=0;H<b.length;H++){if(ie=b[H],Te=ie.instance,Xe=ie.currentTarget,ie=ie.listener,Te!==k&&D.isPropagationStopped())break e;k=ie,D.currentTarget=Xe;try{k(D)}catch(nt){Fl(nt)}D.currentTarget=null,k=Te}}}}function Mr(a,h){var m=h[ui];m===void 0&&(m=h[ui]=new Set);var b=a+"__bubble";m.has(b)||(fg(h,a,2,!1),m.add(b))}function ml(a,h,m){var b=0;h&&(b|=4),fg(m,a,b,h)}var vd="_reactListening"+Math.random().toString(36).slice(2);function jp(a){if(!a[vd]){a[vd]=!0,Zi.forEach(function(m){m!=="selectionchange"&&(t_.has(m)||ml(m,!1,a),ml(m,!0,a))});var h=a.nodeType===9?a:a.ownerDocument;h===null||h[vd]||(h[vd]=!0,ml("selectionchange",!1,h))}}function fg(a,h,m,b){switch(Ka(h)){case 2:var D=qt;break;case 8:D=Bt;break;default:D=Sr}m=D.bind(null,h,m,a),D=void 0,!_i||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),b?D!==void 0?a.addEventListener(h,m,{capture:!0,passive:D}):a.addEventListener(h,m,!0):D!==void 0?a.addEventListener(h,m,{passive:D}):a.addEventListener(h,m,!1)}function Np(a,h,m,b,D){var k=b;if((h&1)===0&&(h&2)===0&&b!==null)e:for(;;){if(b===null)return;var H=b.tag;if(H===3||H===4){var ie=b.stateNode.containerInfo;if(ie===D)break;if(H===4)for(H=b.return;H!==null;){var Te=H.tag;if((Te===3||Te===4)&&H.stateNode.containerInfo===D)return;H=H.return}for(;ie!==null;){if(H=Jo(ie),H===null)return;if(Te=H.tag,Te===5||Te===6||Te===26||Te===27){b=k=H;continue e}ie=ie.parentNode}}b=b.return}wf(function(){var Xe=k,nt=Pi(m),ht=[];e:{var Ke=jf.get(a);if(Ke!==void 0){var Je=yc,Ut=a;switch(a){case"keypress":if(Tr(m)===0)break e;case"keydown":case"keyup":Je=Xd;break;case"focusin":Ut="focus",Je=wn;break;case"focusout":Ut="blur",Je=wn;break;case"beforeblur":case"afterblur":Je=wn;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=Am;break;case _u:case Th:case Ws:Je=uu;break;case Lf:Je=gh;break;case"scroll":case"scrollend":Je=lu;break;case"wheel":Je=Bl;break;case"copy":case"cut":case"paste":Je=Tm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=Kd;break;case"toggle":case"beforetoggle":Je=yh}var ar=(h&4)!==0,Dr=!ar&&(a==="scroll"||a==="scrollend"),je=ar?Ke!==null?Ke+"Capture":null:Ke;ar=[];for(var Ie=Xe,Ye;Ie!==null;){var ct=Ie;if(Ye=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ye===null||je===null||(ct=hi(Ie,je),ct!=null&&ar.push(Kh(Ie,ct,Ye))),Dr)break;Ie=Ie.return}0<ar.length&&(Ke=new Je(Ke,Ut,null,m,nt),ht.push({event:Ke,listeners:ar}))}}if((h&7)===0){e:{if(Ke=a==="mouseover"||a==="pointerover",Je=a==="mouseout"||a==="pointerout",Ke&&m!==gc&&(Ut=m.relatedTarget||m.fromElement)&&(Jo(Ut)||Ut[ir]))break e;if((Je||Ke)&&(Ke=nt.window===nt?nt:(Ke=nt.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Je?(Ut=m.relatedTarget||m.toElement,Je=Xe,Ut=Ut?Jo(Ut):null,Ut!==null&&(Dr=y(Ut),ar=Ut.tag,Ut!==Dr||ar!==5&&ar!==27&&ar!==6)&&(Ut=null)):(Je=null,Ut=Xe),Je!==Ut)){if(ar=fi,ct="onMouseLeave",je="onMouseEnter",Ie="mouse",(a==="pointerout"||a==="pointerover")&&(ar=Kd,ct="onPointerLeave",je="onPointerEnter",Ie="pointer"),Dr=Je==null?Ke:yo(Je),Ye=Ut==null?Ke:yo(Ut),Ke=new ar(ct,Ie+"leave",Je,m,nt),Ke.target=Dr,Ke.relatedTarget=Ye,ct=null,Jo(nt)===Xe&&(ar=new ar(je,Ie+"enter",Ut,m,nt),ar.target=Ye,ar.relatedTarget=Dr,ct=ar),Dr=ct,Je&&Ut)t:{for(ar=Xy,je=Je,Ie=Ut,Ye=0,ct=je;ct;ct=ar(ct))Ye++;ct=0;for(var er=Ie;er;er=ar(er))ct++;for(;0<Ye-ct;)je=ar(je),Ye--;for(;0<ct-Ye;)Ie=ar(Ie),ct--;for(;Ye--;){if(je===Ie||Ie!==null&&je===Ie.alternate){ar=je;break t}je=ar(je),Ie=ar(Ie)}ar=null}else ar=null;Je!==null&&Qh(ht,Ke,Je,ar,!1),Ut!==null&&Dr!==null&&Qh(ht,Dr,Ut,ar,!0)}}e:{if(Ke=Xe?yo(Xe):window,Je=Ke.nodeName&&Ke.nodeName.toLowerCase(),Je==="select"||Je==="input"&&Ke.type==="file")var cr=_h;else if(vh(Ke))if(bh)cr=zf;else{cr=np;var zt=rp}else Je=Ke.nodeName,!Je||Je.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?Xe&&to(Xe.elementType)&&(cr=_h):cr=Of;if(cr&&(cr=cr(a,Xe))){Cf(ht,cr,m,nt);break e}zt&&zt(a,Ke,Xe),a==="focusout"&&Xe&&Ke.type==="number"&&Xe.memoizedProps.value!=null&&su(Ke,"number",Ke.value)}switch(zt=Xe?yo(Xe):window,a){case"focusin":(vh(zt)||zt.contentEditable==="true")&&(Xs=zt,kf=Xe,yu=null);break;case"focusout":yu=kf=Xs=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,ap(ht,m,nt);break;case"selectionchange":if(Nl)break;case"keydown":case"keyup":ap(ht,m,nt)}var fr;if(Ef)e:{switch(a){case"compositionstart":var pr="onCompositionStart";break e;case"compositionend":pr="onCompositionEnd";break e;case"compositionupdate":pr="onCompositionUpdate";break e}pr=void 0}else Ll?Qd(a,m)&&(pr="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(pr="onCompositionStart");pr&&(wc&&m.locale!=="ko"&&(Ll||pr!=="onCompositionStart"?pr==="onCompositionEnd"&&Ll&&(fr=bo()):(sa=nt,Zt="value"in sa?sa.value:sa.textContent,Ll=!0)),zt=Wh(Xe,pr),0<zt.length&&(pr=new bi(pr,a,null,m,nt),ht.push({event:pr,listeners:zt}),fr?pr.data=fr:(fr=Hs(m),fr!==null&&(pr.data=fr)))),(fr=pu?Pf(a,m):Em(a,m))&&(pr=Wh(Xe,"onBeforeInput"),0<pr.length&&(zt=new bi("onBeforeInput","beforeinput",null,m,nt),ht.push({event:zt,listeners:pr}),zt.data=fr)),Q0(ht,a,Xe,m,nt)}Yy(ht,h)})}function Kh(a,h,m){return{instance:a,listener:h,currentTarget:m}}function Wh(a,h){for(var m=h+"Capture",b=[];a!==null;){var D=a,k=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||k===null||(D=hi(a,m),D!=null&&b.unshift(Kh(a,D,k)),D=hi(a,h),D!=null&&b.push(Kh(a,D,k))),a.tag===3)return b;a=a.return}return[]}function Xy(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Qh(a,h,m,b,D){for(var k=h._reactName,H=[];m!==null&&m!==b;){var ie=m,Te=ie.alternate,Xe=ie.stateNode;if(ie=ie.tag,Te!==null&&Te===b)break;ie!==5&&ie!==26&&ie!==27||Xe===null||(Te=Xe,D?(Xe=hi(m,k),Xe!=null&&H.unshift(Kh(m,Xe,Te))):D||(Xe=hi(m,k),Xe!=null&&H.push(Kh(m,Xe,Te)))),m=m.return}H.length!==0&&a.push({event:h,listeners:H})}var Ky=/\r\n?/g,dg=/\u0000|\uFFFD/g;function pg(a){return(typeof a=="string"?a:""+a).replace(Ky,`
`).replace(dg,"")}function Xa(a,h){return h=pg(h),pg(a)===h}function Fr(a,h,m,b,D,k){switch(m){case"children":typeof b=="string"?h==="body"||h==="textarea"&&b===""||zi(a,b):(typeof b=="number"||typeof b=="bigint")&&h!=="body"&&zi(a,""+b);break;case"className":ou(a,"class",b);break;case"tabIndex":ou(a,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":ou(a,m,b);break;case"style":ns(a,b,k);break;case"data":if(h!=="object"){ou(a,"data",b);break}case"src":case"href":if(b===""&&(h!=="a"||m!=="href")){a.removeAttribute(m);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){a.removeAttribute(m);break}b=_o(""+b),a.setAttribute(m,b);break;case"action":case"formAction":if(typeof b=="function"){a.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(m==="formAction"?(h!=="input"&&Fr(a,h,"name",D.name,D,null),Fr(a,h,"formEncType",D.formEncType,D,null),Fr(a,h,"formMethod",D.formMethod,D,null),Fr(a,h,"formTarget",D.formTarget,D,null)):(Fr(a,h,"encType",D.encType,D,null),Fr(a,h,"method",D.method,D,null),Fr(a,h,"target",D.target,D,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){a.removeAttribute(m);break}b=_o(""+b),a.setAttribute(m,b);break;case"onClick":b!=null&&(a.onclick=Na);break;case"onScroll":b!=null&&Mr("scroll",a);break;case"onScrollEnd":b!=null&&Mr("scrollend",a);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(o(61));if(m=b.__html,m!=null){if(D.children!=null)throw Error(o(60));a.innerHTML=m}}break;case"multiple":a.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":a.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){a.removeAttribute("xlink:href");break}m=_o(""+b),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?a.setAttribute(m,""+b):a.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?a.setAttribute(m,""):a.removeAttribute(m);break;case"capture":case"download":b===!0?a.setAttribute(m,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?a.setAttribute(m,b):a.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?a.setAttribute(m,b):a.removeAttribute(m);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?a.removeAttribute(m):a.setAttribute(m,b);break;case"popover":Mr("beforetoggle",a),Mr("toggle",a),au(a,"popover",b);break;case"xlinkActuate":aa(a,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":aa(a,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":aa(a,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":aa(a,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":aa(a,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":aa(a,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":aa(a,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":aa(a,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":aa(a,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":au(a,"is",b);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=zl.get(m)||m,au(a,m,b))}}function $u(a,h,m,b,D,k){switch(m){case"style":ns(a,b,k);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(o(61));if(m=b.__html,m!=null){if(D.children!=null)throw Error(o(60));a.innerHTML=m}}break;case"children":typeof b=="string"?zi(a,b):(typeof b=="number"||typeof b=="bigint")&&zi(a,""+b);break;case"onScroll":b!=null&&Mr("scroll",a);break;case"onScrollEnd":b!=null&&Mr("scrollend",a);break;case"onClick":b!=null&&(a.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(D=m.endsWith("Capture"),h=m.slice(2,D?m.length-7:void 0),k=a[$t]||null,k=k!=null?k[m]:null,typeof k=="function"&&a.removeEventListener(h,k,D),typeof b=="function")){typeof k!="function"&&k!==null&&(m in a?a[m]=null:a.hasAttribute(m)&&a.removeAttribute(m)),a.addEventListener(h,b,D);break e}m in a?a[m]=b:b===!0?a.setAttribute(m,""):au(a,m,b)}}}function $n(a,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mr("error",a),Mr("load",a);var b=!1,D=!1,k;for(k in m)if(m.hasOwnProperty(k)){var H=m[k];if(H!=null)switch(k){case"src":b=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,h));default:Fr(a,h,k,H,m,null)}}D&&Fr(a,h,"srcSet",m.srcSet,m,null),b&&Fr(a,h,"src",m.src,m,null);return;case"input":Mr("invalid",a);var ie=k=H=D=null,Te=null,Xe=null;for(b in m)if(m.hasOwnProperty(b)){var nt=m[b];if(nt!=null)switch(b){case"name":D=nt;break;case"type":H=nt;break;case"checked":Te=nt;break;case"defaultChecked":Xe=nt;break;case"value":k=nt;break;case"defaultValue":ie=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(o(137,h));break;default:Fr(a,h,b,nt,m,null)}}ph(a,k,ie,Te,Xe,H,D,!1);return;case"select":Mr("invalid",a),b=H=k=null;for(D in m)if(m.hasOwnProperty(D)&&(ie=m[D],ie!=null))switch(D){case"value":k=ie;break;case"defaultValue":H=ie;break;case"multiple":b=ie;default:Fr(a,h,D,ie,m,null)}h=k,m=H,a.multiple=!!b,h!=null?pc(a,!!b,h,!1):m!=null&&pc(a,!!b,m,!0);return;case"textarea":Mr("invalid",a),k=D=b=null;for(H in m)if(m.hasOwnProperty(H)&&(ie=m[H],ie!=null))switch(H){case"value":b=ie;break;case"defaultValue":D=ie;break;case"children":k=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(91));break;default:Fr(a,h,H,ie,m,null)}mc(a,b,D,k);return;case"option":for(Te in m)if(m.hasOwnProperty(Te)&&(b=m[Te],b!=null))switch(Te){case"selected":a.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Fr(a,h,Te,b,m,null)}return;case"dialog":Mr("beforetoggle",a),Mr("toggle",a),Mr("cancel",a),Mr("close",a);break;case"iframe":case"object":Mr("load",a);break;case"video":case"audio":for(b=0;b<yd.length;b++)Mr(yd[b],a);break;case"image":Mr("error",a),Mr("load",a);break;case"details":Mr("toggle",a);break;case"embed":case"source":case"link":Mr("error",a),Mr("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in m)if(m.hasOwnProperty(Xe)&&(b=m[Xe],b!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,h));default:Fr(a,h,Xe,b,m,null)}return;default:if(to(h)){for(nt in m)m.hasOwnProperty(nt)&&(b=m[nt],b!==void 0&&$u(a,h,nt,b,m,void 0));return}}for(ie in m)m.hasOwnProperty(ie)&&(b=m[ie],b!=null&&Fr(a,h,ie,b,m,null))}function Wy(a,h,m,b){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,k=null,H=null,ie=null,Te=null,Xe=null,nt=null;for(Je in m){var ht=m[Je];if(m.hasOwnProperty(Je)&&ht!=null)switch(Je){case"checked":break;case"value":break;case"defaultValue":Te=ht;default:b.hasOwnProperty(Je)||Fr(a,h,Je,null,b,ht)}}for(var Ke in b){var Je=b[Ke];if(ht=m[Ke],b.hasOwnProperty(Ke)&&(Je!=null||ht!=null))switch(Ke){case"type":k=Je;break;case"name":D=Je;break;case"checked":Xe=Je;break;case"defaultChecked":nt=Je;break;case"value":H=Je;break;case"defaultValue":ie=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(o(137,h));break;default:Je!==ht&&Fr(a,h,Ke,Je,b,ht)}}Vs(a,H,ie,Te,Xe,nt,k,D);return;case"select":Je=H=ie=Ke=null;for(k in m)if(Te=m[k],m.hasOwnProperty(k)&&Te!=null)switch(k){case"value":break;case"multiple":Je=Te;default:b.hasOwnProperty(k)||Fr(a,h,k,null,b,Te)}for(D in b)if(k=b[D],Te=m[D],b.hasOwnProperty(D)&&(k!=null||Te!=null))switch(D){case"value":Ke=k;break;case"defaultValue":ie=k;break;case"multiple":H=k;default:k!==Te&&Fr(a,h,D,k,b,Te)}h=ie,m=H,b=Je,Ke!=null?pc(a,!!m,Ke,!1):!!b!=!!m&&(h!=null?pc(a,!!m,h,!0):pc(a,!!m,m?[]:"",!1));return;case"textarea":Je=Ke=null;for(ie in m)if(D=m[ie],m.hasOwnProperty(ie)&&D!=null&&!b.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Fr(a,h,ie,null,b,D)}for(H in b)if(D=b[H],k=m[H],b.hasOwnProperty(H)&&(D!=null||k!=null))switch(H){case"value":Ke=D;break;case"defaultValue":Je=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(91));break;default:D!==k&&Fr(a,h,H,D,b,k)}Ol(a,Ke,Je);return;case"option":for(var Ut in m)if(Ke=m[Ut],m.hasOwnProperty(Ut)&&Ke!=null&&!b.hasOwnProperty(Ut))switch(Ut){case"selected":a.selected=!1;break;default:Fr(a,h,Ut,null,b,Ke)}for(Te in b)if(Ke=b[Te],Je=m[Te],b.hasOwnProperty(Te)&&Ke!==Je&&(Ke!=null||Je!=null))switch(Te){case"selected":a.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Fr(a,h,Te,Ke,b,Je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ar in m)Ke=m[ar],m.hasOwnProperty(ar)&&Ke!=null&&!b.hasOwnProperty(ar)&&Fr(a,h,ar,null,b,Ke);for(Xe in b)if(Ke=b[Xe],Je=m[Xe],b.hasOwnProperty(Xe)&&Ke!==Je&&(Ke!=null||Je!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(o(137,h));break;default:Fr(a,h,Xe,Ke,b,Je)}return;default:if(to(h)){for(var Dr in m)Ke=m[Dr],m.hasOwnProperty(Dr)&&Ke!==void 0&&!b.hasOwnProperty(Dr)&&$u(a,h,Dr,void 0,b,Ke);for(nt in b)Ke=b[nt],Je=m[nt],!b.hasOwnProperty(nt)||Ke===Je||Ke===void 0&&Je===void 0||$u(a,h,nt,Ke,b,Je);return}}for(var je in m)Ke=m[je],m.hasOwnProperty(je)&&Ke!=null&&!b.hasOwnProperty(je)&&Fr(a,h,je,null,b,Ke);for(ht in b)Ke=b[ht],Je=m[ht],!b.hasOwnProperty(ht)||Ke===Je||Ke==null&&Je==null||Fr(a,h,ht,Ke,b,Je)}function mg(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qy(){if(typeof performance.getEntriesByType=="function"){for(var a=0,h=0,m=performance.getEntriesByType("resource"),b=0;b<m.length;b++){var D=m[b],k=D.transferSize,H=D.initiatorType,ie=D.duration;if(k&&ie&&mg(H)){for(H=0,ie=D.responseEnd,b+=1;b<m.length;b++){var Te=m[b],Xe=Te.startTime;if(Xe>ie)break;var nt=Te.transferSize,ht=Te.initiatorType;nt&&mg(ht)&&(Te=Te.responseEnd,H+=nt*(Te<ie?1:(ie-Xe)/(Te-Xe)))}if(--b,h+=8*(k+H)/(D.duration/1e3),a++,10<a)break}}if(0<a)return h/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Fp=null,gg=null;function _d(a){return a.nodeType===9?a:a.ownerDocument}function ic(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yg(a,h){if(a===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&h==="foreignObject"?0:a}function Up(a,h){return a==="textarea"||a==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Gp=null;function Jy(){var a=window.event;return a&&a.type==="popstate"?a===Gp?!1:(Gp=a,!0):(Gp=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,r_=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,tv=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(a){return vg.resolve(null).then(a).catch(Vp)}:ev;function Vp(a){setTimeout(function(){throw a})}function ac(a){return a==="head"}function bd(a,h){var m=h,b=0;do{var D=m.nextSibling;if(a.removeChild(m),D&&D.nodeType===8)if(m=D.data,m==="/$"||m==="/&"){if(b===0){a.removeChild(D),rf(h);return}b--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")b++;else if(m==="html")ef(a.ownerDocument.documentElement);else if(m==="head"){m=a.ownerDocument.head,ef(m);for(var k=m.firstChild;k;){var H=k.nextSibling,ie=k.nodeName;k[Us]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&k.rel.toLowerCase()==="stylesheet"||m.removeChild(k),k=H}}else m==="body"&&ef(a.ownerDocument.body);m=D}while(m);rf(h)}function xd(a,h){var m=a;a=0;do{var b=m.nextSibling;if(m.nodeType===1?h?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(h?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),b&&b.nodeType===8)if(m=b.data,m==="/$"){if(a===0)break;a--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||a++;m=b}while(m)}function Jh(a){var h=a.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Jh(m),go(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}a.removeChild(m)}}function n_(a,h,m,b){for(;a.nodeType===1;){var D=m;if(a.nodeName.toLowerCase()!==h.toLowerCase()){if(!b&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(b){if(!a[Us])switch(h){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(k=a.getAttribute("rel"),k==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(k!==D.rel||a.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||a.getAttribute("title")!==(D.title==null?null:D.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(k=a.getAttribute("src"),(k!==(D.src==null?null:D.src)||a.getAttribute("type")!==(D.type==null?null:D.type)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&k&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(h==="input"&&a.type==="hidden"){var k=D.name==null?null:""+D.name;if(D.type==="hidden"&&a.getAttribute("name")===k)return a}else return a;if(a=co(a.nextSibling),a===null)break}return null}function i_(a,h,m){if(h==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!m||(a=co(a.nextSibling),a===null))return null;return a}function rv(a,h){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=co(a.nextSibling),a===null))return null;return a}function Kc(a){return a.data==="$?"||a.data==="$~"}function Mi(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function _g(a,h){var m=a.ownerDocument;if(a.data==="$~")a._reactRetry=h;else if(a.data!=="$?"||m.readyState!=="loading")h();else{var b=function(){h(),m.removeEventListener("DOMContentLoaded",b)};m.addEventListener("DOMContentLoaded",b),a._reactRetry=b}}function co(a){for(;a!=null;a=a.nextSibling){var h=a.nodeType;if(h===1||h===3)break;if(h===8){if(h=a.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return a}var qp=null;function $p(a){a=a.nextSibling;for(var h=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"||m==="/&"){if(h===0)return co(a.nextSibling);h--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||h++}a=a.nextSibling}return null}function nv(a){a=a.previousSibling;for(var h=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(h===0)return a;h--}else m!=="/$"&&m!=="/&"||h++}a=a.previousSibling}return null}function bg(a,h,m){switch(h=_d(m),a){case"html":if(a=h.documentElement,!a)throw Error(o(452));return a;case"head":if(a=h.head,!a)throw Error(o(453));return a;case"body":if(a=h.body,!a)throw Error(o(454));return a;default:throw Error(o(451))}}function ef(a){for(var h=a.attributes;h.length;)a.removeAttributeNode(h[0]);go(a)}var $o=new Map,xg=new Set;function tf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ws=ot.d;ot.d={f:iv,r:wd,D:Sg,C:Zp,L:Sd,m:Tg,X:Mg,S:Ag,M:a_};function iv(){var a=ws.f(),h=Dp();return a||h}function wd(a){var h=$i(a);h!==null&&h.tag===5&&h.type==="form"?lp(h):ws.r(a)}var Wc=typeof document>"u"?null:document;function wg(a,h,m){var b=Wc;if(b&&typeof h=="string"&&h){var D=oa(h);D='link[rel="'+a+'"][href="'+D+'"]',typeof m=="string"&&(D+='[crossorigin="'+m+'"]'),xg.has(D)||(xg.add(D),a={rel:a,crossOrigin:m,href:h},b.querySelector(D)===null&&(h=b.createElement("link"),$n(h,"link",a),Un(h),b.head.appendChild(h)))}}function Sg(a){ws.D(a),wg("dns-prefetch",a,null)}function Zp(a,h){ws.C(a,h),wg("preconnect",a,h)}function Sd(a,h,m){ws.L(a,h,m);var b=Wc;if(b&&a&&h){var D='link[rel="preload"][as="'+oa(h)+'"]';h==="image"&&m&&m.imageSrcSet?(D+='[imagesrcset="'+oa(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(D+='[imagesizes="'+oa(m.imageSizes)+'"]')):D+='[href="'+oa(a)+'"]';var k=D;switch(h){case"style":k=n(a);break;case"script":k=x(a)}$o.has(k)||(a=z({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:a,as:h},m),$o.set(k,a),b.querySelector(D)!==null||h==="style"&&b.querySelector(s(k))||h==="script"&&b.querySelector(T(k))||(h=b.createElement("link"),$n(h,"link",a),Un(h),b.head.appendChild(h)))}}function Tg(a,h){ws.m(a,h);var m=Wc;if(m&&a){var b=h&&typeof h.as=="string"?h.as:"script",D='link[rel="modulepreload"][as="'+oa(b)+'"][href="'+oa(a)+'"]',k=D;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=x(a)}if(!$o.has(k)&&(a=z({rel:"modulepreload",href:a},h),$o.set(k,a),m.querySelector(D)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(T(k)))return}b=m.createElement("link"),$n(b,"link",a),Un(b),m.head.appendChild(b)}}}function Ag(a,h,m){ws.S(a,h,m);var b=Wc;if(b&&a){var D=rn(b).hoistableStyles,k=n(a);h=h||"default";var H=D.get(k);if(!H){var ie={loading:0,preload:null};if(H=b.querySelector(s(k)))ie.loading=5;else{a=z({rel:"stylesheet",href:a,"data-precedence":h},m),(m=$o.get(k))&&B(a,m);var Te=H=b.createElement("link");Un(Te),$n(Te,"link",a),Te._p=new Promise(function(Xe,nt){Te.onload=Xe,Te.onerror=nt}),Te.addEventListener("load",function(){ie.loading|=1}),Te.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,I(H,h,b)}H={type:"stylesheet",instance:H,count:1,state:ie},D.set(k,H)}}}function Mg(a,h){ws.X(a,h);var m=Wc;if(m&&a){var b=rn(m).hoistableScripts,D=x(a),k=b.get(D);k||(k=m.querySelector(T(D)),k||(a=z({src:a,async:!0},h),(h=$o.get(D))&&F(a,h),k=m.createElement("script"),Un(k),$n(k,"link",a),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},b.set(D,k))}}function a_(a,h){ws.M(a,h);var m=Wc;if(m&&a){var b=rn(m).hoistableScripts,D=x(a),k=b.get(D);k||(k=m.querySelector(T(D)),k||(a=z({src:a,async:!0,type:"module"},h),(h=$o.get(D))&&F(a,h),k=m.createElement("script"),Un(k),$n(k,"link",a),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},b.set(D,k))}}function l(a,h,m,b){var D=(D=Gt.current)?tf(D):null;if(!D)throw Error(o(446));switch(a){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=n(m.href),m=rn(D).hoistableStyles,b=m.get(h),b||(b={type:"style",instance:null,count:0,state:null},m.set(h,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){a=n(m.href);var k=rn(D).hoistableStyles,H=k.get(a);if(H||(D=D.ownerDocument||D,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(a,H),(k=D.querySelector(s(a)))&&!k._p&&(H.instance=k,H.state.loading=5),$o.has(a)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},$o.set(a,m),k||v(D,a,m,H.state))),h&&b===null)throw Error(o(528,""));return H}if(h&&b!==null)throw Error(o(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=x(m),m=rn(D).hoistableScripts,b=m.get(h),b||(b={type:"script",instance:null,count:0,state:null},m.set(h,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,a))}}function n(a){return'href="'+oa(a)+'"'}function s(a){return'link[rel="stylesheet"]['+a+"]"}function f(a){return z({},a,{"data-precedence":a.precedence,precedence:null})}function v(a,h,m,b){a.querySelector('link[rel="preload"][as="style"]['+h+"]")?b.loading=1:(h=a.createElement("link"),b.preload=h,h.addEventListener("load",function(){return b.loading|=1}),h.addEventListener("error",function(){return b.loading|=2}),$n(h,"link",m),Un(h),a.head.appendChild(h))}function x(a){return'[src="'+oa(a)+'"]'}function T(a){return"script[async]"+a}function M(a,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var b=a.querySelector('style[data-href~="'+oa(m.href)+'"]');if(b)return h.instance=b,Un(b),b;var D=z({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return b=(a.ownerDocument||a).createElement("style"),Un(b),$n(b,"style",D),I(b,m.precedence,a),h.instance=b;case"stylesheet":D=n(m.href);var k=a.querySelector(s(D));if(k)return h.state.loading|=4,h.instance=k,Un(k),k;b=f(m),(D=$o.get(D))&&B(b,D),k=(a.ownerDocument||a).createElement("link"),Un(k);var H=k;return H._p=new Promise(function(ie,Te){H.onload=ie,H.onerror=Te}),$n(k,"link",b),h.state.loading|=4,I(k,m.precedence,a),h.instance=k;case"script":return k=x(m.src),(D=a.querySelector(T(k)))?(h.instance=D,Un(D),D):(b=m,(D=$o.get(k))&&(b=z({},m),F(b,D)),a=a.ownerDocument||a,D=a.createElement("script"),Un(D),$n(D,"link",b),a.head.appendChild(D),h.instance=D);case"void":return null;default:throw Error(o(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(b=h.instance,h.state.loading|=4,I(b,m.precedence,a));return h.instance}function I(a,h,m){for(var b=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=b.length?b[b.length-1]:null,k=D,H=0;H<b.length;H++){var ie=b[H];if(ie.dataset.precedence===h)k=ie;else if(k!==D)break}k?k.parentNode.insertBefore(a,k.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(a,h.firstChild))}function B(a,h){a.crossOrigin==null&&(a.crossOrigin=h.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=h.referrerPolicy),a.title==null&&(a.title=h.title)}function F(a,h){a.crossOrigin==null&&(a.crossOrigin=h.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=h.referrerPolicy),a.integrity==null&&(a.integrity=h.integrity)}var V=null;function Y(a,h,m){if(V===null){var b=new Map,D=V=new Map;D.set(m,b)}else D=V,b=D.get(m),b||(b=new Map,D.set(m,b));if(b.has(a))return b;for(b.set(a,null),m=m.getElementsByTagName(a),D=0;D<m.length;D++){var k=m[D];if(!(k[Us]||k[ut]||a==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var H=k.getAttribute(h)||"";H=a+H;var ie=b.get(H);ie?ie.push(k):b.set(H,[k])}}return b}function Q(a,h,m){a=a.ownerDocument||a,a.head.insertBefore(m,h==="title"?a.querySelector("head > title"):null)}function J(a,h,m){if(m===1||h.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return a=h.disabled,typeof h.precedence=="string"&&a==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function ne(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function ce(a,h,m,b){if(m.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var D=n(b.href),k=h.querySelector(s(D));if(k){h=k._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(a.count++,a=be.bind(a),h.then(a,a)),m.state.loading|=4,m.instance=k,Un(k);return}k=h.ownerDocument||h,b=f(b),(D=$o.get(D))&&B(b,D),k=k.createElement("link"),Un(k);var H=k;H._p=new Promise(function(ie,Te){H.onload=ie,H.onerror=Te}),$n(k,"link",b),m.instance=k}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(a.count++,m=be.bind(a),h.addEventListener("load",m),h.addEventListener("error",m))}}var me=0;function ze(a,h){return a.stylesheets&&a.count===0&&Fe(a,a.stylesheets),0<a.count||0<a.imgCount?function(m){var b=setTimeout(function(){if(a.stylesheets&&Fe(a,a.stylesheets),a.unsuspend){var k=a.unsuspend;a.unsuspend=null,k()}},6e4+h);0<a.imgBytes&&me===0&&(me=62500*Qy());var D=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Fe(a,a.stylesheets),a.unsuspend)){var k=a.unsuspend;a.unsuspend=null,k()}},(a.imgBytes>me?50:800)+h);return a.unsuspend=m,function(){a.unsuspend=null,clearTimeout(b),clearTimeout(D)}}:null}function be(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fe(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Se=null;function Fe(a,h){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Se=new Map,h.forEach(We,a),Se=null,be.call(a))}function We(a,h){if(!(h.state.loading&4)){var m=Se.get(a);if(m)var b=m.get(null);else{m=new Map,Se.set(a,m);for(var D=a.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<D.length;k++){var H=D[k];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(m.set(H.dataset.precedence,H),b=H)}b&&m.set(null,b)}D=h.instance,H=D.getAttribute("data-precedence"),k=m.get(H)||b,k===b&&m.set(null,D),m.set(H,D),this.count++,b=be.bind(this),D.addEventListener("load",b),D.addEventListener("error",b),k?k.parentNode.insertBefore(D,k.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(D,a.firstChild)),h.state.loading|=4}}var lt={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Dt,_currentValue2:Dt,_threadCount:0};function At(a,h,m,b,D,k,H,ie,Te){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=An(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=An(0),this.hiddenUpdates=An(null),this.identifierPrefix=b,this.onUncaughtError=D,this.onCaughtError=k,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function _t(a,h,m,b,D,k,H,ie,Te,Xe,nt,ht){return a=new At(a,h,m,H,Te,Xe,nt,ht,ie),h=1,k===!0&&(h|=24),k=ca(3,null,null,h),a.current=k,k.stateNode=a,h=ha(),h.refCount++,a.pooledCache=h,h.refCount++,k.memoizedState={element:b,isDehydrated:m,cache:h},Lr(k),a}function Tt(a){return a?(a=Po,a):Po}function Nt(a,h,m,b,D,k){D=Tt(D),b.context===null?b.context=D:b.pendingContext=D,b=ao(h),b.payload={element:m},k=k===void 0?null:k,k!==null&&(b.callback=k),m=oo(a,b,h),m!==null&&(Ya(m,a,h),Hl(m,a,h))}function wt(a,h){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<h?m:h}}function St(a,h){wt(a,h),(a=a.alternate)&&wt(a,h)}function tt(a){if(a.tag===13||a.tag===31){var h=Qs(a,67108864);h!==null&&Ya(h,a,67108864),St(a,67108864)}}function Xt(a){if(a.tag===13||a.tag===31){var h=Ha();h=rt(h);var m=Qs(a,h);m!==null&&Ya(m,a,h),St(a,h)}}var Jt=!0;function qt(a,h,m,b){var D=$e.T;$e.T=null;var k=ot.p;try{ot.p=2,Sr(a,h,m,b)}finally{ot.p=k,$e.T=D}}function Bt(a,h,m,b){var D=$e.T;$e.T=null;var k=ot.p;try{ot.p=8,Sr(a,h,m,b)}finally{ot.p=k,$e.T=D}}function Sr(a,h,m,b){if(Jt){var D=_n(b);if(D===null)Np(a,h,b,Nn,m),gi(a,b);else if(yi(D,a,h,m,b))b.stopPropagation();else if(gi(a,b),h&4&&-1<uo.indexOf(a)){for(;D!==null;){var k=$i(D);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var H=Yt(k.pendingLanes);if(H!==0){var ie=k;for(ie.pendingLanes|=2,ie.entangledLanes|=2;H;){var Te=1<<31-Ne(H);ie.entanglements[1]|=Te,H&=~Te}qo(k),(Zr&6)===0&&(Ep=li()+500,md(0))}}break;case 31:case 13:ie=Qs(k,2),ie!==null&&Ya(ie,k,2),Dp(),St(k,2)}if(k=_n(b),k===null&&Np(a,h,b,Nn,m),k===D)break;D=k}D!==null&&b.stopPropagation()}else Np(a,h,b,null,m)}}function _n(a){return a=Pi(a),Ei(a)}var Nn=null;function Ei(a){if(Nn=null,a=Jo(a),a!==null){var h=y(a);if(h===null)a=null;else{var m=h.tag;if(m===13){if(a=g(h),a!==null)return a;a=null}else if(m===31){if(a=u(h),a!==null)return a;a=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;a=null}else h!==a&&(a=null)}}return Nn=a,null}function Ka(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(js()){case Ko:return 2;case Wo:return 8;case Qo:case De:return 32;case ee:return 268435456;default:return 32}default:return 32}}var Qi=!1,Sn=null,Ur=null,bn=null,Zn=new Map,Hn=new Map,Yn=[],uo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gi(a,h){switch(a){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Zn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(h.pointerId)}}function Ii(a,h,m,b,D,k){return a===null||a.nativeEvent!==k?(a={blockedOn:h,domEventName:m,eventSystemFlags:b,nativeEvent:k,targetContainers:[D]},h!==null&&(h=$i(h),h!==null&&tt(h)),a):(a.eventSystemFlags|=b,h=a.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),a)}function yi(a,h,m,b,D){switch(h){case"focusin":return Sn=Ii(Sn,a,h,m,b,D),!0;case"dragenter":return Ur=Ii(Ur,a,h,m,b,D),!0;case"mouseover":return bn=Ii(bn,a,h,m,b,D),!0;case"pointerover":var k=D.pointerId;return Zn.set(k,Ii(Zn.get(k)||null,a,h,m,b,D)),!0;case"gotpointercapture":return k=D.pointerId,Hn.set(k,Ii(Hn.get(k)||null,a,h,m,b,D)),!0}return!1}function vi(a){var h=Jo(a.target);if(h!==null){var m=y(h);if(m!==null){if(h=m.tag,h===13){if(h=g(m),h!==null){a.blockedOn=h,Ns(a.priority,function(){Xt(m)});return}}else if(h===31){if(h=u(m),h!==null){a.blockedOn=h,Ns(a.priority,function(){Xt(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xn(a){if(a.blockedOn!==null)return!1;for(var h=a.targetContainers;0<h.length;){var m=_n(a.nativeEvent);if(m===null){m=a.nativeEvent;var b=new m.constructor(m.type,m);gc=b,m.target.dispatchEvent(b),gc=null}else return h=$i(m),h!==null&&tt(h),a.blockedOn=m,!1;h.shift()}return!0}function Kn(a,h,m){Xn(a)&&m.delete(h)}function yn(){Qi=!1,Sn!==null&&Xn(Sn)&&(Sn=null),Ur!==null&&Xn(Ur)&&(Ur=null),bn!==null&&Xn(bn)&&(bn=null),Zn.forEach(Kn),Hn.forEach(Kn)}function Wa(a,h){a.blockedOn===h&&(a.blockedOn=null,Qi||(Qi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yn)))}var oc=null;function Zo(a){oc!==a&&(oc=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){oc===a&&(oc=null);for(var h=0;h<a.length;h+=3){var m=a[h],b=a[h+1],D=a[h+2];if(typeof b!="function"){if(Ei(b||m)===null)continue;break}var k=$i(m);k!==null&&(a.splice(h,3),h-=3,Bh(k,{pending:!0,data:D,method:m.method,action:b},b,D))}}))}function rf(a){function h(Te){return Wa(Te,a)}Sn!==null&&Wa(Sn,a),Ur!==null&&Wa(Ur,a),bn!==null&&Wa(bn,a),Zn.forEach(h),Hn.forEach(h);for(var m=0;m<Yn.length;m++){var b=Yn[m];b.blockedOn===a&&(b.blockedOn=null)}for(;0<Yn.length&&(m=Yn[0],m.blockedOn===null);)vi(m),m.blockedOn===null&&Yn.shift();if(m=(a.ownerDocument||a).$$reactFormReplay,m!=null)for(b=0;b<m.length;b+=3){var D=m[b],k=m[b+1],H=D[$t]||null;if(typeof k=="function")H||Zo(m);else if(H){var ie=null;if(k&&k.hasAttribute("formAction")){if(D=k,H=k[$t]||null)ie=H.formAction;else if(Ei(D)!==null)continue}else ie=H.action;typeof ie=="function"?m[b+1]=ie:(m.splice(b,3),b-=3),Zo(m)}}}function Zu(){function a(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(H){return D=H})},focusReset:"manual",scroll:"manual"})}function h(){D!==null&&(D(),D=null),b||setTimeout(m,20)}function m(){if(!b&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,D=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(m,100),function(){b=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),D!==null&&(D(),D=null)}}}function sc(a){this._internalRoot=a}lc.prototype.render=sc.prototype.render=function(a){var h=this._internalRoot;if(h===null)throw Error(o(409));var m=h.current,b=Ha();Nt(m,b,a,h,null,null)},lc.prototype.unmount=sc.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var h=a.containerInfo;Nt(a.current,2,null,a,null,null),Dp(),h[ir]=null}};function lc(a){this._internalRoot=a}lc.prototype.unstable_scheduleHydration=function(a){if(a){var h=ia();a={blockedOn:null,target:a,priority:h};for(var m=0;m<Yn.length&&h!==0&&h<Yn[m].priority;m++);Yn.splice(m,0,a),m===0&&vi(a)}};var Hu=t.version;if(Hu!=="19.2.0")throw Error(o(527,Hu,"19.2.0"));ot.findDOMNode=function(a){var h=a._reactInternals;if(h===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=P(h),a=a!==null?C(a):null,a=a===null?null:a.stateNode,a};var nf={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$e,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{_e=Td.inject(nf),we=Td}catch{}}return Pg.createRoot=function(a,h){if(!d(a))throw Error(o(299));var m=!1,b="",D=Zf,k=Dm,H=_y;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(D=h.onUncaughtError),h.onCaughtError!==void 0&&(k=h.onCaughtError),h.onRecoverableError!==void 0&&(H=h.onRecoverableError)),h=_t(a,1,!1,null,null,m,b,null,D,k,H,Zu),a[ir]=h.current,jp(a),new sc(h)},Pg.hydrateRoot=function(a,h,m){if(!d(a))throw Error(o(299));var b=!1,D="",k=Zf,H=Dm,ie=_y,Te=null;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onUncaughtError!==void 0&&(k=m.onUncaughtError),m.onCaughtError!==void 0&&(H=m.onCaughtError),m.onRecoverableError!==void 0&&(ie=m.onRecoverableError),m.formState!==void 0&&(Te=m.formState)),h=_t(a,1,!0,h,m??null,b,D,Te,k,H,ie,Zu),h.context=Tt(null),m=h.current,b=Ha(),b=rt(b),D=ao(b),D.callback=null,oo(m,D,b),m=b,h.current.lanes=m,Mn(h,m),qo(h),a[ir]=h.current,jp(a),new lc(h)},Pg.version="19.2.0",Pg}var Kw;function mD(){if(Kw)return l_.exports;Kw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l_.exports=pD(),l_.exports}var gD=mD();const yD=()=>Ee.jsx("header",{className:"shadow-sm border-b",style:{backgroundColor:"#333333"},children:Ee.jsx("div",{className:"container mx-auto px-4 py-4",children:Ee.jsx("div",{className:"flex items-center justify-between",children:Ee.jsx("div",{className:"flex items-center space-x-2",children:Ee.jsx("span",{className:"text-xl font-bold text-white",children:"UNFPA"})})})})}),vD="/assets/banner-BsAsyYIm.jpg",_D=()=>Ee.jsxs("div",{className:"relative w-full h-96 md:h-[600px]",children:[Ee.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(${vD})`},children:Ee.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-70 bg-gradient-to-t from-white to-transparent"})}),Ee.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Ee.jsxs("div",{className:"text-center text-white px-4",children:[Ee.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Anugul from Space"}),Ee.jsx("p",{className:"text-xl md:text-2xl opacity-90",children:"A Data-Driven Story of Growth and Change"})]})})]});var Ev={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.8.0/LICENSE.txt
 */var bD=Ev.exports,Ww;function xD(){return Ww||(Ww=1,(function(e,t){(function(i,o){e.exports=o()})(bD,(function(){var i={},o={};function d(g,u,E){if(o[g]=E,g==="index"){var P="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",C={};return o.shared(C),o.index(i,C),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}d("shared",["exports"],(function(g){function u(l,n,s,f){return new(s||(s=Promise))((function(v,x){function T(B){try{I(f.next(B))}catch(F){x(F)}}function M(B){try{I(f.throw(B))}catch(F){x(F)}}function I(B){var F;B.done?v(B.value):(F=B.value,F instanceof s?F:new s((function(V){V(F)}))).then(T,M)}I((f=f.apply(l,n||[])).next())}))}function E(l,n){this.x=l,this.y=n}function P(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var C,z;typeof SuppressedError=="function"&&SuppressedError,E.prototype={clone(){return new E(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,n){return this.clone()._rotateAround(l,n)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const n=l.x-this.x,s=l.y-this.y;return n*n+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult(l){const n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const n=Math.cos(l),s=Math.sin(l),f=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=f,this},_rotateAround(l,n){const s=Math.cos(l),f=Math.sin(l),v=n.y+f*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:E},E.convert=function(l){if(l instanceof E)return l;if(Array.isArray(l))return new E(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new E(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var j=(function(){if(z)return C;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return z=1,C=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var x=this.sampleCurveX(f)-n;if(Math.abs(x)<s)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=x/T}var M=0,I=1;for(f=n,v=0;v<20&&(x=this.sampleCurveX(f),!(Math.abs(x-n)<s));v++)n>x?M=f:I=f,f=.5*(I-M)+M;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},C})(),N=P(j);let $,X;function W(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function oe(){if(X==null&&(X=!1,W())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<25;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&s[f]!==f){X=!0;break}}}return X||!1}var le=1e-6,ue=typeof Float32Array<"u"?Float32Array:Array;function Oe(){var l=new ue(9);return ue!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Be(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Le(){var l=new ue(3);return ue!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function qe(l){var n=l[0],s=l[1],f=l[2];return Math.sqrt(n*n+s*s+f*f)}function at(l,n,s){var f=new ue(3);return f[0]=l,f[1]=n,f[2]=s,f}function Mt(l,n,s){return l[0]=n[0]+s[0],l[1]=n[1]+s[1],l[2]=n[2]+s[2],l}function Ot(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l}function ft(l,n,s){var f=n[0],v=n[1],x=n[2],T=s[0],M=s[1],I=s[2];return l[0]=v*I-x*M,l[1]=x*T-f*I,l[2]=f*M-v*T,l}var gt,Ft=qe;function Ht(l,n,s){var f=n[0],v=n[1],x=n[2],T=n[3];return l[0]=s[0]*f+s[4]*v+s[8]*x+s[12]*T,l[1]=s[1]*f+s[5]*v+s[9]*x+s[13]*T,l[2]=s[2]*f+s[6]*v+s[10]*x+s[14]*T,l[3]=s[3]*f+s[7]*v+s[11]*x+s[15]*T,l}function Kt(){var l=new ue(4);return ue!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function $e(l,n,s,f){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;n*=x,f*=x,s*=x;var T=Math.sin(n),M=Math.cos(n),I=Math.sin(s),B=Math.cos(s),F=Math.sin(f),V=Math.cos(f);switch(v){case"xyz":l[0]=T*B*V+M*I*F,l[1]=M*I*V-T*B*F,l[2]=M*B*F+T*I*V,l[3]=M*B*V-T*I*F;break;case"xzy":l[0]=T*B*V-M*I*F,l[1]=M*I*V-T*B*F,l[2]=M*B*F+T*I*V,l[3]=M*B*V+T*I*F;break;case"yxz":l[0]=T*B*V+M*I*F,l[1]=M*I*V-T*B*F,l[2]=M*B*F-T*I*V,l[3]=M*B*V+T*I*F;break;case"yzx":l[0]=T*B*V+M*I*F,l[1]=M*I*V+T*B*F,l[2]=M*B*F-T*I*V,l[3]=M*B*V-T*I*F;break;case"zxy":l[0]=T*B*V-M*I*F,l[1]=M*I*V+T*B*F,l[2]=M*B*F+T*I*V,l[3]=M*B*V-T*I*F;break;case"zyx":l[0]=T*B*V-M*I*F,l[1]=M*I*V+T*B*F,l[2]=M*B*F-T*I*V,l[3]=M*B*V+T*I*F;break;default:throw new Error("Unknown angle order "+v)}return l}function ot(){var l=new ue(2);return ue!=Float32Array&&(l[0]=0,l[1]=0),l}function Dt(l,n){var s=new ue(2);return s[0]=l,s[1]=n,s}Le(),gt=new ue(4),ue!=Float32Array&&(gt[0]=0,gt[1]=0,gt[2]=0,gt[3]=0),Le(),at(1,0,0),at(0,1,0),Kt(),Kt(),Oe(),ot();const bt=8192;function tr(l,n,s){return n*(bt/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function Ae(l,n){return(l%n+n)%n}function Ve(l,n,s){return l*(1-s)+n*s}function xt(l){if(l<=0)return 0;if(l>=1)return 1;const n=l*l,s=n*l;return 4*(l<.5?s:3*(l-n)+s-.75)}function Pt(l,n,s,f){const v=new N(l,n,s,f);return x=>v.solve(x)}const Rt=Pt(.25,.1,.25,1);function Gt(l,n,s){return Math.min(s,Math.max(n,l))}function or(l,n,s){const f=s-n,v=((l-n)%f+f)%f+n;return v===n?s:v}function kr(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}let vt=1;function Wt(l,n,s){const f={};for(const v in l)f[v]=n.call(this,l[v],v,l);return f}function ur(l,n,s){const f={};for(const v in l)n.call(this,l[v],v,l)&&(f[v]=l[v]);return f}function dt(l){return Array.isArray(l)?l.map(dt):typeof l=="object"&&l?Wt(l,dt):l}const _r={};function Qt(l){_r[l]||(typeof console<"u"&&console.warn(l),_r[l]=!0)}function Jr(l,n,s){return(s.y-l.y)*(n.x-l.x)>(n.y-l.y)*(s.x-l.x)}function un(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let qi=null;function na(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ks(l,n,s,f,v){return u(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(l,{timestamp:0});try{const T=x?.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const M=T.startsWith("BGR"),I=new Uint8ClampedArray(f*v*4);if(yield x.copyTo(I,(function(B,F,V,Y,Q){const J=4*Math.max(-F,0),ne=(Math.max(0,V)-V)*Y*4+J,ce=4*Y,me=Math.max(0,F),ze=Math.max(0,V);return{rect:{x:me,y:ze,width:Math.min(B.width,F+Y)-me,height:Math.min(B.height,V+Q)-ze},layout:[{offset:ne,stride:ce}]}})(l,n,s,f,v)),M)for(let B=0;B<I.length;B+=4){const F=I[B];I[B]=I[B+2],I[B+2]=F}return I}finally{x.close()}}))}let mo,Bs;function Ls(l,n,s,f){return l.addEventListener(n,s,f),{unsubscribe:()=>{l.removeEventListener(n,s,f)}}}function li(l){return l*Math.PI/180}function js(l){return l/Math.PI*180}const Ko={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Wo={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Qo="AbortError";function De(){return new Error(Qo)}const ee={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function te(l){return ee.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const se="global-dispatcher";class _e extends Error{constructor(n,s,f,v){super(`AJAXError: ${s} (${n}): ${f}`),this.status=n,this.statusText=s,this.url=f,this.body=v}}const we=()=>un(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ce=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const f=te(l.url);if(f)return f(l,n);if(un(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:se},n)}if(!(/^file:/.test(s=l.url)||/^file:/.test(we())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,v){return u(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:we(),signal:v.signal});let T,M;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{T=yield fetch(x)}catch(B){throw new _e(0,B.message,f.url,new Blob)}if(!T.ok){const B=yield T.blob();throw new _e(T.status,T.statusText,f.url,B)}M=f.type==="arrayBuffer"||f.type==="image"?T.arrayBuffer():f.type==="json"?T.json():T.text();const I=yield M;if(v.signal.aborted)throw De();return{data:I,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}}))})(l,n);if(un(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:se},n)}var s;return(function(f,v){return new Promise(((x,T)=>{var M;const I=new XMLHttpRequest;I.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(I.responseType="arraybuffer");for(const B in f.headers)I.setRequestHeader(B,f.headers[B]);f.type==="json"&&(I.responseType="text",!((M=f.headers)===null||M===void 0)&&M.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=f.credentials==="include",I.onerror=()=>{T(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let B=I.response;if(f.type==="json")try{B=JSON.parse(I.response)}catch(F){return void T(F)}x({data:B,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const B=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});T(new _e(I.status,I.statusText,f.url,B))}},v.signal.addEventListener("abort",(()=>{I.abort(),T(De())})),I.send(f.body)}))})(l,n)};function Ne(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const n=new URL(l),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function ke(l,n,s){s[l]&&s[l].indexOf(n)!==-1||(s[l]=s[l]||[],s[l].push(n))}function Qe(l,n,s){if(s&&s[l]){const f=s[l].indexOf(n);f!==-1&&s[l].splice(f,1)}}class pt{constructor(n,s={}){kr(this,s),this.type=n}}class et extends pt{constructor(n,s={}){super("error",kr({error:n},s))}}class It{on(n,s){return this._listeners=this._listeners||{},ke(n,s,this._listeners),{unsubscribe:()=>{this.off(n,s)}}}off(n,s){return Qe(n,s,this._listeners),Qe(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},ke(n,s,this._oneTimeListeners),this):new Promise((f=>this.once(n,f)))}fire(n,s){typeof n=="string"&&(n=new pt(n,s||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const M of v)M.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const M of x)Qe(f,M,this._oneTimeListeners),M.call(this,n);const T=this._eventedParent;T&&(kr(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(n))}else n instanceof et&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Yt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gr(l,n){const s={};for(const f in l)f!=="ref"&&(s[f]=l[f]);return Yt.forEach((f=>{f in n&&(s[f]=n[f])})),s}function Lt(l,n){if(Array.isArray(l)){if(!Array.isArray(n)||l.length!==n.length)return!1;for(let s=0;s<l.length;s++)if(!Lt(l[s],n[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&n!==null){if(typeof n!="object"||Object.keys(l).length!==Object.keys(n).length)return!1;for(const s in l)if(!Lt(l[s],n[s]))return!1;return!0}return l===n}function hr(l,n){l.push(n)}function en(l,n,s){hr(s,{command:"addSource",args:[l,n[l]]})}function An(l,n,s){hr(n,{command:"removeSource",args:[l]}),s[l]=!0}function Mn(l,n,s,f){An(l,s,f),en(l,n,s)}function ci(l,n,s){let f;for(f in l[s])if(Object.prototype.hasOwnProperty.call(l[s],f)&&f!=="data"&&!Lt(l[s][f],n[s][f]))return!1;for(f in n[s])if(Object.prototype.hasOwnProperty.call(n[s],f)&&f!=="data"&&!Lt(l[s][f],n[s][f]))return!1;return!0}function ei(l,n,s,f,v,x){l=l||{},n=n||{};for(const T in l)Object.prototype.hasOwnProperty.call(l,T)&&(Lt(l[T],n[T])||s.push({command:x,args:[f,T,n[T],v]}));for(const T in n)Object.prototype.hasOwnProperty.call(n,T)&&!Object.prototype.hasOwnProperty.call(l,T)&&(Lt(l[T],n[T])||s.push({command:x,args:[f,T,n[T],v]}))}function tn(l){return l.id}function Bn(l,n){return l[n.id]=n,l}class rt{constructor(n,s,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),s!=null&&s.__line__&&(this.line=s.__line__)}}function En(l,...n){for(const s of n)for(const f in s)l[f]=s[f];return l}class ia extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ns{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[f,v]of s)this.bindings[f]=v}concat(n){return new Ns(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Pn={kind:"null"},ut={kind:"number"},$t={kind:"string"},ir={kind:"boolean"},ui={kind:"color"},Il={kind:"projectionDefinition"},Fs={kind:"object"},sr={kind:"value"},Us={kind:"collator"},go={kind:"formatted"},Jo={kind:"padding"},$i={kind:"colorArray"},yo={kind:"numberArray"},rn={kind:"resolvedImage"},Un={kind:"variableAnchorOffsetCollection"};function Zi(l,n){return{kind:"array",itemType:l,N:n}}function Hr(l){if(l.kind==="array"){const n=Hr(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}const Gs=[Pn,ut,$t,ir,ui,Il,go,Fs,Zi(sr),Jo,yo,$i,rn,Un];function vo(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!vo(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(const s of Gs)if(!vo(s,n))return null}}return`Expected ${Hr(l)} but found ${Hr(n)} instead.`}function vf(l,n){return n.some((s=>s.kind===l.kind))}function es(l,n){return n.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function ts(l,n){return l.kind==="array"&&n.kind==="array"?l.itemType.kind===n.itemType.kind&&typeof l.N=="number":l.kind===n.kind}const _f=.96422,au=.82521,ou=4/29,aa=6/29,Aa=3*aa*aa,Hd=aa*aa*aa,Sm=Math.PI/180,bf=180/Math.PI;function dh(l){return(l%=360)<0&&(l+=360),l}function rs([l,n,s,f]){let v,x;const T=oa((.2225045*(l=xf(l))+.7168786*(n=xf(n))+.0606169*(s=xf(s)))/1);l===n&&n===s?v=x=T:(v=oa((.4360747*l+.3850649*n+.1430804*s)/_f),x=oa((.0139322*l+.0971045*n+.7141733*s)/au));const M=116*T-16;return[M<0?0:M,500*(v-T),200*(T-x),f]}function xf(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function oa(l){return l>Hd?Math.pow(l,1/3):l/Aa+ou}function Vs([l,n,s,f]){let v=(l+16)/116,x=isNaN(n)?v:v+n/500,T=isNaN(s)?v:v-s/200;return v=1*su(v),x=_f*su(x),T=au*su(T),[ph(3.1338561*x-1.6168667*v-.4906146*T),ph(-.9787684*x+1.9161415*v+.033454*T),ph(.0719453*x-.2289914*v+1.4052427*T),f]}function ph(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function su(l){return l>aa?l*l*l:Aa*(l-ou)}const pc=Object.hasOwn||function(l,n){return Object.prototype.hasOwnProperty.call(l,n)};function Ol(l,n){return pc(l,n)?l[n]:void 0}function mc(l){return parseInt(l.padEnd(2,l),16)/255}function zi(l,n){return br(n?l/100:l,0,1)}function br(l,n,s){return Math.min(Math.max(n,l),s)}function qs(l){return!l.some(Number.isNaN)}const ns={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function to(l,n,s){return l+s*(n-l)}function zl(l,n,s){return l.map(((f,v)=>to(f,n[v],s)))}class xr{constructor(n,s,f,v=1,x=!0){this.r=n,this.g=s,this.b=f,this.a=v,x||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,s,f,v]))}static parse(n){if(n instanceof xr)return n;if(typeof n!="string")return;const s=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=Ol(ns,f);if(v){const[T,M,I]=v;return[T/255,M/255,I/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const T=f.length<6?1:2;let M=1;return[mc(f.slice(M,M+=T)),mc(f.slice(M,M+=T)),mc(f.slice(M,M+=T)),mc(f.slice(M,M+T)||"ff")]}if(f.startsWith("rgb")){const T=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[M,I,B,F,V,Y,Q,J,ne,ce,me,ze]=T,be=[F||" ",Q||" ",ce].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Se=[B,Y,ne].join(""),Fe=Se==="%%%"?100:Se===""?255:0;if(Fe){const We=[br(+I/Fe,0,1),br(+V/Fe,0,1),br(+J/Fe,0,1),me?zi(+me,ze):1];if(qs(We))return We}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[T,M,I,B,F,V,Y,Q,J]=x,ne=[I||" ",F||" ",Y].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const ce=[+M,br(+B,0,100),br(+V,0,100),Q?zi(+Q,J):1];if(qs(ce))return(function([me,ze,be,Se]){function Fe(We){const lt=(We+me/30)%12,At=ze*Math.min(be,1-be);return be-At*Math.max(-1,Math.min(lt-3,9-lt,1))}return me=dh(me),ze/=100,be/=100,[Fe(0),Fe(8),Fe(4),Se]})(ce)}}})(n);return s?new xr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:f,a:v}=this,x=v||1/0;return this.overwriteGetter("rgb",[n/x,s/x,f/x,v])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[s,f,v,x]=rs(n),T=Math.sqrt(f*f+v*v);return[Math.round(1e4*T)?dh(Math.atan2(v,f)*bf):NaN,T,s,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",rs(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,f,v]=this.rgb;return`rgba(${[n,s,f].map((x=>Math.round(255*x))).join(",")},${v})`}static interpolate(n,s,f,v="rgb"){switch(v){case"rgb":{const[x,T,M,I]=zl(n.rgb,s.rgb,f);return new xr(x,T,M,I,!1)}case"hcl":{const[x,T,M,I]=n.hcl,[B,F,V,Y]=s.hcl;let Q,J;if(isNaN(x)||isNaN(B))isNaN(x)?isNaN(B)?Q=NaN:(Q=B,M!==1&&M!==0||(J=F)):(Q=x,V!==1&&V!==0||(J=T));else{let be=B-x;B>x&&be>180?be-=360:B<x&&x-B>180&&(be+=360),Q=x+f*be}const[ne,ce,me,ze]=(function([be,Se,Fe,We]){return be=isNaN(be)?0:be*Sm,Vs([Fe,Math.cos(be)*Se,Math.sin(be)*Se,We])})([Q,J??to(T,F,f),to(M,V,f),to(I,Y,f)]);return new xr(ne,ce,me,ze,!1)}case"lab":{const[x,T,M,I]=Vs(zl(n.lab,s.lab,f));return new xr(x,T,M,I,!1)}}}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class _o{constructor(n,s,f){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Na=["bottom","center","top"];class gc{constructor(n,s,f,v,x,T){this.text=n,this.image=s,this.scale=f,this.fontStack=v,this.textColor=x,this.verticalAlign=T}}class Pi{constructor(n){this.sections=n}static fromString(n){return new Pi([new gc(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Pi?n:Pi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class Cn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Cn)return n;if(typeof n=="number")return new Cn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Cn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new Cn(zl(n.values,s.values,f))}}class ti{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ti)return n;if(typeof n=="number")return new ti([n]);if(Array.isArray(n)){for(const s of n)if(typeof s!="number")return;return new ti(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){return new ti(zl(n.values,s.values,f))}}class Gn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Gn)return n;if(typeof n=="string"){const f=xr.parse(n);return f?new Gn([f]):void 0}if(!Array.isArray(n))return;const s=[];for(const f of n){if(typeof f!="string")return;const v=xr.parse(f);if(!v)return;s.push(v)}return new Gn(s)}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f,v="rgb"){const x=[];if(n.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let T=0;T<n.values.length;T++)x.push(xr.interpolate(n.values[T],s.values[T],f,v));return new Gn(x)}}class Gr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const wf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const f=n[s],v=n[s+1];if(typeof f!="string"||!wf.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new hi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,f){const v=n.values,x=s.values;if(v.length!==x.length)throw new Gr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${s.toString()}`);const T=[];for(let M=0;M<v.length;M+=2){if(v[M]!==x[M])throw new Gr(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${v[M]}, to[${M}]: ${x[M]}`);T.push(v[M]);const[I,B]=v[M+1],[F,V]=x[M+1];T.push([to(I,F,f),to(B,V,f)])}return new hi(T)}}class Vn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Vn({name:n,available:!1}):null}}class _i{constructor(n,s,f){this.from=n,this.to=s,this.transition=f}static interpolate(n,s,f){return new _i(n,s,f)}static parse(n){return n instanceof _i?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new _i(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new _i(n.from,n.to,n.transition):typeof n=="string"?new _i(n,n,1):void 0}}function Vr(l,n,s,f){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,n,s,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,n,s,f]:[l,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sa(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof _i||l instanceof xr||l instanceof _o||l instanceof Pi||l instanceof Cn||l instanceof ti||l instanceof Gn||l instanceof hi||l instanceof Vn)return!0;if(Array.isArray(l)){for(const n of l)if(!sa(n))return!1;return!0}if(typeof l=="object"){for(const n in l)if(!sa(l[n]))return!1;return!0}return!1}function Zt(l){if(l===null)return Pn;if(typeof l=="string")return $t;if(typeof l=="boolean")return ir;if(typeof l=="number")return ut;if(l instanceof xr)return ui;if(l instanceof _i)return Il;if(l instanceof _o)return Us;if(l instanceof Pi)return go;if(l instanceof Cn)return Jo;if(l instanceof ti)return yo;if(l instanceof Gn)return $i;if(l instanceof hi)return Un;if(l instanceof Vn)return rn;if(Array.isArray(l)){const n=l.length;let s;for(const f of l){const v=Zt(f);if(s){if(s===v)continue;s=sr;break}s=v}return Zi(s||sr,n)}return Fs}function rr(l){const n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof xr||l instanceof _i||l instanceof Pi||l instanceof Cn||l instanceof ti||l instanceof Gn||l instanceof hi||l instanceof Vn?l.toString():JSON.stringify(l)}class bo{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!sa(n[1]))return s.error("invalid value");const f=n[1];let v=Zt(f);const x=s.expectedType;return v.kind!=="array"||v.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(v=x),new bo(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Tr={string:$t,number:ut,boolean:ir,object:Fs};class Ri{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f,v=1;const x=n[0];if(x==="array"){let M,I;if(n.length>2){const B=n[1];if(typeof B!="string"||!(B in Tr)||B==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);M=Tr[B],v++}else M=sr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],v++}f=Zi(M,I)}else{if(!Tr[x])throw new Error(`Types doesn't contain name = ${x}`);f=Tr[x]}const T=[];for(;v<n.length;v++){const M=s.parse(n[v],v,sr);if(!M)return null;T.push(M)}return new Ri(f,T)}evaluate(n){for(let s=0;s<this.args.length;s++){const f=this.args[s].evaluate(n);if(!vo(this.type,Zt(f)))return f;if(s===this.args.length-1)throw new Gr(`Expected value to be of type ${Hr(this.type)}, but found ${Hr(Zt(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const ro={"to-boolean":ir,"to-color":ui,"to-number":ut,"to-string":$t};class Dn{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[0];if(!ro[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return s.error("Expected one argument.");const v=ro[f],x=[];for(let T=1;T<n.length;T++){const M=s.parse(n[T],T,sr);if(!M)return null;x.push(M)}return new Dn(v,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,f;for(const v of this.args){if(s=v.evaluate(n),f=null,s instanceof xr)return s;if(typeof s=="string"){const x=n.parseColor(s);if(x)return x}else if(Array.isArray(s)&&(f=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Vr(s[0],s[1],s[2],s[3]),!f))return new xr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Gr(f||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const f of this.args){s=f.evaluate(n);const v=Cn.parse(s);if(v)return v}throw new Gr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=ti.parse(s);if(v)return v}throw new Gr(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const f of this.args){s=f.evaluate(n);const v=Gn.parse(s);if(v)return v}throw new Gr(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const f of this.args){s=f.evaluate(n);const v=hi.parse(s);if(v)return v}throw new Gr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const f of this.args){if(s=f.evaluate(n),s===null)return 0;const v=Number(s);if(!isNaN(v))return v}throw new Gr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Pi.fromString(rr(this.args[0].evaluate(n)));case"resolvedImage":return Vn.fromString(rr(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return rr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const xo=["Unknown","Point","LineString","Polygon"];class yc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache.get(n);return s||(s=xr.parse(n),this._parseColorCache.set(n,s)),s}}class wo{constructor(n,s,f=[],v,x=new Ns,T=[]){this.registry=n,this.path=f,this.key=f.map((M=>`[${M}]`)).join(""),this.scope=x,this.errors=T,this.expectedType=v,this._isConstant=s}parse(n,s,f,v,x={}){return s?this.concat(s,f,v)._parse(n,x):this._parse(n,x)}_parse(n,s){function f(v,x,T){return T==="assert"?new Ri(x,[v]):T==="coerce"?new Dn(x,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[v];if(x){let T=x.parse(n,this);if(!T)return null;if(this.expectedType){const M=this.expectedType,I=T.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||I.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(I.kind)||M.kind==="colorArray"&&["value","string","array"].includes(I.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))T=f(T,M,s.typeAnnotation||"coerce");else if(this.checkSubtype(M,I))return null}else T=f(T,M,s.typeAnnotation||"assert")}if(!(T instanceof bo)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const M=new yc;try{T=new bo(T.type,T.evaluate(M))}catch(I){return this.error(I.message),null}}return T}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,f){const v=typeof n=="number"?this.path.concat(n):this.path,x=f?this.scope.concat(f):this.scope;return new wo(this.registry,this._isConstant,v,s||null,x,this.errors)}error(n,...s){const f=`${this.key}${s.map((v=>`[${v}]`)).join("")}`;this.errors.push(new ia(f,n))}checkSubtype(n,s){const f=vo(n,s);return f&&this.error(f),f}}class lu{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let x=1;x<n.length-1;x+=2){const T=n[x];if(typeof T!="string")return s.error(`Expected string, but found ${typeof T} instead.`,x);if(/[^a-zA-Z0-9_]/.test(T))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);const M=s.parse(n[x+1],x+1);if(!M)return null;f.push([T,M])}const v=s.parse(n[n.length-1],n.length-1,s.expectedType,f);return v?new lu(f,v):null}outputDefined(){return this.result.outputDefined()}}class vc{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const f=n[1];return s.scope.has(f)?new vc(f,s.scope.get(f)):s.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class _c{constructor(n,s,f){this.type=n,this.index=s,this.input=f}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,ut),v=s.parse(n[2],2,Zi(s.expectedType||sr));return f&&v?new _c(v.type.itemType,f,v):null}evaluate(n){const s=this.index.evaluate(n),f=this.input.evaluate(n);if(s<0)throw new Gr(`Array index out of bounds: ${s} < 0.`);if(s>=f.length)throw new Gr(`Array index out of bounds: ${s} > ${f.length-1}.`);if(s!==Math.floor(s))throw new Gr(`Array index must be an integer, but found ${s} instead.`);return f[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class $s{constructor(n,s){this.type=ir,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,sr),v=s.parse(n[2],2,sr);return f&&v?vf(f.type,[ir,$t,ut,Pn,sr])?new $s(f,v):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(f.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!es(s,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Zt(s))} instead.`);if(!es(f,["string","array"]))throw new Gr(`Expected second argument to be of type array or string, but found ${Hr(Zt(f))} instead.`);return f.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class la{constructor(n,s,f){this.type=ut,this.needle=n,this.haystack=s,this.fromIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,sr),v=s.parse(n[2],2,sr);if(!f||!v)return null;if(!vf(f.type,[ir,$t,ut,Pn,sr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(f.type)} instead`);if(n.length===4){const x=s.parse(n[3],3,ut);return x?new la(f,v,x):null}return new la(f,v)}evaluate(n){const s=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!es(s,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${Hr(Zt(s))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(n)),es(f,["string"])){const x=f.indexOf(s,v);return x===-1?-1:[...f.slice(0,x)].length}if(es(f,["array"]))return f.indexOf(s,v);throw new Gr(`Expected second argument to be of type array or string, but found ${Hr(Zt(f))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class fi{constructor(n,s,f,v,x,T){this.inputType=n,this.type=s,this.input=f,this.cases=v,this.outputs=x,this.otherwise=T}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let f,v;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);const x={},T=[];for(let B=2;B<n.length-1;B+=2){let F=n[B];const V=n[B+1];Array.isArray(F)||(F=[F]);const Y=s.concat(B);if(F.length===0)return Y.error("Expected at least one branch label.");for(const J of F){if(typeof J!="number"&&typeof J!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return Y.error("Numeric branch labels must be integer values.");if(f){if(Y.checkSubtype(f,Zt(J)))return null}else f=Zt(J);if(x[String(J)]!==void 0)return Y.error("Branch labels must be unique.");x[String(J)]=T.length}const Q=s.parse(V,B,v);if(!Q)return null;v=v||Q.type,T.push(Q)}const M=s.parse(n[1],1,sr);if(!M)return null;const I=s.parse(n[n.length-1],n.length-1,v);return I?M.type.kind!=="value"&&s.concat(1).checkSubtype(f,M.type)?null:new fi(f,v,M,x,T,I):null}evaluate(n){const s=this.input.evaluate(n);return(Zt(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class bc{constructor(n,s,f){this.type=n,this.branches=s,this.otherwise=f}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v=[];for(let T=1;T<n.length-1;T+=2){const M=s.parse(n[T],T,ir);if(!M)return null;const I=s.parse(n[T+1],T+1,f);if(!I)return null;v.push([M,I]),f=f||I.type}const x=s.parse(n[n.length-1],n.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new bc(f,v,x)}evaluate(n){for(const[s,f]of this.branches)if(s.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,f]of this.branches)n(s),n(f);n(this.otherwise)}outputDefined(){return this.branches.every((([n,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class cu{constructor(n,s,f,v){this.type=n,this.input=s,this.beginIndex=f,this.endIndex=v}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const f=s.parse(n[1],1,sr),v=s.parse(n[2],2,ut);if(!f||!v)return null;if(!vf(f.type,[Zi(sr),$t,sr]))return s.error(`Expected first argument to be of type array or string, but found ${Hr(f.type)} instead`);if(n.length===4){const x=s.parse(n[3],3,ut);return x?new cu(f.type,f,v,x):null}return new cu(f.type,f,v)}evaluate(n){const s=this.input.evaluate(n),f=this.beginIndex.evaluate(n);let v;if(this.endIndex&&(v=this.endIndex.evaluate(n)),es(s,["string"]))return[...s].slice(f,v).join("");if(es(s,["array"]))return s.slice(f,v);throw new Gr(`Expected first argument to be of type array or string, but found ${Hr(Zt(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Rl(l,n){const s=l.length-1;let f,v,x=0,T=s,M=0;for(;x<=T;)if(M=Math.floor((x+T)/2),f=l[M],v=l[M+1],f<=n){if(M===s||n<v)return M;x=M+1}else{if(!(f>n))throw new Gr("Input is not a number.");T=M-1}return 0}class wn{constructor(n,s,f){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[v,x]of f)this.labels.push(v),this.outputs.push(x)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const f=s.parse(n[1],1,ut);if(!f)return null;const v=[];let x=null;s.expectedType&&s.expectedType.kind!=="value"&&(x=s.expectedType);for(let T=1;T<n.length;T+=2){const M=T===1?-1/0:n[T],I=n[T+1],B=T,F=T+1;if(typeof M!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(v.length&&v[v.length-1][0]>=M)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const V=s.parse(I,F,x);if(!V)return null;x=x||V.type,v.push([M,V])}return new wn(x,f,v)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const x=s.length;return v>=s[x-1]?f[x-1].evaluate(n):f[Rl(s,v)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Yd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var uu,Sf,Tm=(function(){if(Sf)return uu;function l(n,s,f,v){this.cx=3*n,this.bx=3*(f-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=f,this.p2y=v}return Sf=1,uu=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var f=n,v=0;v<8;v++){var x=this.sampleCurveX(f)-n;if(Math.abs(x)<s)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=x/T}var M=0,I=1;for(f=n,v=0;v<20&&(x=this.sampleCurveX(f),!(Math.abs(x-n)<s));v++)n>x?M=f:I=f,f=.5*(I-M)+M;return f},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},uu})(),xc=Yd(Tm);class bi{constructor(n,s,f,v,x){this.type=n,this.operator=s,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[T,M]of x)this.labels.push(T),this.outputs.push(M)}static interpolationFactor(n,s,f,v){let x=0;if(n.name==="exponential")x=hu(s,n.base,f,v);else if(n.name==="linear")x=hu(s,1,f,v);else if(n.name==="cubic-bezier"){const T=n.controlPoints;x=new xc(T[0],T[1],T[2],T[3]).solve(hu(s,1,f,v))}return x}static parse(n,s){let[f,v,x,...T]=n;if(!Array.isArray(v)||v.length===0)return s.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const B=v[1];if(typeof B!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:B}}else{if(v[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const B=v.slice(1);if(B.length!==4||B.some((F=>typeof F!="number"||F<0||F>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:B}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(x=s.parse(x,2,ut),!x)return null;const M=[];let I=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||s.expectedType==$i?s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType):I=ui;for(let B=0;B<T.length;B+=2){const F=T[B],V=T[B+1],Y=B+3,Q=B+4;if(typeof F!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(M.length&&M[M.length-1][0]>=F)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const J=s.parse(V,Q,I);if(!J)return null;I=I||J.type,M.push([F,J])}return ts(I,ut)||ts(I,Il)||ts(I,ui)||ts(I,Jo)||ts(I,yo)||ts(I,$i)||ts(I,Un)||ts(I,Zi(ut))?new bi(I,f,v,x,M):s.error(`Type ${Hr(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=s[0])return f[0].evaluate(n);const x=s.length;if(v>=s[x-1])return f[x-1].evaluate(n);const T=Rl(s,v),M=bi.interpolationFactor(this.interpolation,v,s[T],s[T+1]),I=f[T].evaluate(n),B=f[T+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return to(I,B,M);case"color":return xr.interpolate(I,B,M);case"padding":return Cn.interpolate(I,B,M);case"colorArray":return Gn.interpolate(I,B,M);case"numberArray":return ti.interpolate(I,B,M);case"variableAnchorOffsetCollection":return hi.interpolate(I,B,M);case"array":return zl(I,B,M);case"projectionDefinition":return _i.interpolate(I,B,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return xr.interpolate(I,B,M,"hcl");case"colorArray":return Gn.interpolate(I,B,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xr.interpolate(I,B,M,"lab");case"colorArray":return Gn.interpolate(I,B,M,"lab")}}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function hu(l,n,s,f){const v=f-s,x=l-s;return v===0?0:n===1?x/v:(Math.pow(n,x)-1)/(Math.pow(n,v)-1)}const So={color:xr.interpolate,number:to,padding:Cn.interpolate,numberArray:ti.interpolate,colorArray:Gn.interpolate,variableAnchorOffsetCollection:hi.interpolate,array:zl};class fu{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let f=null;const v=s.expectedType;v&&v.kind!=="value"&&(f=v);const x=[];for(const M of n.slice(1)){const I=s.parse(M,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,x.push(I)}if(!f)throw new Error("No output type");const T=v&&x.some((M=>vo(v,M.type)));return new fu(T?sr:f,x)}evaluate(n){let s,f=null,v=0;for(const x of this.args)if(v++,f=x.evaluate(n),f&&f instanceof Vn&&!f.available&&(s||(s=f.name),f=null,v===this.args.length&&(f=s)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function du(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function kl(l,n,s,f){return f.compare(n,s)===0}function ki(l,n,s){const f=l!=="=="&&l!=="!=";return class YA{constructor(x,T,M){this.type=ir,this.lhs=x,this.rhs=T,this.collator=M,this.hasUntypedArgument=x.type.kind==="value"||T.type.kind==="value"}static parse(x,T){if(x.length!==3&&x.length!==4)return T.error("Expected two or three arguments.");const M=x[0];let I=T.parse(x[1],1,sr);if(!I)return null;if(!du(M,I.type))return T.concat(1).error(`"${M}" comparisons are not supported for type '${Hr(I.type)}'.`);let B=T.parse(x[2],2,sr);if(!B)return null;if(!du(M,B.type))return T.concat(2).error(`"${M}" comparisons are not supported for type '${Hr(B.type)}'.`);if(I.type.kind!==B.type.kind&&I.type.kind!=="value"&&B.type.kind!=="value")return T.error(`Cannot compare types '${Hr(I.type)}' and '${Hr(B.type)}'.`);f&&(I.type.kind==="value"&&B.type.kind!=="value"?I=new Ri(B.type,[I]):I.type.kind!=="value"&&B.type.kind==="value"&&(B=new Ri(I.type,[B])));let F=null;if(x.length===4){if(I.type.kind!=="string"&&B.type.kind!=="string"&&I.type.kind!=="value"&&B.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(F=T.parse(x[3],3,Us),!F)return null}return new YA(I,B,F)}evaluate(x){const T=this.lhs.evaluate(x),M=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const I=Zt(T),B=Zt(M);if(I.kind!==B.kind||I.kind!=="string"&&I.kind!=="number")throw new Gr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${B.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=Zt(T),B=Zt(M);if(I.kind!=="string"||B.kind!=="string")return n(x,T,M)}return this.collator?s(x,T,M,this.collator.evaluate(x)):n(x,T,M)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Xd=ki("==",(function(l,n,s){return n===s}),kl),mh=ki("!=",(function(l,n,s){return n!==s}),(function(l,n,s,f){return!kl(0,n,s,f)})),Kd=ki("<",(function(l,n,s){return n<s}),(function(l,n,s,f){return f.compare(n,s)<0})),Tf=ki(">",(function(l,n,s){return n>s}),(function(l,n,s,f){return f.compare(n,s)>0})),Am=ki("<=",(function(l,n,s){return n<=s}),(function(l,n,s,f){return f.compare(n,s)<=0})),Mm=ki(">=",(function(l,n,s){return n>=s}),(function(l,n,s,f){return f.compare(n,s)>=0}));class gh{constructor(n,s,f){this.type=Us,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return s.error("Collator options argument must be an object.");const v=s.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,ir);if(!v)return null;const x=s.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,ir);if(!x)return null;let T=null;return f.locale&&(T=s.parse(f.locale,1,$t),!T)?null:new gh(v,x,T)}evaluate(n){return new _o(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Af{constructor(n,s,f,v,x){this.type=$t,this.number=n,this.locale=s,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const f=s.parse(n[1],1,ut);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return s.error("NumberFormat options argument must be an object.");let x=null;if(v.locale&&(x=s.parse(v.locale,1,$t),!x))return null;let T=null;if(v.currency&&(T=s.parse(v.currency,1,$t),!T))return null;let M=null;if(v["min-fraction-digits"]&&(M=s.parse(v["min-fraction-digits"],1,ut),!M))return null;let I=null;return v["max-fraction-digits"]&&(I=s.parse(v["max-fraction-digits"],1,ut),!I)?null:new Af(f,x,T,M,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Bl{constructor(n){this.type=go,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return s.error("First argument must be an image or text section.");const v=[];let x=!1;for(let T=1;T<=n.length-1;++T){const M=n[T];if(x&&typeof M=="object"&&!Array.isArray(M)){x=!1;let I=null;if(M["font-scale"]&&(I=s.parse(M["font-scale"],1,ut),!I))return null;let B=null;if(M["text-font"]&&(B=s.parse(M["text-font"],1,Zi($t)),!B))return null;let F=null;if(M["text-color"]&&(F=s.parse(M["text-color"],1,ui),!F))return null;let V=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!Na.includes(M["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(V=s.parse(M["vertical-align"],1,$t),!V)return null}const Y=v[v.length-1];Y.scale=I,Y.font=B,Y.textColor=F,Y.verticalAlign=V}else{const I=s.parse(n[T],1,sr);if(!I)return null;const B=I.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,v.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Bl(v)}evaluate(n){return new Pi(this.sections.map((s=>{const f=s.content.evaluate(n);return Zt(f)===rn?new gc("",f,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(n):null):new gc(rr(f),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null,s.verticalAlign?s.verticalAlign.evaluate(n):null)})))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor),s.verticalAlign&&n(s.verticalAlign)}outputDefined(){return!1}}class Mf{constructor(n){this.type=rn,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const f=s.parse(n[1],1,$t);return f?new Mf(f):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),f=Vn.fromString(s);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(s)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class yh{constructor(n){this.type=ut,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=s.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Hr(f.type)} instead.`):new yh(f):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Gr(`Expected value to be of type string or array, but found ${Hr(Zt(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const no=8192;function Ef(l,n){const s=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(s*v*no),Math.round(f*v*no)]}function Zs(l,n){const s=Math.pow(2,n.z);return[(v=(l[0]/no+n.x)/s,360*v-180),(f=(l[1]/no+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function pu(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function wc(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function Wd(l,n,s){const f=l[0]-n[0],v=l[1]-n[1],x=l[0]-s[0],T=l[1]-s[1];return f*T-x*v==0&&f*x<=0&&v*T<=0}function mu(l,n,s,f){return(v=[f[0]-s[0],f[1]-s[1]])[0]*(x=[n[0]-l[0],n[1]-l[1]])[1]-v[1]*x[0]!=0&&!(!Jd(l,n,s,f)||!Jd(s,f,l,n));var v,x}function Qd(l,n,s){for(const f of s)for(let v=0;v<f.length-1;++v)if(mu(l,n,f[v],f[v+1]))return!0;return!1}function Hs(l,n,s=!1){let f=!1;for(const M of n)for(let I=0;I<M.length-1;I++){if(Wd(l,M[I],M[I+1]))return s;(x=M[I])[1]>(v=l)[1]!=(T=M[I+1])[1]>v[1]&&v[0]<(T[0]-x[0])*(v[1]-x[1])/(T[1]-x[1])+x[0]&&(f=!f)}var v,x,T;return f}function Ll(l,n){for(const s of n)if(Hs(l,s))return!0;return!1}function Pf(l,n){for(const s of l)if(!Hs(s,n))return!1;for(let s=0;s<l.length-1;++s)if(Qd(l[s],l[s+1],n))return!1;return!0}function Em(l,n){for(const s of n)if(Pf(l,s))return!0;return!1}function Jd(l,n,s,f){const v=f[0]-s[0],x=f[1]-s[1],T=(l[0]-s[0])*x-v*(l[1]-s[1]),M=(n[0]-s[0])*x-v*(n[1]-s[1]);return T>0&&M<0||T<0&&M>0}function vh(l,n,s){const f=[];for(let v=0;v<l.length;v++){const x=[];for(let T=0;T<l[v].length;T++){const M=Ef(l[v][T],s);pu(n,M),x.push(M)}f.push(x)}return f}function Cf(l,n,s){const f=[];for(let v=0;v<l.length;v++){const x=vh(l[v],n,s);f.push(x)}return f}function Ys(l,n,s,f){if(l[0]<s[0]||l[0]>s[2]){const v=.5*f;let x=l[0]-s[0]>v?-f:s[0]-l[0]>v?f:0;x===0&&(x=l[0]-s[2]>v?-f:s[2]-l[0]>v?f:0),l[0]+=x}pu(n,l)}function Sc(l,n,s,f){const v=Math.pow(2,f.z)*no,x=[f.x*no,f.y*no],T=[];for(const M of l)for(const I of M){const B=[I.x+x[0],I.y+x[1]];Ys(B,n,s,v),T.push(B)}return T}function ep(l,n,s,f){const v=Math.pow(2,f.z)*no,x=[f.x*no,f.y*no],T=[];for(const I of l){const B=[];for(const F of I){const V=[F.x+x[0],F.y+x[1]];pu(n,V),B.push(V)}T.push(B)}if(n[2]-n[0]<=v/2){(M=n)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const I of T)for(const B of I)Ys(B,n,s,v)}var M;return T}class To{constructor(n,s){this.type=ir,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sa(n[1])){const f=n[1];if(f.type==="FeatureCollection"){const v=[];for(const x of f.features){const{type:T,coordinates:M}=x.geometry;T==="Polygon"&&v.push(M),T==="MultiPolygon"&&v.push(...M)}if(v.length)return new To(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new To(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new To(f,f)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],T=s.canonicalID();if(f.type==="Polygon"){const M=vh(f.coordinates,x,T),I=Sc(s.geometry(),v,x,T);if(!wc(v,x))return!1;for(const B of I)if(!Hs(B,M))return!1}if(f.type==="MultiPolygon"){const M=Cf(f.coordinates,x,T),I=Sc(s.geometry(),v,x,T);if(!wc(v,x))return!1;for(const B of I)if(!Ll(B,M))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],T=s.canonicalID();if(f.type==="Polygon"){const M=vh(f.coordinates,x,T),I=ep(s.geometry(),v,x,T);if(!wc(v,x))return!1;for(const B of I)if(!Pf(B,M))return!1}if(f.type==="MultiPolygon"){const M=Cf(f.coordinates,x,T),I=ep(s.geometry(),v,x,T);if(!wc(v,x))return!1;for(const B of I)if(!Em(B,M))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let _h=class{constructor(l=[],n=(s,f)=>s<f?-1:s>f?1:0){if(this.data=l,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:n,compare:s}=this,f=n[l];for(;l>0;){const v=l-1>>1,x=n[v];if(s(f,x)>=0)break;n[l]=x,l=v}n[l]=f}_down(l){const{data:n,compare:s}=this,f=this.length>>1,v=n[l];for(;l<f;){let x=1+(l<<1);const T=x+1;if(T<this.length&&s(n[T],n[x])<0&&(x=T),s(n[x],v)>=0)break;n[l]=n[x],l=x}n[l]=v}};function bh(l,n,s=0,f=l.length-1,v=Df){for(;f>s;){if(f-s>600){const I=f-s+1,B=n-s+1,F=Math.log(I),V=.5*Math.exp(2*F/3),Y=.5*Math.sqrt(F*V*(I-V)/I)*(B-I/2<0?-1:1);bh(l,n,Math.max(s,Math.floor(n-B*V/I+Y)),Math.min(f,Math.floor(n+(I-B)*V/I+Y)),v)}const x=l[n];let T=s,M=f;for(jl(l,s,n),v(l[f],x)>0&&jl(l,s,f);T<M;){for(jl(l,T,M),T++,M--;v(l[T],x)<0;)T++;for(;v(l[M],x)>0;)M--}v(l[s],x)===0?jl(l,s,M):(M++,jl(l,M,f)),M<=n&&(s=M+1),n<=M&&(f=M-1)}}function jl(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function Df(l,n){return l<n?-1:l>n?1:0}function Tc(l,n){if(l.length<=1)return[l];const s=[];let f,v;for(const x of l){const T=tp(x);T!==0&&(x.area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(f&&s.push(f),f=[x]):f.push(x))}if(f&&s.push(f),n>1)for(let x=0;x<s.length;x++)s[x].length<=n||(bh(s[x],n,1,s[x].length-1,If),s[x]=s[x].slice(0,n));return s}function If(l,n){return n.area-l.area}function tp(l){let n=0;for(let s,f,v=0,x=l.length,T=x-1;v<x;T=v++)s=l[v],f=l[T],n+=(f.x-s.x)*(s.y+f.y);return n}const rp=1/298.257223563,np=rp*(2-rp),Of=Math.PI/180;class zf{constructor(n){const s=6378.137*Of*1e3,f=Math.cos(n*Of),v=1/(1-np*(1-f*f)),x=Math.sqrt(v);this.kx=s*x*f,this.ky=s*x*v*(1-np)}distance(n,s){const f=this.wrap(n[0]-s[0])*this.kx,v=(n[1]-s[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(n,s){let f,v,x,T,M=1/0;for(let I=0;I<n.length-1;I++){let B=n[I][0],F=n[I][1],V=this.wrap(n[I+1][0]-B)*this.kx,Y=(n[I+1][1]-F)*this.ky,Q=0;V===0&&Y===0||(Q=(this.wrap(s[0]-B)*this.kx*V+(s[1]-F)*this.ky*Y)/(V*V+Y*Y),Q>1?(B=n[I+1][0],F=n[I+1][1]):Q>0&&(B+=V/this.kx*Q,F+=Y/this.ky*Q)),V=this.wrap(s[0]-B)*this.kx,Y=(s[1]-F)*this.ky;const J=V*V+Y*Y;J<M&&(M=J,f=B,v=F,x=I,T=Q)}return{point:[f,v],index:x,t:Math.max(0,Math.min(1,T))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function ip(l,n){return n[0]-l[0]}function Bi(l){return l[1]-l[0]+1}function Ma(l,n){return l[1]>=l[0]&&l[1]<n}function Or(l,n){if(l[0]>l[1])return[null,null];const s=Bi(l);if(n){if(s===2)return[l,null];const v=Math.floor(s/2);return[[l[0],l[0]+v],[l[0]+v,l[1]]]}if(s===1)return[l,null];const f=Math.floor(s/2)-1;return[[l[0],l[0]+f],[l[0]+f+1,l[1]]]}function xh(l,n){if(!Ma(n,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let f=n[0];f<=n[1];++f)pu(s,l[f]);return s}function wh(l){const n=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const f of s)pu(n,f);return n}function Rf(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function gu(l,n,s){if(!Rf(l)||!Rf(n))return NaN;let f=0,v=0;return l[2]<n[0]&&(f=n[0]-l[2]),l[0]>n[2]&&(f=l[0]-n[2]),l[1]>n[3]&&(v=l[1]-n[3]),l[3]<n[1]&&(v=n[1]-l[3]),s.distance([0,0],[f,v])}function Nl(l,n,s){const f=s.pointOnLine(n,l);return s.distance(l,f.point)}function Xs(l,n,s,f,v){const x=Math.min(Nl(l,[s,f],v),Nl(n,[s,f],v)),T=Math.min(Nl(s,[l,n],v),Nl(f,[l,n],v));return Math.min(x,T)}function kf(l,n,s,f,v){if(!Ma(n,l.length)||!Ma(f,s.length))return 1/0;let x=1/0;for(let T=n[0];T<n[1];++T){const M=l[T],I=l[T+1];for(let B=f[0];B<f[1];++B){const F=s[B],V=s[B+1];if(mu(M,I,F,V))return 0;x=Math.min(x,Xs(M,I,F,V,v))}}return x}function yu(l,n,s,f,v){if(!Ma(n,l.length)||!Ma(f,s.length))return NaN;let x=1/0;for(let T=n[0];T<=n[1];++T)for(let M=f[0];M<=f[1];++M)if(x=Math.min(x,v.distance(l[T],s[M])),x===0)return x;return x}function Bf(l,n,s){if(Hs(l,n,!0))return 0;let f=1/0;for(const v of n){const x=v[0],T=v[v.length-1];if(x!==T&&(f=Math.min(f,Nl(l,[T,x],s)),f===0))return f;const M=s.pointOnLine(v,l);if(f=Math.min(f,s.distance(l,M.point)),f===0)return f}return f}function ap(l,n,s,f){if(!Ma(n,l.length))return NaN;for(let x=n[0];x<=n[1];++x)if(Hs(l[x],s,!0))return 0;let v=1/0;for(let x=n[0];x<n[1];++x){const T=l[x],M=l[x+1];for(const I of s)for(let B=0,F=I.length,V=F-1;B<F;V=B++){const Y=I[V],Q=I[B];if(mu(T,M,Y,Q))return 0;v=Math.min(v,Xs(T,M,Y,Q,f))}}return v}function Ks(l,n){for(const s of l)for(const f of s)if(Hs(f,n,!0))return!0;return!1}function Ac(l,n,s,f=1/0){const v=wh(l),x=wh(n);if(f!==1/0&&gu(v,x,s)>=f)return f;if(wc(v,x)){if(Ks(l,n))return 0}else if(Ks(n,l))return 0;let T=1/0;for(const M of l)for(let I=0,B=M.length,F=B-1;I<B;F=I++){const V=M[F],Y=M[I];for(const Q of n)for(let J=0,ne=Q.length,ce=ne-1;J<ne;ce=J++){const me=Q[ce],ze=Q[J];if(mu(V,Y,me,ze))return 0;T=Math.min(T,Xs(V,Y,me,ze,s))}}return T}function Sh(l,n,s,f,v,x){if(!x)return;const T=gu(xh(f,x),v,s);T<n&&l.push([T,x,[0,0]])}function vu(l,n,s,f,v,x,T){if(!x||!T)return;const M=gu(xh(f,x),xh(v,T),s);M<n&&l.push([M,x,T])}function Ao(l,n,s,f,v=1/0){let x=Math.min(f.distance(l[0],s[0][0]),v);if(x===0)return x;const T=new _h([[0,[0,l.length-1],[0,0]]],ip),M=wh(s);for(;T.length>0;){const I=T.pop();if(I[0]>=x)continue;const B=I[1],F=n?50:100;if(Bi(B)<=F){if(!Ma(B,l.length))return NaN;if(n){const V=ap(l,B,s,f);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=B[0];V<=B[1];++V){const Y=Bf(l[V],s,f);if(x=Math.min(x,Y),x===0)return 0}}else{const V=Or(B,n);Sh(T,x,f,l,M,V[0]),Sh(T,x,f,l,M,V[1])}}return x}function _u(l,n,s,f,v,x=1/0){let T=Math.min(x,v.distance(l[0],s[0]));if(T===0)return T;const M=new _h([[0,[0,l.length-1],[0,s.length-1]]],ip);for(;M.length>0;){const I=M.pop();if(I[0]>=T)continue;const B=I[1],F=I[2],V=n?50:100,Y=f?50:100;if(Bi(B)<=V&&Bi(F)<=Y){if(!Ma(B,l.length)&&Ma(F,s.length))return NaN;let Q;if(n&&f)Q=kf(l,B,s,F,v),T=Math.min(T,Q);else if(n&&!f){const J=l.slice(B[0],B[1]+1);for(let ne=F[0];ne<=F[1];++ne)if(Q=Nl(s[ne],J,v),T=Math.min(T,Q),T===0)return T}else if(!n&&f){const J=s.slice(F[0],F[1]+1);for(let ne=B[0];ne<=B[1];++ne)if(Q=Nl(l[ne],J,v),T=Math.min(T,Q),T===0)return T}else Q=yu(l,B,s,F,v),T=Math.min(T,Q)}else{const Q=Or(B,n),J=Or(F,f);vu(M,T,v,l,s,Q[0],J[0]),vu(M,T,v,l,s,Q[0],J[1]),vu(M,T,v,l,s,Q[1],J[0]),vu(M,T,v,l,s,Q[1],J[1])}}return T}function Th(l){return l.type==="MultiPolygon"?l.coordinates.map((n=>({type:"Polygon",coordinates:n}))):l.type==="MultiLineString"?l.coordinates.map((n=>({type:"LineString",coordinates:n}))):l.type==="MultiPoint"?l.coordinates.map((n=>({type:"Point",coordinates:n}))):[l]}class Ws{constructor(n,s){this.type=ut,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sa(n[1])){const f=n[1];if(f.type==="FeatureCollection")return new Ws(f,f.features.map((v=>Th(v.geometry))).flat());if(f.type==="Feature")return new Ws(f,Th(f.geometry));if("type"in f&&"coordinates"in f)return new Ws(f,Th(f))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(s,f){const v=s.geometry(),x=v.flat().map((I=>Zs([I.x,I.y],s.canonical)));if(v.length===0)return NaN;const T=new zf(x[0][1]);let M=1/0;for(const I of f){switch(I.type){case"Point":M=Math.min(M,_u(x,!1,[I.coordinates],!1,T,M));break;case"LineString":M=Math.min(M,_u(x,!1,I.coordinates,!0,T,M));break;case"Polygon":M=Math.min(M,Ao(x,!1,I.coordinates,T,M))}if(M===0)return M}return M})(n,this.geometries);if(n.geometryType()==="LineString")return(function(s,f){const v=s.geometry(),x=v.flat().map((I=>Zs([I.x,I.y],s.canonical)));if(v.length===0)return NaN;const T=new zf(x[0][1]);let M=1/0;for(const I of f){switch(I.type){case"Point":M=Math.min(M,_u(x,!0,[I.coordinates],!1,T,M));break;case"LineString":M=Math.min(M,_u(x,!0,I.coordinates,!0,T,M));break;case"Polygon":M=Math.min(M,Ao(x,!0,I.coordinates,T,M))}if(M===0)return M}return M})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(s,f){const v=s.geometry();if(v.length===0||v[0].length===0)return NaN;const x=Tc(v,0).map((I=>I.map((B=>B.map((F=>Zs([F.x,F.y],s.canonical))))))),T=new zf(x[0][0][0][1]);let M=1/0;for(const I of f)for(const B of x){switch(I.type){case"Point":M=Math.min(M,Ao([I.coordinates],!1,B,T,M));break;case"LineString":M=Math.min(M,Ao(I.coordinates,!0,B,T,M));break;case"Polygon":M=Math.min(M,Ac(B,I.coordinates,T,M))}if(M===0)return M}return M})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class bu{constructor(n){this.type=sr,this.key=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=n[1];return f==null?s.error("Global state property must be defined."):typeof f!="string"?s.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new bu(f)}evaluate(n){var s;const f=(s=n.globals)===null||s===void 0?void 0:s.globalState;return f&&Object.keys(f).length!==0?Ol(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Mc={"==":Xd,"!=":mh,">":Tf,"<":Kd,">=":Mm,"<=":Am,array:Ri,at:_c,boolean:Ri,case:bc,coalesce:fu,collator:gh,format:Bl,image:Mf,in:$s,"index-of":la,interpolate:bi,"interpolate-hcl":bi,"interpolate-lab":bi,length:yh,let:lu,literal:bo,match:fi,number:Ri,"number-format":Af,object:Ri,slice:cu,step:wn,string:Ri,"to-boolean":Dn,"to-color":Dn,"to-number":Dn,"to-string":Dn,var:vc,within:To,distance:Ws,"global-state":bu};class Fa{constructor(n,s,f,v){this.name=n,this.type=s,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const f=n[0],v=Fa.definitions[f];if(!v)return s.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(v)?v[0]:v.type,T=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,M=T.filter((([B])=>!Array.isArray(B)||B.length===n.length-1));let I=null;for(const[B,F]of M){I=new wo(s.registry,Fl,s.path,null,s.scope);const V=[];let Y=!1;for(let Q=1;Q<n.length;Q++){const J=n[Q],ne=Array.isArray(B)?B[Q-1]:B.type,ce=I.parse(J,1+V.length,ne);if(!ce){Y=!0;break}V.push(ce)}if(!Y)if(Array.isArray(B)&&B.length!==V.length)I.error(`Expected ${B.length} arguments, but found ${V.length} instead.`);else{for(let Q=0;Q<V.length;Q++){const J=Array.isArray(B)?B[Q]:B.type,ne=V[Q];I.concat(Q+1).checkSubtype(J,ne.type)}if(I.errors.length===0)return new Fa(f,x,F,V)}}if(M.length===1)s.errors.push(...I.errors);else{const B=(M.length?M:T).map((([V])=>{return Y=V,Array.isArray(Y)?`(${Y.map(Hr).join(", ")})`:`(${Hr(Y.type)}...)`;var Y})).join(" | "),F=[];for(let V=1;V<n.length;V++){const Y=s.parse(n[V],1+F.length);if(!Y)return null;F.push(Hr(Y.type))}s.error(`Expected arguments of type ${B}, but found (${F.join(", ")}) instead.`)}return null}static register(n,s){Fa.definitions=s;for(const f in s)n[f]=Fa}}function Lf(l,[n,s,f,v]){n=n.evaluate(l),s=s.evaluate(l),f=f.evaluate(l);const x=v?v.evaluate(l):1,T=Vr(n,s,f,x);if(T)throw new Gr(T);return new xr(n/255,s/255,f/255,x,!1)}function jf(l,n){return l in n}function xu(l,n){const s=n[l];return s===void 0?null:s}function Ci(l){return{type:l}}function Fl(l){if(l instanceof vc)return Fl(l.boundExpression);if(l instanceof Fa&&l.name==="error"||l instanceof gh||l instanceof To||l instanceof Ws||l instanceof bu)return!1;const n=l instanceof Dn||l instanceof Ri;let s=!0;return l.eachChild((f=>{s=n?s&&Fl(f):s&&f instanceof bo})),!!s&&Hi(l)&&Ec(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Hi(l){if(l instanceof Fa&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof To||l instanceof Ws)return!1;let n=!0;return l.eachChild((s=>{n&&!Hi(s)&&(n=!1)})),n}function Mo(l){if(l instanceof Fa&&l.name==="feature-state")return!1;let n=!0;return l.eachChild((s=>{n&&!Mo(s)&&(n=!1)})),n}function Ec(l,n){if(l instanceof Fa&&n.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((f=>{s&&!Ec(f,n)&&(s=!1)})),s}function wu(l){return{result:"success",value:l}}function is(l){return{result:"error",value:l}}function Eo(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Qs(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Ah(l){return!!l.expression&&l.expression.interpolated}function yr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Po(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&Zt(l)===Fs}function Pm(l){return l}function ca(l,n){const s=l.stops&&typeof l.stops[0][0]=="object",f=s||!(s||l.property!==void 0),v=l.type||(Ah(n)?"exponential":"interval"),x=(function(F){switch(F.type){case"color":return xr.parse;case"padding":return Cn.parse;case"numberArray":return ti.parse;case"colorArray":return Gn.parse;default:return null}})(n);if(x&&((l=En({},l)).stops&&(l.stops=l.stops.map((F=>[F[0],x(F[1])]))),l.default=x(l.default?l.default:n.default)),l.colorSpace&&(T=l.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var T;const M=(function(F){switch(F){case"exponential":return Su;case"interval":return op;case"categorical":return Do;case"identity":return Ul;default:throw new Error(`Unknown function type "${F}"`)}})(v);let I,B;if(v==="categorical"){I=Object.create(null);for(const F of l.stops)I[F[0]]=F[1];B=typeof l.stops[0][0]}if(s){const F={},V=[];for(let J=0;J<l.stops.length;J++){const ne=l.stops[J],ce=ne[0].zoom;F[ce]===void 0&&(F[ce]={zoom:ce,type:l.type,property:l.property,default:l.default,stops:[]},V.push(ce)),F[ce].stops.push([ne[0].value,ne[1]])}const Y=[];for(const J of V)Y.push([F[J].zoom,ca(F[J],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:bi.interpolationFactor.bind(void 0,Q),zoomStops:Y.map((J=>J[0])),evaluate:({zoom:J},ne)=>Su({stops:Y,base:l.base},n,J).evaluate(J,ne)}}if(f){const F=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:bi.interpolationFactor.bind(void 0,F),zoomStops:l.stops.map((V=>V[0])),evaluate:({zoom:V})=>M(l,n,V,I,B)}}return{kind:"source",evaluate(F,V){const Y=V&&V.properties?V.properties[l.property]:void 0;return Y===void 0?Co(l.default,n.default):M(l,n,Y,I,B)}}}function Co(l,n,s){return l!==void 0?l:n!==void 0?n:s!==void 0?s:void 0}function Do(l,n,s,f,v){return Co(typeof s===v?f[s]:void 0,l.default,n.default)}function op(l,n,s){if(yr(s)!=="number")return Co(l.default,n.default);const f=l.stops.length;if(f===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[f-1][0])return l.stops[f-1][1];const v=Rl(l.stops.map((x=>x[0])),s);return l.stops[v][1]}function Su(l,n,s){const f=l.base!==void 0?l.base:1;if(yr(s)!=="number")return Co(l.default,n.default);const v=l.stops.length;if(v===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[v-1][0])return l.stops[v-1][1];const x=Rl(l.stops.map((F=>F[0])),s),T=(function(F,V,Y,Q){const J=Q-Y,ne=F-Y;return J===0?0:V===1?ne/J:(Math.pow(V,ne)-1)/(Math.pow(V,J)-1)})(s,f,l.stops[x][0],l.stops[x+1][0]),M=l.stops[x][1],I=l.stops[x+1][1],B=So[n.type]||Pm;return typeof M.evaluate=="function"?{evaluate(...F){const V=M.evaluate.apply(void 0,F),Y=I.evaluate.apply(void 0,F);if(V!==void 0&&Y!==void 0)return B(V,Y,T,l.colorSpace)}}:B(M,I,T,l.colorSpace)}function Ul(l,n,s){switch(n.type){case"color":s=xr.parse(s);break;case"formatted":s=Pi.fromString(s.toString());break;case"resolvedImage":s=Vn.fromString(s.toString());break;case"padding":s=Cn.parse(s);break;case"colorArray":s=Gn.parse(s);break;case"numberArray":s=ti.parse(s);break;default:yr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Co(s,l.default,n.default)}Fa.register(Mc,{error:[{kind:"error"},[$t],(l,[n])=>{throw new Gr(n.evaluate(l))}],typeof:[$t,[sr],(l,[n])=>Hr(Zt(n.evaluate(l)))],"to-rgba":[Zi(ut,4),[ui],(l,[n])=>{const[s,f,v,x]=n.evaluate(l).rgb;return[255*s,255*f,255*v,x]}],rgb:[ui,[ut,ut,ut],Lf],rgba:[ui,[ut,ut,ut,ut],Lf],has:{type:ir,overloads:[[[$t],(l,[n])=>jf(n.evaluate(l),l.properties())],[[$t,Fs],(l,[n,s])=>jf(n.evaluate(l),s.evaluate(l))]]},get:{type:sr,overloads:[[[$t],(l,[n])=>xu(n.evaluate(l),l.properties())],[[$t,Fs],(l,[n,s])=>xu(n.evaluate(l),s.evaluate(l))]]},"feature-state":[sr,[$t],(l,[n])=>xu(n.evaluate(l),l.featureState||{})],properties:[Fs,[],l=>l.properties()],"geometry-type":[$t,[],l=>l.geometryType()],id:[sr,[],l=>l.id()],zoom:[ut,[],l=>l.globals.zoom],"heatmap-density":[ut,[],l=>l.globals.heatmapDensity||0],elevation:[ut,[],l=>l.globals.elevation||0],"line-progress":[ut,[],l=>l.globals.lineProgress||0],accumulated:[sr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[ut,Ci(ut),(l,n)=>{let s=0;for(const f of n)s+=f.evaluate(l);return s}],"*":[ut,Ci(ut),(l,n)=>{let s=1;for(const f of n)s*=f.evaluate(l);return s}],"-":{type:ut,overloads:[[[ut,ut],(l,[n,s])=>n.evaluate(l)-s.evaluate(l)],[[ut],(l,[n])=>-n.evaluate(l)]]},"/":[ut,[ut,ut],(l,[n,s])=>n.evaluate(l)/s.evaluate(l)],"%":[ut,[ut,ut],(l,[n,s])=>n.evaluate(l)%s.evaluate(l)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(l,[n,s])=>Math.pow(n.evaluate(l),s.evaluate(l))],sqrt:[ut,[ut],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[ut,[ut],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[ut,[ut],(l,[n])=>Math.log(n.evaluate(l))],log2:[ut,[ut],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[ut,[ut],(l,[n])=>Math.sin(n.evaluate(l))],cos:[ut,[ut],(l,[n])=>Math.cos(n.evaluate(l))],tan:[ut,[ut],(l,[n])=>Math.tan(n.evaluate(l))],asin:[ut,[ut],(l,[n])=>Math.asin(n.evaluate(l))],acos:[ut,[ut],(l,[n])=>Math.acos(n.evaluate(l))],atan:[ut,[ut],(l,[n])=>Math.atan(n.evaluate(l))],min:[ut,Ci(ut),(l,n)=>Math.min(...n.map((s=>s.evaluate(l))))],max:[ut,Ci(ut),(l,n)=>Math.max(...n.map((s=>s.evaluate(l))))],abs:[ut,[ut],(l,[n])=>Math.abs(n.evaluate(l))],round:[ut,[ut],(l,[n])=>{const s=n.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[ut,[ut],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[ut,[ut],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[ir,[$t,sr],(l,[n,s])=>l.properties()[n.value]===s.value],"filter-id-==":[ir,[sr],(l,[n])=>l.id()===n.value],"filter-type-==":[ir,[$t],(l,[n])=>l.geometryType()===n.value],"filter-<":[ir,[$t,sr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<v}],"filter-id-<":[ir,[sr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<f}],"filter->":[ir,[$t,sr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>v}],"filter-id->":[ir,[sr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>f}],"filter-<=":[ir,[$t,sr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[ir,[sr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s<=f}],"filter->=":[ir,[$t,sr],(l,[n,s])=>{const f=l.properties()[n.value],v=s.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[ir,[sr],(l,[n])=>{const s=l.id(),f=n.value;return typeof s==typeof f&&s>=f}],"filter-has":[ir,[sr],(l,[n])=>n.value in l.properties()],"filter-has-id":[ir,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[ir,[Zi($t)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[ir,[Zi(sr)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[ir,[$t,Zi(sr)],(l,[n,s])=>s.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[ir,[$t,Zi(sr)],(l,[n,s])=>(function(f,v,x,T){for(;x<=T;){const M=x+T>>1;if(v[M]===f)return!0;v[M]>f?T=M-1:x=M+1}return!1})(l.properties()[n.value],s.value,0,s.value.length-1)],all:{type:ir,overloads:[[[ir,ir],(l,[n,s])=>n.evaluate(l)&&s.evaluate(l)],[Ci(ir),(l,n)=>{for(const s of n)if(!s.evaluate(l))return!1;return!0}]]},any:{type:ir,overloads:[[[ir,ir],(l,[n,s])=>n.evaluate(l)||s.evaluate(l)],[Ci(ir),(l,n)=>{for(const s of n)if(s.evaluate(l))return!0;return!1}]]},"!":[ir,[ir],(l,[n])=>!n.evaluate(l)],"is-supported-script":[ir,[$t],(l,[n])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(n.evaluate(l))}],upcase:[$t,[$t],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[$t,[$t],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[$t,Ci(sr),(l,n)=>n.map((s=>rr(s.evaluate(l)))).join("")],"resolved-locale":[$t,[Us],(l,[n])=>n.evaluate(l).resolvedLocale()]});class Tu{constructor(n,s,f){this.expression=n,this._warningHistory={},this._evaluator=new yc,this._defaultValue=s?(function(v){if(v.type==="color"&&Po(v.default))return new xr(0,0,0,0);switch(v.type){case"color":return xr.parse(v.default)||null;case"padding":return Cn.parse(v.default)||null;case"numberArray":return ti.parse(v.default)||null;case"colorArray":return Gn.parse(v.default)||null;case"variableAnchorOffsetCollection":return hi.parse(v.default)||null;case"projectionDefinition":return _i.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,x,T){return this._globalState&&(n=xi(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(n,s,f,v,x,T){this._globalState&&(n=xi(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=T||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Gr(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Au(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Mc}function Gl(l,n,s){const f=new wo(Mc,Fl,[],n?(function(x){const T={color:ui,string:$t,number:ut,enum:$t,boolean:ir,formatted:go,padding:Jo,numberArray:yo,colorArray:$i,projectionDefinition:Il,resolvedImage:rn,variableAnchorOffsetCollection:Un};return x.type==="array"?Zi(T[x.value]||sr,x.length):T[x.type]})(n):void 0),v=f.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?wu(new Tu(v,n,s)):is(f.errors)}class Pc{constructor(n,s,f){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Mo(s.expression),this.globalStateRefs=as(s.expression),this._globalState=f}evaluateWithoutErrorHandling(n,s,f,v,x,T){return this._globalState&&(n=xi(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,x,T)}evaluate(n,s,f,v,x,T){return this._globalState&&(n=xi(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,x,T)}}class ua{constructor(n,s,f,v,x){this.kind=n,this.zoomStops=f,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Mo(s.expression),this.globalStateRefs=as(s.expression),this.interpolationType=v,this._globalState=x}evaluateWithoutErrorHandling(n,s,f,v,x,T){return this._globalState&&(n=xi(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,s,f,v,x,T)}evaluate(n,s,f,v,x,T){return this._globalState&&(n=xi(n,this._globalState)),this._styleExpression.evaluate(n,s,f,v,x,T)}interpolationFactor(n,s,f){return this.interpolationType?bi.interpolationFactor(this.interpolationType,n,s,f):0}}function Vl(l,n,s){const f=Gl(l,n,s);if(f.result==="error")return f;const v=f.value.expression,x=Hi(v);if(!x&&!Eo(n))return is([new ia("","data expressions not supported")]);const T=Ec(v,["zoom"]);if(!T&&!Qs(n))return is([new ia("","zoom expressions not supported")]);const M=Js(v);return M||T?M instanceof ia?is([M]):M instanceof bi&&!Ah(n)?is([new ia("",'"interpolate" expressions cannot be used with this property')]):wu(M?new ua(x?"camera":"composite",f.value,M.labels,M instanceof bi?M.interpolation:void 0,s):new Pc(x?"constant":"source",f.value,s)):is([new ia("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Io{constructor(n,s){this._parameters=n,this._specification=s,En(this,ca(this._parameters,this._specification))}static deserialize(n){return new Io(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Js(l){let n=null;if(l instanceof lu)n=Js(l.result);else if(l instanceof fu){for(const s of l.args)if(n=Js(s),n)break}else(l instanceof wn||l instanceof bi)&&l.input instanceof Fa&&l.input.name==="zoom"&&(n=l);return n instanceof ia||l.eachChild((s=>{const f=Js(s);f instanceof ia?n=f:!n&&f?n=new ia("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new ia("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function as(l,n=new Set){return l instanceof bu&&n.add(l.key),l.eachChild((s=>{as(s,n)})),n}function xi(l,n){const{zoom:s,heatmapDensity:f,elevation:v,lineProgress:x,isSupportedScript:T,accumulated:M}=l??{};return{zoom:s,heatmapDensity:f,elevation:v,lineProgress:x,isSupportedScript:T,accumulated:M,globalState:n}}function Li(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const n of l.slice(1))if(!Li(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Oo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ji(l,n){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Li(l)||(l=Mu(l));const s=Gl(l,Oo,n);if(s.result==="error")throw new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,v,x)=>s.value.evaluate(f,v,{},x),needGeometry:Ea(l),getGlobalStateRefs:()=>as(s.value.expression)}}function Ua(l,n){return l<n?-1:l>n?1:0}function Ea(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let n=1;n<l.length;n++)if(Ea(l[n]))return!0;return!1}function Mu(l){if(!l)return!0;const n=l[0];return l.length<=1?n!=="any":n==="=="?Eu(l[1],l[2],"=="):n==="!="?ri(Eu(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Eu(l[1],l[2],n):n==="any"?(s=l.slice(1),["any"].concat(s.map(Mu))):n==="all"?["all"].concat(l.slice(1).map(Mu)):n==="none"?["all"].concat(l.slice(1).map(Mu).map(ri)):n==="in"?Mh(l[1],l.slice(2)):n==="!in"?ri(Mh(l[1],l.slice(2))):n==="has"?Nf(l[1]):n!=="!has"||ri(Nf(l[1]));var s}function Eu(l,n,s){switch(l){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,l,n]}}function Mh(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((s=>typeof s!=typeof n[0]))?["filter-in-large",l,["literal",n.sort(Ua)]]:["filter-in-small",l,["literal",n]]}}function Nf(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function ri(l){return["!",l]}function nn(l){const n=typeof l;if(n==="number"||n==="boolean"||n==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let v="[";for(const x of l)v+=`${nn(x)},`;return`${v}]`}const s=Object.keys(l).sort();let f="{";for(let v=0;v<s.length;v++)f+=`${JSON.stringify(s[v])}:${nn(l[s[v]])},`;return`${f}}`}function Pr(l){let n="";for(const s of Yt)n+=`/${nn(l[s])}`;return n}function zo(l){const n=l.value;return n?[new rt(l.key,n,"constants have been deprecated as of v8")]:[]}function Cr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function os(l){if(Array.isArray(l))return l.map(os);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const n={};for(const s in l)n[s]=os(l[s]);return n}return Cr(l)}function ni(l){const n=l.key,s=l.value,f=l.valueSpec||{},v=l.objectElementValidators||{},x=l.style,T=l.styleSpec,M=l.validateSpec;let I=[];const B=yr(s);if(B!=="object")return[new rt(n,s,`object expected, ${B} found`)];for(const F in s){const V=F.split(".")[0],Y=Ol(f,V)||f["*"];let Q;if(Ol(v,V))Q=v[V];else if(Ol(f,V))Q=M;else if(v["*"])Q=v["*"];else{if(!f["*"]){I.push(new rt(n,s[F],`unknown property "${F}"`));continue}Q=M}I=I.concat(Q({key:(n&&`${n}.`)+F,value:s[F],valueSpec:Y,style:x,styleSpec:T,object:s,objectKey:F,validateSpec:M},s))}for(const F in f)v[F]||f[F].required&&f[F].default===void 0&&s[F]===void 0&&I.push(new rt(n,s,`missing required property "${F}"`));return I}function Pu(l){const n=l.value,s=l.valueSpec,f=l.style,v=l.styleSpec,x=l.key,T=l.arrayElementValidator||l.validateSpec;if(yr(n)!=="array")return[new rt(x,n,`array expected, ${yr(n)} found`)];if(s.length&&n.length!==s.length)return[new rt(x,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new rt(x,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let M={type:s.value,values:s.values};v.$version<7&&(M.function=s.function),yr(s.value)==="object"&&(M=s.value);let I=[];for(let B=0;B<n.length;B++)I=I.concat(T({array:n,arrayIndex:B,value:n[B],valueSpec:M,validateSpec:l.validateSpec,style:f,styleSpec:v,key:`${x}[${B}]`}));return I}function Cu(l){const n=l.key,s=l.value,f=l.valueSpec;let v=yr(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new rt(n,s,`number expected, ${v} found`)]:"minimum"in f&&s<f.minimum?[new rt(n,s,`${s} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&s>f.maximum?[new rt(n,s,`${s} is greater than the maximum value ${f.maximum}`)]:[]}function el(l){const n=l.valueSpec,s=Cr(l.value.type);let f,v,x,T={};const M=s!=="categorical"&&l.value.property===void 0,I=!M,B=yr(l.value.stops)==="array"&&yr(l.value.stops[0])==="array"&&yr(l.value.stops[0][0])==="object",F=ni({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Q){if(s==="identity")return[new rt(Q.key,Q.value,'identity function may not have a "stops" property')];let J=[];const ne=Q.value;return J=J.concat(Pu({key:Q.key,value:ne,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:V})),yr(ne)==="array"&&ne.length===0&&J.push(new rt(Q.key,ne,"array must have at least one stop")),J},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return s==="identity"&&M&&F.push(new rt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||F.push(new rt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!Ah(l.valueSpec)&&F.push(new rt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!Eo(l.valueSpec)?F.push(new rt(l.key,l.value,"property functions not supported")):M&&!Qs(l.valueSpec)&&F.push(new rt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!B||l.value.property!==void 0||F.push(new rt(l.key,l.value,'"property" property is required')),F;function V(Q){let J=[];const ne=Q.value,ce=Q.key;if(yr(ne)!=="array")return[new rt(ce,ne,`array expected, ${yr(ne)} found`)];if(ne.length!==2)return[new rt(ce,ne,`array length 2 expected, length ${ne.length} found`)];if(B){if(yr(ne[0])!=="object")return[new rt(ce,ne,`object expected, ${yr(ne[0])} found`)];if(ne[0].zoom===void 0)return[new rt(ce,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new rt(ce,ne,"object stop key must have value")];if(x&&x>Cr(ne[0].zoom))return[new rt(ce,ne[0].zoom,"stop zoom values must appear in ascending order")];Cr(ne[0].zoom)!==x&&(x=Cr(ne[0].zoom),v=void 0,T={}),J=J.concat(ni({key:`${ce}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Cu,value:Y}}))}else J=J.concat(Y({key:`${ce}[0]`,value:ne[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},ne));return Au(os(ne[1]))?J.concat([new rt(`${ce}[1]`,ne[1],"expressions are not allowed in function stops.")]):J.concat(Q.validateSpec({key:`${ce}[1]`,value:ne[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,J){const ne=yr(Q.value),ce=Cr(Q.value),me=Q.value!==null?Q.value:J;if(f){if(ne!==f)return[new rt(Q.key,me,`${ne} stop domain type must match previous stop domain type ${f}`)]}else f=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new rt(Q.key,me,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&s!=="categorical"){let ze=`number expected, ${ne} found`;return Eo(n)&&s===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(Q.key,me,ze)]}return s!=="categorical"||ne!=="number"||isFinite(ce)&&Math.floor(ce)===ce?s!=="categorical"&&ne==="number"&&v!==void 0&&ce<v?[new rt(Q.key,me,"stop domain values must appear in ascending order")]:(v=ce,s==="categorical"&&ce in T?[new rt(Q.key,me,"stop domain values must be unique")]:(T[ce]=!0,[])):[new rt(Q.key,me,`integer expected, found ${ce}`)]}}function Pa(l){const n=(l.expressionContext==="property"?Vl:Gl)(os(l.value),l.valueSpec);if(n.result==="error")return n.value.map((f=>new rt(`${l.key}${f.key}`,l.value,f.message)));const s=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new rt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Mo(s))return[new rt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Mo(s))return[new rt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Ec(s,["zoom","feature-state"]))return[new rt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Hi(s))return[new rt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ss(l){const n=l.key,s=l.value,f=yr(s);return f!=="string"?[new rt(n,s,`color expected, ${f} found`)]:xr.parse(String(s))?[]:[new rt(n,s,`color expected, "${s}" found`)]}function ls(l){const n=l.key,s=l.value,f=l.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(Cr(s))===-1&&v.push(new rt(n,s,`expected one of [${f.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(f.values).indexOf(Cr(s))===-1&&v.push(new rt(n,s,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(s)} found`)),v}function Du(l){return Li(os(l.value))?Pa(En({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tl(l)}function tl(l){const n=l.value,s=l.key;if(yr(n)!=="array")return[new rt(s,n,`array expected, ${yr(n)} found`)];const f=l.styleSpec;let v,x=[];if(n.length<1)return[new rt(s,n,"filter array must have at least 1 element")];switch(x=x.concat(ls({key:`${s}[0]`,value:n[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),Cr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Cr(n[1])==="$type"&&x.push(new rt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new rt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=yr(n[1]),v!=="string"&&x.push(new rt(`${s}[1]`,n[1],`string expected, ${v} found`)));for(let T=2;T<n.length;T++)v=yr(n[T]),Cr(n[1])==="$type"?x=x.concat(ls({key:`${s}[${T}]`,value:n[T],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new rt(`${s}[${T}]`,n[T],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let T=1;T<n.length;T++)x=x.concat(tl({key:`${s}[${T}]`,value:n[T],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=yr(n[1]),n.length!==2?x.push(new rt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new rt(`${s}[1]`,n[1],`string expected, ${v} found`))}return x}function Ro(l,n){const s=l.key,f=l.validateSpec,v=l.style,x=l.styleSpec,T=l.value,M=l.objectKey,I=x[`${n}_${l.layerType}`];if(!I)return[];const B=M.match(/^(.*)-transition$/);if(n==="paint"&&B&&I[B[1]]&&I[B[1]].transition)return f({key:s,value:T,valueSpec:x.transition,style:v,styleSpec:x});const F=l.valueSpec||I[M];if(!F)return[new rt(s,T,`unknown property "${M}"`)];let V;if(yr(T)==="string"&&Eo(F)&&!F.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new rt(s,T,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const Y=[];return l.layerType==="symbol"&&(M==="text-field"&&v&&!v.glyphs&&Y.push(new rt(s,T,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Po(os(T))&&Cr(T.type)==="identity"&&Y.push(new rt(s,T,'"text-font" does not support identity functions'))),Y.concat(f({key:l.key,value:T,valueSpec:F,style:v,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:M}))}function cs(l){return Ro(l,"paint")}function ko(l){return Ro(l,"layout")}function rl(l){let n=[];const s=l.value,f=l.key,v=l.style,x=l.styleSpec;if(yr(s)!=="object")return[new rt(f,s,`object expected, ${yr(s)} found`)];s.type||s.ref||n.push(new rt(f,s,'either "type" or "ref" is required'));let T=Cr(s.type);const M=Cr(s.ref);if(s.id){const I=Cr(s.id);for(let B=0;B<l.arrayIndex;B++){const F=v.layers[B];Cr(F.id)===I&&n.push(new rt(f,s.id,`duplicate layer id "${s.id}", previously used at line ${F.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach((B=>{B in s&&n.push(new rt(f,s[B],`"${B}" is prohibited for ref layers`))})),v.layers.forEach((B=>{Cr(B.id)===M&&(I=B)})),I?I.ref?n.push(new rt(f,s.ref,"ref cannot reference another ref layer")):T=Cr(I.type):n.push(new rt(f,s.ref,`ref layer "${M}" not found`))}else if(T!=="background")if(s.source){const I=v.sources&&v.sources[s.source],B=I&&Cr(I.type);I?B==="vector"&&T==="raster"?n.push(new rt(f,s.source,`layer "${s.id}" requires a raster source`)):B!=="raster-dem"&&T==="hillshade"||B!=="raster-dem"&&T==="color-relief"?n.push(new rt(f,s.source,`layer "${s.id}" requires a raster-dem source`)):B==="raster"&&T!=="raster"?n.push(new rt(f,s.source,`layer "${s.id}" requires a vector source`)):B!=="vector"||s["source-layer"]?B==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?n.push(new rt(f,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!s.paint||!s.paint["line-gradient"]||B==="geojson"&&I.lineMetrics||n.push(new rt(f,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new rt(f,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new rt(f,s.source,`source "${s.source}" not found`))}else n.push(new rt(f,s,'missing required property "source"'));return n=n.concat(ni({key:f,value:s,valueSpec:x.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${f}.type`,value:s.type,valueSpec:x.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Du,layout:I=>ni({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":B=>ko(En({layerType:T},B))}}),paint:I=>ni({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":B=>cs(En({layerType:T},B))}})}})),n}function Ca(l){const n=l.value,s=l.key,f=yr(n);return f!=="string"?[new rt(s,n,`string expected, ${f} found`)]:[]}const di={promoteId:function({key:l,value:n}){if(yr(n)==="string")return Ca({key:l,value:n});{const s=[];for(const f in n)s.push(...Ca({key:`${l}.${f}`,value:n[f]}));return s}}};function us(l){const n=l.value,s=l.key,f=l.styleSpec,v=l.style,x=l.validateSpec;if(!n.type)return[new rt(s,n,'"type" is required')];const T=Cr(n.type);let M;switch(T){case"vector":case"raster":return M=ni({key:s,value:n,valueSpec:f[`source_${T.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:di,validateSpec:x}),M;case"raster-dem":return M=(function(I){var B;const F=(B=I.sourceName)!==null&&B!==void 0?B:"",V=I.value,Y=I.styleSpec,Q=Y.source_raster_dem,J=I.style;let ne=[];const ce=yr(V);if(V===void 0)return ne;if(ce!=="object")return ne.push(new rt("source_raster_dem",V,`object expected, ${ce} found`)),ne;const me=Cr(V.encoding)==="custom",ze=["redFactor","greenFactor","blueFactor","baseShift"],be=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Se in V)!me&&ze.includes(Se)?ne.push(new rt(Se,V[Se],`In "${F}": "${Se}" is only valid when "encoding" is set to "custom". ${be} encoding found`)):Q[Se]?ne=ne.concat(I.validateSpec({key:Se,value:V[Se],valueSpec:Q[Se],validateSpec:I.validateSpec,style:J,styleSpec:Y})):ne.push(new rt(Se,V[Se],`unknown property "${Se}"`));return ne})({sourceName:s,value:n,style:l.style,styleSpec:f,validateSpec:x}),M;case"geojson":if(M=ni({key:s,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:x,objectElementValidators:di}),n.cluster)for(const I in n.clusterProperties){const[B,F]=n.clusterProperties[I],V=typeof B=="string"?[B,["accumulated"],["get",I]]:B;M.push(...Pa({key:`${s}.${I}.map`,value:F,expressionContext:"cluster-map"})),M.push(...Pa({key:`${s}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return M;case"video":return ni({key:s,value:n,valueSpec:f.source_video,style:v,validateSpec:x,styleSpec:f});case"image":return ni({key:s,value:n,valueSpec:f.source_image,style:v,validateSpec:x,styleSpec:f});case"canvas":return[new rt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ls({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function hs(l){const n=l.value,s=l.styleSpec,f=s.light,v=l.style;let x=[];const T=yr(n);if(n===void 0)return x;if(T!=="object")return x=x.concat([new rt("light",n,`object expected, ${T} found`)]),x;for(const M in n){const I=M.match(/^(.*)-transition$/);x=x.concat(I&&f[I[1]]&&f[I[1]].transition?l.validateSpec({key:M,value:n[M],valueSpec:s.transition,validateSpec:l.validateSpec,style:v,styleSpec:s}):f[M]?l.validateSpec({key:M,value:n[M],valueSpec:f[M],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new rt(M,n[M],`unknown property "${M}"`)])}return x}function wi(l){const n=l.value,s=l.styleSpec,f=s.sky,v=l.style,x=yr(n);if(n===void 0)return[];if(x!=="object")return[new rt("sky",n,`object expected, ${x} found`)];let T=[];for(const M in n)T=T.concat(f[M]?l.validateSpec({key:M,value:n[M],valueSpec:f[M],style:v,styleSpec:s}):[new rt(M,n[M],`unknown property "${M}"`)]);return T}function Iu(l){const n=l.value,s=l.styleSpec,f=s.terrain,v=l.style;let x=[];const T=yr(n);if(n===void 0)return x;if(T!=="object")return x=x.concat([new rt("terrain",n,`object expected, ${T} found`)]),x;for(const M in n)x=x.concat(f[M]?l.validateSpec({key:M,value:n[M],valueSpec:f[M],validateSpec:l.validateSpec,style:v,styleSpec:s}):[new rt(M,n[M],`unknown property "${M}"`)]);return x}function ql(l){let n=[];const s=l.value,f=l.key;if(Array.isArray(s)){const v=[],x=[];for(const T in s)s[T].id&&v.includes(s[T].id)&&n.push(new rt(f,s,`all the sprites' ids must be unique, but ${s[T].id} is duplicated`)),v.push(s[T].id),s[T].url&&x.includes(s[T].url)&&n.push(new rt(f,s,`all the sprites' URLs must be unique, but ${s[T].url} is duplicated`)),x.push(s[T].url),n=n.concat(ni({key:`${f}[${T}]`,value:s[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return n}return Ca({key:f,value:s})}function Ff(l){return n=l.value,n&&n.constructor===Object?[]:[new rt(l.key,l.value,`object expected, ${yr(l.value)} found`)];var n}const Eh={"*":()=>[],array:Pu,boolean:function(l){const n=l.value,s=l.key,f=yr(n);return f!=="boolean"?[new rt(s,n,`boolean expected, ${f} found`)]:[]},number:Cu,color:ss,constants:zo,enum:ls,filter:Du,function:el,layer:rl,object:ni,source:us,light:hs,sky:wi,terrain:Iu,projection:function(l){const n=l.value,s=l.styleSpec,f=s.projection,v=l.style,x=yr(n);if(n===void 0)return[];if(x!=="object")return[new rt("projection",n,`object expected, ${x} found`)];let T=[];for(const M in n)T=T.concat(f[M]?l.validateSpec({key:M,value:n[M],valueSpec:f[M],style:v,styleSpec:s}):[new rt(M,n[M],`unknown property "${M}"`)]);return T},projectionDefinition:function(l){const n=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const f=yr(s);return f!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(s)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(s)?["array","string"].includes(f)?[]:[new rt(n,s,`projection expected, invalid type "${f}" found`)]:[new rt(n,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Ca,formatted:function(l){return Ca(l).length===0?[]:Pa(l)},resolvedImage:function(l){return Ca(l).length===0?[]:Pa(l)},padding:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){if(s.length<1||s.length>4)return[new rt(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const f={type:"number"};let v=[];for(let x=0;x<s.length;x++)v=v.concat(l.validateSpec({key:`${n}[${x}]`,value:s[x],validateSpec:l.validateSpec,valueSpec:f}));return v}return Cu({key:n,value:s,valueSpec:{}})},numberArray:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){const f={type:"number"};if(s.length<1)return[new rt(n,s,"array length at least 1 expected, length 0 found")];let v=[];for(let x=0;x<s.length;x++)v=v.concat(l.validateSpec({key:`${n}[${x}]`,value:s[x],validateSpec:l.validateSpec,valueSpec:f}));return v}return Cu({key:n,value:s,valueSpec:{}})},colorArray:function(l){const n=l.key,s=l.value;if(yr(s)==="array"){if(s.length<1)return[new rt(n,s,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<s.length;v++)f=f.concat(ss({key:`${n}[${v}]`,value:s[v]}));return f}return ss({key:n,value:s})},variableAnchorOffsetCollection:function(l){const n=l.key,s=l.value,f=yr(s),v=l.styleSpec;if(f!=="array"||s.length<1||s.length%2!=0)return[new rt(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let T=0;T<s.length;T+=2)x=x.concat(ls({key:`${n}[${T}]`,value:s[T],valueSpec:v.layout_symbol["text-anchor"]})),x=x.concat(Pu({key:`${n}[${T+1}]`,value:s[T+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:v}));return x},sprite:ql,state:Ff};function Ph(l){const n=l.value,s=l.valueSpec,f=l.styleSpec;return l.validateSpec=Ph,s.expression&&Po(Cr(n))?el(l):s.expression&&Au(os(n))?Pa(l):s.type&&Eh[s.type]?Eh[s.type](l):ni(En({},l,{valueSpec:s.type?f[s.type]:s}))}function In(l){const n=l.value,s=l.key,f=Ca(l);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new rt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new rt(s,n,'"glyphs" url must include a "{range}" token'))),f}function ha(l,n=Re){let s=[];return s=s.concat(Ph({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,validateSpec:Ph,objectElementValidators:{glyphs:In,"*":()=>[]}})),l.constants&&(s=s.concat(zo({key:"constants",value:l.constants}))),Cc(s)}function pi(l){return function(n){return l(Object.assign({},n,{validateSpec:Ph}))}}function Cc(l){return[].concat(l).sort(((n,s)=>n.line-s.line))}function Da(l){return function(...n){return Cc(l.apply(this,n))}}ha.source=Da(pi(us)),ha.sprite=Da(pi(ql)),ha.glyphs=Da(pi(In)),ha.light=Da(pi(hs)),ha.sky=Da(pi(wi)),ha.terrain=Da(pi(Iu)),ha.state=Da(pi(Ff)),ha.layer=Da(pi(rl)),ha.filter=Da(pi(Du)),ha.paintProperty=Da(pi(cs)),ha.layoutProperty=Da(pi(ko));const io=ha,Bo=io.light,Cm=io.sky,sp=io.paintProperty,Ch=io.layoutProperty;function Uf(l,n){let s=!1;if(n&&n.length)for(const f of n)l.fire(new et(new Error(f.message))),s=!0;return s}class Ia{constructor(n,s,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const T=new Int32Array(this.arrayBuffer);n=T[0],this.d=(s=T[1])+2*(f=T[2]);for(let I=0;I<this.d*this.d;I++){const B=T[3+I],F=T[3+I+1];v.push(B===F?null:T.subarray(B,F))}const M=T[3+v.length+1];this.keys=T.subarray(T[3+v.length],M),this.bboxes=T.subarray(M),this.insert=this._insertReadonly}else{this.d=s+2*f;for(let T=0;T<this.d*this.d;T++)v.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=f,this.scale=s/n,this.uid=0;const x=f/s*n;this.min=-x,this.max=n+x}insert(n,s,f,v,x){this._forEachCell(s,f,v,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,f,v,x,T){this.cells[x].push(T)}query(n,s,f,v,x){const T=this.min,M=this.max;if(n<=T&&s<=T&&M<=f&&M<=v&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,f,v,this._queryCell,I,{},x),I}}_queryCell(n,s,f,v,x,T,M,I){const B=this.cells[x];if(B!==null){const F=this.keys,V=this.bboxes;for(let Y=0;Y<B.length;Y++){const Q=B[Y];if(M[Q]===void 0){const J=4*Q;(I?I(V[J+0],V[J+1],V[J+2],V[J+3]):n<=V[J+2]&&s<=V[J+3]&&f>=V[J+0]&&v>=V[J+1])?(M[Q]=!0,T.push(F[Q])):M[Q]=!1}}}}_forEachCell(n,s,f,v,x,T,M,I){const B=this._convertToCellCoord(n),F=this._convertToCellCoord(s),V=this._convertToCellCoord(f),Y=this._convertToCellCoord(v);for(let Q=B;Q<=V;Q++)for(let J=F;J<=Y;J++){const ne=this.d*J+Q;if((!I||I(this._convertFromCellCoord(Q),this._convertFromCellCoord(J),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(J+1)))&&x.call(this,n,s,f,v,ne,T,M,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let f=0;for(let T=0;T<this.cells.length;T++)f+=this.cells[T].length;const v=new Int32Array(s+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let x=s;for(let T=0;T<n.length;T++){const M=n[T];v[3+T]=x,v.set(M,x),x+=M.length}return v[3+n.length]=x,v.set(this.keys,x),x+=this.keys.length,v[3+n.length+1]=x,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer}static serialize(n,s){const f=n.toArrayBuffer();return s&&s.push(f),{buffer:f}}static deserialize(n){return new Ia(n.buffer)}}const fa={};function Et(l,n,s={}){if(fa[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),fa[l]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Et("Object",Object),Et("Set",Set),Et("TransferableGridIndex",Ia),Et("Color",xr),Et("Error",Error),Et("AJAXError",_e),Et("ResolvedImage",Vn),Et("StylePropertyFunction",Io),Et("StyleExpression",Tu,{omit:["_evaluator"]}),Et("ZoomDependentExpression",ua),Et("ZoomConstantExpression",Pc),Et("CompoundExpression",Fa,{omit:["_evaluate"]});for(const l in Mc)Mc[l]._classRegistryKey||Et(`Expression_${l}`,Mc[l]);function Dh(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function fs(l){return l.$name||l.constructor._classRegistryKey}function Ou(l){return!(function(n){if(n===null||typeof n!="object")return!1;const s=fs(n);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Dh(l)||na(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Lo(l,n){if(Ou(l))return(Dh(l)||na(l))&&n&&n.push(l),ArrayBuffer.isView(l)&&n&&n.push(l.buffer),l instanceof ImageData&&n&&n.push(l.data.buffer),l;if(Array.isArray(l)){const x=[];for(const T of l)x.push(Lo(T,n));return x}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=fs(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!fa[s])throw new Error(`${s} is not registered.`);const{klass:f}=fa[s],v=f.serialize?f.serialize(l,n):{};if(f.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in l){if(!l.hasOwnProperty(x)||fa[s].omit.indexOf(x)>=0)continue;const T=l[x];v[x]=fa[s].shallow.indexOf(x)>=0?T:Lo(T,n)}l instanceof Error&&(v.message=l.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(v.$name=s),v}function ds(l){if(Ou(l))return l;if(Array.isArray(l))return l.map(ds);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const n=fs(l)||"Object";if(!fa[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=fa[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(l);const f=Object.create(s.prototype);for(const v of Object.keys(l)){if(v==="$name")continue;const x=l[v];f[v]=fa[n].shallow.indexOf(v)>=0?x:ds(x)}return f}class Ih{constructor(){this.first=!0}update(n,s){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const wr={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function ps(l){for(const n of l)if(Ic(n.charCodeAt(0)))return!0;return!1}function nl(l){for(const n of l)if(!$l(n.charCodeAt(0)))return!1;return!0}function Oh(l){const n=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(n.join("|"),"u")}const Gf=Oh(["Arab","Dupl","Mong","Ougr","Syrc"]);function $l(l){return!Gf.test(String.fromCodePoint(l))}const Dc=Oh(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ic(l){return!(l!==746&&l!==747&&(l<4352||!(wr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||wr["CJK Compatibility"](l)||wr["CJK Strokes"](l)||!(!wr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||wr["Enclosed CJK Letters and Months"](l)||wr["Ideographic Description Characters"](l)||wr.Kanbun(l)||wr.Katakana(l)&&l!==12540||!(!wr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!wr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||wr["Vertical Forms"](l)||wr["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Dc.test(String.fromCodePoint(l)))))}function Zl(l){return!(Ic(l)||(function(n){return!!(wr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||wr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||wr["Letterlike Symbols"](n)||wr["Number Forms"](n)||wr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||wr["Control Pictures"](n)&&n!==9251||wr["Optical Character Recognition"](n)||wr["Enclosed Alphanumerics"](n)||wr["Geometric Shapes"](n)||wr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||wr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||wr["CJK Symbols and Punctuation"](n)||wr.Katakana(n)||wr["Private Use Area"](n)||wr["CJK Compatibility Forms"](n)||wr["Small Form Variants"](n)||wr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(l))}const zu=Oh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function zh(l){return zu.test(String.fromCodePoint(l))}function il(l,n){return!(!n&&zh(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||wr.Khmer(l))}function Ru(l){for(const n of l)if(zh(n.charCodeAt(0)))return!0;return!1}const Yi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(Yi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,n){return u(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));n(s);const v=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,v]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:s};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Lr{constructor(n,s){this.isSupportedScript=Vf,this.zoom=n,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ih,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ih,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*s}}}function Vf(l){return(function(n,s){for(const f of n)if(!il(f.charCodeAt(0),s))return!1;return!0})(l,Yi.getRTLTextPluginStatus()==="loaded")}class ao{constructor(n,s,f){this.property=n,this.value=s,this.expression=(function(v,x,T){if(Po(v))return new Io(v,x);if(Au(v)){const M=Vl(v,x,T);if(M.result==="error")throw new Error(M.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return M.value}{let M=v;return x.type==="color"&&typeof v=="string"?M=xr.parse(v):x.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?x.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?x.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?M=hi.parse(v):x.type==="projectionDefinition"&&typeof v=="string"&&(M=_i.parse(v)):M=Gn.parse(v):M=ti.parse(v):M=Cn.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>M}}})(s===void 0?n.specification.default:s,n.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,s,f){return this.property.possiblyEvaluate(this,n,s,f)}}class oo{constructor(n,s){this.property=n,this.value=new ao(n,void 0,s)}transitioned(n,s){return new ku(this.property,this.value,s,kr({},n.transition,this.transition),n.now)}untransitioned(){return new ku(this.property,this.value,null,{},0)}}class Hl{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=s}getValue(n){return dt(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new oo(this._values[n].property,this._globalState)),this._values[n].value=new ao(this._values[n].property,s===null?void 0:dt(s),this._globalState)}getTransition(n){return dt(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new oo(this._values[n].property,this._globalState)),this._values[n].transition=dt(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f);const v=this.getTransition(s);v!==void 0&&(n[`${s}-transition`]=v)}return n}transitioned(n,s){const f=new Rh(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,s._values[v]);return f}untransitioned(){const n=new Rh(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class ku{constructor(n,s,f,v,x){this.property=n,this.value=s,this.begin=x+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,s,f){const v=n.now||0,x=this.value.possiblyEvaluate(n,s,f),T=this.prior;if(T){if(v>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(v<this.begin)return T.possiblyEvaluate(n,s,f);{const M=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(n,s,f),x,xt(M))}}return x}}class Rh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,f){const v=new Lu(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(n,s,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Bu{constructor(n,s){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=s}hasValue(n){return this._values[n].value!==void 0}getValue(n){return dt(this._values[n].value)}setValue(n,s){this._values[n]=new ao(this._values[n].property,s===null?void 0:dt(s),this._globalState)}serialize(){const n={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(n[s]=f)}return n}possiblyEvaluate(n,s,f){const v=new Lu(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(n,s,f);return v}}class da{constructor(n,s,f){this.property=n,this.value=s,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,f,v){return this.property.evaluate(this.value,this.parameters,n,s,f,v)}}class Lu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class kt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,f){const v=So[this.specification.type];return v?v(n,s,f):n}}class jt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,f,v){return new da(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},f,v)}:n.expression,s)}interpolate(n,s,f){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new da(this,{kind:"constant",value:void 0},n.parameters);const v=So[this.specification.type];if(v){const x=v(n.value.value,s.value.value,f);return new da(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,s,f,v,x,T){return n.kind==="constant"?n.value:n.evaluate(s,f,v,x,T)}}class al extends jt{possiblyEvaluate(n,s,f,v){if(n.value===void 0)return new da(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const x=n.expression.evaluate(s,null,{},f,v),T=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,M=this._calculate(T,T,T,s);return new da(this,{kind:"constant",value:M},s)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new da(this,{kind:"constant",value:x},s)}return new da(this,n.expression,s)}evaluate(n,s,f,v,x,T){if(n.kind==="source"){const M=n.evaluate(s,f,v,x,T);return this._calculate(M,M,M,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},f,v),n.evaluate({zoom:Math.floor(s.zoom)},f,v),n.evaluate({zoom:Math.floor(s.zoom)+1},f,v),s):n.value}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class qf{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(s,null,{},f,v);return this._calculate(x,x,x,s)}return this._calculate(n.expression.evaluate(new Lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Lr(Math.floor(s.zoom),s)),n.expression.evaluate(new Lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:f,to:s}}interpolate(n){return n}}class Oc{constructor(n){this.specification=n}possiblyEvaluate(n,s,f,v){return!!n.expression.evaluate(s,null,{},f,v)}interpolate(){return!1}}class Si{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const f=n[s];f.specification.overridable&&this.overridableProperties.push(s);const v=this.defaultPropertyValues[s]=new ao(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[s]=new oo(f,void 0);this.defaultTransitioningPropertyValues[s]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=v.possiblyEvaluate({})}}}Et("DataDrivenProperty",jt),Et("DataConstantProperty",kt),Et("CrossFadedDataDrivenProperty",al),Et("CrossFadedProperty",qf),Et("ColorRampProperty",Oc);const pa="-transition";class Ln extends It{constructor(n,s,f){if(super(),this.id=n.id,this.type=n.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=ji(n.filter,f)),s.layout&&(this._unevaluatedLayout=new Bu(s.layout,f)),s.paint)){this._transitionablePaint=new Hl(s.paint,f);for(const v in n.paint)this.setPaintProperty(v,n.paint[v],{validate:!1});for(const v in n.layout)this.setLayoutProperty(v,n.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Lu(s.paint)}}setFilter(n){this.filter=n,this._featureFilter=ji(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[s];for(const v of f.getGlobalStateRefs())n.add(v)}for(const s of this._featureFilter.getGlobalStateRefs())n.add(s);return n}getPaintAffectingGlobalStateRefs(){var n;const s=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const v=this._transitionablePaint._values[f].value;for(const x of v.getGlobalStateRefs()){const T=(n=s.get(x))!==null&&n!==void 0?n:[];T.push({name:f,value:v.value}),s.set(x,T)}}return s}setLayoutProperty(n,s,f={}){s!=null&&this._validate(Ch,`layers.${this.id}.layout.${n}`,n,s,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(pa)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,f={}){if(s!=null&&this._validate(sp,`layers.${this.id}.paint.${n}`,n,s,f))return!1;if(n.endsWith(pa))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const v=this._transitionablePaint._values[n],x=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),M=v.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||T||x||this._handleOverridablePaintPropertyUpdate(n,M,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ur(n,((s,f)=>!(s===void 0||f==="layout"&&!Object.keys(s).length||f==="paint"&&!Object.keys(s).length)))}_validate(n,s,f,v,x={}){return(!x||x.validate!==!1)&&Uf(this,n.call(io,{key:s,layerType:this.type,objectKey:f,value:v,styleSpec:Re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof da&&Eo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const ma={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ol{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class an{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function qr(l,n=1){let s=0,f=0;return{members:l.map((v=>{const x=ma[v.type].BYTES_PER_ELEMENT,T=s=Ni(s,Math.max(n,x)),M=v.components||1;return f=Math.max(f,x),s+=x*M,{name:v.name,type:v.type,components:M,offset:T}})),size:Ni(s,Math.max(f,n)),alignment:n}}function Ni(l,n){return Math.ceil(l/n)*n}class vn extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.int16[v+0]=s,this.int16[v+1]=f,n}}vn.prototype.bytesPerElement=4,Et("StructArrayLayout2i4",vn);class jo extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const x=3*n;return this.int16[x+0]=s,this.int16[x+1]=f,this.int16[x+2]=v,n}}jo.prototype.bytesPerElement=6,Et("StructArrayLayout3i6",jo);class Xi extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,f,v)}emplace(n,s,f,v,x){const T=4*n;return this.int16[T+0]=s,this.int16[T+1]=f,this.int16[T+2]=v,this.int16[T+3]=x,n}}Xi.prototype.bytesPerElement=8,Et("StructArrayLayout4i8",Xi);class dr extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T){const M=this.length;return this.resize(M+1),this.emplace(M,n,s,f,v,x,T)}emplace(n,s,f,v,x,T,M){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=v,this.int16[I+3]=x,this.int16[I+4]=T,this.int16[I+5]=M,n}}dr.prototype.bytesPerElement=12,Et("StructArrayLayout2i4i12",dr);class jr extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T){const M=this.length;return this.resize(M+1),this.emplace(M,n,s,f,v,x,T)}emplace(n,s,f,v,x,T,M){const I=4*n,B=8*n;return this.int16[I+0]=s,this.int16[I+1]=f,this.uint8[B+4]=v,this.uint8[B+5]=x,this.uint8[B+6]=T,this.uint8[B+7]=M,n}}jr.prototype.bytesPerElement=8,Et("StructArrayLayout2i4ub8",jr);class Kr extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.float32[v+0]=s,this.float32[v+1]=f,n}}Kr.prototype.bytesPerElement=8,Et("StructArrayLayout2f8",Kr);class zc extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I,B,F){const V=this.length;return this.resize(V+1),this.emplace(V,n,s,f,v,x,T,M,I,B,F)}emplace(n,s,f,v,x,T,M,I,B,F,V){const Y=10*n;return this.uint16[Y+0]=s,this.uint16[Y+1]=f,this.uint16[Y+2]=v,this.uint16[Y+3]=x,this.uint16[Y+4]=T,this.uint16[Y+5]=M,this.uint16[Y+6]=I,this.uint16[Y+7]=B,this.uint16[Y+8]=F,this.uint16[Y+9]=V,n}}zc.prototype.bytesPerElement=20,Et("StructArrayLayout10ui20",zc);class sl extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I){const B=this.length;return this.resize(B+1),this.emplace(B,n,s,f,v,x,T,M,I)}emplace(n,s,f,v,x,T,M,I,B){const F=8*n;return this.uint16[F+0]=s,this.uint16[F+1]=f,this.uint16[F+2]=v,this.uint16[F+3]=x,this.uint16[F+4]=T,this.uint16[F+5]=M,this.uint16[F+6]=I,this.uint16[F+7]=B,n}}sl.prototype.bytesPerElement=16,Et("StructArrayLayout8ui16",sl);class No extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I,B,F,V,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,s,f,v,x,T,M,I,B,F,V,Y)}emplace(n,s,f,v,x,T,M,I,B,F,V,Y,Q){const J=12*n;return this.int16[J+0]=s,this.int16[J+1]=f,this.int16[J+2]=v,this.int16[J+3]=x,this.uint16[J+4]=T,this.uint16[J+5]=M,this.uint16[J+6]=I,this.uint16[J+7]=B,this.int16[J+8]=F,this.int16[J+9]=V,this.int16[J+10]=Y,this.int16[J+11]=Q,n}}No.prototype.bytesPerElement=24,Et("StructArrayLayout4i4ui4i24",No);class Rc extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const x=3*n;return this.float32[x+0]=s,this.float32[x+1]=f,this.float32[x+2]=v,n}}Rc.prototype.bytesPerElement=12,Et("StructArrayLayout3f12",Rc);class w extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}w.prototype.bytesPerElement=4,Et("StructArrayLayout1ul4",w);class r extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I,B){const F=this.length;return this.resize(F+1),this.emplace(F,n,s,f,v,x,T,M,I,B)}emplace(n,s,f,v,x,T,M,I,B,F){const V=10*n,Y=5*n;return this.int16[V+0]=s,this.int16[V+1]=f,this.int16[V+2]=v,this.int16[V+3]=x,this.int16[V+4]=T,this.int16[V+5]=M,this.uint32[Y+3]=I,this.uint16[V+8]=B,this.uint16[V+9]=F,n}}r.prototype.bytesPerElement=20,Et("StructArrayLayout6i1ul2ui20",r);class c extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T){const M=this.length;return this.resize(M+1),this.emplace(M,n,s,f,v,x,T)}emplace(n,s,f,v,x,T,M){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=v,this.int16[I+3]=x,this.int16[I+4]=T,this.int16[I+5]=M,n}}c.prototype.bytesPerElement=12,Et("StructArrayLayout2i2i2i12",c);class p extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,f,v,x)}emplace(n,s,f,v,x,T){const M=4*n,I=8*n;return this.float32[M+0]=s,this.float32[M+1]=f,this.float32[M+2]=v,this.int16[I+6]=x,this.int16[I+7]=T,n}}p.prototype.bytesPerElement=16,Et("StructArrayLayout2f1f2i16",p);class _ extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T){const M=this.length;return this.resize(M+1),this.emplace(M,n,s,f,v,x,T)}emplace(n,s,f,v,x,T,M){const I=16*n,B=4*n,F=8*n;return this.uint8[I+0]=s,this.uint8[I+1]=f,this.float32[B+1]=v,this.float32[B+2]=x,this.int16[F+6]=T,this.int16[F+7]=M,n}}_.prototype.bytesPerElement=16,Et("StructArrayLayout2ub2f2i16",_);class S extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const x=3*n;return this.uint16[x+0]=s,this.uint16[x+1]=f,this.uint16[x+2]=v,n}}S.prototype.bytesPerElement=6,Et("StructArrayLayout3ui6",S);class A extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me){const ze=this.length;return this.resize(ze+1),this.emplace(ze,n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me)}emplace(n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me,ze){const be=24*n,Se=12*n,Fe=48*n;return this.int16[be+0]=s,this.int16[be+1]=f,this.uint16[be+2]=v,this.uint16[be+3]=x,this.uint32[Se+2]=T,this.uint32[Se+3]=M,this.uint32[Se+4]=I,this.uint16[be+10]=B,this.uint16[be+11]=F,this.uint16[be+12]=V,this.float32[Se+7]=Y,this.float32[Se+8]=Q,this.uint8[Fe+36]=J,this.uint8[Fe+37]=ne,this.uint8[Fe+38]=ce,this.uint32[Se+10]=me,this.int16[be+22]=ze,n}}A.prototype.bytesPerElement=48,Et("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class O extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me,ze,be,Se,Fe,We,lt,At,_t,Tt,Nt,wt){const St=this.length;return this.resize(St+1),this.emplace(St,n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me,ze,be,Se,Fe,We,lt,At,_t,Tt,Nt,wt)}emplace(n,s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me,ze,be,Se,Fe,We,lt,At,_t,Tt,Nt,wt,St){const tt=32*n,Xt=16*n;return this.int16[tt+0]=s,this.int16[tt+1]=f,this.int16[tt+2]=v,this.int16[tt+3]=x,this.int16[tt+4]=T,this.int16[tt+5]=M,this.int16[tt+6]=I,this.int16[tt+7]=B,this.uint16[tt+8]=F,this.uint16[tt+9]=V,this.uint16[tt+10]=Y,this.uint16[tt+11]=Q,this.uint16[tt+12]=J,this.uint16[tt+13]=ne,this.uint16[tt+14]=ce,this.uint16[tt+15]=me,this.uint16[tt+16]=ze,this.uint16[tt+17]=be,this.uint16[tt+18]=Se,this.uint16[tt+19]=Fe,this.uint16[tt+20]=We,this.uint16[tt+21]=lt,this.uint16[tt+22]=At,this.uint32[Xt+12]=_t,this.float32[Xt+13]=Tt,this.float32[Xt+14]=Nt,this.uint16[tt+30]=wt,this.uint16[tt+31]=St,n}}O.prototype.bytesPerElement=64,Et("StructArrayLayout8i15ui1ul2f2ui64",O);class R extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}R.prototype.bytesPerElement=4,Et("StructArrayLayout1f4",R);class U extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const x=3*n;return this.uint16[6*n+0]=s,this.float32[x+1]=f,this.float32[x+2]=v,n}}U.prototype.bytesPerElement=12,Et("StructArrayLayout1ui2f12",U);class G extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,f)}emplace(n,s,f,v){const x=4*n;return this.uint32[2*n+0]=s,this.uint16[x+2]=f,this.uint16[x+3]=v,n}}G.prototype.bytesPerElement=8,Et("StructArrayLayout1ul2ui8",G);class Z extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const f=this.length;return this.resize(f+1),this.emplace(f,n,s)}emplace(n,s,f){const v=2*n;return this.uint16[v+0]=s,this.uint16[v+1]=f,n}}Z.prototype.bytesPerElement=4,Et("StructArrayLayout2ui4",Z);class q extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}q.prototype.bytesPerElement=2,Et("StructArrayLayout1ui2",q);class K extends an{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,f,v)}emplace(n,s,f,v,x){const T=4*n;return this.float32[T+0]=s,this.float32[T+1]=f,this.float32[T+2]=v,this.float32[T+3]=x,n}}K.prototype.bytesPerElement=16,Et("StructArrayLayout4f16",K);class re extends ol{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}re.prototype.size=20;class he extends r{get(n){return new re(this,n)}}Et("CollisionBoxArray",he);class fe extends ol{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}fe.prototype.size=48;class de extends A{get(n){return new fe(this,n)}}Et("PlacedSymbolArray",de);class pe extends ol{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}pe.prototype.size=64;class ye extends O{get(n){return new pe(this,n)}}Et("SymbolInstanceArray",ye);class ge extends R{getoffsetX(n){return this.float32[1*n+0]}}Et("GlyphOffsetArray",ge);class xe extends jo{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Et("SymbolLineVertexArray",xe);class Me extends ol{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Me.prototype.size=12;class ve extends U{get(n){return new Me(this,n)}}Et("TextAnchorOffsetArray",ve);class Pe extends ol{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pe.prototype.size=8;class Ze extends G{get(n){return new Pe(this,n)}}Et("FeatureIndexArray",Ze);class Ue extends vn{}class Ge extends vn{}class He extends vn{}class yt extends dr{}class mt extends jr{}class st extends Kr{}class Ct extends zc{}class lr extends sl{}class Br extends No{}class on extends Rc{}class Wr extends w{}class hn extends c{}class sn extends _{}class ii extends S{}class fn extends Z{}const $r=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yr}=$r;class vr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,s,f,v){const x=this.segments[this.segments.length-1];return n>vr.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${vr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${vr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+n>vr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==v?this.createNewSegment(s,f,v):x}createNewSegment(n,s,f){const v={vertexOffset:n.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(n,s,f){return this.prepareSegment(0,n,s,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,f,v){return new vr([{vertexOffset:n,primitiveOffset:s,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function ai(l,n){return 256*(l=Gt(Math.floor(l),0,255))+Gt(Math.floor(n),0,255)}vr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Et("SegmentVector",vr);const Ga=qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ll=qr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Fo,Yl,kc,ms={exports:{}},cl={exports:{}},ga={exports:{}},gs=(function(){if(kc)return ms.exports;kc=1;var l=(Fo||(Fo=1,cl.exports=function(s,f){var v,x,T,M,I,B,F,V;for(x=s.length-(v=3&s.length),T=f,I=3432918353,B=461845907,V=0;V<x;)F=255&s.charCodeAt(V)|(255&s.charCodeAt(++V))<<8|(255&s.charCodeAt(++V))<<16|(255&s.charCodeAt(++V))<<24,++V,T=27492+(65535&(M=5*(65535&(T=(T^=F=(65535&(F=(F=(65535&F)*I+(((F>>>16)*I&65535)<<16)&4294967295)<<15|F>>>17))*B+(((F>>>16)*B&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(F=0,v){case 3:F^=(255&s.charCodeAt(V+2))<<16;case 2:F^=(255&s.charCodeAt(V+1))<<8;case 1:T^=F=(65535&(F=(F=(65535&(F^=255&s.charCodeAt(V)))*I+(((F>>>16)*I&65535)<<16)&4294967295)<<15|F>>>17))*B+(((F>>>16)*B&65535)<<16)&4294967295}return T^=s.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),cl.exports),n=(Yl||(Yl=1,ga.exports=function(s,f){for(var v,x=s.length,T=f^x,M=0;x>=4;)v=1540483477*(65535&(v=255&s.charCodeAt(M)|(255&s.charCodeAt(++M))<<8|(255&s.charCodeAt(++M))<<16|(255&s.charCodeAt(++M))<<24))+((1540483477*(v>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),x-=4,++M;switch(x){case 3:T^=(255&s.charCodeAt(M+2))<<16;case 2:T^=(255&s.charCodeAt(M+1))<<8;case 1:T=1540483477*(65535&(T^=255&s.charCodeAt(M)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),ga.exports);return ms.exports=l,ms.exports.murmur3=l,ms.exports.murmur2=n,ms.exports})(),so=P(gs);class ys{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,f,v){this.ids.push(qn(n)),this.positions.push(s,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=qn(n);let f=0,v=this.ids.length-1;for(;f<v;){const T=f+v>>1;this.ids[T]>=s?v=T:f=T+1}const x=[];for(;this.ids[f]===s;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(n,s){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return jn(f,v,0,f.length-1),s&&s.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const s=new ys;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function qn(l){const n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:so(String(l))}function jn(l,n,s,f){for(;s<f;){const v=l[s+f>>1];let x=s-1,T=f+1;for(;;){do x++;while(l[x]<v);do T--;while(l[T]>v);if(x>=T)break;Fi(l,x,T),Fi(n,3*x,3*T),Fi(n,3*x+1,3*T+1),Fi(n,3*x+2,3*T+2)}T-s<f-T?(jn(l,n,s,T),s=T+1):(jn(l,n,T+1,f),f=T)}}function Fi(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}Et("FeaturePositionMap",ys);class ln{constructor(n,s){this.gl=n.gl,this.location=s}}class kh extends ln{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Bh extends ln{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class $f extends ln{constructor(n,s){super(n,s),this.current=xr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const lp=new Float32Array(16);function ju(l){return[ai(255*l.r,255*l.g),ai(255*l.b,255*l.a)]}class Bc{constructor(n,s,f){this.value=n,this.uniformNames=s.map((v=>`u_${v}`)),this.type=f}setUniform(n,s,f){n.set(f.constantOr(this.value))}getBinding(n,s,f){return this.type==="color"?new $f(n,s):new kh(n,s)}}class ya{constructor(n,s){this.uniformNames=s.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setConstantDashPositions(n,s){this.dashTo=[0,n.y,n.height,n.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(n,s,f,v){let x=null;v==="u_pattern_to"?x=this.patternTo:v==="u_pattern_from"?x=this.patternFrom:v==="u_dasharray_to"?x=this.dashTo:v==="u_dasharray_from"?x=this.dashFrom:v==="u_pixel_ratio_to"?x=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&n.set(x)}getBinding(n,s,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new Bh(n,s):new kh(n,s)}}class Uo{constructor(n,s,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=s.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(n,s,f){const v=this.paintVertexArray.length,x=this.expression.evaluate(new Lr(0,f),s,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(v,n,x)}updatePaintArray(n,s,f,v,x){const T=this.expression.evaluate(new Lr(0,x),f,v);this._setPaintValue(n,s,T)}_setPaintValue(n,s,f){if(this.type==="color"){const v=ju(f);for(let x=n;x<s;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Va{constructor(n,s,f,v,x,T){this.expression=n,this.uniformNames=s.map((M=>`u_${M}_t`)),this.type=f,this.useIntegerZoom=v,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=s.map((M=>({name:`a_${M}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new T}populatePaintArray(n,s,f){const v=this.expression.evaluate(new Lr(this.zoom,f),s,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Lr(this.zoom+1,f),s,{},f.canonical,[],f.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,v,x)}updatePaintArray(n,s,f,v,x){const T=this.expression.evaluate(new Lr(this.zoom,x),f,v),M=this.expression.evaluate(new Lr(this.zoom+1,x),f,v);this._setPaintValue(n,s,T,M)}_setPaintValue(n,s,f,v){if(this.type==="color"){const x=ju(f),T=ju(v);for(let M=n;M<s;M++)this.paintVertexArray.emplace(M,x[0],x[1],T[0],T[1])}else{for(let x=n;x<s;x++)this.paintVertexArray.emplace(x,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const f=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,v=Gt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,s,f){return new kh(n,s)}}class Go{constructor(n,s,f,v,x,T){this.expression=n,this.type=s,this.useIntegerZoom=f,this.zoom=v,this.layerId=T,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,s,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,this.getPositionIds(s),f)}updatePaintArray(n,s,f,v,x){this._setPaintValues(n,s,this.getPositionIds(f),x)}_setPaintValues(n,s,f,v){const x=this.getPositions(v);if(!x||!f)return;const T=x[f.min],M=x[f.mid],I=x[f.max];if(T&&M&&I)for(let B=n;B<s;B++)this.emplace(this.zoomInPaintVertexArray,B,M,T),this.emplace(this.zoomOutPaintVertexArray,B,M,I)}upload(n){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ul extends Go{getPositions(n){return n.imagePositions}getPositionIds(n){return n.patterns&&n.patterns[this.layerId]}getVertexAttributes(){return Ga.members}emplace(n,s,f,v){n.emplace(s,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],f.pixelRatio,v.pixelRatio)}}class Nu extends Go{getPositions(n){return n.dashPositions}getPositionIds(n){return n.dashes&&n.dashes[this.layerId]}getVertexAttributes(){return ll.members}emplace(n,s,f,v){n.emplace(s,0,f.y,f.height,f.width,0,v.y,v.height,v.width)}}class Xl{constructor(n,s,f){this.binders={},this._buffers=[];const v=[];for(const x in n.paint._values){if(!f(x))continue;const T=n.paint.get(x);if(!(T instanceof da&&Eo(T.property.specification)))continue;const M=yy(x,n.type),I=T.value,B=T.property.specification.type,F=T.property.useIntegerZoom,V=T.property.specification["property-type"],Y=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=Y?new ya(I.value,M):new Bc(I.value,M,B),v.push(`/u_${x}`);else if(I.kind==="source"||Y){const Q=Lh(x,B,"source");this.binders[x]=Y?x==="line-dasharray"?new Nu(I,B,F,s,Q,n.id):new ul(I,B,F,s,Q,n.id):new Uo(I,M,B,Q),v.push(`/a_${x}`)}else{const Q=Lh(x,B,"composite");this.binders[x]=new Va(I,M,B,F,s,Q),v.push(`/z_${x}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Uo||s instanceof Va?s.maxValue:0}populatePaintArrays(n,s,f){for(const v in this.binders){const x=this.binders[v];(x instanceof Uo||x instanceof Va||x instanceof Go)&&x.populatePaintArray(n,s,f)}}setConstantPatternPositions(n,s){for(const f in this.binders){const v=this.binders[f];v instanceof ya&&v.setConstantPatternPositions(n,s)}}setConstantDashPositions(n,s){for(const f in this.binders){const v=this.binders[f];v instanceof ya&&v.setConstantDashPositions(n,s)}}updatePaintArrays(n,s,f,v,x){let T=!1;for(const M in n){const I=s.getPositions(M);for(const B of I){const F=f.feature(B.index);for(const V in this.binders){const Y=this.binders[V];if((Y instanceof Uo||Y instanceof Va||Y instanceof Go)&&Y.expression.isStateDependent===!0){const Q=v.paint.get(V);Y.expression=Q.value,Y.updatePaintArray(B.start,B.end,F,n[M],x),T=!0}}}}return T}defines(){const n=[];for(const s in this.binders){const f=this.binders[s];(f instanceof Bc||f instanceof ya)&&n.push(...f.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Uo||f instanceof Va)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof Go){const v=f.getVertexAttributes();for(const x of v)n.push(x.name)}}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Bc||f instanceof ya||f instanceof Va)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const f=[];for(const v in this.binders){const x=this.binders[v];if(x instanceof Bc||x instanceof ya||x instanceof Va){for(const T of x.uniformNames)if(s[T]){const M=x.getBinding(n,s[T],T);f.push({name:T,property:v,binding:M})}}}return f}setUniforms(n,s,f,v){for(const{name:x,property:T,binding:M}of s)this.binders[T].setUniform(M,v,f.get(T),x)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const f=this.binders[s];if(n&&f instanceof Go){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Uo||f instanceof Va)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const s in this.binders){const f=this.binders[s];(f instanceof Uo||f instanceof Va||f instanceof Go)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Uo||s instanceof Va||s instanceof Go)&&s.destroy()}}}class Lc{constructor(n,s,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Xl(v,s,f);this.needsUpload=!1,this._featureMap=new ys,this._bufferOffset=0}populatePaintArrays(n,s,f,v){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,s,v);s.id!==void 0&&this._featureMap.add(s.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,f,v){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,s,x,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function yy(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function Lh(l,n,s){const f={color:{source:Kr,composite:K},number:{source:R,composite:Kr}},v=(function(x){return{"line-pattern":{source:Ct,composite:Ct},"fill-pattern":{source:Ct,composite:Ct},"fill-extrusion-pattern":{source:Ct,composite:Ct},"line-dasharray":{source:lr,composite:lr}}[x]})(l);return v&&v[s]||f[n][s]}Et("ConstantBinder",Bc),Et("CrossFadedConstantBinder",ya),Et("SourceExpressionBinder",Uo),Et("CrossFadedPatternBinder",ul),Et("CrossFadedDasharrayBinder",Nu),Et("CompositeExpressionBinder",Va),Et("ProgramConfiguration",Xl,{omit:["_buffers"]}),Et("ProgramConfigurationSet",Lc);const cp=Math.pow(2,14)-1,up=-cp-1;function jc(l){const n=bt/l.extent,s=l.loadGeometry();for(let f=0;f<s.length;f++){const v=s[f];for(let x=0;x<v.length;x++){const T=v[x],M=Math.round(T.x*n),I=Math.round(T.y*n);T.x=Gt(M,up,cp),T.y=Gt(I,up,cp),(M<T.x||M>T.x+1||I<T.y||I>T.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Kl(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?jc(l):[]}}const hp=-32768;function vy(l,n,s,f,v){l.emplaceBack(hp+8*n+f,hp+8*s+v)}class fp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new Ge,this.indexArray=new ii,this.segments=new vr,this.programConfigurations=new Lc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){const v=this.layers[0],x=[];let T=null,M=!1,I=v.type==="heatmap";if(v.type==="circle"){const F=v;T=F.layout.get("circle-sort-key"),M=!T.isConstant(),I=I||F.paint.get("circle-pitch-alignment")==="map"}const B=I?s.subdivisionGranularity.circle:1;for(const{feature:F,id:V,index:Y,sourceLayerIndex:Q}of n){const J=this.layers[0]._featureFilter.needGeometry,ne=Kl(F,J);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),ne,f))continue;const ce=M?T.evaluate(ne,{},f):void 0,me={id:V,properties:F.properties,type:F.type,sourceLayerIndex:Q,index:Y,geometry:J?ne.geometry:jc(F),patterns:{},sortKey:ce};x.push(me)}M&&x.sort(((F,V)=>F.sortKey-V.sortKey));for(const F of x){const{geometry:V,index:Y,sourceLayerIndex:Q}=F,J=n[Y].feature;this.addFeature(F,V,Y,f,B),s.featureIndex.insert(J,V,Y,Q,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,f,v,x=1){let T;switch(x){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const M=T.length;for(const I of s)for(const B of I){const F=B.x,V=B.y;if(F<0||F>=bt||V<0||V>=bt)continue;const Y=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,n.sortKey),Q=Y.vertexLength;for(let J=0;J<M;J++)for(let ne=0;ne<M;ne++)vy(this.layoutVertexArray,F,V,T[ne],T[J]);for(let J=0;J<M-1;J++)for(let ne=0;ne<M-1;ne++){const ce=Q+J*M+ne,me=Q+(J+1)*M+ne;this.indexArray.emplaceBack(ce,me+1,ce+1),this.indexArray.emplaceBack(ce,me,me+1)}Y.vertexLength+=M*M,Y.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:{},canonical:v})}}function Nc(l,n){for(let s=0;s<l.length;s++)if(Nh(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Nh(l,n[s]))return!0;return!!jh(l,n)}function Zf(l,n,s){return!!Nh(l,n)||!!Hf(n,l,s)}function Dm(l,n){if(l.length===1)return Om(n,l[0]);for(let s=0;s<n.length;s++){const f=n[s];for(let v=0;v<f.length;v++)if(Nh(l,f[v]))return!0}for(let s=0;s<l.length;s++)if(Om(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(jh(l,n[s]))return!0;return!1}function _y(l,n,s){if(l.length>1){if(jh(l,n))return!0;for(let f=0;f<n.length;f++)if(Hf(n[f],l,s))return!0}for(let f=0;f<l.length;f++)if(Hf(l[f],n,s))return!0;return!1}function jh(l,n){if(l.length===0||n.length===0)return!1;for(let s=0;s<l.length-1;s++){const f=l[s],v=l[s+1];for(let x=0;x<n.length-1;x++)if(by(f,v,n[x],n[x+1]))return!0}return!1}function by(l,n,s,f){return Jr(l,s,f)!==Jr(n,s,f)&&Jr(l,n,s)!==Jr(l,n,f)}function Hf(l,n,s){const f=s*s;if(n.length===1)return l.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(Im(l,n[v-1],n[v])<f)return!0;return!1}function Im(l,n,s){const f=n.distSqr(s);if(f===0)return l.distSqr(n);const v=((l.x-n.x)*(s.x-n.x)+(l.y-n.y)*(s.y-n.y))/f;return l.distSqr(v<0?n:v>1?s:s.sub(n)._mult(v)._add(n))}function Om(l,n){let s,f,v,x=!1;for(let T=0;T<l.length;T++){s=l[T];for(let M=0,I=s.length-1;M<s.length;I=M++)f=s[M],v=s[I],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(x=!x)}return x}function Nh(l,n){let s=!1;for(let f=0,v=l.length-1;f<l.length;v=f++){const x=l[f],T=l[v];x.y>n.y!=T.y>n.y&&n.x<(T.x-x.x)*(n.y-x.y)/(T.y-x.y)+x.x&&(s=!s)}return s}function zm(l,n,s){const f=s[0],v=s[2];if(l.x<f.x&&n.x<f.x||l.x>v.x&&n.x>v.x||l.y<f.y&&n.y<f.y||l.y>v.y&&n.y>v.y)return!1;const x=Jr(l,n,s[0]);return x!==Jr(l,n,s[1])||x!==Jr(l,n,s[2])||x!==Jr(l,n,s[3])}function On(l,n,s){const f=n.paint.get(l).value;return f.kind==="constant"?f.value:s.programConfigurations.get(n.id).getMaxValue(l)}function Ti(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Yf(l,n,s,f,v){if(!n[0]&&!n[1])return l;const x=E.convert(n)._mult(v);s==="viewport"&&x._rotate(-f);const T=[];for(let M=0;M<l.length;M++)T.push(l[M].sub(x));return T}function xy({queryGeometry:l,size:n},s){return Zf(l,s,n)}function wy({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},x){return Zf(l,x,n*(s.projectTileCoordinates(x.x,x.y,f,v).signedDistanceFromCamera/s.cameraToCenterDistance))}function Sy({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},x){const T=s.projectTileCoordinates(x.x,x.y,f,v).signedDistanceFromCamera,M=n*(s.cameraToCenterDistance/T);return Zf(l,Fh(x,s,f,v),M)}function Xf({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v},x){return Zf(l,Fh(x,s,f,v),n)}function Rm({queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v,pitchAlignment:x="map",pitchScale:T="map"},M){const I=x==="map"?T==="map"?xy:wy:T==="map"?Sy:Xf,B={queryGeometry:l,size:n,transform:s,unwrappedTileID:f,getElevation:v};for(const F of M)for(const V of F)if(I(B,V))return!0;return!1}function Fh(l,n,s,f){const v=n.projectTileCoordinates(l.x,l.y,s,f).point;return new E((.5*v.x+.5)*n.width,(.5*-v.y+.5)*n.height)}let km,Ty;Et("CircleBucket",fp,{omit:["layers"]});var dp={get paint(){return Ty=Ty||new Si({"circle-radius":new jt(Re.paint_circle["circle-radius"]),"circle-color":new jt(Re.paint_circle["circle-color"]),"circle-blur":new jt(Re.paint_circle["circle-blur"]),"circle-opacity":new jt(Re.paint_circle["circle-opacity"]),"circle-translate":new kt(Re.paint_circle["circle-translate"]),"circle-translate-anchor":new kt(Re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kt(Re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kt(Re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new jt(Re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new jt(Re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new jt(Re.paint_circle["circle-stroke-opacity"])})},get layout(){return km=km||new Si({"circle-sort-key":new jt(Re.layout_circle["circle-sort-key"])})}};class Bm extends Ln{constructor(n,s){super(n,dp,s)}createBucket(n){return new fp(n)}queryRadius(n){const s=n;return On("circle-radius",this,s)+On("circle-stroke-width",this,s)+Ti(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:x,pixelsToTileUnits:T,unwrappedTileID:M,getElevation:I}){const B=Yf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,T),F=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),V=this.paint.get("circle-pitch-scale"),Y=this.paint.get("circle-pitch-alignment");let Q,J;return Y==="map"?(Q=B,J=F*T):(Q=(function(ne,ce,me,ze){return ne.map((be=>Fh(be,ce,me,ze)))})(B,x,M,I),J=F),Rm({queryGeometry:Q,size:J,transform:x,unwrappedTileID:M,getElevation:I,pitchAlignment:Y,pitchScale:V},v)}}class Lm extends fp{}let jm;Et("HeatmapBucket",Lm,{omit:["layers"]});var Ay={get paint(){return jm=jm||new Si({"heatmap-radius":new jt(Re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new jt(Re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kt(Re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Oc(Re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kt(Re.paint_heatmap["heatmap-opacity"])})}};function Kf(l,{width:n,height:s},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*s*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*s*f}`)}else v=new Uint8Array(n*s*f);return l.width=n,l.height=s,l.data=v,l}function pp(l,{width:n,height:s},f){if(n===l.width&&s===l.height)return;const v=Kf({},{width:n,height:s},f);Wf(l,v,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,s)},f),l.width=n,l.height=s,l.data=v.data}function Wf(l,n,s,f,v,x){if(v.width===0||v.height===0)return n;if(v.width>l.width||v.height>l.height||s.x>l.width-v.width||s.y>l.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const T=l.data,M=n.data;if(T===M)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<v.height;I++){const B=((s.y+I)*l.width+s.x)*x,F=((f.y+I)*n.width+f.x)*x;for(let V=0;V<v.width*x;V++)M[F+V]=T[B+V]}return n}class Uh{constructor(n,s){Kf(this,n,1,s)}resize(n){pp(this,n,1)}clone(){return new Uh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,x){Wf(n,s,f,v,x,1)}}class Ki{constructor(n,s){Kf(this,n,4,s)}resize(n){pp(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ki({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,f,v,x){Wf(n,s,f,v,x,4)}setPixel(n,s,f){const v=4*(n*this.width+s);this.data[v+0]=Math.round(255*f.r/f.a),this.data[v+1]=Math.round(255*f.g/f.a),this.data[v+2]=Math.round(255*f.b/f.a),this.data[v+3]=Math.round(255*f.a)}}function Qf(l){const n={},s=l.resolution||256,f=l.clips?l.clips.length:1,v=l.image||new Ki({width:s,height:f});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const x=(T,M,I)=>{n[l.evaluationKey]=I;const B=l.expression.evaluate(n);v.setPixel(T/4/s,M/4,B)};if(l.clips)for(let T=0,M=0;T<f;++T,M+=4*s)for(let I=0,B=0;I<s;I++,B+=4){const F=I/(s-1),{start:V,end:Y}=l.clips[T];x(M,B,V*(1-F)+Y*F)}else for(let T=0,M=0;T<s;T++,M+=4)x(0,M,T/(s-1));return v}Et("AlphaImage",Uh),Et("RGBAImage",Ki);const Jf="big-fb";class My extends Ln{createBucket(n){return new Lm(n)}constructor(n,s){super(n,Ay,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Qf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Jf)&&this.heatmapFbos.delete(Jf)}queryRadius(n){return On("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:x,pixelsToTileUnits:T,unwrappedTileID:M,getElevation:I}){return Rm({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(s,f)*T,transform:x,unwrappedTileID:M,getElevation:I},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let mp;var Ey={get paint(){return mp=mp||new Si({"hillshade-illumination-direction":new kt(Re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new kt(Re.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new kt(Re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kt(Re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kt(Re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kt(Re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kt(Re.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new kt(Re.paint_hillshade["hillshade-method"])})}};class Wl extends Ln{constructor(n,s){super(n,Ey,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const x=Math.max(n.length,s.length,f.length,v.length);n=n.concat(Array(x-n.length).fill(n.at(-1))),s=s.concat(Array(x-s.length).fill(s.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),v=v.concat(Array(x-v.length).fill(v.at(-1)));const T=s.map(li);return{directionRadians:n.map(li),altitudeRadians:T,shadowColor:v,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let gp;var $0={get paint(){return gp=gp||new Si({"color-relief-opacity":new kt(Re["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Oc(Re["paint_color-relief"]["color-relief-color"])})}};class yp{constructor(n,s,f,v){this.context=n,this.format=f,this.texture=n.gl.createTexture(),this.update(s,v)}update(n,s,f){const{width:v,height:x}=n,T=!(this.size&&this.size[0]===v&&this.size[1]===x||f),{context:M}=this,{gl:I}=M;if(this.useMipmap=!!(s&&s.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!s||s.premultiply!==!1)),T)this.size=[v,x],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||na(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,v,x,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:B,y:F}=f||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||na(n)?I.texSubImage2D(I.TEXTURE_2D,0,B,F,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,B,F,v,x,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),M.pixelStoreUnpackFlipY.setDefault(),M.pixelStoreUnpack.setDefault(),M.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,s,f){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),n!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||n),this.filter=n),s!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class hl{constructor(n,s,f,v=1,x=1,T=1,M=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Qt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=x,this.blueFactor=T,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<I;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(I,B)]=this.data[this._idx(I-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,I)]=this.data[this._idx(B,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<I;B++)for(let F=0;F<I;F++){const V=this.get(B,F);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,s){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,s);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,f){return n*this.redFactor+s*this.greenFactor+f*this.blueFactor-this.baseShift}pack(n){return vp(n,this.getUnpackVector())}getPixels(){return new Ki({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=s*this.dim,x=s*this.dim+this.dim,T=f*this.dim,M=f*this.dim+this.dim;switch(s){case-1:v=x-1;break;case 1:x=v+1}switch(f){case-1:T=M-1;break;case 1:M=T+1}const I=-s*this.dim,B=-f*this.dim;for(let F=T;F<M;F++)for(let V=v;V<x;V++)this.data[this._idx(V,F)]=n.data[this._idx(V+I,F+B)]}}function vp(l,n){const s=n[0],f=n[1],v=n[2],x=n[3],T=Math.min(s,f,v),M=Math.round((l+x)/T);return{r:Math.floor(M*T/s)%256,g:Math.floor(M*T/f)%256,b:Math.floor(M*T/v)%256}}Et("DEMData",hl);class Py extends Ln{constructor(n,s){super(n,$0,s)}_createColorRamp(n){const s={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Pc&&f._styleExpression.expression instanceof bi){this.colorRampExpression=f;const T=f._styleExpression.expression;s.elevationStops=T.labels,s.colorStops=[];for(const M of s.elevationStops)s.colorStops.push(T.evaluate({globals:{elevation:M}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[xr.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=n)return s;const v={elevationStops:[],colorStops:[]},x=(s.elevationStops.length-1)/(n-1);for(let T=0;T<s.elevationStops.length-.5;T+=x)v.elevationStops.push(s.elevationStops[Math.round(T)]),v.colorStops.push(s.colorStops[Math.round(T)]);return Qt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,s,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(s),x=new Ki({width:v.colorStops.length,height:1}),T=new Ki({width:v.colorStops.length,height:1});for(let M=0;M<v.elevationStops.length;M++){const I=vp(v.elevationStops[M],f);T.setPixel(0,M,new xr(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,M,v.colorStops[M])}return this.colorRampTextures={elevationTexture:new yp(n,T,n.gl.RGBA),colorTexture:new yp(n,x,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const _p=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ed}=_p;function dn(l,n,s){const f=s.patternDependencies;let v=!1;for(const x of n){const T=x.paint.get(`${l}-pattern`);T.isConstant()||(v=!0);const M=T.constantOr(null);M&&(v=!0,f[M.to]=!0,f[M.from]=!0)}return v}function Nm(l,n,s,f,v){const{zoom:x}=f,T=v.patternDependencies;for(const M of n){const I=M.paint.get(`${l}-pattern`).value;if(I.kind!=="constant"){let B=I.evaluate({zoom:x-1},s,{},v.availableImages),F=I.evaluate({zoom:x},s,{},v.availableImages),V=I.evaluate({zoom:x+1},s,{},v.availableImages);B=B&&B.name?B.name:B,F=F&&F.name?F.name:F,V=V&&V.name?V.name:V,T[B]=!0,T[F]=!0,T[V]=!0,s.patterns[M.id]={min:B,mid:F,max:V}}}return s}function Cy(l,n,s,f,v){let x;if(v===(function(T,M,I,B){let F=0;for(let V=M,Y=I-B;V<I;V+=B)F+=(T[Y]-T[V])*(T[V+1]+T[Y+1]),Y=V;return F})(l,n,s,f)>0)for(let T=n;T<s;T+=f)x=Vm(T/f|0,l[T],l[T+1],x);else for(let T=s-f;T>=n;T-=f)x=Vm(T/f|0,l[T],l[T+1],x);return x&&zn(x,x.next)&&(pn(x),x=x.next),x}function Fc(l,n){if(!l)return l;n||(n=l);let s,f=l;do if(s=!1,f.steiner||!zn(f,f.next)&&Xr(f.prev,f,f.next)!==0)f=f.next;else{if(pn(f),f=n=f.prev,f===f.next)break;s=!0}while(s||f!==n);return n}function Ql(l,n,s,f,v,x,T){if(!l)return;!T&&x&&(function(I,B,F,V){let Y=I;do Y.z===0&&(Y.z=bp(Y.x,Y.y,B,F,V)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==I);Y.prevZ.nextZ=null,Y.prevZ=null,(function(Q){let J,ne=1;do{let ce,me=Q;Q=null;let ze=null;for(J=0;me;){J++;let be=me,Se=0;for(let We=0;We<ne&&(Se++,be=be.nextZ,be);We++);let Fe=ne;for(;Se>0||Fe>0&&be;)Se!==0&&(Fe===0||!be||me.z<=be.z)?(ce=me,me=me.nextZ,Se--):(ce=be,be=be.nextZ,Fe--),ze?ze.nextZ=ce:Q=ce,ce.prevZ=ze,ze=ce;me=be}ze.nextZ=null,ne*=2}while(J>1)})(Y)})(l,f,v,x);let M=l;for(;l.prev!==l.next;){const I=l.prev,B=l.next;if(x?Dy(l,f,v,x):Uc(l))n.push(I.i,l.i,B.i),pn(l),l=B.next,M=B.next;else if((l=B)===M){T?T===1?Ql(l=Iy(Fc(l),n),n,s,f,v,x,2):T===2&&td(l,n,s,f,v,x):Ql(Fc(l),n,s,f,v,x,1);break}}}function Uc(l){const n=l.prev,s=l,f=l.next;if(Xr(n,s,f)>=0)return!1;const v=n.x,x=s.x,T=f.x,M=n.y,I=s.y,B=f.y,F=Math.min(v,x,T),V=Math.min(M,I,B),Y=Math.max(v,x,T),Q=Math.max(M,I,B);let J=f.next;for(;J!==n;){if(J.x>=F&&J.x<=Y&&J.y>=V&&J.y<=Q&&Gc(v,M,x,I,T,B,J.x,J.y)&&Xr(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Dy(l,n,s,f){const v=l.prev,x=l,T=l.next;if(Xr(v,x,T)>=0)return!1;const M=v.x,I=x.x,B=T.x,F=v.y,V=x.y,Y=T.y,Q=Math.min(M,I,B),J=Math.min(F,V,Y),ne=Math.max(M,I,B),ce=Math.max(F,V,Y),me=bp(Q,J,n,s,f),ze=bp(ne,ce,n,s,f);let be=l.prevZ,Se=l.nextZ;for(;be&&be.z>=me&&Se&&Se.z<=ze;){if(be.x>=Q&&be.x<=ne&&be.y>=J&&be.y<=ce&&be!==v&&be!==T&&Gc(M,F,I,V,B,Y,be.x,be.y)&&Xr(be.prev,be,be.next)>=0||(be=be.prevZ,Se.x>=Q&&Se.x<=ne&&Se.y>=J&&Se.y<=ce&&Se!==v&&Se!==T&&Gc(M,F,I,V,B,Y,Se.x,Se.y)&&Xr(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;be&&be.z>=me;){if(be.x>=Q&&be.x<=ne&&be.y>=J&&be.y<=ce&&be!==v&&be!==T&&Gc(M,F,I,V,B,Y,be.x,be.y)&&Xr(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Se&&Se.z<=ze;){if(Se.x>=Q&&Se.x<=ne&&Se.y>=J&&Se.y<=ce&&Se!==v&&Se!==T&&Gc(M,F,I,V,B,Y,Se.x,Se.y)&&Xr(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function Iy(l,n){let s=l;do{const f=s.prev,v=s.next.next;!zn(f,v)&&wp(f,s,s.next,v)&&nd(f,v)&&nd(v,f)&&(n.push(f.i,s.i,v.i),pn(s),pn(s.next),s=l=v),s=s.next}while(s!==l);return Fc(s)}function td(l,n,s,f,v,x){let T=l;do{let M=T.next.next;for(;M!==T.prev;){if(T.i!==M.i&&zy(T,M)){let I=Gm(T,M);return T=Fc(T,T.next),I=Fc(I,I.next),Ql(T,n,s,f,v,x,0),void Ql(I,n,s,f,v,x,0)}M=M.next}T=T.next}while(T!==l)}function fl(l,n){let s=l.x-n.x;return s===0&&(s=l.y-n.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(n.next.y-n.y)/(n.next.x-n.x)),s}function Oy(l,n){const s=(function(v,x){let T=x;const M=v.x,I=v.y;let B,F=-1/0;if(zn(v,T))return T;do{if(zn(v,T.next))return T.next;if(I<=T.y&&I>=T.next.y&&T.next.y!==T.y){const ne=T.x+(I-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ne<=M&&ne>F&&(F=ne,B=T.x<T.next.x?T:T.next,ne===M))return B}T=T.next}while(T!==x);if(!B)return null;const V=B,Y=B.x,Q=B.y;let J=1/0;T=B;do{if(M>=T.x&&T.x>=Y&&M!==T.x&&xp(I<Q?M:F,I,Y,Q,I<Q?F:M,I,T.x,T.y)){const ne=Math.abs(I-T.y)/(M-T.x);nd(T,v)&&(ne<J||ne===J&&(T.x>B.x||T.x===B.x&&Fm(B,T)))&&(B=T,J=ne)}T=T.next}while(T!==V);return B})(l,n);if(!s)return n;const f=Gm(s,l);return Fc(f,f.next),Fc(s,s.next)}function Fm(l,n){return Xr(l.prev,l,n.prev)<0&&Xr(n.next,l,l.next)<0}function bp(l,n,s,f,v){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Um(l){let n=l,s=l;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==l);return s}function xp(l,n,s,f,v,x,T,M){return(v-T)*(n-M)>=(l-T)*(x-M)&&(l-T)*(f-M)>=(s-T)*(n-M)&&(s-T)*(x-M)>=(v-T)*(f-M)}function Gc(l,n,s,f,v,x,T,M){return!(l===T&&n===M)&&xp(l,n,s,f,v,x,T,M)}function zy(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!(function(s,f){let v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==f.i&&v.next.i!==f.i&&wp(v,v.next,s,f))return!0;v=v.next}while(v!==s);return!1})(l,n)&&(nd(l,n)&&nd(n,l)&&(function(s,f){let v=s,x=!1;const T=(s.x+f.x)/2,M=(s.y+f.y)/2;do v.y>M!=v.next.y>M&&v.next.y!==v.y&&T<(v.next.x-v.x)*(M-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==s);return x})(l,n)&&(Xr(l.prev,l,n.prev)||Xr(l,n.prev,n))||zn(l,n)&&Xr(l.prev,l,l.next)>0&&Xr(n.prev,n,n.next)>0)}function Xr(l,n,s){return(n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)}function zn(l,n){return l.x===n.x&&l.y===n.y}function wp(l,n,s,f){const v=mi(Xr(l,n,s)),x=mi(Xr(l,n,f)),T=mi(Xr(s,f,l)),M=mi(Xr(s,f,n));return v!==x&&T!==M||!(v!==0||!rd(l,s,n))||!(x!==0||!rd(l,f,n))||!(T!==0||!rd(s,l,f))||!(M!==0||!rd(s,n,f))}function rd(l,n,s){return n.x<=Math.max(l.x,s.x)&&n.x>=Math.min(l.x,s.x)&&n.y<=Math.max(l.y,s.y)&&n.y>=Math.min(l.y,s.y)}function mi(l){return l>0?1:l<0?-1:0}function nd(l,n){return Xr(l.prev,l,l.next)<0?Xr(l,n,l.next)>=0&&Xr(l,l.prev,n)>=0:Xr(l,n,l.prev)<0||Xr(l,l.next,n)<0}function Gm(l,n){const s=va(l.i,l.x,l.y),f=va(n.i,n.x,n.y),v=l.next,x=n.prev;return l.next=n,n.prev=l,s.next=v,v.prev=s,f.next=s,s.prev=f,x.next=f,f.prev=x,f}function Vm(l,n,s,f){const v=va(l,n,s);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function pn(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function va(l,n,s){return{i:l,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class qa{constructor(n,s){if(s>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=s}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class id{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}id.noSubdivision=new id({fill:new qa(0,0),line:new qa(0,0),tile:new qa(0,0),stencil:new qa(0,0),circle:1}),Et("SubdivisionGranularityExpression",qa),Et("SubdivisionGranularitySetting",id);const Fu=-32768,Gh=32767;class Z0{constructor(n,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=bt/n,this._canonical=s}_getKey(n,s){return(n+=32768)<<16|s+32768}_vertexToIndex(n,s){if(n<-32768||s<-32768||n>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(n),v=0|Math.round(s),x=this._getKey(f,v);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,T),this._vertexBuffer.push(f,v),T}_subdivideTrianglesScanline(n){if(this._granularity<2)return(function(v,x){const T=[];for(let M=0;M<x.length;M+=3){const I=x[M],B=x[M+1],F=x[M+2],V=v[2*I],Y=v[2*I+1];(v[2*B]-V)*(v[2*F+1]-Y)-(v[2*B+1]-Y)*(v[2*F]-V)>0?(T.push(I),T.push(F),T.push(B)):(T.push(I),T.push(B),T.push(F))}return T})(this._vertexBuffer,n);const s=[],f=n.length;for(let v=0;v<f;v+=3){const x=[n[v+0],n[v+1],n[v+2]],T=[this._vertexBuffer[2*n[v+0]+0],this._vertexBuffer[2*n[v+0]+1],this._vertexBuffer[2*n[v+1]+0],this._vertexBuffer[2*n[v+1]+1],this._vertexBuffer[2*n[v+2]+0],this._vertexBuffer[2*n[v+2]+1]];let M=1/0,I=1/0,B=-1/0,F=-1/0;for(let ne=0;ne<3;ne++){const ce=T[2*ne],me=T[2*ne+1];M=Math.min(M,ce),B=Math.max(B,ce),I=Math.min(I,me),F=Math.max(F,me)}if(M===B||I===F)continue;const V=Math.floor(M/this._granularityCellSize),Y=Math.ceil(B/this._granularityCellSize),Q=Math.floor(I/this._granularityCellSize),J=Math.ceil(F/this._granularityCellSize);if(V!==Y||Q!==J)for(let ne=Q;ne<J;ne++){const ce=this._scanlineGenerateVertexRingForCellRow(ne,T,x);vs(this._vertexBuffer,ce,s)}else s.push(...x)}return s}_scanlineGenerateVertexRingForCellRow(n,s,f){const v=n*this._granularityCellSize,x=v+this._granularityCellSize,T=[];for(let M=0;M<3;M++){const I=s[2*M],B=s[2*M+1],F=s[2*(M+1)%6],V=s[(2*(M+1)+1)%6],Y=s[2*(M+2)%6],Q=s[(2*(M+2)+1)%6],J=F-I,ne=V-B,ce=J===0,me=ne===0,ze=(v-B)/ne,be=(x-B)/ne,Se=Math.min(ze,be),Fe=Math.max(ze,be);if(!me&&(Se>=1||Fe<=0)||me&&(B<v||B>x)){V>=v&&V<=x&&T.push(f[(M+1)%3]);continue}!me&&Se>0&&T.push(this._vertexToIndex(I+J*Se,B+ne*Se));const We=I+J*Math.max(Se,0),lt=I+J*Math.min(Fe,1);ce||this._generateIntraEdgeVertices(T,I,B,F,V,We,lt),!me&&Fe<1&&T.push(this._vertexToIndex(I+J*Fe,B+ne*Fe)),(me||V>=v&&V<=x)&&T.push(f[(M+1)%3]),!me&&(V<=v||V>=x)&&this._generateInterEdgeVertices(T,I,B,F,V,Y,Q,lt,v,x)}return T}_generateIntraEdgeVertices(n,s,f,v,x,T,M){const I=v-s,B=x-f,F=B===0,V=F?Math.min(s,v):Math.min(T,M),Y=F?Math.max(s,v):Math.max(T,M),Q=Math.floor(V/this._granularityCellSize)+1,J=Math.ceil(Y/this._granularityCellSize)-1;if(F?s<v:T<M)for(let ne=Q;ne<=J;ne++){const ce=ne*this._granularityCellSize;n.push(this._vertexToIndex(ce,f+B*(ce-s)/I))}else for(let ne=J;ne>=Q;ne--){const ce=ne*this._granularityCellSize;n.push(this._vertexToIndex(ce,f+B*(ce-s)/I))}}_generateInterEdgeVertices(n,s,f,v,x,T,M,I,B,F){const V=x-f,Y=T-v,Q=M-x,J=(B-x)/Q,ne=(F-x)/Q,ce=Math.min(J,ne),me=Math.max(J,ne),ze=v+Y*ce;let be=Math.floor(Math.min(ze,I)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(ze,I)/this._granularityCellSize)-1,Fe=I<ze;const We=Q===0;if(We&&(M===B||M===F))return;if(We||ce>=1||me<=0){const At=f-M,_t=T+(s-T)*Math.min((B-M)/At,(F-M)/At);be=Math.floor(Math.min(_t,I)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(_t,I)/this._granularityCellSize)-1,Fe=I<_t}const lt=V>0?F:B;if(Fe)for(let At=be;At<=Se;At++)n.push(this._vertexToIndex(At*this._granularityCellSize,lt));else for(let At=Se;At>=be;At--)n.push(this._vertexToIndex(At*this._granularityCellSize,lt))}_generateOutline(n){const s=[];for(const f of n){const v=Ai(f,this._granularity,!0),x=this._pointArrayToIndices(v),T=[];for(let M=1;M<x.length;M++)T.push(x[M-1]),T.push(x[M]);s.push(T)}return s}_handlePoles(n){let s=!1,f=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(s||f)&&this._fillPoles(n,s,f)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let s=0;s<n.length;s+=2){const f=n[s+1];f===Fu&&(n[s+1]=-32767),f===Gh&&(n[s+1]=32766)}}_generatePoleQuad(n,s,f,v,x,T){v>x!=(T===Fu)?(n.push(s),n.push(f),n.push(this._vertexToIndex(v,T)),n.push(f),n.push(this._vertexToIndex(x,T)),n.push(this._vertexToIndex(v,T))):(n.push(f),n.push(s),n.push(this._vertexToIndex(v,T)),n.push(this._vertexToIndex(x,T)),n.push(f),n.push(this._vertexToIndex(v,T)))}_fillPoles(n,s,f){const v=this._vertexBuffer,x=bt,T=n.length;for(let M=2;M<T;M+=3){const I=n[M-2],B=n[M-1],F=n[M],V=v[2*I],Y=v[2*I+1],Q=v[2*B],J=v[2*B+1],ne=v[2*F],ce=v[2*F+1];s&&(Y===0&&J===0&&this._generatePoleQuad(n,I,B,V,Q,Fu),J===0&&ce===0&&this._generatePoleQuad(n,B,F,Q,ne,Fu),ce===0&&Y===0&&this._generatePoleQuad(n,F,I,ne,V,Fu)),f&&(Y===x&&J===x&&this._generatePoleQuad(n,I,B,V,Q,Gh),J===x&&ce===x&&this._generatePoleQuad(n,B,F,Q,ne,Gh),ce===x&&Y===x&&this._generatePoleQuad(n,F,I,ne,V,Gh))}}_initializeVertices(n){for(let s=0;s<n.length;s+=2)this._vertexToIndex(n[s],n[s+1])}subdividePolygonInternal(n,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=(function(M){const I=[],B=[];for(const F of M)if(F.length!==0){F!==M[0]&&I.push(B.length/2);for(let V=0;V<F.length;V++)B.push(F[V].x),B.push(F[V].y)}return{flattened:B,holeIndices:I}})(n);let x;this._initializeVertices(f);try{const M=(function(B,F,V=2){const Y=F&&F.length,Q=Y?F[0]*V:B.length;let J=Cy(B,0,Q,V,!0);const ne=[];if(!J||J.next===J.prev)return ne;let ce,me,ze;if(Y&&(J=(function(be,Se,Fe,We){const lt=[];for(let At=0,_t=Se.length;At<_t;At++){const Tt=Cy(be,Se[At]*We,At<_t-1?Se[At+1]*We:be.length,We,!1);Tt===Tt.next&&(Tt.steiner=!0),lt.push(Um(Tt))}lt.sort(fl);for(let At=0;At<lt.length;At++)Fe=Oy(lt[At],Fe);return Fe})(B,F,J,V)),B.length>80*V){ce=B[0],me=B[1];let be=ce,Se=me;for(let Fe=V;Fe<Q;Fe+=V){const We=B[Fe],lt=B[Fe+1];We<ce&&(ce=We),lt<me&&(me=lt),We>be&&(be=We),lt>Se&&(Se=lt)}ze=Math.max(be-ce,Se-me),ze=ze!==0?32767/ze:0}return Ql(J,ne,V,ce,me,ze,0),ne})(f,v),I=this._convertIndices(f,M);x=this._subdivideTrianglesScanline(I)}catch(M){console.error(M)}let T=[];return s&&(T=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:T}}_convertIndices(n,s){const f=[];for(let v=0;v<s.length;v++)f.push(this._vertexToIndex(n[2*s[v]],n[2*s[v]+1]));return f}_pointArrayToIndices(n){const s=[];for(let f=0;f<n.length;f++){const v=n[f];s.push(this._vertexToIndex(v.x,v.y))}return s}}function ad(l,n,s,f=!0){return new Z0(s,n).subdividePolygonInternal(l,f)}function Ai(l,n,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const f=l[0],v=l[l.length-1],x=s&&(f.x!==v.x||f.y!==v.y);if(n<2)return x?[...l,l[0]]:[...l];const T=Math.floor(bt/n),M=[];M.push(new E(l[0].x,l[0].y));const I=l.length,B=x?I:I-1;for(let F=0;F<B;F++){const V=l[F],Y=F<I-1?l[F+1]:l[0],Q=V.x,J=V.y,ne=Y.x,ce=Y.y,me=Q!==ne,ze=J!==ce;if(!me&&!ze)continue;const be=ne-Q,Se=ce-J,Fe=Math.abs(be),We=Math.abs(Se);let lt=Q,At=J;for(;;){const Tt=be>0?(Math.floor(lt/T)+1)*T:(Math.ceil(lt/T)-1)*T,Nt=Se>0?(Math.floor(At/T)+1)*T:(Math.ceil(At/T)-1)*T,wt=Math.abs(lt-Tt),St=Math.abs(At-Nt),tt=Math.abs(lt-ne),Xt=Math.abs(At-ce),Jt=me?wt/Fe:Number.POSITIVE_INFINITY,qt=ze?St/We:Number.POSITIVE_INFINITY;if((tt<=wt||!me)&&(Xt<=St||!ze))break;if(Jt<qt&&me||!ze){lt=Tt,At+=Se*Jt;const Bt=new E(lt,Math.round(At));M[M.length-1].x===Bt.x&&M[M.length-1].y===Bt.y||M.push(Bt)}else{lt+=be*qt,At=Nt;const Bt=new E(Math.round(lt),At);M[M.length-1].x===Bt.x&&M[M.length-1].y===Bt.y||M.push(Bt)}}const _t=new E(ne,ce);M[M.length-1].x===_t.x&&M[M.length-1].y===_t.y||M.push(_t)}return M}function vs(l,n,s){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=l[2*n[0]];for(let I=1;I<n.length;I++){const B=l[2*n[I]];B<v&&(v=B,f=I)}const x=n.length;let T=f,M=(T+1)%x;for(;;){const I=T-1>=0?T-1:x-1,B=(M+1)%x,F=l[2*n[I]],V=l[2*n[B]],Y=l[2*n[T]],Q=l[2*n[T]+1],J=l[2*n[M]+1];let ne=!1;if(F<V)ne=!0;else if(F>V)ne=!1;else{const ce=J-Q,me=-(l[2*n[M]]-Y),ze=Q<J?1:-1;((F-Y)*ce+(l[2*n[I]+1]-Q)*me)*ze>((V-Y)*ce+(l[2*n[B]+1]-Q)*me)*ze&&(ne=!0)}if(ne){const ce=n[I],me=n[T],ze=n[M];ce!==me&&ce!==ze&&me!==ze&&s.push(ze,me,ce),T--,T<0&&(T=x-1)}else{const ce=n[B],me=n[T],ze=n[M];ce!==me&&ce!==ze&&me!==ze&&s.push(ze,me,ce),M++,M>=x&&(M=0)}if(I===B)break}}function qm(l,n,s,f,v,x,T,M,I){const B=v.length/2,F=T&&M&&I;if(B<vr.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(B,s,f),Y=V.vertexLength;for(let ne=0;ne<x.length;ne+=3)f.emplaceBack(Y+x[ne],Y+x[ne+1],Y+x[ne+2]);let Q,J;V.vertexLength+=B,V.primitiveLength+=x.length/3,F&&(J=T.prepareSegment(B,s,M),Q=J.vertexLength,J.vertexLength+=B);for(let ne=0;ne<v.length;ne+=2)l(v[ne],v[ne+1]);if(F)for(let ne=0;ne<I.length;ne++){const ce=I[ne];for(let me=1;me<ce.length;me+=2)M.emplaceBack(Q+ce[me-1],Q+ce[me]);J.primitiveLength+=ce.length/2}}else(function(V,Y,Q,J,ne,ce){const me=[];for(let We=0;We<J.length/2;We++)me.push(-1);const ze={count:0};let be=0,Se=V.getOrCreateLatestSegment(Y,Q),Fe=Se.vertexLength;for(let We=2;We<ne.length;We+=3){const lt=ne[We-2],At=ne[We-1],_t=ne[We];let Tt=me[lt]<be,Nt=me[At]<be,wt=me[_t]<be;Se.vertexLength+((Tt?1:0)+(Nt?1:0)+(wt?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Se=V.createNewSegment(Y,Q),be=ze.count,Tt=!0,Nt=!0,wt=!0,Fe=0);const St=Ui(me,J,ce,ze,lt,Tt,Se),tt=Ui(me,J,ce,ze,At,Nt,Se),Xt=Ui(me,J,ce,ze,_t,wt,Se);Q.emplaceBack(Fe+St-be,Fe+tt-be,Fe+Xt-be),Se.primitiveLength++}})(n,s,f,v,x,l),F&&(function(V,Y,Q,J,ne,ce){const me=[];for(let We=0;We<J.length/2;We++)me.push(-1);const ze={count:0};let be=0,Se=V.getOrCreateLatestSegment(Y,Q),Fe=Se.vertexLength;for(let We=0;We<ne.length;We++){const lt=ne[We];for(let At=1;At<ne[We].length;At+=2){const _t=lt[At-1],Tt=lt[At];let Nt=me[_t]<be,wt=me[Tt]<be;Se.vertexLength+((Nt?1:0)+(wt?1:0))>vr.MAX_VERTEX_ARRAY_LENGTH&&(Se=V.createNewSegment(Y,Q),be=ze.count,Nt=!0,wt=!0,Fe=0);const St=Ui(me,J,ce,ze,_t,Nt,Se),tt=Ui(me,J,ce,ze,Tt,wt,Se);Q.emplaceBack(Fe+St-be,Fe+tt-be),Se.primitiveLength++}}})(T,s,M,v,I,l),n.forceNewSegmentOnNextPrepare(),T?.forceNewSegmentOnNextPrepare()}function Ui(l,n,s,f,v,x,T){if(x){const M=f.count;return s(n[2*v],n[2*v+1]),l[v]=f.count,f.count++,T.vertexLength++,M}return l[v]}class Sp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new He,this.indexArray=new ii,this.indexArray2=new fn,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new vr,this.segments2=new vr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasDependencies=dn("fill",this.layers,s);const v=this.layers[0].layout.get("fill-sort-key"),x=!v.isConstant(),T=[];for(const{feature:M,id:I,index:B,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,Y=Kl(M,V);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),Y,f))continue;const Q=x?v.evaluate(Y,{},f,s.availableImages):void 0,J={id:I,properties:M.properties,type:M.type,sourceLayerIndex:F,index:B,geometry:V?Y.geometry:jc(M),patterns:{},sortKey:Q};T.push(J)}x&&T.sort(((M,I)=>M.sortKey-I.sortKey));for(const M of T){const{geometry:I,index:B,sourceLayerIndex:F}=M;if(this.hasDependencies){const V=Nm("fill",this.layers,M,{zoom:this.zoom},s);this.patternFeatures.push(V)}else this.addFeature(M,I,B,f,{},s.subdivisionGranularity);s.featureIndex.insert(n[B].feature,I,B,F,this.index)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(n,s,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,f,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ed),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,f,v,x,T){for(const M of Tc(s,500)){const I=ad(M,v,T.fill.getGranularityForZoomLevel(v.z)),B=this.layoutVertexArray;qm(((F,V)=>{B.emplaceBack(F,V)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:x,canonical:v})}}let dl,Vc;Et("FillBucket",Sp,{omit:["layers","patternFeatures"]});var Jl={get paint(){return Vc=Vc||new Si({"fill-antialias":new kt(Re.paint_fill["fill-antialias"]),"fill-opacity":new jt(Re.paint_fill["fill-opacity"]),"fill-color":new jt(Re.paint_fill["fill-color"]),"fill-outline-color":new jt(Re.paint_fill["fill-outline-color"]),"fill-translate":new kt(Re.paint_fill["fill-translate"]),"fill-translate-anchor":new kt(Re.paint_fill["fill-translate-anchor"]),"fill-pattern":new al(Re.paint_fill["fill-pattern"])})},get layout(){return dl=dl||new Si({"fill-sort-key":new jt(Re.layout_fill["fill-sort-key"])})}};class $m extends Ln{constructor(n,s){super(n,Jl,s)}recalculate(n,s){super.recalculate(n,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Sp(n)}queryRadius(){return Ti(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:s,transform:f,pixelsToTileUnits:v}){return Dm(Yf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),s)}isTileClipped(){return!0}}const Zm=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_s=qr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ry}=Zm;class bs{constructor(n,s,f,v,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=v,this._values=x,n.readFields(od,this,s)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos,f=[];let v,x=1,T=0,M=0,I=0;for(;n.pos<s;){if(T<=0){const B=n.readVarint();x=7&B,T=B>>3}if(T--,x===1||x===2)M+=n.readSVarint(),I+=n.readSVarint(),x===1&&(v&&f.push(v),v=[]),v&&v.push(new E(M,I));else{if(x!==7)throw new Error(`unknown command ${x}`);v&&v.push(v[0].clone())}}return v&&f.push(v),f}bbox(){const n=this._pbf;n.pos=this._geometry;const s=n.readVarint()+n.pos;let f=1,v=0,x=0,T=0,M=1/0,I=-1/0,B=1/0,F=-1/0;for(;n.pos<s;){if(v<=0){const V=n.readVarint();f=7&V,v=V>>3}if(v--,f===1||f===2)x+=n.readSVarint(),T+=n.readSVarint(),x<M&&(M=x),x>I&&(I=x),T<B&&(B=T),T>F&&(F=T);else if(f!==7)throw new Error(`unknown command ${f}`)}return[M,B,I,F]}toGeoJSON(n,s,f){const v=this.extent*Math.pow(2,f),x=this.extent*n,T=this.extent*s,M=this.loadGeometry();function I(Y){return[360*(Y.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(Y.y+T)/v)*Math.PI))-90]}function B(Y){return Y.map(I)}let F;if(this.type===1){const Y=[];for(const J of M)Y.push(J[0]);const Q=B(Y);F=Y.length===1?{type:"Point",coordinates:Q[0]}:{type:"MultiPoint",coordinates:Q}}else if(this.type===2){const Y=M.map(B);F=Y.length===1?{type:"LineString",coordinates:Y[0]}:{type:"MultiLineString",coordinates:Y}}else{if(this.type!==3)throw new Error("unknown feature type");{const Y=(function(J){const ne=J.length;if(ne<=1)return[J];const ce=[];let me,ze;for(let be=0;be<ne;be++){const Se=sd(J[be]);Se!==0&&(ze===void 0&&(ze=Se<0),ze===Se<0?(me&&ce.push(me),me=[J[be]]):me&&me.push(J[be]))}return me&&ce.push(me),ce})(M),Q=[];for(const J of Y)Q.push(J.map(B));F=Q.length===1?{type:"Polygon",coordinates:Q[0]}:{type:"MultiPolygon",coordinates:Q}}}const V={type:"Feature",geometry:F,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function od(l,n,s){l===1?n.id=s.readVarint():l===2?(function(f,v){const x=f.readVarint()+f.pos;for(;f.pos<x;){const T=v._keys[f.readVarint()],M=v._values[f.readVarint()];v.properties[T]=M}})(s,n):l===3?n.type=s.readVarint():l===4&&(n._geometry=s.pos)}function sd(l){let n=0;for(let s,f,v=0,x=l.length,T=x-1;v<x;T=v++)s=l[v],f=l[T],n+=(f.x-s.x)*(s.y+f.y);return n}bs.types=["Unknown","Point","LineString","Polygon"];class Uu{constructor(n,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(ky,this,s),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const s=this._pbf.readVarint()+this._pbf.pos;return new bs(this._pbf,s,this.extent,this._keys,this._values)}}function ky(l,n,s){l===15?n.version=s.readVarint():l===1?n.name=s.readString():l===5?n.extent=s.readVarint():l===2?n._features.push(s.pos):l===3?n._keys.push(s.readString()):l===4&&n._values.push((function(f){let v=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const T=f.readVarint()>>3;v=T===1?f.readString():T===2?f.readFloat():T===3?f.readDouble():T===4?f.readVarint64():T===5?f.readVarint():T===6?f.readSVarint():T===7?f.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(s))}class Hm{constructor(n,s){this.layers=n.readFields(ld,{},s)}}function ld(l,n,s){if(l===3){const f=new Uu(s,s.readVarint()+s.pos);f.length&&(n[f.name]=f)}}const Tp=Math.pow(2,13);function qc(l,n,s,f,v,x,T,M){l.emplaceBack(n,s,2*Math.floor(f*Tp)+T,v*Tp*2,x*Tp*2,Math.round(M))}class Ap{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new yt,this.centroidVertexArray=new Ue,this.indexArray=new ii,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new vr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.features=[],this.hasDependencies=dn("fill-extrusion",this.layers,s);for(const{feature:v,id:x,index:T,sourceLayerIndex:M}of n){const I=this.layers[0]._featureFilter.needGeometry,B=Kl(v,I);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),B,f))continue;const F={id:x,sourceLayerIndex:M,index:T,geometry:I?B.geometry:jc(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(Nm("fill-extrusion",this.layers,F,{zoom:this.zoom},s)):this.addFeature(F,F.geometry,T,f,{},s.subdivisionGranularity),s.featureIndex.insert(v,F.geometry,T,M,this.index,!0)}}addFeatures(n,s,f){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,s,f,n.subdivisionGranularity)}}update(n,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ry),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,_s.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,f,v,x,T){for(const M of Tc(s,500)){const I={x:0,y:0,sampleCount:0},B=this.layoutVertexArray.length;this.processPolygon(I,v,n,M,T);const F=this.layoutVertexArray.length-B,V=Math.floor(I.x/I.sampleCount),Y=Math.floor(I.y/I.sampleCount);for(let Q=0;Q<F;Q++)this.centroidVertexArray.emplaceBack(V,Y)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:x,canonical:v})}processPolygon(n,s,f,v,x){if(v.length<1||Zr(v[0]))return;for(const V of v)V.length!==0&&H0(n,V);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=x.fill.getGranularityForZoomLevel(s.z),I=bs.types[f.type]==="Polygon";for(const V of v){if(V.length===0||Zr(V))continue;const Y=Ai(V,M,I);this._generateSideFaces(Y,T)}if(!I)return;const B=ad(v,s,M,!1),F=this.layoutVertexArray;qm(((V,Y)=>{qc(F,V,Y,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles)}_generateSideFaces(n,s){let f=0;for(let v=1;v<n.length;v++){const x=n[v],T=n[v-1];if(Y0(x,T))continue;s.segment.vertexLength+4>vr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=x.sub(T)._perp()._unit(),I=T.dist(x);f+I>32768&&(f=0),qc(this.layoutVertexArray,x.x,x.y,M.x,M.y,0,0,f),qc(this.layoutVertexArray,x.x,x.y,M.x,M.y,0,1,f),f+=I,qc(this.layoutVertexArray,T.x,T.y,M.x,M.y,0,0,f),qc(this.layoutVertexArray,T.x,T.y,M.x,M.y,0,1,f);const B=s.segment.vertexLength;this.indexArray.emplaceBack(B,B+2,B+1),this.indexArray.emplaceBack(B+1,B+2,B+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function H0(l,n){for(let s=0;s<n.length;s++){const f=n[s];s===n.length-1&&n[0].x===f.x&&n[0].y===f.y||(l.x+=f.x,l.y+=f.y,l.sampleCount++)}}function Y0(l,n){return l.x===n.x&&(l.x<0||l.x>bt)||l.y===n.y&&(l.y<0||l.y>bt)}function Zr(l){return l.every((n=>n.x<0))||l.every((n=>n.x>bt))||l.every((n=>n.y<0))||l.every((n=>n.y>bt))}let mn;Et("FillExtrusionBucket",Ap,{omit:["layers","features"]});var zr={get paint(){return mn=mn||new Si({"fill-extrusion-opacity":new kt(Re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new jt(Re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kt(Re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kt(Re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new al(Re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new jt(Re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new jt(Re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kt(Re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Rr extends Ln{constructor(n,s){super(n,zr,s)}createBucket(n){return new Ap(n)}queryRadius(){return Ti(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:x,pixelsToTileUnits:T,pixelPosMatrix:M}){const I=Yf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,T),B=this.paint.get("fill-extrusion-height").evaluate(s,f),F=this.paint.get("fill-extrusion-base").evaluate(s,f),V=(function(Q,J){const ne=[];for(const ce of Q){const me=[ce.x,ce.y,0,1];Ht(me,me,J),ne.push(new E(me[0]/me[3],me[1]/me[3]))}return ne})(I,M),Y=(function(Q,J,ne,ce){const me=[],ze=[],be=ce[8]*J,Se=ce[9]*J,Fe=ce[10]*J,We=ce[11]*J,lt=ce[8]*ne,At=ce[9]*ne,_t=ce[10]*ne,Tt=ce[11]*ne;for(const Nt of Q){const wt=[],St=[];for(const tt of Nt){const Xt=tt.x,Jt=tt.y,qt=ce[0]*Xt+ce[4]*Jt+ce[12],Bt=ce[1]*Xt+ce[5]*Jt+ce[13],Sr=ce[2]*Xt+ce[6]*Jt+ce[14],_n=ce[3]*Xt+ce[7]*Jt+ce[15],Nn=Sr+Fe,Ei=_n+We,Ka=qt+lt,Qi=Bt+At,Sn=Sr+_t,Ur=_n+Tt,bn=new E((qt+be)/Ei,(Bt+Se)/Ei);bn.z=Nn/Ei,wt.push(bn);const Zn=new E(Ka/Ur,Qi/Ur);Zn.z=Sn/Ur,St.push(Zn)}me.push(wt),ze.push(St)}return[me,ze]})(v,F,B,M);return(function(Q,J,ne){let ce=1/0;Dm(ne,J)&&(ce=$a(ne,J[0]));for(let me=0;me<J.length;me++){const ze=J[me],be=Q[me];for(let Se=0;Se<ze.length-1;Se++){const Fe=ze[Se],We=[Fe,ze[Se+1],be[Se+1],be[Se],Fe];Nc(ne,We)&&(ce=Math.min(ce,$a(ne,We)))}}return ce!==1/0&&ce})(Y[0],Y[1],V)}}function Nr(l,n){return l.x*n.x+l.y*n.y}function $a(l,n){if(l.length===1){let s=0;const f=n[s++];let v;for(;!v||f.equals(v);)if(v=n[s++],!v)return 1/0;for(;s<n.length;s++){const x=n[s],T=l[0],M=v.sub(f),I=x.sub(f),B=T.sub(f),F=Nr(M,M),V=Nr(M,I),Y=Nr(I,I),Q=Nr(B,M),J=Nr(B,I),ne=F*Y-V*V,ce=(Y*Q-V*J)/ne,me=(F*J-V*Q)/ne,ze=f.z*(1-ce-me)+v.z*ce+x.z*me;if(isFinite(ze))return ze}return 1/0}{let s=1/0;for(const f of n)s=Math.min(s,f.z);return s}}const $c=qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vh}=$c,Ym=qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ec}=Ym,oi=Math.cos(Math.PI/180*37.5),tc=Math.pow(2,14)/.5;class rc{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new mt,this.layoutVertexArray2=new st,this.indexArray=new ii,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new vr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(n,s,f){this.hasDependencies=dn("line",this.layers,s)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),x=!v.isConstant(),T=[];for(const{feature:M,id:I,index:B,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,Y=Kl(M,V);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),Y,f))continue;const Q=x?v.evaluate(Y,{},f):void 0,J={id:I,properties:M.properties,type:M.type,sourceLayerIndex:F,index:B,geometry:V?Y.geometry:jc(M),patterns:{},dashes:{},sortKey:Q};T.push(J)}x&&T.sort(((M,I)=>M.sortKey-I.sortKey));for(const M of T){const{geometry:I,index:B,sourceLayerIndex:F}=M;this.hasDependencies?(dn("line",this.layers,s)?Nm("line",this.layers,M,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,M,this.zoom,s),this.patternFeatures.push(M)):this.addFeature(M,I,B,f,{},{},s.subdivisionGranularity),s.featureIndex.insert(n[B].feature,I,B,F,this.index)}}update(n,s,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:f,dashPositions:v})}addFeatures(n,s,f,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,f,v,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,ec)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,f,v,x,T,M){const I=this.layers[0].layout,B=I.get("line-join").evaluate(n,{}),F=I.get("line-cap"),V=I.get("line-miter-limit"),Y=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Q of s)this.addLine(Q,n,B,F,V,Y,v,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{imagePositions:x,dashPositions:T,canonical:v})}addLine(n,s,f,v,x,T,M,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Ai(n,M?I.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<n.length-1;be++)this.totalDistance+=n[be].dist(n[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const B=bs.types[s.type]==="Polygon";let F=n.length;for(;F>=2&&n[F-1].equals(n[F-2]);)F--;let V=0;for(;V<F-1&&n[V].equals(n[V+1]);)V++;if(F<(B?3:2))return;f==="bevel"&&(x=1.05);const Y=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let J,ne,ce,me,ze;this.e1=this.e2=-1,B&&(J=n[F-2],ze=n[V].sub(J)._unit()._perp());for(let be=V;be<F;be++){if(ce=be===F-1?B?n[V+1]:void 0:n[be+1],ce&&n[be].equals(ce))continue;ze&&(me=ze),J&&(ne=J),J=n[be],ze=ce?ce.sub(J)._unit()._perp():me,me=me||ze;let Se=me.add(ze);Se.x===0&&Se.y===0||Se._unit();const Fe=me.x*ze.x+me.y*ze.y,We=Se.x*ze.x+Se.y*ze.y,lt=We!==0?1/We:1/0,At=2*Math.sqrt(2-2*We),_t=We<oi&&ne&&ce,Tt=me.x*ze.y-me.y*ze.x>0;if(_t&&be>V){const St=J.dist(ne);if(St>2*Y){const tt=J.sub(J.sub(ne)._mult(Y/St)._round());this.updateDistance(ne,tt),this.addCurrentVertex(tt,me,0,0,Q),ne=tt}}const Nt=ne&&ce;let wt=Nt?f:B?"butt":v;if(Nt&&wt==="round"&&(lt<T?wt="miter":lt<=2&&(wt="fakeround")),wt==="miter"&&lt>x&&(wt="bevel"),wt==="bevel"&&(lt>2&&(wt="flipbevel"),lt<x&&(wt="miter")),ne&&this.updateDistance(ne,J),wt==="miter")Se._mult(lt),this.addCurrentVertex(J,Se,0,0,Q);else if(wt==="flipbevel"){if(lt>100)Se=ze.mult(-1);else{const St=lt*me.add(ze).mag()/me.sub(ze).mag();Se._perp()._mult(St*(Tt?-1:1))}this.addCurrentVertex(J,Se,0,0,Q),this.addCurrentVertex(J,Se.mult(-1),0,0,Q)}else if(wt==="bevel"||wt==="fakeround"){const St=-Math.sqrt(lt*lt-1),tt=Tt?St:0,Xt=Tt?0:St;if(ne&&this.addCurrentVertex(J,me,tt,Xt,Q),wt==="fakeround"){const Jt=Math.round(180*At/Math.PI/20);for(let qt=1;qt<Jt;qt++){let Bt=qt/Jt;if(Bt!==.5){const _n=Bt-.5;Bt+=Bt*_n*(Bt-1)*((1.0904+Fe*(Fe*(3.55645-1.43519*Fe)-3.2452))*_n*_n+(.848013+Fe*(.215638*Fe-1.06021)))}const Sr=ze.sub(me)._mult(Bt)._add(me)._unit()._mult(Tt?-1:1);this.addHalfVertex(J,Sr.x,Sr.y,!1,Tt,0,Q)}}ce&&this.addCurrentVertex(J,ze,-tt,-Xt,Q)}else if(wt==="butt")this.addCurrentVertex(J,Se,0,0,Q);else if(wt==="square"){const St=ne?1:-1;this.addCurrentVertex(J,Se,St,St,Q)}else wt==="round"&&(ne&&(this.addCurrentVertex(J,me,0,0,Q),this.addCurrentVertex(J,me,1,1,Q,!0)),ce&&(this.addCurrentVertex(J,ze,-1,-1,Q,!0),this.addCurrentVertex(J,ze,0,0,Q)));if(_t&&be<F-1){const St=J.dist(ce);if(St>2*Y){const tt=J.add(ce.sub(J)._mult(Y/St)._round());this.updateDistance(J,tt),this.addCurrentVertex(tt,ze,0,0,Q),J=tt}}}}addCurrentVertex(n,s,f,v,x,T=!1){const M=s.y*v-s.x,I=-s.y-s.x*v;this.addHalfVertex(n,s.x+s.y*f,s.y-s.x*f,T,!1,f,x),this.addHalfVertex(n,M,I,T,!0,-v,x),this.distance>tc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,f,v,x,T))}addHalfVertex({x:n,y:s},f,v,x,T,M,I){const B=.5*(this.lineClips?this.scaledDistance*(tc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(s<<1)+(T?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(M===0?0:M<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),I.primitiveLength++),T?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}hasLineDasharray(n){for(const s of n){const f=s.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(n,s,f,v){for(const x of n){const T=x.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const M=x.layout.get("line-cap")==="round",I={dasharray:T.value.evaluate({zoom:f-1},s,{}),round:M},B={dasharray:T.value.evaluate({zoom:f},s,{}),round:M},F={dasharray:T.value.evaluate({zoom:f+1},s,{}),round:M},V=`${I.dasharray.join(",")},${I.round}`,Y=`${B.dasharray.join(",")},${B.round}`,Q=`${F.dasharray.join(",")},${F.round}`;v.dashDependencies[V]=I,v.dashDependencies[Y]=B,v.dashDependencies[Q]=F,s.dashes[x.id]={min:V,mid:Y,max:Q}}}}let Mp,Za;Et("LineBucket",rc,{omit:["layers","patternFeatures"]});var Gu={get paint(){return Za=Za||new Si({"line-opacity":new jt(Re.paint_line["line-opacity"]),"line-color":new jt(Re.paint_line["line-color"]),"line-translate":new kt(Re.paint_line["line-translate"]),"line-translate-anchor":new kt(Re.paint_line["line-translate-anchor"]),"line-width":new jt(Re.paint_line["line-width"]),"line-gap-width":new jt(Re.paint_line["line-gap-width"]),"line-offset":new jt(Re.paint_line["line-offset"]),"line-blur":new jt(Re.paint_line["line-blur"]),"line-dasharray":new al(Re.paint_line["line-dasharray"]),"line-pattern":new al(Re.paint_line["line-pattern"]),"line-gradient":new Oc(Re.paint_line["line-gradient"])})},get layout(){return Mp=Mp||new Si({"line-cap":new kt(Re.layout_line["line-cap"]),"line-join":new jt(Re.layout_line["line-join"]),"line-miter-limit":new kt(Re.layout_line["line-miter-limit"]),"line-round-limit":new kt(Re.layout_line["line-round-limit"]),"line-sort-key":new jt(Re.layout_line["line-sort-key"])})}};class cd extends jt{possiblyEvaluate(n,s){return s=new Lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,f,v){return s=kr({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,f,v)}}let Wi;class Xm extends Ln{constructor(n,s){super(n,Gu,s),this.gradientVersion=0,Wi||(Wi=new cd(Gu.paint.properties["line-width"].specification),Wi.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof wn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Wi.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new rc(n)}queryRadius(n){const s=n,f=ud(On("line-width",this,s),On("line-gap-width",this,s)),v=On("line-offset",this,s);return f/2+Math.abs(v)+Ti(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:f,geometry:v,transform:x,pixelsToTileUnits:T}){const M=Yf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,T),I=T/2*ud(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),B=this.paint.get("line-offset").evaluate(s,f);return B&&(v=(function(F,V){const Y=[];for(let Q=0;Q<F.length;Q++){const J=F[Q],ne=[];for(let ce=0;ce<J.length;ce++){const me=J[ce-1],ze=J[ce],be=J[ce+1],Se=ce===0?new E(0,0):ze.sub(me)._unit()._perp(),Fe=ce===J.length-1?new E(0,0):be.sub(ze)._unit()._perp(),We=Se._add(Fe)._unit(),lt=We.x*Fe.x+We.y*Fe.y;lt!==0&&We._mult(1/lt),ne.push(We._mult(V)._add(ze))}Y.push(ne)}return Y})(v,B*T)),(function(F,V,Y){for(let Q=0;Q<V.length;Q++){const J=V[Q];if(F.length>=3){for(let ne=0;ne<J.length;ne++)if(Nh(F,J[ne]))return!0}if(_y(F,J,Y))return!0}return!1})(M,v,I)}isTileClipped(){return!0}}function ud(l,n){return n>0?n+2*l:l}const By=qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ep=qr([{name:"a_projected_pos",components:3,type:"Float32"}],4);qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Pp=qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nc=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Di=qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zc(l,n,s){return l.sections.forEach((f=>{f.text=(function(v,x,T){const M=x.layout.get("text-transform").evaluate(T,{});return M==="uppercase"?v=v.toLocaleUpperCase():M==="lowercase"&&(v=v.toLocaleLowerCase()),Yi.applyArabicShaping&&(v=Yi.applyArabicShaping(v)),v})(f.text,n,s)})),l}qr([{name:"triangle",components:3,type:"Uint16"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),qr([{type:"Float32",name:"offsetX"}]),qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),qr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const pl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gn=24;const hd=4294967296,Cp=1/hd,Km=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Vu{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,s,f=this.length){for(;this.pos<f;){const v=this.readVarint(),x=v>>3,T=this.pos;this.type=7&v,n(x,s,this),this.pos===T&&this.skip(v)}return s}readMessage(n,s){return this.readFields(n,s,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*hd;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*hd;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const s=this.buf;let f,v;return v=s[this.pos++],f=127&v,v<128?f:(v=s[this.pos++],f|=(127&v)<<7,v<128?f:(v=s[this.pos++],f|=(127&v)<<14,v<128?f:(v=s[this.pos++],f|=(127&v)<<21,v<128?f:(v=s[this.pos],f|=(15&v)<<28,(function(x,T,M){const I=M.buf;let B,F;if(F=I[M.pos++],B=(112&F)>>4,F<128||(F=I[M.pos++],B|=(127&F)<<3,F<128)||(F=I[M.pos++],B|=(127&F)<<10,F<128)||(F=I[M.pos++],B|=(127&F)<<17,F<128)||(F=I[M.pos++],B|=(127&F)<<24,F<128)||(F=I[M.pos++],B|=(1&F)<<31,F<128))return Hc(x,B,T);throw new Error("Expected varint not more than 10 bytes")})(f,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,s=this.pos;return this.pos=n,n-s>=12&&Km?Km.decode(this.buf.subarray(s,n)):(function(f,v,x){let T="",M=v;for(;M<x;){const I=f[M];let B,F,V,Y=null,Q=I>239?4:I>223?3:I>191?2:1;if(M+Q>x)break;Q===1?I<128&&(Y=I):Q===2?(B=f[M+1],(192&B)==128&&(Y=(31&I)<<6|63&B,Y<=127&&(Y=null))):Q===3?(B=f[M+1],F=f[M+2],(192&B)==128&&(192&F)==128&&(Y=(15&I)<<12|(63&B)<<6|63&F,(Y<=2047||Y>=55296&&Y<=57343)&&(Y=null))):Q===4&&(B=f[M+1],F=f[M+2],V=f[M+3],(192&B)==128&&(192&F)==128&&(192&V)==128&&(Y=(15&I)<<18|(63&B)<<12|(63&F)<<6|63&V,(Y<=65535||Y>=1114112)&&(Y=null))),Y===null?(Y=65533,Q=1):Y>65535&&(Y-=65536,T+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),T+=String.fromCharCode(Y),M+=Q}return T})(this.buf,s,n)}readBytes(){const n=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,n);return this.pos=n,s}readPackedVarint(n=[],s){const f=this.readPackedEnd();for(;this.pos<f;)n.push(this.readVarint(s));return n}readPackedSVarint(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const s=7&n;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(n,s){this.writeVarint(n<<3|s)}realloc(n){let s=this.length||16;for(;s<this.pos+n;)s*=2;if(s!==this.length){const f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Cp),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Cp),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?(function(s,f){let v,x;if(s>=0?(v=s%4294967296|0,x=s/4294967296|0):(v=~(-s%4294967296),x=~(-s/4294967296),4294967295^v?v=v+1|0:(v=0,x=x+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(T,M,I){I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,I.buf[I.pos]=127&(T>>>=7)})(v,0,f),(function(T,M){const I=(7&T)<<4;M.buf[M.pos++]|=I|((T>>>=3)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T)))))})(x,f)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const s=this.pos;this.pos=(function(v,x,T){for(let M,I,B=0;B<x.length;B++){if(M=x.charCodeAt(B),M>55295&&M<57344){if(!I){M>56319||B+1===x.length?(v[T++]=239,v[T++]=191,v[T++]=189):I=M;continue}if(M<56320){v[T++]=239,v[T++]=191,v[T++]=189,I=M;continue}M=I-55296<<10|M-56320|65536,I=null}else I&&(v[T++]=239,v[T++]=191,v[T++]=189,I=null);M<128?v[T++]=M:(M<2048?v[T++]=M>>6|192:(M<65536?v[T++]=M>>12|224:(v[T++]=M>>18|240,v[T++]=M>>12&63|128),v[T++]=M>>6&63|128),v[T++]=63&M|128)}return T})(this.buf,n,this.pos);const f=this.pos-s;f>=128&&Ha(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const s=n.length;this.writeVarint(s),this.realloc(s);for(let f=0;f<s;f++)this.buf[this.pos++]=n[f]}writeRawMessage(n,s){this.pos++;const f=this.pos;n(s,this);const v=this.pos-f;v>=128&&Ha(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v}writeMessage(n,s,f){this.writeTag(n,2),this.writeRawMessage(s,f)}writePackedVarint(n,s){s.length&&this.writeMessage(n,Ly,s)}writePackedSVarint(n,s){s.length&&this.writeMessage(n,Ya,s)}writePackedBoolean(n,s){s.length&&this.writeMessage(n,X0,s)}writePackedFloat(n,s){s.length&&this.writeMessage(n,jy,s)}writePackedDouble(n,s){s.length&&this.writeMessage(n,Ny,s)}writePackedFixed32(n,s){s.length&&this.writeMessage(n,Yc,s)}writePackedSFixed32(n,s){s.length&&this.writeMessage(n,Dp,s)}writePackedFixed64(n,s){s.length&&this.writeMessage(n,Wm,s)}writePackedSFixed64(n,s){s.length&&this.writeMessage(n,qh,s)}writeBytesField(n,s){this.writeTag(n,2),this.writeBytes(s)}writeFixed32Field(n,s){this.writeTag(n,5),this.writeFixed32(s)}writeSFixed32Field(n,s){this.writeTag(n,5),this.writeSFixed32(s)}writeFixed64Field(n,s){this.writeTag(n,1),this.writeFixed64(s)}writeSFixed64Field(n,s){this.writeTag(n,1),this.writeSFixed64(s)}writeVarintField(n,s){this.writeTag(n,0),this.writeVarint(s)}writeSVarintField(n,s){this.writeTag(n,0),this.writeSVarint(s)}writeStringField(n,s){this.writeTag(n,2),this.writeString(s)}writeFloatField(n,s){this.writeTag(n,5),this.writeFloat(s)}writeDoubleField(n,s){this.writeTag(n,1),this.writeDouble(s)}writeBooleanField(n,s){this.writeVarintField(n,+s)}}function Hc(l,n,s){return s?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function Ha(l,n,s){const f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(f);for(let v=s.pos-1;v>=l;v--)s.buf[v+f]=s.buf[v]}function Ly(l,n){for(let s=0;s<l.length;s++)n.writeVarint(l[s])}function Ya(l,n){for(let s=0;s<l.length;s++)n.writeSVarint(l[s])}function jy(l,n){for(let s=0;s<l.length;s++)n.writeFloat(l[s])}function Ny(l,n){for(let s=0;s<l.length;s++)n.writeDouble(l[s])}function X0(l,n){for(let s=0;s<l.length;s++)n.writeBoolean(l[s])}function Yc(l,n){for(let s=0;s<l.length;s++)n.writeFixed32(l[s])}function Dp(l,n){for(let s=0;s<l.length;s++)n.writeSFixed32(l[s])}function Wm(l,n){for(let s=0;s<l.length;s++)n.writeFixed64(l[s])}function qh(l,n){for(let s=0;s<l.length;s++)n.writeSFixed64(l[s])}function Fy(l,n,s){l===1&&s.readMessage(Uy,n)}function Uy(l,n,s){if(l===3){const{id:f,bitmap:v,width:x,height:T,left:M,top:I,advance:B}=s.readMessage(Gy,{});n.push({id:f,bitmap:new Uh({width:x+6,height:T+6},v),metrics:{width:x,height:T,left:M,top:I,advance:B}})}}function Gy(l,n,s){l===1?n.id=s.readVarint():l===2?n.bitmap=s.readBytes():l===3?n.width=s.readVarint():l===4?n.height=s.readVarint():l===5?n.left=s.readSVarint():l===6?n.top=s.readSVarint():l===7&&(n.advance=s.readVarint())}function Qm(l){let n=0,s=0;for(const T of l)n+=T.w*T.h,s=Math.max(s,T.w);l.sort(((T,M)=>M.h-T.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let v=0,x=0;for(const T of l)for(let M=f.length-1;M>=0;M--){const I=f[M];if(!(T.w>I.w||T.h>I.h)){if(T.x=I.x,T.y=I.y,x=Math.max(x,T.y+T.h),v=Math.max(v,T.x+T.w),T.w===I.w&&T.h===I.h){const B=f.pop();B&&M<f.length&&(f[M]=B)}else T.h===I.h?(I.x+=T.w,I.w-=T.w):T.w===I.w?(I.y+=T.h,I.h-=T.h):(f.push({x:I.x+T.w,y:I.y,w:I.w-T.w,h:T.h}),I.y+=T.h,I.h-=T.h);break}}return{w:v,h:x,fill:n/(v*x)||0}}class $h{constructor(n,{pixelRatio:s,version:f,stretchX:v,stretchY:x,content:T,textFitWidth:M,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=v,this.stretchY=x,this.content=T,this.version=f,this.textFitWidth=M,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ip{constructor(n,s){const f={},v={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,f,x),this.addImages(s,v,x);const{w:T,h:M}=Qm(x),I=new Ki({width:T||1,height:M||1});for(const B in n){const F=n[B],V=f[B].paddedRect;Ki.copy(F.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},F.data)}for(const B in s){const F=s[B],V=v[B].paddedRect,Y=V.x+1,Q=V.y+1,J=F.data.width,ne=F.data.height;Ki.copy(F.data,I,{x:0,y:0},{x:Y,y:Q},F.data),Ki.copy(F.data,I,{x:0,y:ne-1},{x:Y,y:Q-1},{width:J,height:1}),Ki.copy(F.data,I,{x:0,y:0},{x:Y,y:Q+ne},{width:J,height:1}),Ki.copy(F.data,I,{x:J-1,y:0},{x:Y-1,y:Q},{width:1,height:ne}),Ki.copy(F.data,I,{x:0,y:0},{x:Y+J,y:Q},{width:1,height:ne})}this.image=I,this.iconPositions=f,this.patternPositions=v}addImages(n,s,f){for(const v in n){const x=n[v],T={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(T),s[v]=new $h(T,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),s),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),s)}patchUpdatedImage(n,s,f){if(!n||!s||n.version===s.version)return;n.version=s.version;const[v,x]=n.tl;f.update(s.data,void 0,{x:v,y:x})}}var Xc;Et("ImagePosition",$h),Et("ImageAtlas",Ip),g.ao=void 0,(Xc=g.ao||(g.ao={}))[Xc.none=0]="none",Xc[Xc.horizontal=1]="horizontal",Xc[Xc.vertical=2]="vertical",Xc[Xc.horizontalOnly=3]="horizontalOnly";class fd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,s,f){const v=new fd;return v.scale=n||1,v.fontStack=s,v.verticalAlign=f||"bottom",v}static forImage(n,s){const f=new fd;return f.imageName=n,f.verticalAlign=s||"bottom",f}}class Zh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const f=new Zh;for(let v=0;v<n.sections.length;v++){const x=n.sections[v];x.image?f.addImageSection(x):f.addTextSection(x,s)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=(function(n){let s="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,x=n.charCodeAt(f-1)||null;s+=v&&Zl(v)&&!pl[n[f+1]]||x&&Zl(x)&&!pl[n[f-1]]||!pl[n[f]]?n[f]:pl[n[f]]}return s})(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&pd[this.text.charCodeAt(f)];f++)n++;let s=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&pd[this.text.charCodeAt(f)];f--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const f=new Zh;return f.text=this.text.substring(n,s),f.sectionIndex=this.sectionIndex.slice(n,s),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,s)=>Math.max(n,this.sections[s].scale)),0)}getMaxImageSize(n){let s=0,f=0;for(let v=0;v<this.length();v++){const x=this.getSection(v);if(x.imageName){const T=n[x.imageName];if(!T)continue;const M=T.displaySize;s=Math.max(s,M[0]),f=Math.max(f,M[1])}}return{maxImageWidth:s,maxImageHeight:f}}addTextSection(n,s){this.text+=n.text,this.sections.push(fd.forText(n.scale,n.fontStack||s,n.verticalAlign));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Qt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(fd.forImage(s,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dd(l,n,s,f,v,x,T,M,I,B,F,V,Y,Q,J){const ne=Zh.fromFeature(l,v);let ce;V===g.ao.vertical&&ne.verticalizePunctuation();const{processBidirectionalText:me,processStyledBidirectionalText:ze}=Yi;if(me&&ne.sections.length===1){ce=[];const Fe=me(ne.toString(),zp(ne,B,x,n,f,Q));for(const We of Fe){const lt=new Zh;lt.text=We,lt.sections=ne.sections;for(let At=0;At<We.length;At++)lt.sectionIndex.push(0);ce.push(lt)}}else if(ze){ce=[];const Fe=ze(ne.text,ne.sectionIndex,zp(ne,B,x,n,f,Q));for(const We of Fe){const lt=new Zh;lt.text=We[0],lt.sectionIndex=We[1],lt.sections=ne.sections,ce.push(lt)}}else ce=(function(Fe,We){const lt=[],At=Fe.text;let _t=0;for(const Tt of We)lt.push(Fe.substring(_t,Tt)),_t=Tt;return _t<At.length&&lt.push(Fe.substring(_t,At.length)),lt})(ne,zp(ne,B,x,n,f,Q));const be=[],Se={positionedLines:be,text:ne.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:V,iconsInText:!1,verticalizable:!1};return(function(Fe,We,lt,At,_t,Tt,Nt,wt,St,tt,Xt,Jt){let qt=0,Bt=0,Sr=0,_n=0;const Nn=wt==="right"?1:wt==="left"?0:.5,Ei=gn/Jt;let Ka=0;for(const Ur of _t){Ur.trim();const bn=Ur.getMaxScale(),Zn={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[Ka]=Zn;const Hn=Zn.positionedGlyphs;let Yn=0;if(!Ur.length()){Bt+=Tt,++Ka;continue}const uo=qy(At,Ur,Ei);for(let Ii=0;Ii<Ur.length();Ii++){const yi=Ur.getSection(Ii),vi=Ur.getSectionIndex(Ii),Xn=Ur.getCharCode(Ii),Kn=cn(St,Xt,Xn);let yn;if(yi.imageName){if(Fe.iconsInText=!0,yi.scale=yi.scale*Ei,yn=K0(yi,Kn,bn,uo,At),!yn)continue;Yn=Math.max(Yn,yn.imageOffset)}else if(yn=ig(yi,Xn,Kn,uo,We,lt),!yn)continue;const{rect:Wa,metrics:oc,baselineOffset:Zo}=yn;Hn.push({glyph:Xn,imageName:yi.imageName,x:qt,y:Bt+Zo+-17,vertical:Kn,scale:yi.scale,fontStack:yi.fontStack,sectionIndex:vi,metrics:oc,rect:Wa}),Kn?(Fe.verticalizable=!0,qt+=(yi.imageName?oc.advance:gn)*yi.scale+tt):qt+=oc.advance*yi.scale+tt}Hn.length!==0&&(Sr=Math.max(qt-tt,Sr),$y(Hn,0,Hn.length-1,Nn)),qt=0,Zn.lineOffset=Math.max(Yn,(bn-1)*gn);const gi=Tt*bn+Yn;Bt+=gi,_n=Math.max(gi,_n),++Ka}const{horizontalAlign:Qi,verticalAlign:Sn}=Yh(Nt);(function(Ur,bn,Zn,Hn,Yn,uo,gi,Ii,yi){const vi=(bn-Zn)*Yn;let Xn=0;Xn=uo!==gi?-Ii*Hn- -17:-Hn*yi*gi+.5*gi;for(const Kn of Ur)for(const yn of Kn.positionedGlyphs)yn.x+=vi,yn.y+=Xn})(Fe.positionedLines,Nn,Qi,Sn,Sr,_n,Tt,Bt,_t.length),Fe.top+=-Sn*Bt,Fe.bottom=Fe.top+Bt,Fe.left+=-Qi*Sr,Fe.right=Fe.left+Sr})(Se,n,s,f,ce,T,M,I,V,B,Y,J),!(function(Fe){for(const We of Fe)if(We.positionedGlyphs.length!==0)return!1;return!0})(be)&&Se}const pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hh={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Op={40:!0};function Jm(l,n,s,f,v,x){if(n.imageName){const T=f[n.imageName];return T?T.displaySize[0]*n.scale*gn/x+v:0}{const T=s[n.fontStack],M=T&&T[l];return M?M.metrics.advance*n.scale+v:0}}function eg(l,n,s,f){const v=Math.pow(l-n,2);return f?l<n?v/2:2*v:v+Math.abs(s)*s}function Vy(l,n,s){let f=0;return l===10&&(f-=1e4),s&&(f+=150),l!==40&&l!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function tg(l,n,s,f,v,x){let T=null,M=eg(n,s,v,x);for(const I of f){const B=eg(n-I.x,s,v,x)+I.badness;B<=M&&(T=I,M=B)}return{index:l,x:n,priorBreak:T,badness:M}}function rg(l){return l?rg(l.priorBreak).concat(l.index):[]}function zp(l,n,s,f,v,x){if(!l)return[];const T=[],M=(function(V,Y,Q,J,ne,ce){let me=0;for(let ze=0;ze<V.length();ze++){const be=V.getSection(ze);me+=Jm(V.getCharCode(ze),be,J,ne,Y,ce)}return me/Math.max(1,Math.ceil(me/Q))})(l,n,s,f,v,x),I=l.text.indexOf("")>=0;let B=0;for(let V=0;V<l.length();V++){const Y=l.getSection(V),Q=l.getCharCode(V);if(pd[Q]||(B+=Jm(Q,Y,f,v,n,x)),V<l.length()-1){const J=!((F=Q)<11904)&&(!!wr["CJK Compatibility Forms"](F)||!!wr["CJK Compatibility"](F)||!!wr["CJK Strokes"](F)||!!wr["CJK Symbols and Punctuation"](F)||!!wr["Enclosed CJK Letters and Months"](F)||!!wr["Halfwidth and Fullwidth Forms"](F)||!!wr["Ideographic Description Characters"](F)||!!wr["Vertical Forms"](F)||Dc.test(String.fromCodePoint(F)));(Hh[Q]||J||Y.imageName||V!==l.length()-2&&Op[l.getCharCode(V+1)])&&T.push(tg(V+1,B,M,T,Vy(Q,l.getCharCode(V+1),J&&I),!1))}}var F;return rg(tg(l.length(),B,M,T,0,!0))}function Yh(l){let n=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function qy(l,n,s){const f=n.getMaxScale()*gn,{maxImageWidth:v,maxImageHeight:x}=n.getMaxImageSize(l),T=Math.max(f,x*s);return{verticalLineContentWidth:Math.max(f,v*s),horizontalLineContentHeight:T}}function ng(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function cn(l,n,s){return!(l===g.ao.horizontal||!n&&!Ic(s)||n&&(pd[s]||(f=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function ig(l,n,s,f,v,x){const T=x[l.fontStack],M=(function(B,F,V,Y){if(B&&B.rect)return B;const Q=F[V.fontStack],J=Q&&Q[Y];return J?{rect:null,metrics:J.metrics}:null})(T&&T[n],v,l,n);if(M===null)return null;let I;if(s)I=f.verticalLineContentWidth-l.scale*gn;else{const B=ng(l.verticalAlign);I=(f.horizontalLineContentHeight-l.scale*gn)*B}return{rect:M.rect,metrics:M.metrics,baselineOffset:I}}function K0(l,n,s,f,v){const x=v[l.imageName];if(!x)return null;const T=x.paddedRect,M=x.displaySize,I={width:M[0],height:M[1],left:1,top:-3,advance:n?M[1]:M[0]};let B;if(n)B=f.verticalLineContentWidth-M[1]*l.scale;else{const F=ng(l.verticalAlign);B=(f.horizontalLineContentHeight-M[1]*l.scale)*F}return{rect:T,metrics:I,baselineOffset:B,imageOffset:(n?M[0]:M[1])*l.scale-gn*s}}function $y(l,n,s,f){if(f===0)return;const v=l[s],x=(l[s].x+v.metrics.advance*v.scale)*f;for(let T=n;T<=s;T++)l[T].x-=x}function W0(l,n,s){const{horizontalAlign:f,verticalAlign:v}=Yh(s),x=n[0]-l.displaySize[0]*f,T=n[1]-l.displaySize[1]*v;return{image:l,top:T,bottom:T+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function Zy(l){var n,s;let f=l.left,v=l.top,x=l.right-f,T=l.bottom-v;const M=(n=l.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",B=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(I==="proportional"){if(M==="stretchOnly"&&x/T<B||M==="proportional"){const F=Math.ceil(T*B);f*=F/x,x=F}}else if(M==="proportional"&&I==="stretchOnly"&&B!==0&&x/T>B){const F=Math.ceil(x/B);v*=F/T,T=F}return{x1:f,y1:v,x2:f+x,y2:v+T}}function Hy(l,n,s,f,v,x){const T=l.image;let M;if(T.content){const ce=T.content,me=T.pixelRatio||1;M=[ce[0]/me,ce[1]/me,T.displaySize[0]-ce[2]/me,T.displaySize[1]-ce[3]/me]}const I=n.left*x,B=n.right*x;let F,V,Y,Q;s==="width"||s==="both"?(Q=v[0]+I-f[3],V=v[0]+B+f[1]):(Q=v[0]+(I+B-T.displaySize[0])/2,V=Q+T.displaySize[0]);const J=n.top*x,ne=n.bottom*x;return s==="height"||s==="both"?(F=v[1]+J-f[0],Y=v[1]+ne+f[2]):(F=v[1]+(J+ne-T.displaySize[1])/2,Y=F+T.displaySize[1]),{image:T,top:F,right:V,bottom:Y,left:Q,collisionPadding:M}}const Vo=128,lo=32640;function Rp(l,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Lr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=s;let x=0;for(;x<f.length&&f[x]<=l;)x++;x=Math.max(0,x-1);let T=x;for(;T<f.length&&f[T]<l+1;)T++;T=Math.min(f.length-1,T);const M=f[x],I=f[T];return s.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:I,interpolationType:v}:{kind:"camera",minZoom:M,maxZoom:I,minSize:s.evaluate(new Lr(M)),maxSize:s.evaluate(new Lr(I)),interpolationType:v}}}function Xh(l,n,s){let f="never";const v=l.get(n);return v?f=v:l.get(s)&&(f="always"),f}const ag=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xs(l,n,s,f,v,x,T,M,I,B,F,V,Y){const Q=M?Math.min(lo,Math.round(M[0])):0,J=M?Math.min(lo,Math.round(M[1])):0;l.emplaceBack(n,s,Math.round(32*f),Math.round(32*v),x,T,(Q<<1)+(I?1:0),J,16*B,16*F,256*V,256*Y)}function qo(l,n,s){l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s)}function md(l){for(const n of l.sections)if(Ru(n.text))return!0;return!1}class og{constructor(n){this.layoutVertexArray=new Br,this.indexArray=new ii,this.programConfigurations=n,this.segments=new vr,this.dynamicLayoutVertexArray=new on,this.opacityVertexArray=new Wr,this.hasVisibleVertices=!1,this.placedSymbolArray=new de}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,By.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Ep.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ag,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Et("SymbolBuffers",og);class kp{constructor(n,s,f){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new f,this.segments=new vr,this.collisionVertexArray=new sn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Pp.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Et("CollisionBuffers",kp);class qu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((T=>T.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rp(this.zoom,s["text-size"]),this.iconSizeData=Rp(this.zoom,s["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=Xh(f,"text-overlap","text-allow-overlap")!=="never"||Xh(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((T=>g.ao[T]))),this.stateDependentLayerIds=this.layers.filter((T=>T.isStateDependent())).map((T=>T.id)),this.sourceID=n.sourceID}createArrays(){this.text=new og(new Lc(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new og(new Lc(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new ge,this.lineVertexArray=new xe,this.symbolInstances=new ye,this.textAnchorOffsets=new ve}calculateGlyphDependencies(n,s,f,v,x){for(let T=0;T<n.length;T++)if(s[n.charCodeAt(T)]=!0,(f||v)&&x){const M=pl[n.charAt(T)];M&&(s[M.charCodeAt(0)]=!0)}}populate(n,s,f){const v=this.layers[0],x=v.layout,T=x.get("text-font"),M=x.get("text-field"),I=x.get("icon-image"),B=(M.value.kind!=="constant"||M.value.value instanceof Pi&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),F=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!B&&!F)return;const Y=s.iconDependencies,Q=s.glyphDependencies,J=s.availableImages,ne=new Lr(this.zoom);for(const{feature:ce,id:me,index:ze,sourceLayerIndex:be}of n){const Se=v._featureFilter.needGeometry,Fe=Kl(ce,Se);if(!v._featureFilter.filter(ne,Fe,f))continue;let We,lt;if(Se||(Fe.geometry=jc(ce)),B){const _t=v.getValueAndResolveTokens("text-field",Fe,f,J),Tt=Pi.factory(_t),Nt=this.hasRTLText=this.hasRTLText||md(Tt);(!Nt||Yi.getRTLTextPluginStatus()==="unavailable"||Nt&&Yi.isParsed())&&(We=Zc(Tt,v,Fe))}if(F){const _t=v.getValueAndResolveTokens("icon-image",Fe,f,J);lt=_t instanceof Vn?_t:Vn.fromString(_t)}if(!We&&!lt)continue;const At=this.sortFeaturesByKey?V.evaluate(Fe,{},f):void 0;if(this.features.push({id:me,text:We,icon:lt,index:ze,sourceLayerIndex:be,geometry:Fe.geometry,properties:ce.properties,type:bs.types[ce.type],sortKey:At}),lt&&(Y[lt.name]=!0),We){const _t=T.evaluate(Fe,{},f).join(","),Tt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ao.vertical)>=0;for(const Nt of We.sections)if(Nt.image)Y[Nt.image.name]=!0;else{const wt=ps(We.toString()),St=Nt.fontStack||_t,tt=Q[St]=Q[St]||{};this.calculateGlyphDependencies(Nt.text,tt,Tt,this.allowVerticalPlacement,wt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(ce){const me={},ze={},be=[];let Se=0;function Fe(_t){be.push(ce[_t]),Se++}function We(_t,Tt,Nt){const wt=ze[_t];return delete ze[_t],ze[Tt]=wt,be[wt].geometry[0].pop(),be[wt].geometry[0]=be[wt].geometry[0].concat(Nt[0]),wt}function lt(_t,Tt,Nt){const wt=me[Tt];return delete me[Tt],me[_t]=wt,be[wt].geometry[0].shift(),be[wt].geometry[0]=Nt[0].concat(be[wt].geometry[0]),wt}function At(_t,Tt,Nt){const wt=Nt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${_t}:${wt.x}:${wt.y}`}for(let _t=0;_t<ce.length;_t++){const Tt=ce[_t],Nt=Tt.geometry,wt=Tt.text?Tt.text.toString():null;if(!wt){Fe(_t);continue}const St=At(wt,Nt),tt=At(wt,Nt,!0);if(St in ze&&tt in me&&ze[St]!==me[tt]){const Xt=lt(St,tt,Nt),Jt=We(St,tt,be[Xt].geometry);delete me[St],delete ze[tt],ze[At(wt,be[Jt].geometry,!0)]=Jt,be[Xt].geometry=null}else St in ze?We(St,tt,Nt):tt in me?lt(St,tt,Nt):(Fe(_t),me[St]=Se-1,ze[tt]=Se-1)}return be.filter((_t=>_t.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ce,me)=>ce.sortKey-me.sortKey))}update(n,s,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(s[n.segment+1]),x=n.dist(s[n.segment]);const T={};for(let M=n.segment+1;M<s.length;M++)T[M]={x:s[M].x,y:s[M].y,tileUnitDistanceFromAnchor:v},M<s.length-1&&(v+=s[M+1].dist(s[M]));for(let M=n.segment||0;M>=0;M--)T[M]={x:s[M].x,y:s[M].y,tileUnitDistanceFromAnchor:x},M>0&&(x+=s[M-1].dist(s[M]));for(let M=0;M<s.length;M++){const I=T[M];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,s,f,v,x,T,M,I,B,F,V,Y){const Q=n.indexArray,J=n.layoutVertexArray,ne=n.segments.prepareSegment(4*s.length,J,Q,this.canOverlap?T.sortKey:void 0),ce=this.glyphOffsetArray.length,me=ne.vertexLength,ze=this.allowVerticalPlacement&&M===g.ao.vertical?Math.PI/2:0,be=T.text&&T.text.sections;for(let Se=0;Se<s.length;Se++){const{tl:Fe,tr:We,bl:lt,br:At,tex:_t,pixelOffsetTL:Tt,pixelOffsetBR:Nt,minFontScaleX:wt,minFontScaleY:St,glyphOffset:tt,isSDF:Xt,sectionIndex:Jt}=s[Se],qt=ne.vertexLength,Bt=tt[1];xs(J,I.x,I.y,Fe.x,Bt+Fe.y,_t.x,_t.y,f,Xt,Tt.x,Tt.y,wt,St),xs(J,I.x,I.y,We.x,Bt+We.y,_t.x+_t.w,_t.y,f,Xt,Nt.x,Tt.y,wt,St),xs(J,I.x,I.y,lt.x,Bt+lt.y,_t.x,_t.y+_t.h,f,Xt,Tt.x,Nt.y,wt,St),xs(J,I.x,I.y,At.x,Bt+At.y,_t.x+_t.w,_t.y+_t.h,f,Xt,Nt.x,Nt.y,wt,St),qo(n.dynamicLayoutVertexArray,I,ze),Q.emplaceBack(qt,qt+2,qt+1),Q.emplaceBack(qt+1,qt+2,qt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),Se!==s.length-1&&Jt===s[Se+1].sectionIndex||n.programConfigurations.populatePaintArrays(J.length,T,T.index,{imagePositions:{},canonical:Y,formattedSection:be&&be[Jt]})}n.placedSymbolArray.emplaceBack(I.x,I.y,ce,this.glyphOffsetArray.length-ce,me,B,F,I.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],M,0,!1,0,V)}_addCollisionDebugVertex(n,s,f,v,x,T){return s.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,x,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(n,s,f,v,x,T,M){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),B=I.vertexLength,F=x.layoutVertexArray,V=x.collisionVertexArray,Y=M.anchorX,Q=M.anchorY;this._addCollisionDebugVertex(F,V,T,Y,Q,new E(n,s)),this._addCollisionDebugVertex(F,V,T,Y,Q,new E(f,s)),this._addCollisionDebugVertex(F,V,T,Y,Q,new E(f,v)),this._addCollisionDebugVertex(F,V,T,Y,Q,new E(n,v)),I.vertexLength+=4;const J=x.indexArray;J.emplaceBack(B,B+1),J.emplaceBack(B+1,B+2),J.emplaceBack(B+2,B+3),J.emplaceBack(B+3,B),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,f,v){for(let x=n;x<s;x++){const T=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kp(hn,nc.members,fn),this.iconCollisionBox=new kp(hn,nc.members,fn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,f,v,x,T,M,I,B){const F={};for(let V=s;V<f;V++){const Y=n.get(V);F.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.textFeatureIndex=Y.featureIndex;break}for(let V=v;V<x;V++){const Y=n.get(V);F.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalTextFeatureIndex=Y.featureIndex;break}for(let V=T;V<M;V++){const Y=n.get(V);F.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.iconFeatureIndex=Y.featureIndex;break}for(let V=I;V<B;V++){const Y=n.get(V);F.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalIconFeatureIndex=Y.featureIndex;break}return F}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const f=n.placedSymbolArray.get(s),v=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<v;x+=4)n.indexArray.emplaceBack(x,x+2,x+1),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),f=Math.cos(n),v=[],x=[],T=[];for(let M=0;M<this.symbolInstances.length;++M){T.push(M);const I=this.symbolInstances.get(M);v.push(0|Math.round(s*I.anchorX+f*I.anchorY)),x.push(I.featureIndex)}return T.sort(((M,I)=>v[M]-v[I]||x[I]-x[M])),T}addToSortKeyRanges(n,s){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===s?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const f=this.symbolInstances.get(s);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((v,x,T)=>{v>=0&&T.indexOf(v)===x&&this.addIndicesForPlacedSymbol(this.text,v)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let sg,lg;Et("SymbolBucket",qu,{omit:["layers","collisionBoxArray","features","compareText"]}),qu.MAX_GLYPHS=65535,qu.addDynamicAttributes=qo;var cg={get paint(){return lg=lg||new Si({"icon-opacity":new jt(Re.paint_symbol["icon-opacity"]),"icon-color":new jt(Re.paint_symbol["icon-color"]),"icon-halo-color":new jt(Re.paint_symbol["icon-halo-color"]),"icon-halo-width":new jt(Re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new jt(Re.paint_symbol["icon-halo-blur"]),"icon-translate":new kt(Re.paint_symbol["icon-translate"]),"icon-translate-anchor":new kt(Re.paint_symbol["icon-translate-anchor"]),"text-opacity":new jt(Re.paint_symbol["text-opacity"]),"text-color":new jt(Re.paint_symbol["text-color"],{runtimeType:ui,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new jt(Re.paint_symbol["text-halo-color"]),"text-halo-width":new jt(Re.paint_symbol["text-halo-width"]),"text-halo-blur":new jt(Re.paint_symbol["text-halo-blur"]),"text-translate":new kt(Re.paint_symbol["text-translate"]),"text-translate-anchor":new kt(Re.paint_symbol["text-translate-anchor"])})},get layout(){return sg=sg||new Si({"symbol-placement":new kt(Re.layout_symbol["symbol-placement"]),"symbol-spacing":new kt(Re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kt(Re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new jt(Re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kt(Re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kt(Re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new kt(Re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new kt(Re.layout_symbol["icon-ignore-placement"]),"icon-optional":new kt(Re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kt(Re.layout_symbol["icon-rotation-alignment"]),"icon-size":new jt(Re.layout_symbol["icon-size"]),"icon-text-fit":new kt(Re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kt(Re.layout_symbol["icon-text-fit-padding"]),"icon-image":new jt(Re.layout_symbol["icon-image"]),"icon-rotate":new jt(Re.layout_symbol["icon-rotate"]),"icon-padding":new jt(Re.layout_symbol["icon-padding"]),"icon-keep-upright":new kt(Re.layout_symbol["icon-keep-upright"]),"icon-offset":new jt(Re.layout_symbol["icon-offset"]),"icon-anchor":new jt(Re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kt(Re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kt(Re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kt(Re.layout_symbol["text-rotation-alignment"]),"text-field":new jt(Re.layout_symbol["text-field"]),"text-font":new jt(Re.layout_symbol["text-font"]),"text-size":new jt(Re.layout_symbol["text-size"]),"text-max-width":new jt(Re.layout_symbol["text-max-width"]),"text-line-height":new kt(Re.layout_symbol["text-line-height"]),"text-letter-spacing":new jt(Re.layout_symbol["text-letter-spacing"]),"text-justify":new jt(Re.layout_symbol["text-justify"]),"text-radial-offset":new jt(Re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kt(Re.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new jt(Re.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new jt(Re.layout_symbol["text-anchor"]),"text-max-angle":new kt(Re.layout_symbol["text-max-angle"]),"text-writing-mode":new kt(Re.layout_symbol["text-writing-mode"]),"text-rotate":new jt(Re.layout_symbol["text-rotate"]),"text-padding":new kt(Re.layout_symbol["text-padding"]),"text-keep-upright":new kt(Re.layout_symbol["text-keep-upright"]),"text-transform":new jt(Re.layout_symbol["text-transform"]),"text-offset":new jt(Re.layout_symbol["text-offset"]),"text-allow-overlap":new kt(Re.layout_symbol["text-allow-overlap"]),"text-overlap":new kt(Re.layout_symbol["text-overlap"]),"text-ignore-placement":new kt(Re.layout_symbol["text-ignore-placement"]),"text-optional":new kt(Re.layout_symbol["text-optional"])})}};class Bp{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Pn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Et("FormatSectionOverride",Bp,{omit:["defaultValue"]});class gd extends Ln{constructor(n,s){super(n,cg,s)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const x of f)v.indexOf(x)<0&&v.push(x);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,f,v){const x=this.layout.get(n).evaluate(s,{},f,v),T=this._unevaluatedLayout._values[n];return T.isDataDriven()||Au(T.value)||!x?x:(function(M,I){return I.replace(/{([^{}]+)}/g,((B,F)=>M&&F in M?String(M[F]):""))})(s.properties,x)}createBucket(n){return new qu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of cg.paint.overridableProperties){if(!gd.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),f=new Bp(s),v=new Tu(f,s.property.specification);let x=null;x=s.value.kind==="constant"||s.value.kind==="source"?new Pc("source",v):new ua("composite",v,s.value.zoomStops),this.paint._values[n]=new da(s.property,x,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,f){return!(!this.layout||s.isDataDriven()||f.isDataDriven())&&gd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const f=n.get("text-field"),v=cg.paint.properties[s];let x=!1;const T=M=>{for(const I of M)if(v.overrides&&v.overrides.hasOverride(I))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Pi)T(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const M=B=>{x||(B instanceof bo&&Zt(B.value)===go?T(B.value.sections):B instanceof Bl?T(B.sections):B.eachChild(M))},I=f.value;I._styleExpression&&M(I._styleExpression.expression)}return x}}let ug;var Q0={get paint(){return ug=ug||new Si({"background-color":new kt(Re.paint_background["background-color"]),"background-pattern":new qf(Re.paint_background["background-pattern"]),"background-opacity":new kt(Re.paint_background["background-opacity"])})}};class hg extends Ln{constructor(n,s){super(n,Q0,s)}}let Lp;var J0={get paint(){return Lp=Lp||new Si({"raster-opacity":new kt(Re.paint_raster["raster-opacity"]),"raster-hue-rotate":new kt(Re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kt(Re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kt(Re.paint_raster["raster-brightness-max"]),"raster-saturation":new kt(Re.paint_raster["raster-saturation"]),"raster-contrast":new kt(Re.paint_raster["raster-contrast"]),"raster-resampling":new kt(Re.paint_raster["raster-resampling"]),"raster-fade-duration":new kt(Re.paint_raster["raster-fade-duration"])})}};class e_ extends Ln{constructor(n,s){super(n,J0,s)}}class yd extends Ln{constructor(n,s){super(n,{},s),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class t_{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Yy={once:!0},Mr=63710088e-1;class ml{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ml(or(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,f=this.lat*s,v=n.lat*s,x=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*s);return Mr*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof ml)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new ml(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new ml(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vd=2*Math.PI*Mr;function jp(l){return vd*Math.cos(l*Math.PI/180)}function fg(l){return(180+l)/360}function Np(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Kh(l,n){return l/jp(n)}function Wh(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Xy(l,n){return l*jp(Wh(n))}class Qh{constructor(n,s,f=0){this.x=+n,this.y=+s,this.z=+f}static fromLngLat(n,s=0){const f=ml.convert(n);return new Qh(fg(f.lng),Np(f.lat),Kh(s,f.lat))}toLngLat(){return new ml(360*this.x-180,Wh(this.y))}toAltitude(){return Xy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vd*(n=Wh(this.y),1/Math.cos(n*Math.PI/180));var n}}function Ky(l,n,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[l*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class dg{constructor(n,s,f){if(!(function(v,x,T){return!(v<0||v>25||T<0||T>=Math.pow(2,v)||x<0||x>=Math.pow(2,v))})(n,s,f))throw new Error(`x=${s}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=f,this.key=Fr(0,n,n,s,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,f){const v=(T=this.y,M=this.z,I=Ky(256*(x=this.x),256*(T=Math.pow(2,M)-T-1),M),B=Ky(256*(x+1),256*(T+1),M),I[0]+","+I[1]+","+B[0]+","+B[1]);var x,T,M,I,B;const F=(function(V,Y,Q){let J,ne="";for(let ce=V;ce>0;ce--)J=1<<ce-1,ne+=(Y&J?1:0)+(Q&J?2:0);return ne})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new E((n.x*s-this.x)*bt,(n.y*s-this.y)*bt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pg{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Fr(n,s.z,s.z,s.x,s.y)}}class Xa{constructor(n,s,f,v,x){if(this.terrainRttPosMatrix32f=null,n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=s,this.canonical=new dg(f,+v,+x),this.key=Fr(s,n,f,v,x)}clone(){return new Xa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Xa(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xa(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?Fr(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Fr(this.wrap*+s,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-n.canonical.z;return!(s<0)&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Xa(s,this.wrap,s,f,v),new Xa(s,this.wrap,s,f+1,v),new Xa(s,this.wrap,s,f,v+1),new Xa(s,this.wrap,s,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Xa(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Qh(n.x-this.wrap,n.y))}}function Fr(l,n,s,f,v){(l*=2)<0&&(l=-1*l-1);const x=1<<s;return(x*x*l+x*v+f).toString(36)+s.toString(36)+n.toString(36)}function $u(l,n){return n?l.properties[n]:l.id}Et("CanonicalTileID",dg),Et("OverscaledTileID",Xa,{omit:["terrainRttPosMatrix32f"]});class $n{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const s=new $n;return s.extend(n(new E(this.minX,this.minY))),s.extend(n(new E(this.maxX,this.minY))),s.extend(n(new E(this.minX,this.maxY))),s.extend(n(new E(this.maxX,this.maxY))),s}static fromPoints(n){const s=new $n;for(const f of n)s.extend(f);return s}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class Wy{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const f=n[s];this._stringToNumber[f]=s,this._numberToString[s]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class mg{constructor(n,s,f,v,x){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=f,n._y=v,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Qy{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ia(bt,16,0),this.grid3D=new Ia(bt,16,0),this.featureIndexArray=new Ze,this.promoteId=s}insert(n,s,f,v,x,T){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,x);const I=T?this.grid3D:this.grid;for(let B=0;B<s.length;B++){const F=s[B],V=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<F.length;Y++){const Q=F[Y];V[0]=Math.min(V[0],Q.x),V[1]=Math.min(V[1],Q.y),V[2]=Math.max(V[2],Q.x),V[3]=Math.max(V[3],Q.y)}V[0]<bt&&V[1]<bt&&V[2]>=0&&V[3]>=0&&I.insert(M,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hm(new Vu(this.rawTileData)).layers,this.sourceLayerCoder=new Wy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,f,v){this.loadVTLayers();const x=n.params,T=bt/n.tileSize/n.scale,M=ji(x.filter,x.globalState),I=n.queryGeometry,B=n.queryPadding*T,F=$n.fromPoints(I),V=this.grid.query(F.minX-B,F.minY-B,F.maxX+B,F.maxY+B),Y=$n.fromPoints(n.cameraQueryGeometry).expandBy(B),Q=this.grid3D.query(Y.minX,Y.minY,Y.maxX,Y.maxY,((ce,me,ze,be)=>(function(Se,Fe,We,lt,At){for(const Tt of Se)if(Fe<=Tt.x&&We<=Tt.y&&lt>=Tt.x&&At>=Tt.y)return!0;const _t=[new E(Fe,We),new E(Fe,At),new E(lt,At),new E(lt,We)];if(Se.length>2){for(const Tt of _t)if(Nh(Se,Tt))return!0}for(let Tt=0;Tt<Se.length-1;Tt++)if(zm(Se[Tt],Se[Tt+1],_t))return!0;return!1})(n.cameraQueryGeometry,ce-B,me-B,ze+B,be+B)));for(const ce of Q)V.push(ce);V.sort(gg);const J={};let ne;for(let ce=0;ce<V.length;ce++){const me=V[ce];if(me===ne)continue;ne=me;const ze=this.featureIndexArray.get(me);let be=null;this.loadMatchingFeature(J,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,M,x.layers,x.availableImages,s,f,v,((Se,Fe,We)=>(be||(be=jc(Se)),Fe.queryIntersectsFeature({queryGeometry:I,feature:Se,featureState:We,geometry:be,zoom:this.z,transform:n.transform,pixelsToTileUnits:T,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation}))))}return J}loadMatchingFeature(n,s,f,v,x,T,M,I,B,F,V){const Y=this.bucketLayerIDs[s];if(T&&!Y.some((ce=>T.has(ce))))return;const Q=this.sourceLayerCoder.decode(f),J=this.vtLayers[Q].feature(v);if(x.needGeometry){const ce=Kl(J,!0);if(!x.filter(new Lr(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!x.filter(new Lr(this.tileID.overscaledZ),J))return;const ne=this.getId(J,Q);for(let ce=0;ce<Y.length;ce++){const me=Y[ce];if(T&&!T.has(me))continue;const ze=I[me];if(!ze)continue;let be={};ne&&F&&(be=F.getState(ze.sourceLayer||"_geojsonTileLayer",ne));const Se=kr({},B[me]);Se.paint=Fp(Se.paint,ze.paint,J,be,M),Se.layout=Fp(Se.layout,ze.layout,J,be,M);const Fe=!V||V(J,ze,be);if(!Fe)continue;const We=new mg(J,this.z,this.x,this.y,ne);We.layer=Se;let lt=n[me];lt===void 0&&(lt=n[me]=[]),lt.push({featureIndex:v,feature:We,intersectionZ:Fe})}}lookupSymbolFeatures(n,s,f,v,x,T,M,I){const B={};this.loadVTLayers();const F=ji(x.filterSpec,x.globalState);for(const V of n)this.loadMatchingFeature(B,f,v,V,F,T,M,I,s);return B}hasLayer(n){for(const s of this.bucketLayerIDs)for(const f of s)if(n===f)return!0;return!1}getId(n,s){var f;let v=n.id;return this.promoteId&&(v=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=n.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(n.properties.cluster_id))),v}}function Fp(l,n,s,f,v){return Wt(l,((x,T)=>{const M=n instanceof Lu?n.get(T):null;return M&&M.evaluate?M.evaluate(s,f,v):M}))}function gg(l,n){return n-l}function _d(l,n,s,f,v){const x=[];for(let T=0;T<l.length;T++){const M=l[T];let I;for(let B=0;B<M.length-1;B++){let F=M[B],V=M[B+1];F.x<n&&V.x<n||(F.x<n?F=new E(n,F.y+(n-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x<n&&(V=new E(n,F.y+(n-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y<s&&V.y<s||(F.y<s?F=new E(F.x+(s-F.y)/(V.y-F.y)*(V.x-F.x),s)._round():V.y<s&&(V=new E(F.x+(s-F.y)/(V.y-F.y)*(V.x-F.x),s)._round()),F.x>=f&&V.x>=f||(F.x>=f?F=new E(f,F.y+(f-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x>=f&&(V=new E(f,F.y+(f-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y>=v&&V.y>=v||(F.y>=v?F=new E(F.x+(v-F.y)/(V.y-F.y)*(V.x-F.x),v)._round():V.y>=v&&(V=new E(F.x+(v-F.y)/(V.y-F.y)*(V.x-F.x),v)._round()),I&&F.equals(I[I.length-1])||(I=[F],x.push(I)),I.push(V)))))}}return x}Et("FeatureIndex",Qy,{omit:["rawTileData","sourceLayerCoder"]});class ic extends E{constructor(n,s,f,v){super(n,s),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new ic(this.x,this.y,this.angle,this.segment)}}function yg(l,n,s,f,v){if(n.segment===void 0||s===0)return!0;let x=n,T=n.segment+1,M=0;for(;M>-s/2;){if(T--,T<0)return!1;M-=l[T].dist(x),x=l[T]}M+=l[T].dist(l[T+1]),T++;const I=[];let B=0;for(;M<s/2;){const F=l[T],V=l[T+1];if(!V)return!1;let Y=l[T-1].angleTo(F)-F.angleTo(V);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:M,angleDelta:Y}),B+=Y;M-I[0].distance>f;)B-=I.shift().angleDelta;if(B>v)return!1;T++,M+=F.dist(V)}return!0}function Up(l){let n=0;for(let s=0;s<l.length-1;s++)n+=l[s].dist(l[s+1]);return n}function Gp(l,n,s){return l?.6*n*s:0}function Jy(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function ev(l,n,s,f,v,x){const T=Gp(s,v,x),M=Jy(s,f)*x;let I=0;const B=Up(l)/2;for(let F=0;F<l.length-1;F++){const V=l[F],Y=l[F+1],Q=V.dist(Y);if(I+Q>B){const J=(B-I)/Q,ne=So.number(V.x,Y.x,J),ce=So.number(V.y,Y.y,J),me=new ic(ne,ce,Y.angleTo(V),F);return me._round(),!T||yg(l,me,M,T,n)?me:void 0}I+=Q}}function r_(l,n,s,f,v,x,T,M,I){const B=Gp(f,x,T),F=Jy(f,v),V=F*T,Y=l[0].x===0||l[0].x===I||l[0].y===0||l[0].y===I;return n-V<n/4&&(n=V+n/4),vg(l,Y?n/2*M%n:(F/2+2*x)*T*M%n,n,B,s,V,Y,!1,I)}function vg(l,n,s,f,v,x,T,M,I){const B=x/2,F=Up(l);let V=0,Y=n-s,Q=[];for(let J=0;J<l.length-1;J++){const ne=l[J],ce=l[J+1],me=ne.dist(ce),ze=ce.angleTo(ne);for(;Y+s<V+me;){Y+=s;const be=(Y-V)/me,Se=So.number(ne.x,ce.x,be),Fe=So.number(ne.y,ce.y,be);if(Se>=0&&Se<I&&Fe>=0&&Fe<I&&Y-B>=0&&Y+B<=F){const We=new ic(Se,Fe,ze,J);We._round(),f&&!yg(l,We,x,f,v)||Q.push(We)}}V+=me}return M||Q.length||T||(Q=vg(l,V/2,s,f,v,x,T,!0,I)),Q}function tv(l,n,s,f){const v=[],x=l.image,T=x.pixelRatio,M=x.paddedRect.w-2,I=x.paddedRect.h-2;let B={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const F=x.stretchX||[[0,M]],V=x.stretchY||[[0,I]],Y=(tt,Xt)=>tt+Xt[1]-Xt[0],Q=F.reduce(Y,0),J=V.reduce(Y,0),ne=M-Q,ce=I-J;let me=0,ze=Q,be=0,Se=J,Fe=0,We=ne,lt=0,At=ce;if(x.content&&f){const tt=x.content,Xt=tt[2]-tt[0],Jt=tt[3]-tt[1];(x.textFitWidth||x.textFitHeight)&&(B=Zy(l)),me=Vp(F,0,tt[0]),be=Vp(V,0,tt[1]),ze=Vp(F,tt[0],tt[2]),Se=Vp(V,tt[1],tt[3]),Fe=tt[0]-me,lt=tt[1]-be,We=Xt-ze,At=Jt-Se}const _t=B.x1,Tt=B.y1,Nt=B.x2-_t,wt=B.y2-Tt,St=(tt,Xt,Jt,qt)=>{const Bt=bd(tt.stretch-me,ze,Nt,_t),Sr=xd(tt.fixed-Fe,We,tt.stretch,Q),_n=bd(Xt.stretch-be,Se,wt,Tt),Nn=xd(Xt.fixed-lt,At,Xt.stretch,J),Ei=bd(Jt.stretch-me,ze,Nt,_t),Ka=xd(Jt.fixed-Fe,We,Jt.stretch,Q),Qi=bd(qt.stretch-be,Se,wt,Tt),Sn=xd(qt.fixed-lt,At,qt.stretch,J),Ur=new E(Bt,_n),bn=new E(Ei,_n),Zn=new E(Ei,Qi),Hn=new E(Bt,Qi),Yn=new E(Sr/T,Nn/T),uo=new E(Ka/T,Sn/T),gi=n*Math.PI/180;if(gi){const vi=Math.sin(gi),Xn=Math.cos(gi),Kn=[Xn,-vi,vi,Xn];Ur._matMult(Kn),bn._matMult(Kn),Hn._matMult(Kn),Zn._matMult(Kn)}const Ii=tt.stretch+tt.fixed,yi=Xt.stretch+Xt.fixed;return{tl:Ur,tr:bn,bl:Hn,br:Zn,tex:{x:x.paddedRect.x+1+Ii,y:x.paddedRect.y+1+yi,w:Jt.stretch+Jt.fixed-Ii,h:qt.stretch+qt.fixed-yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yn,pixelOffsetBR:uo,minFontScaleX:We/T/Nt,minFontScaleY:At/T/wt,isSDF:s}};if(f&&(x.stretchX||x.stretchY)){const tt=ac(F,ne,Q),Xt=ac(V,ce,J);for(let Jt=0;Jt<tt.length-1;Jt++){const qt=tt[Jt],Bt=tt[Jt+1];for(let Sr=0;Sr<Xt.length-1;Sr++)v.push(St(qt,Xt[Sr],Bt,Xt[Sr+1]))}}else v.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:I+1}));return v}function Vp(l,n,s){let f=0;for(const v of l)f+=Math.max(n,Math.min(s,v[1]))-Math.max(n,Math.min(s,v[0]));return f}function ac(l,n,s){const f=[{fixed:-1,stretch:0}];for(const[v,x]of l){const T=f[f.length-1];f.push({fixed:v-T.stretch,stretch:T.stretch}),f.push({fixed:v-T.stretch,stretch:T.stretch+(x-v)})}return f.push({fixed:n+1,stretch:s}),f}function bd(l,n,s,f){return l/n*s+f}function xd(l,n,s,f){return l-n*s/f}Et("Anchor",ic);class Jh{constructor(n,s,f,v,x,T,M,I,B,F){var V;if(this.boxStartIndex=n.length,B){let Y=T.top,Q=T.bottom;const J=T.collisionPadding;J&&(Y-=J[1],Q+=J[3]);let ne=Q-Y;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const Y=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?Zy(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};Y.y1=Y.y1*M-I[0],Y.y2=Y.y2*M+I[2],Y.x1=Y.x1*M-I[3],Y.x2=Y.x2*M+I[1];const Q=T.collisionPadding;if(Q&&(Y.x1-=Q[0]*M,Y.y1-=Q[1]*M,Y.x2+=Q[2]*M,Y.y2+=Q[3]*M),F){const J=new E(Y.x1,Y.y1),ne=new E(Y.x2,Y.y1),ce=new E(Y.x1,Y.y2),me=new E(Y.x2,Y.y2),ze=F*Math.PI/180;J._rotate(ze),ne._rotate(ze),ce._rotate(ze),me._rotate(ze),Y.x1=Math.min(J.x,ne.x,ce.x,me.x),Y.x2=Math.max(J.x,ne.x,ce.x,me.x),Y.y1=Math.min(J.y,ne.y,ce.y,me.y),Y.y2=Math.max(J.y,ne.y,ce.y,me.y)}n.emplaceBack(s.x,s.y,Y.x1,Y.y1,Y.x2,Y.y2,f,v,x)}this.boxEndIndex=n.length}}class n_{constructor(n=[],s=(f,v)=>f<v?-1:f>v?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:f}=this,v=s[n];for(;n>0;){const x=n-1>>1,T=s[x];if(f(v,T)>=0)break;s[n]=T,n=x}s[n]=v}_down(n){const{data:s,compare:f}=this,v=this.length>>1,x=s[n];for(;n<v;){let T=1+(n<<1);const M=T+1;if(M<this.length&&f(s[M],s[T])<0&&(T=M),f(s[T],x)>=0)break;s[n]=s[T],n=T}s[n]=x}}function i_(l,n=1,s=!1){const f=$n.fromPoints(l[0]),v=Math.min(f.width(),f.height());let x=v/2;const T=new n_([],rv),{minX:M,minY:I,maxX:B,maxY:F}=f;if(v===0)return new E(M,I);for(let Q=M;Q<B;Q+=v)for(let J=I;J<F;J+=v)T.push(new Kc(Q+x,J+x,x,l));let V=(function(Q){let J=0,ne=0,ce=0;const me=Q[0];for(let ze=0,be=me.length,Se=be-1;ze<be;Se=ze++){const Fe=me[ze],We=me[Se],lt=Fe.x*We.y-We.x*Fe.y;ne+=(Fe.x+We.x)*lt,ce+=(Fe.y+We.y)*lt,J+=3*lt}return new Kc(ne/J,ce/J,0,Q)})(l),Y=T.length;for(;T.length;){const Q=T.pop();(Q.d>V.d||!V.d)&&(V=Q,s&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Y)),Q.max-V.d<=n||(x=Q.h/2,T.push(new Kc(Q.p.x-x,Q.p.y-x,x,l)),T.push(new Kc(Q.p.x+x,Q.p.y-x,x,l)),T.push(new Kc(Q.p.x-x,Q.p.y+x,x,l)),T.push(new Kc(Q.p.x+x,Q.p.y+x,x,l)),Y+=4)}return s&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${V.d}`)),V.p}function rv(l,n){return n.max-l.max}function Kc(l,n,s,f){this.p=new E(l,n),this.h=s,this.d=(function(v,x){let T=!1,M=1/0;for(let I=0;I<x.length;I++){const B=x[I];for(let F=0,V=B.length,Y=V-1;F<V;Y=F++){const Q=B[F],J=B[Y];Q.y>v.y!=J.y>v.y&&v.x<(J.x-Q.x)*(v.y-Q.y)/(J.y-Q.y)+Q.x&&(T=!T),M=Math.min(M,Im(v,Q,J))}}return(T?1:-1)*Math.sqrt(M)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Mi;g.aE=void 0,(Mi=g.aE||(g.aE={}))[Mi.center=1]="center",Mi[Mi.left=2]="left",Mi[Mi.right=3]="right",Mi[Mi.top=4]="top",Mi[Mi.bottom=5]="bottom",Mi[Mi["top-left"]=6]="top-left",Mi[Mi["top-right"]=7]="top-right",Mi[Mi["bottom-left"]=8]="bottom-left",Mi[Mi["bottom-right"]=9]="bottom-right";const _g=Number.POSITIVE_INFINITY;function co(l,n){return n[1]!==_g?(function(s,f,v){let x=0,T=0;switch(f=Math.abs(f),v=Math.abs(v),s){case"top-right":case"top-left":case"top":T=v-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-v}switch(s){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,T]})(l,n[0],n[1]):(function(s,f){let v=0,x=0;f<0&&(f=0);const T=f/Math.SQRT2;switch(s){case"top-right":case"top-left":x=T-7;break;case"bottom-right":case"bottom-left":x=7-T;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(s){case"top-right":case"bottom-right":v=-T;break;case"top-left":case"bottom-left":v=T;break;case"left":v=f;break;case"right":v=-f}return[v,x]})(l,n[0])}function qp(l,n,s){var f;const v=l.layout,x=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},s);if(x){const M=x.values,I=[];for(let B=0;B<M.length;B+=2){const F=I[B]=M[B],V=M[B+1].map((Y=>Y*gn));F.startsWith("top")?V[1]-=7:F.startsWith("bottom")&&(V[1]+=7),I[B+1]=V}return new hi(I)}const T=v.get("text-variable-anchor");if(T){let M;M=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},s)*gn,_g]:v.get("text-offset").evaluate(n,{},s).map((B=>B*gn));const I=[];for(const B of T)I.push(B,co(B,M));return new hi(I)}return null}function $p(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nv(l,n,s,f,v,x,T,M,I,B,F,V){let Y=x.textMaxSize.evaluate(n,{});Y===void 0&&(Y=T);const Q=l.layers[0].layout,J=Q.get("icon-offset").evaluate(n,{},F),ne=ef(s.horizontal),ce=T/24,me=l.tilePixelRatio*ce,ze=l.tilePixelRatio*Y/24,be=l.tilePixelRatio*M,Se=l.tilePixelRatio*Q.get("symbol-spacing"),Fe=Q.get("text-padding")*l.tilePixelRatio,We=(function(Jt,qt,Bt,Sr=1){const _n=Jt.get("icon-padding").evaluate(qt,{},Bt),Nn=_n&&_n.values;return[Nn[0]*Sr,Nn[1]*Sr,Nn[2]*Sr,Nn[3]*Sr]})(Q,n,F,l.tilePixelRatio),lt=Q.get("text-max-angle")/180*Math.PI,At=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",_t=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Tt=Q.get("symbol-placement"),Nt=Se/2,wt=Q.get("icon-text-fit");let St;f&&wt!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(St=Hy(f,s.vertical,wt,Q.get("icon-text-fit-padding"),J,ce)),ne&&(f=Hy(f,ne,wt,Q.get("icon-text-fit-padding"),J,ce)));const tt=F?V.line.getGranularityForZoomLevel(F.z):1,Xt=(Jt,qt)=>{qt.x<0||qt.x>=bt||qt.y<0||qt.y>=bt||(function(Bt,Sr,_n,Nn,Ei,Ka,Qi,Sn,Ur,bn,Zn,Hn,Yn,uo,gi,Ii,yi,vi,Xn,Kn,yn,Wa,oc,Zo,rf){const Zu=Bt.addToLineVertexArray(Sr,_n);let sc,lc,Hu,nf,Td=0,a=0,h=0,m=0,b=-1,D=-1;const k={};let H=so("");if(Bt.allowVerticalPlacement&&Nn.vertical){const cr=Sn.layout.get("text-rotate").evaluate(yn,{},Zo)+90;Hu=new Jh(Ur,Sr,bn,Zn,Hn,Nn.vertical,Yn,uo,gi,cr),Qi&&(nf=new Jh(Ur,Sr,bn,Zn,Hn,Qi,yi,vi,gi,cr))}if(Ei){const cr=Sn.layout.get("icon-rotate").evaluate(yn,{}),zt=Sn.layout.get("icon-text-fit")!=="none",fr=tv(Ei,cr,oc,zt),pr=Qi?tv(Qi,cr,oc,zt):void 0;lc=new Jh(Ur,Sr,bn,Zn,Hn,Ei,yi,vi,!1,cr),Td=4*fr.length;const Ir=Bt.iconSizeData;let Ji=null;Ir.kind==="source"?(Ji=[Vo*Sn.layout.get("icon-size").evaluate(yn,{})],Ji[0]>lo&&Qt(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Ir.kind==="composite"&&(Ji=[Vo*Wa.compositeIconSizes[0].evaluate(yn,{},Zo),Vo*Wa.compositeIconSizes[1].evaluate(yn,{},Zo)],(Ji[0]>lo||Ji[1]>lo)&&Qt(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,fr,Ji,Kn,Xn,yn,g.ao.none,Sr,Zu.lineStartIndex,Zu.lineLength,-1,Zo),b=Bt.icon.placedSymbolArray.length-1,pr&&(a=4*pr.length,Bt.addSymbols(Bt.icon,pr,Ji,Kn,Xn,yn,g.ao.vertical,Sr,Zu.lineStartIndex,Zu.lineLength,-1,Zo),D=Bt.icon.placedSymbolArray.length-1)}const ie=Object.keys(Nn.horizontal);for(const cr of ie){const zt=Nn.horizontal[cr];if(!sc){H=so(zt.text);const pr=Sn.layout.get("text-rotate").evaluate(yn,{},Zo);sc=new Jh(Ur,Sr,bn,Zn,Hn,zt,Yn,uo,gi,pr)}const fr=zt.positionedLines.length===1;if(h+=bg(Bt,Sr,zt,Ka,Sn,gi,yn,Ii,Zu,Nn.vertical?g.ao.horizontal:g.ao.horizontalOnly,fr?ie:[cr],k,b,Wa,Zo),fr)break}Nn.vertical&&(m+=bg(Bt,Sr,Nn.vertical,Ka,Sn,gi,yn,Ii,Zu,g.ao.vertical,["vertical"],k,D,Wa,Zo));const Te=sc?sc.boxStartIndex:Bt.collisionBoxArray.length,Xe=sc?sc.boxEndIndex:Bt.collisionBoxArray.length,nt=Hu?Hu.boxStartIndex:Bt.collisionBoxArray.length,ht=Hu?Hu.boxEndIndex:Bt.collisionBoxArray.length,Ke=lc?lc.boxStartIndex:Bt.collisionBoxArray.length,Je=lc?lc.boxEndIndex:Bt.collisionBoxArray.length,Ut=nf?nf.boxStartIndex:Bt.collisionBoxArray.length,ar=nf?nf.boxEndIndex:Bt.collisionBoxArray.length;let Dr=-1;const je=(cr,zt)=>cr&&cr.circleDiameter?Math.max(cr.circleDiameter,zt):zt;Dr=je(sc,Dr),Dr=je(Hu,Dr),Dr=je(lc,Dr),Dr=je(nf,Dr);const Ie=Dr>-1?1:0;Ie&&(Dr*=rf/gn),Bt.glyphOffsetArray.length>=qu.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yn.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,yn.sortKey);const Ye=qp(Sn,yn,Zo),[ct,er]=(function(cr,zt){const fr=cr.length,pr=zt?.values;if(pr?.length>0)for(let Ir=0;Ir<pr.length;Ir+=2){const Ji=pr[Ir+1];cr.emplaceBack(g.aE[pr[Ir]],Ji[0],Ji[1])}return[fr,cr.length]})(Bt.textAnchorOffsets,Ye);Bt.symbolInstances.emplaceBack(Sr.x,Sr.y,k.right>=0?k.right:-1,k.center>=0?k.center:-1,k.left>=0?k.left:-1,k.vertical||-1,b,D,H,Te,Xe,nt,ht,Ke,Je,Ut,ar,bn,h,m,Td,a,Ie,0,Yn,Dr,ct,er)})(l,qt,Jt,s,f,v,St,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,me,[Fe,Fe,Fe,Fe],At,I,be,We,_t,J,n,x,B,F,T)};if(Tt==="line")for(const Jt of _d(n.geometry,0,0,bt,bt)){const qt=Ai(Jt,tt),Bt=r_(qt,Se,lt,s.vertical||ne,f,24,ze,l.overscaling,bt);for(const Sr of Bt)ne&&$o(l,ne.text,Nt,Sr)||Xt(qt,Sr)}else if(Tt==="line-center"){for(const Jt of n.geometry)if(Jt.length>1){const qt=Ai(Jt,tt),Bt=ev(qt,lt,s.vertical||ne,f,24,ze);Bt&&Xt(qt,Bt)}}else if(n.type==="Polygon")for(const Jt of Tc(n.geometry,0)){const qt=i_(Jt,16);Xt(Ai(Jt[0],tt,!0),new ic(qt.x,qt.y,0))}else if(n.type==="LineString")for(const Jt of n.geometry){const qt=Ai(Jt,tt);Xt(qt,new ic(qt[0].x,qt[0].y,0))}else if(n.type==="Point")for(const Jt of n.geometry)for(const qt of Jt)Xt([qt],new ic(qt.x,qt.y,0))}function bg(l,n,s,f,v,x,T,M,I,B,F,V,Y,Q,J){const ne=(function(ze,be,Se,Fe,We,lt,At,_t){const Tt=Fe.layout.get("text-rotate").evaluate(lt,{})*Math.PI/180,Nt=[];for(const wt of be.positionedLines)for(const St of wt.positionedGlyphs){if(!St.rect)continue;const tt=St.rect||{};let Xt=4,Jt=!0,qt=1,Bt=0;const Sr=(We||_t)&&St.vertical,_n=St.metrics.advance*St.scale/2;if(_t&&be.verticalizable&&(Bt=wt.lineOffset/2-(St.imageName?-(gn-St.metrics.width*St.scale)/2:(St.scale-1)*gn)),St.imageName){const vi=At[St.imageName];Jt=vi.sdf,qt=vi.pixelRatio,Xt=1/qt}const Nn=We?[St.x+_n,St.y]:[0,0];let Ei=We?[0,0]:[St.x+_n+Se[0],St.y+Se[1]-Bt],Ka=[0,0];Sr&&(Ka=Ei,Ei=[0,0]);const Qi=St.metrics.isDoubleResolution?2:1,Sn=(St.metrics.left-Xt)*St.scale-_n+Ei[0],Ur=(-St.metrics.top-Xt)*St.scale+Ei[1],bn=Sn+tt.w/Qi*St.scale/qt,Zn=Ur+tt.h/Qi*St.scale/qt,Hn=new E(Sn,Ur),Yn=new E(bn,Ur),uo=new E(Sn,Zn),gi=new E(bn,Zn);if(Sr){const vi=new E(-_n,_n- -17),Xn=-Math.PI/2,Kn=12-_n,yn=new E(22-Kn,-(St.imageName?Kn:0)),Wa=new E(...Ka);Hn._rotateAround(Xn,vi)._add(yn)._add(Wa),Yn._rotateAround(Xn,vi)._add(yn)._add(Wa),uo._rotateAround(Xn,vi)._add(yn)._add(Wa),gi._rotateAround(Xn,vi)._add(yn)._add(Wa)}if(Tt){const vi=Math.sin(Tt),Xn=Math.cos(Tt),Kn=[Xn,-vi,vi,Xn];Hn._matMult(Kn),Yn._matMult(Kn),uo._matMult(Kn),gi._matMult(Kn)}const Ii=new E(0,0),yi=new E(0,0);Nt.push({tl:Hn,tr:Yn,bl:uo,br:gi,tex:tt,writingMode:be.writingMode,glyphOffset:Nn,sectionIndex:St.sectionIndex,isSDF:Jt,pixelOffsetTL:Ii,pixelOffsetBR:yi,minFontScaleX:0,minFontScaleY:0})}return Nt})(0,s,M,v,x,T,f,l.allowVerticalPlacement),ce=l.textSizeData;let me=null;ce.kind==="source"?(me=[Vo*v.layout.get("text-size").evaluate(T,{})],me[0]>lo&&Qt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ce.kind==="composite"&&(me=[Vo*Q.compositeTextSizes[0].evaluate(T,{},J),Vo*Q.compositeTextSizes[1].evaluate(T,{},J)],(me[0]>lo||me[1]>lo)&&Qt(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,ne,me,M,x,T,B,n,I.lineStartIndex,I.lineLength,Y,J);for(const ze of F)V[ze]=l.text.placedSymbolArray.length-1;return 4*ne.length}function ef(l){for(const n in l)return l[n];return null}function $o(l,n,s,f){const v=l.compareText;if(n in v){const x=v[n];for(let T=x.length-1;T>=0;T--)if(f.dist(x[T])<s)return!0}else v[n]=[];return v[n].push(f),!1}const xg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class tf{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,f]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const x=xg[15&f];if(!x)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(n,2,1),[M]=new Uint32Array(n,4,1);return new tf(M,T,x,n)}constructor(n,s=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=xg.indexOf(this.ArrayType),T=2*n*this.ArrayType.BYTES_PER_ELEMENT,M=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-M%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+M+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+T+M+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+M+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=s,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return ws(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:M}=this,I=[0,x.length-1,0],B=[];for(;I.length;){const F=I.pop()||0,V=I.pop()||0,Y=I.pop()||0;if(V-Y<=M){for(let ce=Y;ce<=V;ce++){const me=T[2*ce],ze=T[2*ce+1];me>=n&&me<=f&&ze>=s&&ze<=v&&B.push(x[ce])}continue}const Q=Y+V>>1,J=T[2*Q],ne=T[2*Q+1];J>=n&&J<=f&&ne>=s&&ne<=v&&B.push(x[Q]),(F===0?n<=J:s<=ne)&&(I.push(Y),I.push(Q-1),I.push(1-F)),(F===0?f>=J:v>=ne)&&(I.push(Q+1),I.push(V),I.push(1-F))}return B}within(n,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:T}=this,M=[0,v.length-1,0],I=[],B=f*f;for(;M.length;){const F=M.pop()||0,V=M.pop()||0,Y=M.pop()||0;if(V-Y<=T){for(let ce=Y;ce<=V;ce++)wg(x[2*ce],x[2*ce+1],n,s)<=B&&I.push(v[ce]);continue}const Q=Y+V>>1,J=x[2*Q],ne=x[2*Q+1];wg(J,ne,n,s)<=B&&I.push(v[Q]),(F===0?n-f<=J:s-f<=ne)&&(M.push(Y),M.push(Q-1),M.push(1-F)),(F===0?n+f>=J:s+f>=ne)&&(M.push(Q+1),M.push(V),M.push(1-F))}return I}}function ws(l,n,s,f,v,x){if(v-f<=s)return;const T=f+v>>1;iv(l,n,T,f,v,x),ws(l,n,s,f,T-1,1-x),ws(l,n,s,T+1,v,1-x)}function iv(l,n,s,f,v,x){for(;v>f;){if(v-f>600){const B=v-f+1,F=s-f+1,V=Math.log(B),Y=.5*Math.exp(2*V/3),Q=.5*Math.sqrt(V*Y*(B-Y)/B)*(F-B/2<0?-1:1);iv(l,n,s,Math.max(f,Math.floor(s-F*Y/B+Q)),Math.min(v,Math.floor(s+(B-F)*Y/B+Q)),x)}const T=n[2*s+x];let M=f,I=v;for(wd(l,n,f,s),n[2*v+x]>T&&wd(l,n,f,v);M<I;){for(wd(l,n,M,I),M++,I--;n[2*M+x]<T;)M++;for(;n[2*I+x]>T;)I--}n[2*f+x]===T?wd(l,n,f,I):(I++,wd(l,n,I,v)),I<=s&&(f=I+1),s<=I&&(v=I-1)}}function wd(l,n,s,f){Wc(l,s,f),Wc(n,2*s,2*f),Wc(n,2*s+1,2*f+1)}function Wc(l,n,s){const f=l[n];l[n]=l[s],l[s]=f}function wg(l,n,s,f){const v=l-s,x=n-f;return v*v+x*x}var Sg;g.cx=void 0,(Sg=g.cx||(g.cx={})).create="create",Sg.load="load",Sg.fullLoad="fullLoad";let Zp=null,Sd=[];const Tg=1e3/60,Ag="loadTime",Mg="fullLoadTime",a_={mark(l){performance.mark(l)},frame(l){const n=l;Zp!=null&&Sd.push(n-Zp),Zp=n},clearMetrics(){Zp=null,Sd=[],performance.clearMeasures(Ag),performance.clearMeasures(Mg);for(const l in g.cx)performance.clearMarks(g.cx[l])},getPerformanceMetrics(){performance.measure(Ag,g.cx.create,g.cx.load),performance.measure(Mg,g.cx.create,g.cx.fullLoad);const l=performance.getEntriesByName(Ag)[0].duration,n=performance.getEntriesByName(Mg)[0].duration,s=Sd.length,f=1/(Sd.reduce(((x,T)=>x+T),0)/s/1e3),v=Sd.filter((x=>x>Tg)).reduce(((x,T)=>x+(T-Tg)/Tg),0);return{loadTime:l,fullLoadTime:n,fps:f,percentDroppedFrames:v/(s+v)*100,totalFrames:s}}};g.$=bt,g.A=ue,g.B=function([l,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(s),y:l*Math.sin(n)*Math.sin(s),z:l*Math.cos(s)}},g.C=So,g.D=kt,g.E=It,g.F=Lr,g.G=Cm,g.H=function(l){if(qi==null){const n=l.navigator?l.navigator.userAgent:null;qi=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return qi},g.I=$h,g.J=class{constructor(l,n){this.target=l,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new t_((()=>this.process())),this.subscription=Ls(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=un(self)?l:window}registerMessageHandler(l,n){this.messageHandlers[l]=n}sendAsync(l,n){return new Promise(((s,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=n?Ls(n.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),Yy):null;this.resolveRejects[v]={resolve:I=>{x?.unsubscribe(),s(I)},reject:I=>{x?.unsubscribe(),f(I)}};const T=[],M=Object.assign(Object.assign({},l),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Lo(l.data,T)});this.target.postMessage(M,{transfer:T})}))}receive(l){const n=l.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const f=this.abortControllers[s];return delete this.abortControllers[s],void(f&&f.abort())}if(un(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){return u(this,void 0,void 0,(function*(){if(n.type==="<response>"){const v=this.resolveRejects[l];return delete this.resolveRejects[l],v?void(n.error?v.reject(ds(n.error)):v.resolve(ds(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ds(n.data),f=new AbortController;this.abortControllers[l]=f;try{const v=yield this.messageHandlers[n.type](n.sourceMapId,s,f);this.completeTask(l,null,v)}catch(v){this.completeTask(l,v)}}))}completeTask(l,n,s){const f=[];delete this.abortControllers[l];const v={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Lo(n):null,data:Lo(s,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.K=se,g.L=function(){var l=new ue(16);return ue!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},g.M=function(l,n,s){var f,v,x,T,M,I,B,F,V,Y,Q,J,ne=s[0],ce=s[1],me=s[2];return n===l?(l[12]=n[0]*ne+n[4]*ce+n[8]*me+n[12],l[13]=n[1]*ne+n[5]*ce+n[9]*me+n[13],l[14]=n[2]*ne+n[6]*ce+n[10]*me+n[14],l[15]=n[3]*ne+n[7]*ce+n[11]*me+n[15]):(v=n[1],x=n[2],T=n[3],M=n[4],I=n[5],B=n[6],F=n[7],V=n[8],Y=n[9],Q=n[10],J=n[11],l[0]=f=n[0],l[1]=v,l[2]=x,l[3]=T,l[4]=M,l[5]=I,l[6]=B,l[7]=F,l[8]=V,l[9]=Y,l[10]=Q,l[11]=J,l[12]=f*ne+M*ce+V*me+n[12],l[13]=v*ne+I*ce+Y*me+n[13],l[14]=x*ne+B*ce+Q*me+n[14],l[15]=T*ne+F*ce+J*me+n[15]),l},g.N=function(l,n,s){var f=s[0],v=s[1],x=s[2];return l[0]=n[0]*f,l[1]=n[1]*f,l[2]=n[2]*f,l[3]=n[3]*f,l[4]=n[4]*v,l[5]=n[5]*v,l[6]=n[6]*v,l[7]=n[7]*v,l[8]=n[8]*x,l[9]=n[9]*x,l[10]=n[10]*x,l[11]=n[11]*x,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},g.O=function(l,n,s){var f=n[0],v=n[1],x=n[2],T=n[3],M=n[4],I=n[5],B=n[6],F=n[7],V=n[8],Y=n[9],Q=n[10],J=n[11],ne=n[12],ce=n[13],me=n[14],ze=n[15],be=s[0],Se=s[1],Fe=s[2],We=s[3];return l[0]=be*f+Se*M+Fe*V+We*ne,l[1]=be*v+Se*I+Fe*Y+We*ce,l[2]=be*x+Se*B+Fe*Q+We*me,l[3]=be*T+Se*F+Fe*J+We*ze,l[4]=(be=s[4])*f+(Se=s[5])*M+(Fe=s[6])*V+(We=s[7])*ne,l[5]=be*v+Se*I+Fe*Y+We*ce,l[6]=be*x+Se*B+Fe*Q+We*me,l[7]=be*T+Se*F+Fe*J+We*ze,l[8]=(be=s[8])*f+(Se=s[9])*M+(Fe=s[10])*V+(We=s[11])*ne,l[9]=be*v+Se*I+Fe*Y+We*ce,l[10]=be*x+Se*B+Fe*Q+We*me,l[11]=be*T+Se*F+Fe*J+We*ze,l[12]=(be=s[12])*f+(Se=s[13])*M+(Fe=s[14])*V+(We=s[15])*ne,l[13]=be*v+Se*I+Fe*Y+We*ce,l[14]=be*x+Se*B+Fe*Q+We*me,l[15]=be*T+Se*F+Fe*J+We*ze,l},g.P=E,g.Q=function(l,n){const s={};for(let f=0;f<n.length;f++){const v=n[f];v in l&&(s[v]=l[v])}return s},g.R=Ki,g.S=ml,g.T=yp,g.U=Np,g.V=fg,g.W=W,g.X=oe,g.Y=ks,g.Z=Xa,g._=u,g.a=ee,g.a$=Ft,g.a0=function(l,n){var s,f,v,x,T;if(!l)return n??{};if(!n)return l;let M=Object.assign({},l);if(n.removeAll&&(M={removeAll:!0}),n.remove){const I=new Set(n.remove);M.add&&(M.add=M.add.filter((F=>!I.has(F.id)))),M.update&&(M.update=M.update.filter((F=>!I.has(F.id))));const B=new Set(((s=l.add)!==null&&s!==void 0?s:[]).map((F=>F.id)));n.remove=n.remove.filter((F=>!B.has(F)))}if(n.remove){const I=new Set(M.remove?M.remove.concat(n.remove):n.remove);M.remove=Array.from(I.values())}if(n.add){const I=M.add?M.add.concat(n.add):n.add,B=new Map(I.map((F=>[F.id,F])));M.add=Array.from(B.values())}if(n.update){const I=new Map((f=M.update)===null||f===void 0?void 0:f.map((B=>[B.id,B])));for(const B of n.update){const F=(v=I.get(B.id))!==null&&v!==void 0?v:{id:B.id};B.newGeometry&&(F.newGeometry=B.newGeometry),B.addOrUpdateProperties&&(F.addOrUpdateProperties=((x=F.addOrUpdateProperties)!==null&&x!==void 0?x:[]).concat(B.addOrUpdateProperties)),B.removeProperties&&(F.removeProperties=((T=F.removeProperties)!==null&&T!==void 0?T:[]).concat(B.removeProperties)),B.removeAllProperties&&(F.removeAllProperties=!0),I.set(B.id,F)}M.update=Array.from(I.values())}return M.remove&&M.add&&(M.remove=M.remove.filter((I=>M.add.findIndex((B=>B.id===I))===-1))),M},g.a1=Qh,g.a2=$n,g.a3=25,g.a4=dg,g.a5=l=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((s=>{n.onloadstart=()=>{s(n)};for(const f of l){const v=window.document.createElement("source");Ne(f)||(n.crossOrigin="Anonymous"),v.src=f,n.appendChild(v)}}))},g.a6=rt,g.a7=function(){return vt++},g.a8=he,g.a9=qu,g.aA=function(l){let n=1/0,s=1/0,f=-1/0,v=-1/0;for(const x of l)n=Math.min(n,x.x),s=Math.min(s,x.y),f=Math.max(f,x.x),v=Math.max(v,x.y);return[n,s,f,v]},g.aB=gn,g.aC=tr,g.aD=function(l,n,s,f,v=!1){if(!s[0]&&!s[1])return[0,0];const x=v?f==="map"?-l.bearingInRadians:0:f==="viewport"?l.bearingInRadians:0;if(x){const T=Math.sin(x),M=Math.cos(x);s=[s[0]*M-s[1]*T,s[0]*T+s[1]*M]}return[v?s[0]:tr(n,s[0],l.zoom),v?s[1]:tr(n,s[1],l.zoom)]},g.aF=Xh,g.aG=$p,g.aH=Yh,g.aI=tf,g.aJ=qr,g.aK=id,g.aL=Ue,g.aM=vr,g.aN=ii,g.aO=or,g.aP=js,g.aQ=Xy,g.aR=Ot,g.aS=Mt,g.aT=function(l){var n=new ue(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},g.aU=function(l,n,s){return l[0]=n[0]-s[0],l[1]=n[1]-s[1],l[2]=n[2]-s[2],l},g.aV=function(l,n){var s=n[0],f=n[1],v=n[2],x=s*s+f*f+v*v;return x>0&&(x=1/Math.sqrt(x)),l[0]=n[0]*x,l[1]=n[1]*x,l[2]=n[2]*x,l},g.aW=ft,g.aX=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},g.aY=function(l,n,s){return l[0]=n[0]*s[0],l[1]=n[1]*s[1],l[2]=n[2]*s[2],l[3]=n[3]*s[3],l},g.aZ=qe,g.a_=function(l,n,s){const f=n[0]*s[0]+n[1]*s[1]+n[2]*s[2];return f===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/f},g.aa=ji,g.ab=Kl,g.ac=mg,g.ad=function(l){const n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,f,v,x)=>{const T=v||x;return n[f]=!T||T.toLowerCase(),""})),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},g.ae=li,g.af=function(l){return Math.pow(2,l)},g.ag=Be,g.ah=Gt,g.ai=85.051129,g.aj=Kh,g.ak=function(l){return Math.log(l)/Math.LN2},g.al=function(l){var n=l[0],s=l[1];return n*n+s*s},g.am=function(l,n){const s=[];for(const f in l)f in n||s.push(f);return s},g.an=function(l,n){let s=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:v,minZoom:x,maxZoom:T}=l,M=v?Gt(bi.interpolationFactor(v,n,x,T),0,1):0;l.kind==="camera"?f=So.number(l.minSize,l.maxSize,M):s=M}return{uSizeT:s,uSize:f}},g.ap=function(l,{uSize:n,uSizeT:s},{lowerSize:f,upperSize:v}){return l.kind==="source"?f/Vo:l.kind==="composite"?So.number(f/Vo,v/Vo,s):n},g.aq=function(l,n){var s=n[0],f=n[1],v=n[2],x=n[3],T=n[4],M=n[5],I=n[6],B=n[7],F=n[8],V=n[9],Y=n[10],Q=n[11],J=n[12],ne=n[13],ce=n[14],me=n[15],ze=s*M-f*T,be=s*I-v*T,Se=s*B-x*T,Fe=f*I-v*M,We=f*B-x*M,lt=v*B-x*I,At=F*ne-V*J,_t=F*ce-Y*J,Tt=F*me-Q*J,Nt=V*ce-Y*ne,wt=V*me-Q*ne,St=Y*me-Q*ce,tt=ze*St-be*wt+Se*Nt+Fe*Tt-We*_t+lt*At;return tt?(l[0]=(M*St-I*wt+B*Nt)*(tt=1/tt),l[1]=(v*wt-f*St-x*Nt)*tt,l[2]=(ne*lt-ce*We+me*Fe)*tt,l[3]=(Y*We-V*lt-Q*Fe)*tt,l[4]=(I*Tt-T*St-B*_t)*tt,l[5]=(s*St-v*Tt+x*_t)*tt,l[6]=(ce*Se-J*lt-me*be)*tt,l[7]=(F*lt-Y*Se+Q*be)*tt,l[8]=(T*wt-M*Tt+B*At)*tt,l[9]=(f*Tt-s*wt-x*At)*tt,l[10]=(J*We-ne*Se+me*ze)*tt,l[11]=(V*Se-F*We-Q*ze)*tt,l[12]=(M*_t-T*Nt-I*At)*tt,l[13]=(s*Nt-f*_t+v*At)*tt,l[14]=(ne*be-J*Fe-ce*ze)*tt,l[15]=(F*Fe-V*be+Y*ze)*tt,l):null},g.ar=ot,g.as=function(l){var n=l[0],s=l[1];return Math.sqrt(n*n+s*s)},g.at=function(l){return l[0]=0,l[1]=0,l},g.au=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l},g.av=qo,g.aw=Ht,g.ax=function(l,n,s,f){const v=n.y-l.y,x=n.x-l.x,T=f.y-s.y,M=f.x-s.x,I=T*x-M*v;if(I===0)return null;const B=(M*(l.y-s.y)-T*(l.x-s.x))/I;return new E(l.x+B*x,l.y+B*v)},g.ay=_d,g.az=Nc,g.b=na,g.b$=class extends p{},g.b0=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l[3]=n[3]*s,l},g.b1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]},g.b2=pg,g.b3=Fr,g.b4=function(l,n,s,f,v){var x=1/Math.tan(n/2);if(l[0]=x/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,v!=null&&v!==1/0){var T=1/(f-v);l[10]=(v+f)*T,l[14]=2*v*f*T}else l[10]=-1,l[14]=-2*f;return l},g.b5=function(l){var n=new ue(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},g.b6=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),x=n[0],T=n[1],M=n[2],I=n[3],B=n[4],F=n[5],V=n[6],Y=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=x*v+B*f,l[1]=T*v+F*f,l[2]=M*v+V*f,l[3]=I*v+Y*f,l[4]=B*v-x*f,l[5]=F*v-T*f,l[6]=V*v-M*f,l[7]=Y*v-I*f,l},g.b7=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),x=n[4],T=n[5],M=n[6],I=n[7],B=n[8],F=n[9],V=n[10],Y=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=x*v+B*f,l[5]=T*v+F*f,l[6]=M*v+V*f,l[7]=I*v+Y*f,l[8]=B*v-x*f,l[9]=F*v-T*f,l[10]=V*v-M*f,l[11]=Y*v-I*f,l},g.b8=function(){const l=new Float32Array(16);return Be(l),l},g.b9=function(){const l=new Float64Array(16);return Be(l),l},g.bA=function(l,n){const s=Ae(l,360),f=Ae(n,360),v=f-s,x=f>s?v-360:v+360;return Math.abs(v)<Math.abs(x)?v:x},g.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},g.bC=function(l,n,s,f){const v=Math.sqrt(l*l+n*n),x=Math.sqrt(s*s+f*f);l/=v,n/=v,s/=x,f/=x;const T=Math.acos(l*s+n*f);return-n*s+l*f>0?T:-T},g.bD=function(l,n){const s=Ae(l,2*Math.PI),f=Ae(n,2*Math.PI);return Math.min(Math.abs(s-f),Math.abs(s-f+2*Math.PI),Math.abs(s-f-2*Math.PI))},g.bE=function(){const l={},n=Re.$version;for(const s in Re.$root){const f=Re.$root[s];if(f.required){let v=null;v=s==="version"?n:f.type==="array"?[]:{},v!=null&&(l[s]=v)}}return l},g.bF=Ih,g.bG=we,g.bH=function l(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let f=0;f<n.length;f++)if(!l(n[f],s[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const f in n)if(!l(n[f],s[f]))return!1;return!0}return n===s},g.bI=function(l){l=l.slice();const n=Object.create(null);for(let s=0;s<l.length;s++)n[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=gr(l[s],n[l[s].ref]));return l},g.bJ=function(l,n){if(l.type==="custom")return new yd(l,n);switch(l.type){case"background":return new hg(l,n);case"circle":return new Bm(l,n);case"color-relief":return new Py(l,n);case"fill":return new $m(l,n);case"fill-extrusion":return new Rr(l,n);case"heatmap":return new My(l,n);case"hillshade":return new Wl(l,n);case"line":return new Xm(l,n);case"raster":return new e_(l,n);case"symbol":return new gd(l,n)}},g.bK=dt,g.bL=function(l,n){if(!l)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Lt(l.version,n.version))return[{command:"setStyle",args:[n]}];Lt(l.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Lt(l.state,n.state)||s.push({command:"setGlobalState",args:[n.state]}),Lt(l.centerAltitude,n.centerAltitude)||s.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Lt(l.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Lt(l.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Lt(l.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Lt(l.roll,n.roll)||s.push({command:"setRoll",args:[n.roll]}),Lt(l.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Lt(l.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Lt(l.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Lt(l.light,n.light)||s.push({command:"setLight",args:[n.light]}),Lt(l.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Lt(l.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),Lt(l.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const f={},v=[];(function(T,M,I,B){let F;for(F in M=M||{},T=T||{})Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(M,F)||An(F,I,B));for(F in M)Object.prototype.hasOwnProperty.call(M,F)&&(Object.prototype.hasOwnProperty.call(T,F)?Lt(T[F],M[F])||(T[F].type==="geojson"&&M[F].type==="geojson"&&ci(T,M,F)?hr(I,{command:"setGeoJSONSourceData",args:[F,M[F].data]}):Mn(F,M,I,B)):en(F,M,I))})(l.sources,n.sources,v,f);const x=[];l.layers&&l.layers.forEach((T=>{"source"in T&&f[T.source]?s.push({command:"removeLayer",args:[T.id]}):x.push(T)})),s=s.concat(v),(function(T,M,I){M=M||[];const B=(T=T||[]).map(tn),F=M.map(tn),V=T.reduce(Bn,{}),Y=M.reduce(Bn,{}),Q=B.slice(),J=Object.create(null);let ne,ce,me,ze,be;for(let Se=0,Fe=0;Se<B.length;Se++)ne=B[Se],Object.prototype.hasOwnProperty.call(Y,ne)?Fe++:(hr(I,{command:"removeLayer",args:[ne]}),Q.splice(Q.indexOf(ne,Fe),1));for(let Se=0,Fe=0;Se<F.length;Se++)ne=F[F.length-1-Se],Q[Q.length-1-Se]!==ne&&(Object.prototype.hasOwnProperty.call(V,ne)?(hr(I,{command:"removeLayer",args:[ne]}),Q.splice(Q.lastIndexOf(ne,Q.length-Fe),1)):Fe++,ze=Q[Q.length-Se],hr(I,{command:"addLayer",args:[Y[ne],ze]}),Q.splice(Q.length-Se,0,ne),J[ne]=!0);for(let Se=0;Se<F.length;Se++)if(ne=F[Se],ce=V[ne],me=Y[ne],!J[ne]&&!Lt(ce,me))if(Lt(ce.source,me.source)&&Lt(ce["source-layer"],me["source-layer"])&&Lt(ce.type,me.type)){for(be in ei(ce.layout,me.layout,I,ne,null,"setLayoutProperty"),ei(ce.paint,me.paint,I,ne,null,"setPaintProperty"),Lt(ce.filter,me.filter)||hr(I,{command:"setFilter",args:[ne,me.filter]}),Lt(ce.minzoom,me.minzoom)&&Lt(ce.maxzoom,me.maxzoom)||hr(I,{command:"setLayerZoomRange",args:[ne,me.minzoom,me.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,be)&&be!=="layout"&&be!=="paint"&&be!=="filter"&&be!=="metadata"&&be!=="minzoom"&&be!=="maxzoom"&&(be.indexOf("paint.")===0?ei(ce[be],me[be],I,ne,be.slice(6),"setPaintProperty"):Lt(ce[be],me[be])||hr(I,{command:"setLayerProperty",args:[ne,be,me[be]]}));for(be in me)Object.prototype.hasOwnProperty.call(me,be)&&!Object.prototype.hasOwnProperty.call(ce,be)&&be!=="layout"&&be!=="paint"&&be!=="filter"&&be!=="metadata"&&be!=="minzoom"&&be!=="maxzoom"&&(be.indexOf("paint.")===0?ei(ce[be],me[be],I,ne,be.slice(6),"setPaintProperty"):Lt(ce[be],me[be])||hr(I,{command:"setLayerProperty",args:[ne,be,me[be]]}))}else hr(I,{command:"removeLayer",args:[ne]}),ze=Q[Q.lastIndexOf(ne)+1],hr(I,{command:"addLayer",args:[me,ze]})})(x,n.layers,s)}catch(f){console.warn("Unable to compute style diff:",f),s=[{command:"setStyle",args:[n]}]}return s},g.bM=function(l){const n=[],s=l.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},g.bN=Wt,g.bO=ur,g.bP=class extends ln{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},g.bQ=$f,g.bR=class extends ln{constructor(l,n){super(l,n),this.current=lp}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},g.bS=Bh,g.bT=class extends ln{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},g.bU=class extends ln{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},g.bV=Oe,g.bW=function(l,n){var s=Math.sin(n),f=Math.cos(n);return l[0]=f,l[1]=s,l[2]=0,l[3]=-s,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},g.bX=function(l,n,s){var f=n[0],v=n[1],x=n[2];return l[0]=f*s[0]+v*s[3]+x*s[6],l[1]=f*s[1]+v*s[4]+x*s[7],l[2]=f*s[2]+v*s[5]+x*s[8],l},g.bY=function(l,n,s,f,v,x,T){var M=1/(n-s),I=1/(f-v),B=1/(x-T);return l[0]=-2*M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*B,l[11]=0,l[12]=(n+s)*M,l[13]=(v+f)*I,l[14]=(T+x)*B,l[15]=1,l},g.bZ=class extends ln{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)n[4*s]=l[s].r,n[4*s+1]=l[s].g,n[4*s+2]=l[s].b,n[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,n)}}},g.b_=class extends ln{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;const n=new Float32Array(l);this.gl.uniform1fv(this.location,n)}}},g.ba=function(){return new Float64Array(16)},g.bb=function(l,n,s){const f=new Float64Array(4);return $e(f,l,n-90,s),f},g.bc=function(l,n,s,f){var v,x,T,M,I,B=n[0],F=n[1],V=n[2],Y=n[3],Q=s[0],J=s[1],ne=s[2],ce=s[3];return(x=B*Q+F*J+V*ne+Y*ce)<0&&(x=-x,Q=-Q,J=-J,ne=-ne,ce=-ce),1-x>le?(v=Math.acos(x),T=Math.sin(v),M=Math.sin((1-f)*v)/T,I=Math.sin(f*v)/T):(M=1-f,I=f),l[0]=M*B+I*Q,l[1]=M*F+I*J,l[2]=M*V+I*ne,l[3]=M*Y+I*ce,l},g.bd=function(l){const n=new Float64Array(9);var s,f,v,x,T,M,I,B,F,V,Y,Q,J,ne,ce,me,ze,be;V=(v=(f=l)[0])*(I=v+v),Y=(x=f[1])*I,J=(T=f[2])*I,ne=T*(B=x+x),me=(M=f[3])*I,ze=M*B,be=M*(F=T+T),(s=n)[0]=1-(Q=x*B)-(ce=T*F),s[3]=Y-be,s[6]=J+ze,s[1]=Y+be,s[4]=1-V-ce,s[7]=ne-me,s[2]=J-ze,s[5]=ne+me,s[8]=1-V-Q;const Se=js(-Math.asin(Gt(n[2],-1,1)));let Fe,We;return Math.hypot(n[5],n[8])<.001?(Fe=0,We=-js(Math.atan2(n[3],n[4]))):(Fe=js(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),We=js(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Fe,pitch:Se+90,bearing:We}},g.be=function(l,n){return l.roll==n.roll&&l.pitch==n.pitch&&l.bearing==n.bearing},g.bf=xr,g.bg=kh,g.bh=Fu,g.bi=Gh,g.bj=qa,g.bk=Ve,g.bl=xt,g.bm=_i,g.bn=function(l,n,s,f,v){return Ve(f,v,Gt((l-n)/(s-n),0,1))},g.bo=Ae,g.bp=function(){return new Float64Array(3)},g.bq=function(l,n,s,f){return l[0]=n[0]+s[0]*f,l[1]=n[1]+s[1]*f,l[2]=n[2]+s[2]*f,l},g.br=$e,g.bs=function(l,n,s){var f=s[0],v=s[1],x=s[2],T=s[3],M=n[0],I=n[1],B=n[2],F=v*B-x*I,V=x*M-f*B,Y=f*I-v*M;return l[0]=M+T*(F+=F)+v*(Y+=Y)-x*(V+=V),l[1]=I+T*V+x*F-f*Y,l[2]=B+T*Y+f*V-v*F,l},g.bt=function(l,n,s){const f=(v=[l[0],l[1],l[2],n[0],n[1],n[2],s[0],s[1],s[2]])[0]*((F=v[8])*(T=v[4])-(M=v[5])*(B=v[7]))+v[1]*(-F*(x=v[3])+M*(I=v[6]))+v[2]*(B*x-T*I);var v,x,T,M,I,B,F;if(f===0)return null;const V=ft([],[n[0],n[1],n[2]],[s[0],s[1],s[2]]),Y=ft([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),Q=ft([],[l[0],l[1],l[2]],[n[0],n[1],n[2]]),J=Ot([],V,-l[3]);return Mt(J,J,Ot([],Y,-n[3])),Mt(J,J,Ot([],Q,-s[3])),Ot(J,J,1/f),J},g.bu=Mr,g.bv=function(){return new Float64Array(4)},g.bw=function(l,n,s,f){var v=[],x=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],x[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),x[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),x[2]=v[2],l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},g.bx=function(l,n,s,f){var v=[],x=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],x[0]=v[0],x[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),x[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},g.by=function(l,n,s,f){var v=[],x=[];return v[0]=n[0]-s[0],v[1]=n[1]-s[1],v[2]=n[2]-s[2],x[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),x[1]=v[1],x[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},g.bz=function(l,n,s){var f=Math.sin(s),v=Math.cos(s),x=n[0],T=n[1],M=n[2],I=n[3],B=n[8],F=n[9],V=n[10],Y=n[11];return n!==l&&(l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=x*v-B*f,l[1]=T*v-F*f,l[2]=M*v-V*f,l[3]=I*v-Y*f,l[8]=x*f+B*v,l[9]=T*f+F*v,l[10]=M*f+V*v,l[11]=I*f+Y*v,l},g.c=De,g.c0=Di,g.c1=class extends S{},g.c2=Jf,g.c3=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},g.c4=Qf,g.c5=function(l,n,s){var f=n[0],v=n[1],x=n[2],T=s[3]*f+s[7]*v+s[11]*x+s[15];return l[0]=(s[0]*f+s[4]*v+s[8]*x+s[12])/(T=T||1),l[1]=(s[1]*f+s[5]*v+s[9]*x+s[13])/T,l[2]=(s[2]*f+s[6]*v+s[10]*x+s[14])/T,l},g.c6=class extends Xi{},g.c7=class extends q{},g.c8=function(l,n){return l[0]===n[0]&&l[1]===n[1]&&l[2]===n[2]&&l[3]===n[3]&&l[4]===n[4]&&l[5]===n[5]&&l[6]===n[6]&&l[7]===n[7]&&l[8]===n[8]&&l[9]===n[9]&&l[10]===n[10]&&l[11]===n[11]&&l[12]===n[12]&&l[13]===n[13]&&l[14]===n[14]&&l[15]===n[15]},g.c9=function(l,n){var s=l[0],f=l[1],v=l[2],x=l[3],T=l[4],M=l[5],I=l[6],B=l[7],F=l[8],V=l[9],Y=l[10],Q=l[11],J=l[12],ne=l[13],ce=l[14],me=l[15],ze=n[0],be=n[1],Se=n[2],Fe=n[3],We=n[4],lt=n[5],At=n[6],_t=n[7],Tt=n[8],Nt=n[9],wt=n[10],St=n[11],tt=n[12],Xt=n[13],Jt=n[14],qt=n[15];return Math.abs(s-ze)<=le*Math.max(1,Math.abs(s),Math.abs(ze))&&Math.abs(f-be)<=le*Math.max(1,Math.abs(f),Math.abs(be))&&Math.abs(v-Se)<=le*Math.max(1,Math.abs(v),Math.abs(Se))&&Math.abs(x-Fe)<=le*Math.max(1,Math.abs(x),Math.abs(Fe))&&Math.abs(T-We)<=le*Math.max(1,Math.abs(T),Math.abs(We))&&Math.abs(M-lt)<=le*Math.max(1,Math.abs(M),Math.abs(lt))&&Math.abs(I-At)<=le*Math.max(1,Math.abs(I),Math.abs(At))&&Math.abs(B-_t)<=le*Math.max(1,Math.abs(B),Math.abs(_t))&&Math.abs(F-Tt)<=le*Math.max(1,Math.abs(F),Math.abs(Tt))&&Math.abs(V-Nt)<=le*Math.max(1,Math.abs(V),Math.abs(Nt))&&Math.abs(Y-wt)<=le*Math.max(1,Math.abs(Y),Math.abs(wt))&&Math.abs(Q-St)<=le*Math.max(1,Math.abs(Q),Math.abs(St))&&Math.abs(J-tt)<=le*Math.max(1,Math.abs(J),Math.abs(tt))&&Math.abs(ne-Xt)<=le*Math.max(1,Math.abs(ne),Math.abs(Xt))&&Math.abs(ce-Jt)<=le*Math.max(1,Math.abs(ce),Math.abs(Jt))&&Math.abs(me-qt)<=le*Math.max(1,Math.abs(me),Math.abs(qt))},g.cA=function(l,n){ee.REGISTERED_PROTOCOLS[l]=n},g.cB=function(l){delete ee.REGISTERED_PROTOCOLS[l]},g.cC=function(l,n){const s={};for(let v=0;v<l.length;v++){const x=n&&n[l[v].id]||Pr(l[v]);n&&(n[l[v].id]=x);let T=s[x];T||(T=s[x]=[]),T.push(l[v])}const f=[];for(const v in s)f.push(s[v]);return f},g.cD=Et,g.cE=Wy,g.cF=Qy,g.cG=Ip,g.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=bt/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const n=l.bucket.layers[0],s=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new Lr(l.bucket.zoom+1),l.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Lr(l.bucket.zoom+1),l.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Lr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:F}=l.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Lr(B),l.canonical),f["text-size"].possiblyEvaluate(new Lr(F),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:F}=l.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Lr(B),l.canonical),f["icon-size"].possiblyEvaluate(new Lr(F),l.canonical)]}const x=s.get("text-line-height")*gn,T=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",M=s.get("text-keep-upright"),I=s.get("text-size");for(const B of l.bucket.features){const F=s.get("text-font").evaluate(B,{},l.canonical).join(","),V=I.evaluate(B,{},l.canonical),Y=v.layoutTextSize.evaluate(B,{},l.canonical),Q=v.layoutIconSize.evaluate(B,{},l.canonical),J={horizontal:{},vertical:void 0},ne=B.text;let ce,me=[0,0];if(ne){const Se=ne.toString(),Fe=s.get("text-letter-spacing").evaluate(B,{},l.canonical)*gn,We=nl(Se)?Fe:0,lt=s.get("text-anchor").evaluate(B,{},l.canonical),At=qp(n,B,l.canonical);if(!At){const wt=s.get("text-radial-offset").evaluate(B,{},l.canonical);me=wt?co(lt,[wt*gn,_g]):s.get("text-offset").evaluate(B,{},l.canonical).map((St=>St*gn))}let _t=T?"center":s.get("text-justify").evaluate(B,{},l.canonical);const Tt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(B,{},l.canonical)*gn:1/0,Nt=()=>{l.bucket.allowVerticalPlacement&&ps(Se)&&(J.vertical=dd(ne,l.glyphMap,l.glyphPositions,l.imagePositions,F,Tt,x,lt,"left",We,me,g.ao.vertical,!0,Y,V))};if(!T&&At){const wt=new Set;if(_t==="auto")for(let tt=0;tt<At.values.length;tt+=2)wt.add($p(At.values[tt]));else wt.add(_t);let St=!1;for(const tt of wt)if(!J.horizontal[tt])if(St)J.horizontal[tt]=J.horizontal[0];else{const Xt=dd(ne,l.glyphMap,l.glyphPositions,l.imagePositions,F,Tt,x,"center",tt,We,me,g.ao.horizontal,!1,Y,V);Xt&&(J.horizontal[tt]=Xt,St=Xt.positionedLines.length===1)}Nt()}else{_t==="auto"&&(_t=$p(lt));const wt=dd(ne,l.glyphMap,l.glyphPositions,l.imagePositions,F,Tt,x,lt,_t,We,me,g.ao.horizontal,!1,Y,V);wt&&(J.horizontal[_t]=wt),Nt(),ps(Se)&&T&&M&&(J.vertical=dd(ne,l.glyphMap,l.glyphPositions,l.imagePositions,F,Tt,x,lt,_t,We,me,g.ao.vertical,!1,Y,V))}}let ze=!1;if(B.icon&&B.icon.name){const Se=l.imageMap[B.icon.name];Se&&(ce=W0(l.imagePositions[B.icon.name],s.get("icon-offset").evaluate(B,{},l.canonical),s.get("icon-anchor").evaluate(B,{},l.canonical)),ze=!!Se.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=ze:l.bucket.sdfIcons!==ze&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const be=ef(J.horizontal)||J.vertical;l.bucket.iconsInText=!!be&&be.iconsInText,(be||ce)&&nv(l.bucket,B,J,ce,l.imageMap,v,Y,Q,me,ze,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},g.cI=Sp,g.cJ=Ap,g.cK=rc,g.cL=Hm,g.cM=Vu,g.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},g.cO=function(l,n,s,f,v){return u(this,void 0,void 0,(function*(){if(oe())try{return yield ks(l,n,s,f,v)}catch{}return(function(x,T,M,I,B){const F=x.width,V=x.height;mo&&Bs||(mo=new OffscreenCanvas(F,V),Bs=mo.getContext("2d",{willReadFrequently:!0})),mo.width=F,mo.height=V,Bs.drawImage(x,0,0,F,V);const Y=Bs.getImageData(T,M,I,B);return Bs.clearRect(0,0,F,V),Y.data})(l,n,s,f,v)}))},g.cP=hl,g.cQ=P,g.cR=Uu,g.cS=bs,g.cT=Gl,g.cU=function(l,n){const s=new Map;if(l!=null)if(l.type==="Feature")s.set($u(l,n),l);else for(const f of l.features)s.set($u(f,n),f);return s},g.cV=function(l,n){if(l==null)return!0;if(l.type==="Feature")return $u(l,n)!=null;if(l.type==="FeatureCollection"){const s=new Set;for(const f of l.features){const v=$u(f,n);if(v==null||s.has(v))return!1;s.add(v)}return!0}return!1},g.cW=function(l,n,s){var f,v,x,T;if(n.removeAll&&l.clear(),n.remove)for(const M of n.remove)l.delete(M);if(n.add)for(const M of n.add){const I=$u(M,s);I!=null&&l.set(I,M)}if(n.update)for(const M of n.update){let I=l.get(M.id);if(I==null)continue;const B=!M.removeAllProperties&&(((f=M.removeProperties)===null||f===void 0?void 0:f.length)>0||((v=M.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((M.newGeometry||M.removeAllProperties||B)&&(I=Object.assign({},I),l.set(M.id,I),B&&(I.properties=Object.assign({},I.properties))),M.newGeometry&&(I.geometry=M.newGeometry),M.removeAllProperties)I.properties={};else if(((x=M.removeProperties)===null||x===void 0?void 0:x.length)>0)for(const F of M.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,F)&&delete I.properties[F];if(((T=M.addOrUpdateProperties)===null||T===void 0?void 0:T.length)>0)for(const{key:F,value:V}of M.addOrUpdateProperties)I.properties[F]=V}},g.cX=Yi,g.ca=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},g.cb=l=>l.type==="symbol",g.cc=l=>l.type==="circle",g.cd=l=>l.type==="heatmap",g.ce=l=>l.type==="line",g.cf=l=>l.type==="fill",g.cg=l=>l.type==="fill-extrusion",g.ch=l=>l.type==="hillshade",g.ci=l=>l.type==="color-relief",g.cj=l=>l.type==="raster",g.ck=l=>l.type==="background",g.cl=l=>l.type==="custom",g.cm=Pt,g.cn=function(l,n,s){const f=Dt(n.x-s.x,n.y-s.y),v=Dt(l.x-s.x,l.y-s.y);var x,T;return js(Math.atan2(f[0]*v[1]-f[1]*v[0],(x=f)[0]*(T=v)[0]+x[1]*T[1]))},g.co=Rt,g.cp=function(l,n){return Wo[n]&&(l instanceof MouseEvent||l instanceof WheelEvent)},g.cq=function(l,n){return Ko[n]&&"touches"in l},g.cr=function(l){return Ko[l]||Wo[l]},g.cs=function(l,n,s){var f=n[0],v=n[1];return l[0]=s[0]*f+s[4]*v+s[12],l[1]=s[1]*f+s[5]*v+s[13],l},g.ct=function(l,n){const{x:s,y:f}=Qh.fromLngLat(n);return!(l<0||l>25||f<0||f>=1||s<0||s>=1)},g.cu=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},g.cv=class extends jo{},g.cw=a_,g.cy=function(l){return l.message===Qo},g.cz=_e,g.d=Ne,g.e=kr,g.f=l=>u(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),g.g=te,g.h=l=>new Promise(((n,s)=>{const f=new Image;f.onload=()=>{n(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=ja}))},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(l)],{type:"image/png"});f.src=l.byteLength?URL.createObjectURL(v):ja})),g.i=un,g.j=(l,n)=>Ce(kr(l,{type:"json"}),n),g.k=et,g.l=pt,g.m=Ce,g.n=(l,n)=>Ce(kr(l,{type:"arrayBuffer"}),n),g.o=function(l){return new Vu(l).readFields(Fy,[])},g.p=Qm,g.q=Uh,g.r=Si,g.s=Ls,g.t=Hl,g.u=wr,g.v=Re,g.w=Qt,g.x=Bo,g.y=Uf,g.z=io})),d("worker",["./shared"],(function(g){class u{constructor(ee,te){this.keyCache={},ee&&this.replace(ee,te)}replace(ee,te){this._layerConfigs={},this._layers={},this.update(ee,[],te)}update(ee,te,se){for(const we of ee){this._layerConfigs[we.id]=we;const Ce=this._layers[we.id]=g.bJ(we,se);Ce._featureFilter=g.aa(Ce.filter,se),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(const we of te)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};const _e=g.cC(Object.values(this._layerConfigs),this.keyCache);for(const we of _e){const Ce=we.map((It=>this._layers[It.id])),Ne=Ce[0];if(Ne.visibility==="none")continue;const ke=Ne.source||"";let Qe=this.familiesBySource[ke];Qe||(Qe=this.familiesBySource[ke]={});const pt=Ne.sourceLayer||"_geojsonTileLayer";let et=Qe[pt];et||(et=Qe[pt]=[]),et.push(Ce)}}}class E{constructor(ee){const te={},se=[];for(const Ne in ee){const ke=ee[Ne],Qe=te[Ne]={};for(const pt in ke){const et=ke[+pt];if(!et||et.bitmap.width===0||et.bitmap.height===0)continue;const It={x:0,y:0,w:et.bitmap.width+2,h:et.bitmap.height+2};se.push(It),Qe[pt]={rect:It,metrics:et.metrics}}}const{w:_e,h:we}=g.p(se),Ce=new g.q({width:_e||1,height:we||1});for(const Ne in ee){const ke=ee[Ne];for(const Qe in ke){const pt=ke[+Qe];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const et=te[Ne][Qe].rect;g.q.copy(pt.bitmap,Ce,{x:0,y:0},{x:et.x+1,y:et.y+1},pt.bitmap)}}this.image=Ce,this.positions=te}}g.cD("GlyphAtlas",E);class P{constructor(ee){this.tileID=new g.Z(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,te,se,_e,we){return g._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new g.a8;const Ce=new g.cE(Object.keys(ee.layers).sort()),Ne=new g.cF(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const ke={},Qe={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:se,subdivisionGranularity:we},pt=te.familiesBySource[this.source];for(const rt in pt){const En=ee.layers[rt];if(!En)continue;En.version===1&&g.w(`Vector tile source "${this.source}" layer "${rt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ia=Ce.encode(rt),Ns=[];for(let Pn=0;Pn<En.length;Pn++){const ut=En.feature(Pn),$t=Ne.getId(ut,rt);Ns.push({feature:ut,id:$t,index:Pn,sourceLayerIndex:ia})}for(const Pn of pt[rt]){const ut=Pn[0];ut.source!==this.source&&g.w(`layer.source = ${ut.source} does not equal this.source = ${this.source}`),ut.minzoom&&this.zoom<Math.floor(ut.minzoom)||ut.maxzoom&&this.zoom>=ut.maxzoom||ut.visibility!=="none"&&(C(Pn,this.zoom,se),(ke[ut.id]=ut.createBucket({index:Ne.bucketLayerIDs.length,layers:Pn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ia,sourceID:this.source})).populate(Ns,Qe,this.tileID.canonical),Ne.bucketLayerIDs.push(Pn.map(($t=>$t.id))))}}const et=g.bN(Qe.glyphDependencies,(rt=>Object.keys(rt).map(Number)));this.inFlightDependencies.forEach((rt=>rt?.abort())),this.inFlightDependencies=[];let It=Promise.resolve({});if(Object.keys(et).length){const rt=new AbortController;this.inFlightDependencies.push(rt),It=_e.sendAsync({type:"GG",data:{stacks:et,source:this.source,tileID:this.tileID,type:"glyphs"}},rt)}const Re=Object.keys(Qe.iconDependencies);let Yt=Promise.resolve({});if(Re.length){const rt=new AbortController;this.inFlightDependencies.push(rt),Yt=_e.sendAsync({type:"GI",data:{icons:Re,source:this.source,tileID:this.tileID,type:"icons"}},rt)}const gr=Object.keys(Qe.patternDependencies);let Lt=Promise.resolve({});if(gr.length){const rt=new AbortController;this.inFlightDependencies.push(rt),Lt=_e.sendAsync({type:"GI",data:{icons:gr,source:this.source,tileID:this.tileID,type:"patterns"}},rt)}const hr=Qe.dashDependencies;let en=Promise.resolve({});if(Object.keys(hr).length){const rt=new AbortController;this.inFlightDependencies.push(rt),en=_e.sendAsync({type:"GDA",data:{dashes:hr}},rt)}const[An,Mn,ci,ei]=yield Promise.all([It,Yt,Lt,en]),tn=new E(An),Bn=new g.cG(Mn,ci);for(const rt in ke){const En=ke[rt];En instanceof g.a9?(C(En.layers,this.zoom,se),g.cH({bucket:En,glyphMap:An,glyphPositions:tn.positions,imageMap:Mn,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Qe.subdivisionGranularity})):En.hasDependencies&&(En instanceof g.cI||En instanceof g.cJ||En instanceof g.cK)&&(C(En.layers,this.zoom,se),En.addFeatures(Qe,this.tileID.canonical,Bn.patternPositions,ei))}return this.status="done",{buckets:Object.values(ke).filter((rt=>!rt.isEmpty())),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tn.image,imageAtlas:Bn,dashPositions:ei,glyphMap:this.returnDependencies?An:null,iconMap:this.returnDependencies?Mn:null,glyphPositions:this.returnDependencies?tn.positions:null}}))}}function C(De,ee,te){const se=new g.F(ee);for(const _e of De)_e.recalculate(se,te)}class z{constructor(ee,te,se){this.actor=ee,this.layerIndex=te,this.availableImages=se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ee,te){return g._(this,void 0,void 0,(function*(){const se=yield g.n(ee.request,te);try{return{vectorTile:new g.cL(new g.cM(se.data)),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(_e){const we=new Uint8Array(se.data);let Ce=`Unable to parse the tile at ${ee.request.url}, `;throw Ce+=we[0]===31&&we[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Ce)}}))}loadTile(ee){return g._(this,void 0,void 0,(function*(){const te=ee.uid,se=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new g.cN(ee.request),_e=new P(ee);this.loading[te]=_e;const we=new AbortController;_e.abort=we;try{const Ce=yield this.loadVectorTile(ee,we);if(delete this.loading[te],!Ce)return null;const Ne=Ce.rawData,ke={};Ce.expires&&(ke.expires=Ce.expires),Ce.cacheControl&&(ke.cacheControl=Ce.cacheControl);const Qe={};if(se){const et=se.finish();et&&(Qe.resourceTiming=JSON.parse(JSON.stringify(et)))}_e.vectorTile=Ce.vectorTile;const pt=_e.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ee.subdivisionGranularity);this.loaded[te]=_e,this.fetching[te]={rawTileData:Ne,cacheControl:ke,resourceTiming:Qe};try{const et=yield pt;return g.e({rawTileData:Ne.slice(0)},et,ke,Qe)}finally{delete this.fetching[te]}}catch(Ce){throw delete this.loading[te],_e.status="done",this.loaded[te]=_e,Ce}}))}reloadTile(ee){return g._(this,void 0,void 0,(function*(){const te=ee.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const se=this.loaded[te];if(se.showCollisionBoxes=ee.showCollisionBoxes,se.status==="parsing"){const _e=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,ee.subdivisionGranularity);let we;if(this.fetching[te]){const{rawTileData:Ce,cacheControl:Ne,resourceTiming:ke}=this.fetching[te];delete this.fetching[te],we=g.e({rawTileData:Ce.slice(0)},_e,Ne,ke)}else we=_e;return we}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,ee.subdivisionGranularity)}))}abortTile(ee){return g._(this,void 0,void 0,(function*(){const te=this.loading,se=ee.uid;te&&te[se]&&te[se].abort&&(te[se].abort.abort(),delete te[se])}))}removeTile(ee){return g._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ee.uid]&&delete this.loaded[ee.uid]}))}}class j{constructor(){this.loaded={}}loadTile(ee){return g._(this,void 0,void 0,(function*(){const{uid:te,encoding:se,rawImageData:_e,redFactor:we,greenFactor:Ce,blueFactor:Ne,baseShift:ke}=ee,Qe=_e.width+2,pt=_e.height+2,et=g.b(_e)?new g.R({width:Qe,height:pt},yield g.cO(_e,-1,-1,Qe,pt)):_e,It=new g.cP(te,et,se,we,Ce,Ne,ke);return this.loaded=this.loaded||{},this.loaded[te]=It,It}))}removeTile(ee){const te=this.loaded,se=ee.uid;te&&te[se]&&delete te[se]}}var N,$,X=(function(){if($)return N;function De(te,se){if(te.length!==0){ee(te[0],se);for(var _e=1;_e<te.length;_e++)ee(te[_e],!se)}}function ee(te,se){for(var _e=0,we=0,Ce=0,Ne=te.length,ke=Ne-1;Ce<Ne;ke=Ce++){var Qe=(te[Ce][0]-te[ke][0])*(te[ke][1]+te[Ce][1]),pt=_e+Qe;we+=Math.abs(_e)>=Math.abs(Qe)?_e-pt+Qe:Qe-pt+_e,_e=pt}_e+we>=0!=!!se&&te.reverse()}return $=1,N=function te(se,_e){var we,Ce=se&&se.type;if(Ce==="FeatureCollection")for(we=0;we<se.features.length;we++)te(se.features[we],_e);else if(Ce==="GeometryCollection")for(we=0;we<se.geometries.length;we++)te(se.geometries[we],_e);else if(Ce==="Feature")te(se.geometry,_e);else if(Ce==="Polygon")De(se.coordinates,_e);else if(Ce==="MultiPolygon")for(we=0;we<se.coordinates.length;we++)De(se.coordinates[we],_e);return se}})(),W=g.cQ(X);class oe extends g.cS{constructor(ee,te){super(new g.cM,0,te,[],[]),this.feature=ee,this.type=ee.type,this.properties=ee.tags?ee.tags:{},"id"in ee&&(typeof ee.id=="string"?this.id=parseInt(ee.id,10):typeof ee.id!="number"||isNaN(ee.id)||(this.id=ee.id))}loadGeometry(){const ee=[],te=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const se of te){const _e=[];for(const we of se)_e.push(new g.P(we[0],we[1]));ee.push(_e)}return ee}}class le extends g.cR{constructor(ee,te){super(new g.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=te?te.version:1,this.extent=te?te.extent:4096,this.length=ee.length,this.features=ee}feature(ee){return new oe(this.features[ee],this.extent)}}function ue(De,ee){ee.writeVarintField(15,De.version||1),ee.writeStringField(1,De.name||""),ee.writeVarintField(5,De.extent||4096);const te={keys:[],values:[],keycache:{},valuecache:{}};for(let we=0;we<De.length;we++)te.feature=De.feature(we),ee.writeMessage(2,Oe,te);const se=te.keys;for(const we of se)ee.writeStringField(3,we);const _e=te.values;for(const we of _e)ee.writeMessage(4,Mt,we)}function Oe(De,ee){if(!De.feature)return;const te=De.feature;te.id!==void 0&&ee.writeVarintField(1,te.id),ee.writeMessage(2,Be,De),ee.writeVarintField(3,te.type),ee.writeMessage(4,at,te)}function Be(De,ee){for(const te in De.feature?.properties){let se=De.feature.properties[te],_e=De.keycache[te];if(se===null)continue;_e===void 0&&(De.keys.push(te),_e=De.keys.length-1,De.keycache[te]=_e),ee.writeVarint(_e),typeof se!="string"&&typeof se!="boolean"&&typeof se!="number"&&(se=JSON.stringify(se));const we=typeof se+":"+se;let Ce=De.valuecache[we];Ce===void 0&&(De.values.push(se),Ce=De.values.length-1,De.valuecache[we]=Ce),ee.writeVarint(Ce)}}function Le(De,ee){return(ee<<3)+(7&De)}function qe(De){return De<<1^De>>31}function at(De,ee){const te=De.loadGeometry(),se=De.type;let _e=0,we=0;for(const Ce of te){let Ne=1;se===1&&(Ne=Ce.length),ee.writeVarint(Le(1,Ne));const ke=se===3?Ce.length-1:Ce.length;for(let Qe=0;Qe<ke;Qe++){Qe===1&&se!==1&&ee.writeVarint(Le(2,ke-1));const pt=Ce[Qe].x-_e,et=Ce[Qe].y-we;ee.writeVarint(qe(pt)),ee.writeVarint(qe(et)),_e+=pt,we+=et}De.type===3&&ee.writeVarint(Le(7,1))}}function Mt(De,ee){const te=typeof De;te==="string"?ee.writeStringField(1,De):te==="boolean"?ee.writeBooleanField(7,De):te==="number"&&(De%1!=0?ee.writeDoubleField(3,De):De<0?ee.writeSVarintField(6,De):ee.writeVarintField(5,De))}const Ot={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},ft=Math.fround||(gt=new Float32Array(1),De=>(gt[0]=+De,gt[0]));var gt;class Ft{constructor(ee){this.options=Object.assign(Object.create(Ot),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:te,minZoom:se,maxZoom:_e}=this.options;te&&console.time("total time");const we=`prepare ${ee.length} points`;te&&console.time(we),this.points=ee;const Ce=[];for(let ke=0;ke<ee.length;ke++){const Qe=ee[ke];if(!Qe.geometry)continue;const[pt,et]=Qe.geometry.coordinates,It=ft($e(pt)),Re=ft(ot(et));Ce.push(It,Re,1/0,ke,-1,1),this.options.reduce&&Ce.push(0)}let Ne=this.trees[_e+1]=this._createTree(Ce);te&&console.timeEnd(we);for(let ke=_e;ke>=se;ke--){const Qe=+Date.now();Ne=this.trees[ke]=this._createTree(this._cluster(Ne,ke)),te&&console.log("z%d: %d clusters in %dms",ke,Ne.numItems,+Date.now()-Qe)}return te&&console.timeEnd("total time"),this}getClusters(ee,te){let se=((ee[0]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,ee[1]));let we=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)se=-180,we=180;else if(se>we){const et=this.getClusters([se,_e,180,Ce],te),It=this.getClusters([-180,_e,we,Ce],te);return et.concat(It)}const Ne=this.trees[this._limitZoom(te)],ke=Ne.range($e(se),ot(Ce),$e(we),ot(_e)),Qe=Ne.data,pt=[];for(const et of ke){const It=this.stride*et;pt.push(Qe[It+5]>1?Ht(Qe,It,this.clusterProps):this.points[Qe[It+3]])}return pt}getChildren(ee){const te=this._getOriginId(ee),se=this._getOriginZoom(ee),_e="No cluster with the specified id.",we=this.trees[se];if(!we)throw new Error(_e);const Ce=we.data;if(te*this.stride>=Ce.length)throw new Error(_e);const Ne=this.options.radius/(this.options.extent*Math.pow(2,se-1)),ke=we.within(Ce[te*this.stride],Ce[te*this.stride+1],Ne),Qe=[];for(const pt of ke){const et=pt*this.stride;Ce[et+4]===ee&&Qe.push(Ce[et+5]>1?Ht(Ce,et,this.clusterProps):this.points[Ce[et+3]])}if(Qe.length===0)throw new Error(_e);return Qe}getLeaves(ee,te,se){const _e=[];return this._appendLeaves(_e,ee,te=te||10,se=se||0,0),_e}getTile(ee,te,se){const _e=this.trees[this._limitZoom(ee)],we=Math.pow(2,ee),{extent:Ce,radius:Ne}=this.options,ke=Ne/Ce,Qe=(se-ke)/we,pt=(se+1+ke)/we,et={features:[]};return this._addTileFeatures(_e.range((te-ke)/we,Qe,(te+1+ke)/we,pt),_e.data,te,se,we,et),te===0&&this._addTileFeatures(_e.range(1-ke/we,Qe,1,pt),_e.data,we,se,we,et),te===we-1&&this._addTileFeatures(_e.range(0,Qe,ke/we,pt),_e.data,-1,se,we,et),et.features.length?et:null}getClusterExpansionZoom(ee){let te=this._getOriginZoom(ee)-1;for(;te<=this.options.maxZoom;){const se=this.getChildren(ee);if(te++,se.length!==1)break;ee=se[0].properties.cluster_id}return te}_appendLeaves(ee,te,se,_e,we){const Ce=this.getChildren(te);for(const Ne of Ce){const ke=Ne.properties;if(ke&&ke.cluster?we+ke.point_count<=_e?we+=ke.point_count:we=this._appendLeaves(ee,ke.cluster_id,se,_e,we):we<_e?we++:ee.push(Ne),ee.length===se)break}return we}_createTree(ee){const te=new g.aI(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<ee.length;se+=this.stride)te.add(ee[se],ee[se+1]);return te.finish(),te.data=ee,te}_addTileFeatures(ee,te,se,_e,we,Ce){for(const Ne of ee){const ke=Ne*this.stride,Qe=te[ke+5]>1;let pt,et,It;if(Qe)pt=Kt(te,ke,this.clusterProps),et=te[ke],It=te[ke+1];else{const gr=this.points[te[ke+3]];pt=gr.properties;const[Lt,hr]=gr.geometry.coordinates;et=$e(Lt),It=ot(hr)}const Re={type:1,geometry:[[Math.round(this.options.extent*(et*we-se)),Math.round(this.options.extent*(It*we-_e))]],tags:pt};let Yt;Yt=Qe||this.options.generateId?te[ke+3]:this.points[te[ke+3]].id,Yt!==void 0&&(Re.id=Yt),Ce.features.push(Re)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,te){const{radius:se,extent:_e,reduce:we,minPoints:Ce}=this.options,Ne=se/(_e*Math.pow(2,te)),ke=ee.data,Qe=[],pt=this.stride;for(let et=0;et<ke.length;et+=pt){if(ke[et+2]<=te)continue;ke[et+2]=te;const It=ke[et],Re=ke[et+1],Yt=ee.within(ke[et],ke[et+1],Ne),gr=ke[et+5];let Lt=gr;for(const hr of Yt){const en=hr*pt;ke[en+2]>te&&(Lt+=ke[en+5])}if(Lt>gr&&Lt>=Ce){let hr,en=It*gr,An=Re*gr,Mn=-1;const ci=(et/pt<<5)+(te+1)+this.points.length;for(const ei of Yt){const tn=ei*pt;if(ke[tn+2]<=te)continue;ke[tn+2]=te;const Bn=ke[tn+5];en+=ke[tn]*Bn,An+=ke[tn+1]*Bn,ke[tn+4]=ci,we&&(hr||(hr=this._map(ke,et,!0),Mn=this.clusterProps.length,this.clusterProps.push(hr)),we(hr,this._map(ke,tn)))}ke[et+4]=ci,Qe.push(en/Lt,An/Lt,1/0,ci,-1,Lt),we&&Qe.push(Mn)}else{for(let hr=0;hr<pt;hr++)Qe.push(ke[et+hr]);if(Lt>1)for(const hr of Yt){const en=hr*pt;if(!(ke[en+2]<=te)){ke[en+2]=te;for(let An=0;An<pt;An++)Qe.push(ke[en+An])}}}}return Qe}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,te,se){if(ee[te+5]>1){const Ce=this.clusterProps[ee[te+6]];return se?Object.assign({},Ce):Ce}const _e=this.points[ee[te+3]].properties,we=this.options.map(_e);return se&&we===_e?Object.assign({},we):we}}function Ht(De,ee,te){return{type:"Feature",id:De[ee+3],properties:Kt(De,ee,te),geometry:{type:"Point",coordinates:[(se=De[ee],360*(se-.5)),Dt(De[ee+1])]}};var se}function Kt(De,ee,te){const se=De[ee+5],_e=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,we=De[ee+6],Ce=we===-1?{}:Object.assign({},te[we]);return Object.assign(Ce,{cluster:!0,cluster_id:De[ee+3],point_count:se,point_count_abbreviated:_e})}function $e(De){return De/360+.5}function ot(De){const ee=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return te<0?0:te>1?1:te}function Dt(De){const ee=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function bt(De,ee,te,se){let _e=se;const we=ee+(te-ee>>1);let Ce,Ne=te-ee;const ke=De[ee],Qe=De[ee+1],pt=De[te],et=De[te+1];for(let It=ee+3;It<te;It+=3){const Re=tr(De[It],De[It+1],ke,Qe,pt,et);if(Re>_e)Ce=It,_e=Re;else if(Re===_e){const Yt=Math.abs(It-we);Yt<Ne&&(Ce=It,Ne=Yt)}}_e>se&&(Ce-ee>3&&bt(De,ee,Ce,se),De[Ce+2]=_e,te-Ce>3&&bt(De,Ce,te,se))}function tr(De,ee,te,se,_e,we){let Ce=_e-te,Ne=we-se;if(Ce!==0||Ne!==0){const ke=((De-te)*Ce+(ee-se)*Ne)/(Ce*Ce+Ne*Ne);ke>1?(te=_e,se=we):ke>0&&(te+=Ce*ke,se+=Ne*ke)}return Ce=De-te,Ne=ee-se,Ce*Ce+Ne*Ne}function Ae(De,ee,te,se){const _e={id:De??null,type:ee,geometry:te,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ee==="Point"||ee==="MultiPoint"||ee==="LineString")Ve(_e,te);else if(ee==="Polygon")Ve(_e,te[0]);else if(ee==="MultiLineString")for(const we of te)Ve(_e,we);else if(ee==="MultiPolygon")for(const we of te)Ve(_e,we[0]);return _e}function Ve(De,ee){for(let te=0;te<ee.length;te+=3)De.minX=Math.min(De.minX,ee[te]),De.minY=Math.min(De.minY,ee[te+1]),De.maxX=Math.max(De.maxX,ee[te]),De.maxY=Math.max(De.maxY,ee[te+1])}function xt(De,ee,te,se){if(!ee.geometry)return;const _e=ee.geometry.coordinates;if(_e&&_e.length===0)return;const we=ee.geometry.type,Ce=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let Ne=[],ke=ee.id;if(te.promoteId?ke=ee.properties[te.promoteId]:te.generateId&&(ke=se||0),we==="Point")Pt(_e,Ne);else if(we==="MultiPoint")for(const Qe of _e)Pt(Qe,Ne);else if(we==="LineString")Rt(_e,Ne,Ce,!1);else if(we==="MultiLineString"){if(te.lineMetrics){for(const Qe of _e)Ne=[],Rt(Qe,Ne,Ce,!1),De.push(Ae(ke,"LineString",Ne,ee.properties));return}Gt(_e,Ne,Ce,!1)}else if(we==="Polygon")Gt(_e,Ne,Ce,!0);else{if(we!=="MultiPolygon"){if(we==="GeometryCollection"){for(const Qe of ee.geometry.geometries)xt(De,{id:ke,geometry:Qe,properties:ee.properties},te,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Qe of _e){const pt=[];Gt(Qe,pt,Ce,!0),Ne.push(pt)}}De.push(Ae(ke,we,Ne,ee.properties))}function Pt(De,ee){ee.push(or(De[0]),kr(De[1]),0)}function Rt(De,ee,te,se){let _e,we,Ce=0;for(let ke=0;ke<De.length;ke++){const Qe=or(De[ke][0]),pt=kr(De[ke][1]);ee.push(Qe,pt,0),ke>0&&(Ce+=se?(_e*pt-Qe*we)/2:Math.sqrt(Math.pow(Qe-_e,2)+Math.pow(pt-we,2))),_e=Qe,we=pt}const Ne=ee.length-3;ee[2]=1,bt(ee,0,Ne,te),ee[Ne+2]=1,ee.size=Math.abs(Ce),ee.start=0,ee.end=ee.size}function Gt(De,ee,te,se){for(let _e=0;_e<De.length;_e++){const we=[];Rt(De[_e],we,te,se),ee.push(we)}}function or(De){return De/360+.5}function kr(De){const ee=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return te<0?0:te>1?1:te}function vt(De,ee,te,se,_e,we,Ce,Ne){if(se/=ee,we>=(te/=ee)&&Ce<se)return De;if(Ce<te||we>=se)return null;const ke=[];for(const Qe of De){const pt=Qe.geometry;let et=Qe.type;const It=_e===0?Qe.minX:Qe.minY,Re=_e===0?Qe.maxX:Qe.maxY;if(It>=te&&Re<se){ke.push(Qe);continue}if(Re<te||It>=se)continue;let Yt=[];if(et==="Point"||et==="MultiPoint")Wt(pt,Yt,te,se,_e);else if(et==="LineString")ur(pt,Yt,te,se,_e,!1,Ne.lineMetrics);else if(et==="MultiLineString")_r(pt,Yt,te,se,_e,!1);else if(et==="Polygon")_r(pt,Yt,te,se,_e,!0);else if(et==="MultiPolygon")for(const gr of pt){const Lt=[];_r(gr,Lt,te,se,_e,!0),Lt.length&&Yt.push(Lt)}if(Yt.length){if(Ne.lineMetrics&&et==="LineString"){for(const gr of Yt)ke.push(Ae(Qe.id,et,gr,Qe.tags));continue}et!=="LineString"&&et!=="MultiLineString"||(Yt.length===1?(et="LineString",Yt=Yt[0]):et="MultiLineString"),et!=="Point"&&et!=="MultiPoint"||(et=Yt.length===3?"Point":"MultiPoint"),ke.push(Ae(Qe.id,et,Yt,Qe.tags))}}return ke.length?ke:null}function Wt(De,ee,te,se,_e){for(let we=0;we<De.length;we+=3){const Ce=De[we+_e];Ce>=te&&Ce<=se&&Qt(ee,De[we],De[we+1],De[we+2])}}function ur(De,ee,te,se,_e,we,Ce){let Ne=dt(De);const ke=_e===0?Jr:un;let Qe,pt,et=De.start;for(let Lt=0;Lt<De.length-3;Lt+=3){const hr=De[Lt],en=De[Lt+1],An=De[Lt+2],Mn=De[Lt+3],ci=De[Lt+4],ei=_e===0?hr:en,tn=_e===0?Mn:ci;let Bn=!1;Ce&&(Qe=Math.sqrt(Math.pow(hr-Mn,2)+Math.pow(en-ci,2))),ei<te?tn>te&&(pt=ke(Ne,hr,en,Mn,ci,te),Ce&&(Ne.start=et+Qe*pt)):ei>se?tn<se&&(pt=ke(Ne,hr,en,Mn,ci,se),Ce&&(Ne.start=et+Qe*pt)):Qt(Ne,hr,en,An),tn<te&&ei>=te&&(pt=ke(Ne,hr,en,Mn,ci,te),Bn=!0),tn>se&&ei<=se&&(pt=ke(Ne,hr,en,Mn,ci,se),Bn=!0),!we&&Bn&&(Ce&&(Ne.end=et+Qe*pt),ee.push(Ne),Ne=dt(De)),Ce&&(et+=Qe)}let It=De.length-3;const Re=De[It],Yt=De[It+1],gr=_e===0?Re:Yt;gr>=te&&gr<=se&&Qt(Ne,Re,Yt,De[It+2]),It=Ne.length-3,we&&It>=3&&(Ne[It]!==Ne[0]||Ne[It+1]!==Ne[1])&&Qt(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&ee.push(Ne)}function dt(De){const ee=[];return ee.size=De.size,ee.start=De.start,ee.end=De.end,ee}function _r(De,ee,te,se,_e,we){for(const Ce of De)ur(Ce,ee,te,se,_e,we,!1)}function Qt(De,ee,te,se){De.push(ee,te,se)}function Jr(De,ee,te,se,_e,we){const Ce=(we-ee)/(se-ee);return Qt(De,we,te+(_e-te)*Ce,1),Ce}function un(De,ee,te,se,_e,we){const Ce=(we-te)/(_e-te);return Qt(De,ee+(se-ee)*Ce,we,1),Ce}function qi(De,ee){const te=[];for(let se=0;se<De.length;se++){const _e=De[se],we=_e.type;let Ce;if(we==="Point"||we==="MultiPoint"||we==="LineString")Ce=na(_e.geometry,ee);else if(we==="MultiLineString"||we==="Polygon"){Ce=[];for(const Ne of _e.geometry)Ce.push(na(Ne,ee))}else if(we==="MultiPolygon"){Ce=[];for(const Ne of _e.geometry){const ke=[];for(const Qe of Ne)ke.push(na(Qe,ee));Ce.push(ke)}}te.push(Ae(_e.id,we,Ce,_e.tags))}return te}function na(De,ee){const te=[];te.size=De.size,De.start!==void 0&&(te.start=De.start,te.end=De.end);for(let se=0;se<De.length;se+=3)te.push(De[se]+ee,De[se+1],De[se+2]);return te}function ja(De,ee){if(De.transformed)return De;const te=1<<De.z,se=De.x,_e=De.y;for(const we of De.features){const Ce=we.geometry,Ne=we.type;if(we.geometry=[],Ne===1)for(let ke=0;ke<Ce.length;ke+=2)we.geometry.push(ks(Ce[ke],Ce[ke+1],ee,te,se,_e));else for(let ke=0;ke<Ce.length;ke++){const Qe=[];for(let pt=0;pt<Ce[ke].length;pt+=2)Qe.push(ks(Ce[ke][pt],Ce[ke][pt+1],ee,te,se,_e));we.geometry.push(Qe)}}return De.transformed=!0,De}function ks(De,ee,te,se,_e,we){return[Math.round(te*(De*se-_e)),Math.round(te*(ee*se-we))]}function mo(De,ee,te,se,_e){const we=ee===_e.maxZoom?0:_e.tolerance/((1<<ee)*_e.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:De.length,source:null,x:te,y:se,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ne of De)Bs(Ce,Ne,we,_e);return Ce}function Bs(De,ee,te,se){const _e=ee.geometry,we=ee.type,Ce=[];if(De.minX=Math.min(De.minX,ee.minX),De.minY=Math.min(De.minY,ee.minY),De.maxX=Math.max(De.maxX,ee.maxX),De.maxY=Math.max(De.maxY,ee.maxY),we==="Point"||we==="MultiPoint")for(let Ne=0;Ne<_e.length;Ne+=3)Ce.push(_e[Ne],_e[Ne+1]),De.numPoints++,De.numSimplified++;else if(we==="LineString")Ls(Ce,_e,De,te,!1,!1);else if(we==="MultiLineString"||we==="Polygon")for(let Ne=0;Ne<_e.length;Ne++)Ls(Ce,_e[Ne],De,te,we==="Polygon",Ne===0);else if(we==="MultiPolygon")for(let Ne=0;Ne<_e.length;Ne++){const ke=_e[Ne];for(let Qe=0;Qe<ke.length;Qe++)Ls(Ce,ke[Qe],De,te,!0,Qe===0)}if(Ce.length){let Ne=ee.tags||null;if(we==="LineString"&&se.lineMetrics){Ne={};for(const Qe in ee.tags)Ne[Qe]=ee.tags[Qe];Ne.mapbox_clip_start=_e.start/_e.size,Ne.mapbox_clip_end=_e.end/_e.size}const ke={geometry:Ce,type:we==="Polygon"||we==="MultiPolygon"?3:we==="LineString"||we==="MultiLineString"?2:1,tags:Ne};ee.id!==null&&(ke.id=ee.id),De.features.push(ke)}}function Ls(De,ee,te,se,_e,we){const Ce=se*se;if(se>0&&ee.size<(_e?Ce:se))return void(te.numPoints+=ee.length/3);const Ne=[];for(let ke=0;ke<ee.length;ke+=3)(se===0||ee[ke+2]>Ce)&&(te.numSimplified++,Ne.push(ee[ke],ee[ke+1])),te.numPoints++;_e&&(function(ke,Qe){let pt=0;for(let et=0,It=ke.length,Re=It-2;et<It;Re=et,et+=2)pt+=(ke[et]-ke[Re])*(ke[et+1]+ke[Re+1]);if(pt>0===Qe)for(let et=0,It=ke.length;et<It/2;et+=2){const Re=ke[et],Yt=ke[et+1];ke[et]=ke[It-2-et],ke[et+1]=ke[It-1-et],ke[It-2-et]=Re,ke[It-1-et]=Yt}})(Ne,we),De.push(Ne)}const li={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class js{constructor(ee,te){const se=(te=this.options=(function(we,Ce){for(const Ne in Ce)we[Ne]=Ce[Ne];return we})(Object.create(li),te)).debug;if(se&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=(function(we,Ce){const Ne=[];if(we.type==="FeatureCollection")for(let ke=0;ke<we.features.length;ke++)xt(Ne,we.features[ke],Ce,ke);else xt(Ne,we.type==="Feature"?we:{geometry:we},Ce);return Ne})(ee,te);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=(function(we,Ce){const Ne=Ce.buffer/Ce.extent;let ke=we;const Qe=vt(we,1,-1-Ne,Ne,0,-1,2,Ce),pt=vt(we,1,1-Ne,2+Ne,0,-1,2,Ce);return(Qe||pt)&&(ke=vt(we,1,-Ne,1+Ne,0,-1,2,Ce)||[],Qe&&(ke=qi(Qe,1).concat(ke)),pt&&(ke=ke.concat(qi(pt,-1)))),ke})(_e,te),_e.length&&this.splitTile(_e,0,0,0),se&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,te,se,_e,we,Ce,Ne){const ke=[ee,te,se,_e],Qe=this.options,pt=Qe.debug;for(;ke.length;){_e=ke.pop(),se=ke.pop(),te=ke.pop(),ee=ke.pop();const et=1<<te,It=Ko(te,se,_e);let Re=this.tiles[It];if(!Re&&(pt>1&&console.time("creation"),Re=this.tiles[It]=mo(ee,te,se,_e,Qe),this.tileCoords.push({z:te,x:se,y:_e}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,se,_e,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));const Bn=`z${te}`;this.stats[Bn]=(this.stats[Bn]||0)+1,this.total++}if(Re.source=ee,we==null){if(te===Qe.indexMaxZoom||Re.numPoints<=Qe.indexMaxPoints)continue}else{if(te===Qe.maxZoom||te===we)continue;if(we!=null){const Bn=we-te;if(se!==Ce>>Bn||_e!==Ne>>Bn)continue}}if(Re.source=null,ee.length===0)continue;pt>1&&console.time("clipping");const Yt=.5*Qe.buffer/Qe.extent,gr=.5-Yt,Lt=.5+Yt,hr=1+Yt;let en=null,An=null,Mn=null,ci=null,ei=vt(ee,et,se-Yt,se+Lt,0,Re.minX,Re.maxX,Qe),tn=vt(ee,et,se+gr,se+hr,0,Re.minX,Re.maxX,Qe);ee=null,ei&&(en=vt(ei,et,_e-Yt,_e+Lt,1,Re.minY,Re.maxY,Qe),An=vt(ei,et,_e+gr,_e+hr,1,Re.minY,Re.maxY,Qe),ei=null),tn&&(Mn=vt(tn,et,_e-Yt,_e+Lt,1,Re.minY,Re.maxY,Qe),ci=vt(tn,et,_e+gr,_e+hr,1,Re.minY,Re.maxY,Qe),tn=null),pt>1&&console.timeEnd("clipping"),ke.push(en||[],te+1,2*se,2*_e),ke.push(An||[],te+1,2*se,2*_e+1),ke.push(Mn||[],te+1,2*se+1,2*_e),ke.push(ci||[],te+1,2*se+1,2*_e+1)}}getTile(ee,te,se){ee=+ee,te=+te,se=+se;const _e=this.options,{extent:we,debug:Ce}=_e;if(ee<0||ee>24)return null;const Ne=1<<ee,ke=Ko(ee,te=te+Ne&Ne-1,se);if(this.tiles[ke])return ja(this.tiles[ke],we);Ce>1&&console.log("drilling down to z%d-%d-%d",ee,te,se);let Qe,pt=ee,et=te,It=se;for(;!Qe&&pt>0;)pt--,et>>=1,It>>=1,Qe=this.tiles[Ko(pt,et,It)];return Qe&&Qe.source?(Ce>1&&(console.log("found parent tile z%d-%d-%d",pt,et,It),console.time("drilling down")),this.splitTile(Qe.source,pt,et,It,ee,te,se),Ce>1&&console.timeEnd("drilling down"),this.tiles[ke]?ja(this.tiles[ke],we):null):null}}function Ko(De,ee,te){return 32*((1<<De)*te+ee)+De}class Wo extends z{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ee,te){return g._(this,void 0,void 0,(function*(){const se=ee.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const _e=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!_e)return null;const we=new le(_e.features,{version:2,extent:g.$});let Ce=(function(Ne){const ke=new g.cM;return(function(Qe,pt){for(const et in Qe.layers)pt.writeMessage(3,ue,Qe.layers[et])})(Ne,ke),ke.finish()})(we);return Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),{vectorTile:we,rawData:Ce.buffer}}))}loadData(ee){return g._(this,void 0,void 0,(function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const se=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new g.cN(ee.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest);const _e=yield this._pendingData;this._geoJSONIndex=ee.cluster?new Ft((function({superclusterOptions:Ce,clusterProperties:Ne}){if(!Ne||!Ce)return Ce;const ke={},Qe={},pt={accumulated:null,zoom:0},et={properties:null},It=Object.keys(Ne);for(const Re of It){const[Yt,gr]=Ne[Re],Lt=g.cT(gr),hr=g.cT(typeof Yt=="string"?[Yt,["accumulated"],["get",Re]]:Yt);ke[Re]=Lt.value,Qe[Re]=hr.value}return Ce.map=Re=>{et.properties=Re;const Yt={};for(const gr of It)Yt[gr]=ke[gr].evaluate(pt,et);return Yt},Ce.reduce=(Re,Yt)=>{et.properties=Yt;for(const gr of It)pt.accumulated=Re[gr],Re[gr]=Qe[gr].evaluate(pt,et)},Ce})(ee)).load(_e.features):(function(Ce,Ne){return new js(Ce,Ne)})(_e,ee.geojsonVtOptions),this.loaded={};const we={data:_e};if(se){const Ce=se.finish();Ce&&(we.resourceTiming={},we.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ce)))}return we}catch(_e){if(delete this._pendingRequest,g.cy(_e))return{abandoned:!0};throw _e}}))}getData(){return g._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){const te=this.loaded;return te&&te[ee.uid]?super.reloadTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,te){return g._(this,void 0,void 0,(function*(){let se=yield this.loadGeoJSON(ee,te);if(delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(W(se,!0),ee.filter){const _e=g.cT(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map((Ce=>`${Ce.key}: ${Ce.message}`)).join(", "));se={type:"FeatureCollection",features:se.features.filter((Ce=>_e.value.evaluate({zoom:0},Ce)))}}return se}))}loadGeoJSON(ee,te){return g._(this,void 0,void 0,(function*(){const{promoteId:se}=ee;if(ee.request){const _e=yield g.j(ee.request,te);return this._dataUpdateable=g.cV(_e.data,se)?g.cU(_e.data,se):void 0,_e.data}if(typeof ee.data=="string")try{const _e=JSON.parse(ee.data);return this._dataUpdateable=g.cV(_e,se)?g.cU(_e,se):void 0,_e}catch{throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`)}if(!ee.dataDiff)throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ee.source}`);return g.cW(this._dataUpdateable,ee.dataDiff,se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ee){return g._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}class Qo{constructor(ee){this.self=ee,this.actor=new g.J(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(te,se)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=se},this.self.addProtocol=g.cA,this.self.removeProtocol=g.cB,this.self.registerRTLTextPlugin=te=>{g.cX.setMethods(te)},this.actor.registerMessageHandler("LDT",((te,se)=>this._getDEMWorkerSource(te,se.source).loadTile(se))),this.actor.registerMessageHandler("RDT",((te,se)=>g._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(te,se.source).removeTile(se)})))),this.actor.registerMessageHandler("GCEZ",((te,se)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,se.type,se.source).getClusterExpansionZoom(se)})))),this.actor.registerMessageHandler("GCC",((te,se)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,se.type,se.source).getClusterChildren(se)})))),this.actor.registerMessageHandler("GCL",((te,se)=>g._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,se.type,se.source).getClusterLeaves(se)})))),this.actor.registerMessageHandler("LD",((te,se)=>this._getWorkerSource(te,se.type,se.source).loadData(se))),this.actor.registerMessageHandler("GD",((te,se)=>this._getWorkerSource(te,se.type,se.source).getData())),this.actor.registerMessageHandler("LT",((te,se)=>this._getWorkerSource(te,se.type,se.source).loadTile(se))),this.actor.registerMessageHandler("RT",((te,se)=>this._getWorkerSource(te,se.type,se.source).reloadTile(se))),this.actor.registerMessageHandler("AT",((te,se)=>this._getWorkerSource(te,se.type,se.source).abortTile(se))),this.actor.registerMessageHandler("RMT",((te,se)=>this._getWorkerSource(te,se.type,se.source).removeTile(se))),this.actor.registerMessageHandler("RS",((te,se)=>g._(this,void 0,void 0,(function*(){if(!this.workerSources[te]||!this.workerSources[te][se.type]||!this.workerSources[te][se.type][se.source])return;const _e=this.workerSources[te][se.type][se.source];delete this.workerSources[te][se.type][se.source],_e.removeSource!==void 0&&_e.removeSource(se)})))),this.actor.registerMessageHandler("RM",(te=>g._(this,void 0,void 0,(function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te],this.globalStates.delete(te)})))),this.actor.registerMessageHandler("SR",((te,se)=>g._(this,void 0,void 0,(function*(){this.referrer=se})))),this.actor.registerMessageHandler("SRPS",((te,se)=>this._syncRTLPluginState(te,se))),this.actor.registerMessageHandler("IS",((te,se)=>g._(this,void 0,void 0,(function*(){this.self.importScripts(se)})))),this.actor.registerMessageHandler("SI",((te,se)=>this._setImages(te,se))),this.actor.registerMessageHandler("UL",((te,se)=>g._(this,void 0,void 0,(function*(){this._getLayerIndex(te).update(se.layers,se.removedIds,this._getGlobalState(te))})))),this.actor.registerMessageHandler("UGS",((te,se)=>g._(this,void 0,void 0,(function*(){const _e=this._getGlobalState(te);for(const we in se)_e[we]=se[we]})))),this.actor.registerMessageHandler("SL",((te,se)=>g._(this,void 0,void 0,(function*(){this._getLayerIndex(te).replace(se,this._getGlobalState(te))}))))}_getGlobalState(ee){let te=this.globalStates.get(ee);return te||(te={},this.globalStates.set(ee,te)),te}_setImages(ee,te){return g._(this,void 0,void 0,(function*(){this.availableImages[ee]=te;for(const se in this.workerSources[ee]){const _e=this.workerSources[ee][se];for(const we in _e)_e[we].availableImages=te}}))}_syncRTLPluginState(ee,te){return g._(this,void 0,void 0,(function*(){return yield g.cX.syncState(te,this.self.importScripts)}))}_getAvailableImages(ee){let te=this.availableImages[ee];return te||(te=[]),te}_getLayerIndex(ee){let te=this.layerIndexes[ee];return te||(te=this.layerIndexes[ee]=new u),te}_getWorkerSource(ee,te,se){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][te]||(this.workerSources[ee][te]={}),!this.workerSources[ee][te][se]){const _e={sendAsync:(we,Ce)=>(we.targetMapId=ee,this.actor.sendAsync(we,Ce))};switch(te){case"vector":this.workerSources[ee][te][se]=new z(_e,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][te][se]=new Wo(_e,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][te][se]=new this.externalWorkerSourceTypes[te](_e,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][te][se]}_getDEMWorkerSource(ee,te){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][te]||(this.demWorkerSources[ee][te]=new j),this.demWorkerSources[ee][te]}}return g.i(self)&&(self.worker=new Qo(self)),Qo})),d("index",["exports","./shared"],(function(g,u){var E="5.8.0";function P(){var w=new u.A(4);return u.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let C,z;const j={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,r,c){const p=requestAnimationFrame((S=>{_(),r(S)})),{unsubscribe:_}=u.s(w.signal,"abort",(()=>{_(),cancelAnimationFrame(p),c(u.c())}),!1)},frameAsync(w){return new Promise(((r,c)=>{this.frame(w,r,c)}))},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(C||(C=document.createElement("a")),C.href=w,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}};class N{static testProp(r){if(!N.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in N.docStyle)return r[c];return r[0]}static create(r,c,p){const _=window.document.createElement(r);return c!==void 0&&(_.className=c),p&&p.appendChild(_),_}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(r,c){r.style[N.transformProp]=c}static addEventListener(r,c,p,_={}){r.addEventListener(c,p,"passive"in _?_:_.capture)}static removeEventListener(r,c,p,_={}){r.removeEventListener(c,p,"passive"in _?_:_.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",N.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,p){const _=c.boundingClientRect;return new u.P((p.clientX-_.left)/c.x-r.clientLeft,(p.clientY-_.top)/c.y-r.clientTop)}static mousePos(r,c){const p=N.getScale(r);return N.getPoint(r,p,c)}static touchPos(r,c){const p=[],_=N.getScale(r);for(let S=0;S<c.length;S++)p.push(N.getPoint(r,_,c[S]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=c.querySelectorAll("script");for(const _ of p)_.remove();return N.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const p=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const p of c)N.removeAttributes(p),N.clean(p)}static removeAttributes(r){for(const{name:c,value:p}of r.attributes)N.isPossiblyDangerous(c,p)&&r.removeAttribute(c)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(w){!oe&&W&&(le?ue(w):X=w)}};let X,W,oe=!1,le=!1;function ue(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,W),w.isContextLost())return;$.supported=!0}catch{}w.deleteTexture(r),oe=!0}var Oe;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{X&&ue(X),X=null,le=!0},W.onerror=()=>{oe=!0,X=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let r,c,p,_;w.resetRequestQueue=()=>{r=[],c=0,p=0,_={}},w.addThrottleControl=R=>{const U=p++;return _[U]=R,U},w.removeThrottleControl=R=>{delete _[R],A()},w.getImage=(R,U,G=!0)=>new Promise(((Z,q)=>{$.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),u.e(R,{type:"image"}),r.push({abortController:U,requestParameters:R,supportImageRefresh:G,state:"queued",onError:K=>{q(K)},onSuccess:K=>{Z(K)}}),A()}));const S=R=>u._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:U,supportImageRefresh:G,onError:Z,onSuccess:q,abortController:K}=R,re=G===!1&&!u.i(self)&&!u.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((de,pe)=>de&&pe==="accept"),!0));c++;const he=re?O(U,K):u.m(U,K);try{const de=yield he;delete R.abortController,R.state="completed",de.data instanceof HTMLImageElement||u.b(de.data)?q(de):de.data&&q({data:yield(fe=de.data,typeof createImageBitmap=="function"?u.f(fe):u.h(fe)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete R.abortController,Z(de)}finally{c--,A()}var fe})),A=()=>{const R=(()=>{for(const U of Object.keys(_))if(_[U]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<R&&r.length>0;U++){const G=r.shift();G.abortController.signal.aborted?U--:S(G)}},O=(R,U)=>new Promise(((G,Z)=>{const q=new Image,K=R.url,re=R.credentials;re&&re==="include"?q.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.d(K))&&(q.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{q.src="",Z(u.c())})),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,G({data:q})},q.onerror=()=>{q.onerror=q.onload=null,U.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=K}))})(Oe||(Oe={})),Oe.resetRequestQueue();class Be{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Le(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:p,url:_}of w){const S=`${p}${_}`;c.indexOf(S)===-1&&(c.push(S),r.push({id:p,url:_}))}}return r}function qe(w,r,c){try{const p=new URL(w);return p.pathname+=`${r}${c}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function at(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class Mt extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let p=!0;const _=c.data||c.spriteData;return this._validateStretch(c.stretchX,_&&_.width)||(this.fire(new u.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,_&&_.height)||(this.fire(new u.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,c){if(!r)return!0;let p=0;for(const _ of r){if(_[0]<p||_[1]<_[0]||c<_[1])return!1;p=_[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const p=c.spriteData,_=p&&p.width||c.data.width,S=p&&p.height||c.data.height;return!(r[0]<0||_<r[0]||r[1]<0||S<r[1]||r[2]<0||_<r[2]||r[3]<0||S<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,p=!0){const _=this.getImage(r);if(p&&(_.data.width!==c.data.width||_.data.height!==c.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=_.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,p)=>{let _=!0;if(!this.isLoaded())for(const S of r)this.images[S]||(_=!1);this.isLoaded()||_?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const p of r){let _=this.getImage(p);_||(this.fire(new u.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?c[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],p=this.getImage(r);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},S=new u.I(_,p);this.patterns[r]={bin:_,position:S}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const S in this.patterns)r.push(this.patterns[S].bin);const{w:c,h:p}=u.p(r),_=this.atlasImage;_.resize({width:c||1,height:p||1});for(const S in this.patterns){const{bin:A}=this.patterns[S],O=A.x+1,R=A.y+1,U=this.getImage(S).data,G=U.width,Z=U.height;u.R.copy(U,_,{x:0,y:0},{x:O,y:R},{width:G,height:Z}),u.R.copy(U,_,{x:0,y:Z-1},{x:O,y:R-1},{width:G,height:1}),u.R.copy(U,_,{x:0,y:0},{x:O,y:R+Z},{width:G,height:1}),u.R.copy(U,_,{x:G-1,y:0},{x:O-1,y:R},{width:1,height:Z}),u.R.copy(U,_,{x:0,y:0},{x:O+G,y:R},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),at(p)&&this.updateImage(c,p)}}}const Ot=1e20;function ft(w,r,c,p,_,S,A,O,R){for(let U=r;U<r+p;U++)gt(w,c*S+U,S,_,A,O,R);for(let U=c;U<c+_;U++)gt(w,U*S+r,1,p,A,O,R)}function gt(w,r,c,p,_,S,A){S[0]=0,A[0]=-Ot,A[1]=Ot,_[0]=w[r];for(let O=1,R=0,U=0;O<p;O++){_[O]=w[r+O*c];const G=O*O;do{const Z=S[R];U=(_[O]-_[Z]+G-Z*Z)/(O-Z)/2}while(U<=A[R]&&--R>-1);R++,S[R]=O,A[R]=U,A[R+1]=Ot}for(let O=0,R=0;O<p;O++){for(;A[R+1]<O;)R++;const U=S[R],G=O-U;w[r+O*c]=_[U]+G*G}}class Ft{constructor(r,c,p){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=p}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,(function*(){const c=[];for(const S in r)for(const A of r[S])c.push(this._getAndCacheGlyphsPromise(S,A));const p=yield Promise.all(c),_={};for(const{stack:S,id:A,glyph:O}of p)_[S]||(_[S]={}),_[S][A]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return _}))}_getAndCacheGlyphsPromise(r,c){return u._(this,void 0,void 0,(function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[c];if(_!==void 0)return{stack:r,id:c,glyph:_};if(_=this._tinySDF(p,r,c),_)return p.glyphs[c]=_,{stack:r,id:c,glyph:_};const S=Math.floor(c/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[S])return{stack:r,id:c,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[S]){const O=Ft.loadGlyphRange(r,S,this.url,this.requestManager);p.requests[S]=O}const A=yield p.requests[S];for(const O in A)this._doesCharSupportLocalGlyph(+O)||(p.glyphs[+O]=A[+O]);return p.ranges[S]=!0,{stack:r,id:c,glyph:A[c]||null}}))}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r)||u.u["CJK Symbols and Punctuation"](r)||u.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let S=r.tinySDF;if(!S){let O="400";/bold/i.test(c)?O="900":/medium/i.test(c)?O="500":/light/i.test(c)&&(O="200"),S=r.tinySDF=new Ft.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:O})}const A=S.draw(String.fromCharCode(p));return{id:p,bitmap:new u.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ft.loadGlyphRange=function(w,r,c,p){return u._(this,void 0,void 0,(function*(){const _=256*r,S=_+255,A=p.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${_}-${S}`),"Glyphs"),O=yield u.n(A,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${r}, ${_}-${S}`);const R={};for(const U of u.o(O.data))R[U.id]=U;return R}))},Ft.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:S="normal",fontStyle:A="normal",lang:O=null}={}){this.buffer=r,this.cutoff=p,this.radius=c,this.lang=O;const R=this.size=w+4*r,U=this._createCanvas(R),G=this.ctx=U.getContext("2d",{willReadFrequently:!0});G.font=`${A} ${S} ${w}px ${_}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:S}=this.ctx.measureText(w),A=Math.ceil(c),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-_))),R=Math.min(this.size-this.buffer,A+Math.ceil(p)),U=O+2*this.buffer,G=R+2*this.buffer,Z=Math.max(U*G,0),q=new Uint8ClampedArray(Z),K={data:q,width:U,height:G,glyphWidth:O,glyphHeight:R,glyphTop:A,glyphLeft:0,glyphAdvance:r};if(O===0||R===0)return K;const{ctx:re,buffer:he,gridInner:fe,gridOuter:de}=this;this.lang&&(re.lang=this.lang),re.clearRect(he,he,O,R),re.fillText(w,he,he+A);const pe=re.getImageData(he,he,O,R);de.fill(Ot,0,Z),fe.fill(0,0,Z);for(let ye=0;ye<R;ye++)for(let ge=0;ge<O;ge++){const xe=pe.data[4*(ye*O+ge)+3]/255;if(xe===0)continue;const Me=(ye+he)*U+ge+he;if(xe===1)de[Me]=0,fe[Me]=Ot;else{const ve=.5-xe;de[Me]=ve>0?ve*ve:0,fe[Me]=ve<0?ve*ve:0}}ft(de,0,0,U,G,U,this.f,this.v,this.z),ft(fe,he,he,O,R,U,this.f,this.v,this.z);for(let ye=0;ye<Z;ye++){const ge=Math.sqrt(de[ye])-Math.sqrt(fe[ye]);q[ye]=Math.round(255-255*(ge/this.radius+this.cutoff))}return K}};class Ht{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,c){return u.B(r.expression.evaluate(c))}interpolate(r,c,p){return{x:u.C.number(r.x,c.x,p),y:u.C.number(r.y,c.y,p),z:u.C.number(r.z,c.z,p)}}}let Kt;class $e extends u.E{constructor(r){super(),Kt=Kt||new u.r({anchor:new u.D(u.v.light.anchor),position:new Ht,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.t(Kt,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(u.x,r,c))for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p){return(!p||p.validate!==!1)&&u.y(this,r.call(u.z,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const ot=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Dt extends u.E{constructor(r){super(),this._transitionable=new u.t(ot,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.F(0))}setSky(r,c={}){if(!this._validate(u.G,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const _=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p={}){return p?.validate!==!1&&u.y(this,r.call(u.z,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class bt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const p=r.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,c)),this.dashEntry[p]}getDashRanges(r,c,p){const _=[];let S=r.length%2==1?-r[r.length-1]*p:0,A=r[0]*p,O=!0;_.push({left:S,right:A,isDash:O,zeroLength:r[0]===0});let R=r[0];for(let U=1;U<r.length;U++){O=!O;const G=r[U];S=R*p,R+=G,A=R*p,_.push({left:S,right:A,isDash:O,zeroLength:G===0})}return _}addRoundDash(r,c,p){const _=c/2;for(let S=-p;S<=p;S++){const A=this.width*(this.nextRow+p+S);let O=0,R=r[O];for(let U=0;U<this.width;U++){U/R.right>1&&(R=r[++O]);const G=Math.abs(U-R.left),Z=Math.abs(U-R.right),q=Math.min(G,Z);let K;const re=S/p*(_+1);if(R.isDash){const he=_-Math.abs(re);K=Math.sqrt(q*q+he*he)}else K=_-Math.sqrt(q*q+re*re);this.data[A+U]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let O=r.length-1;O>=0;--O){const R=r[O],U=r[O+1];R.zeroLength?r.splice(O,1):U&&U.isDash===R.isDash&&(U.left=R.left,r.splice(O,1))}const c=r[0],p=r[r.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const _=this.width*this.nextRow;let S=0,A=r[S];for(let O=0;O<this.width;O++){O/A.right>1&&(A=r[++S]);const R=Math.abs(O-A.left),U=Math.abs(O-A.right),G=Math.min(R,U);this.data[_+O]=Math.max(0,Math.min(255,(A.isDash?G:-G)+128))}}addDash(r,c){const p=c?7:0,_=2*p+1;if(this.nextRow+_>this.height)return u.w("LineAtlas out of space"),null;let S=0;for(let O=0;O<r.length;O++)S+=r[O];if(S!==0){const O=this.width/S,R=this.getDashRanges(r,this.width,O);c?this.addRoundDash(R,O,p):this.addRegularDash(R)}const A={y:this.nextRow+p,height:2*p,width:S};return this.nextRow+=_,this.dirty=!0,A}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const tr="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[tr]}numActive(){return Object.keys(this.active).length}}const Ve=Math.floor(j.hardwareConcurrency/2);let xt,Pt;function Rt(){return xt||(xt=new Ae),xt}Ae.workerCount=u.H(globalThis)?Math.max(Math.min(Ve,3),1):1;class Gt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let _=0;_<p.length;_++){const S=new u.J(p[_],c);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:r,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const p of this.actors)p.registerMessageHandler(r,c)}}function or(){return Pt||(Pt=new Gt(Rt(),u.K),Pt.registerMessageHandler("GR",((w,r,c)=>u.m(r,c)))),Pt}function kr(w,r){const c=u.L();return u.M(c,c,[1,1,0]),u.N(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?u.O(c,c,w.calculatePosMatrix(r.toUnwrapped())):c}function vt(w,r,c,p,_,S,A){var O;const R=(function(q,K,re){if(q)for(const he of q){const fe=K[he];if(fe&&fe.source===re&&fe.type==="fill-extrusion")return!0}else for(const he in K){const fe=K[he];if(fe.source===re&&fe.type==="fill-extrusion")return!0}return!1})((O=_?.layers)!==null&&O!==void 0?O:null,r,w.id),U=S.maxPitchScaleFactor(),G=w.tilesIn(p,U,R);G.sort(Wt);const Z=[];for(const q of G)Z.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,c,w._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,_,S,U,kr(w.transform,q.tileID),A?(K,re)=>A(q.tileID,K,re):void 0)});return(function(q,K){for(const re in q)for(const he of q[re])ur(he,K);return q})((function(q){const K={},re={};for(const he of q){const fe=he.queryResults,de=he.wrappedTileID,pe=re[de]=re[de]||{};for(const ye in fe){const ge=fe[ye],xe=pe[ye]=pe[ye]||{},Me=K[ye]=K[ye]||[];for(const ve of ge)xe[ve.featureIndex]||(xe[ve.featureIndex]=!0,Me.push(ve))}}return K})(Z),w)}function Wt(w,r){const c=w.tileID,p=r.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function ur(w,r){const c=w.feature,p=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=p}function dt(w,r,c){return u._(this,void 0,void 0,(function*(){let p=w;if(w.url?p=(yield u.j(r.transformRequest(w.url,"Source"),c)).data:yield j.frameAsync(c),!p)return null;const _=u.Q(u.e(p,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(_.vectorLayerIds=p.vector_layers.map((S=>S.id))),_}))}class _r{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.S?new u.S(r.lng,r.lat):u.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.S?new u.S(r.lng,r.lat):u.S.convert(r),this}extend(r){const c=this._sw,p=this._ne;let _,S;if(r instanceof u.S)_=r,S=r;else{if(!(r instanceof _r))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(_r.convert(r)):this.extend(u.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.S.convert(r)):this;if(_=r._sw,S=r._ne,!_||!S)return this}return c||p?(c.lng=Math.min(_.lng,c.lng),c.lat=Math.min(_.lat,c.lat),p.lng=Math.max(S.lng,p.lng),p.lat=Math.max(S.lat,p.lat)):(this._sw=new u.S(_.lng,_.lat),this._ne=new u.S(S.lng,S.lat)),this}getCenter(){return new u.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.S(this.getWest(),this.getNorth())}getSouthEast(){return new u.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:p}=u.S.convert(r);let _=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(r){return r instanceof _r?r:r&&new _r(r)}static fromLngLat(r,c=0){const p=360*c/40075017,_=p/Math.cos(Math.PI/180*r.lat);return new _r(new u.S(r.lng-_,r.lat-p),new u.S(r.lng+_,r.lat+p))}adjustAntiMeridian(){const r=new u.S(this._sw.lng,this._sw.lat),c=new u.S(this._ne.lng,this._ne.lat);return new _r(r,r.lng>c.lng?new u.S(c.lng+360,c.lat):c)}}class Qt{constructor(r,c,p){this.bounds=_r.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),p=Math.floor(u.V(this.bounds.getWest())*c),_=Math.floor(u.U(this.bounds.getNorth())*c),S=Math.ceil(u.V(this.bounds.getEast())*c),A=Math.ceil(u.U(this.bounds.getSouth())*c);return r.x>=p&&r.x<S&&r.y>=_&&r.y<A}}class Jr extends u.E{constructor(r,c,p,_){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.Q(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new Qt(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new u.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((S,A)=>{r.reloadPromise={resolve:S,reject:A}}))}else r.actor=this.dispatcher.getActor(),_="LT";r.abortController=new AbortController;try{const S=yield r.actor.sendAsync({type:_,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,S)}catch(S){if(delete r.abortController,r.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(r,null)}}))}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return u._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return u._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class un extends u.E{constructor(r,c,p,_){super(),this.id=r,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.Q(c,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(u.e(this,c),c.bounds&&(this.tileBounds=new Qt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,this.fire(new u.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield Oe.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,S=_.gl,A=p.data;r.texture=this.map.painter.getTileTexture(A.width),r.texture?r.texture.update(A,{useMipmap:!0}):(r.texture=new u.T(_,A,S.RGBA,{useMipmap:!0}),r.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}}))}abortTile(r){return u._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return u._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class qi extends un{constructor(r,c,p,_){super(r,c,p,_),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return u._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const _=yield Oe.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(_&&_.data){const S=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&r.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const A=u.b(S)&&u.W()?S:yield this.readImageNow(S),O={type:this.type,uid:r.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:O});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(_){if(delete r.abortController,r.aborted)r.state="unloaded";else if(_)throw r.state="errored",_}}))}readImageNow(r){return u._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&u.X()){const c=r.width+2,p=r.height+2;try{return new u.R({width:c,height:p},yield u.Y(r,-1,-1,c,p))}catch{}}return j.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,p=Math.pow(2,c.z),_=(c.x-1+p)%p,S=c.x===0?r.wrap-1:r.wrap,A=(c.x+1+p)%p,O=c.x+1===p?r.wrap+1:r.wrap,R={};return R[new u.Z(r.overscaledZ,S,c.z,_,c.y).key]={backfilled:!1},R[new u.Z(r.overscaledZ,O,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(R[new u.Z(r.overscaledZ,S,c.z,_,c.y-1).key]={backfilled:!1},R[new u.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new u.Z(r.overscaledZ,O,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<p&&(R[new u.Z(r.overscaledZ,S,c.z,_,c.y+1).key]={backfilled:!1},R[new u.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new u.Z(r.overscaledZ,O,c.z,A,c.y+1).key]={backfilled:!1}),R}unloadTile(r){return u._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}class na extends u.E{constructor(r,c,p,_){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:u.$,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.$,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(u.$/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||u.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return u._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=u.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return u._(this,void 0,void 0,(function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map((c=>c.coordinates)).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,(function*(){const r=new _r,c=yield this.getData();let p;switch(c.type){case"FeatureCollection":p=c.features.map((_=>this.getCoordinatesFromGeometry(_.geometry))).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(c.geometry);break;default:p=this.getCoordinatesFromGeometry(c)}if(p.length==0)return r;for(let _=0;_<p.length-1;_+=2)r.extend([p[_],p[_+1]]);return r}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:p}})}_updateWorkerData(){return u._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:r,diff:c}=this._pendingWorkerUpdate;if(!r&&!c)return void u.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const p=u.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(p.request=this.map._requestManager.transformRequest(j.resolveURL(r),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):c&&(p.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new u.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));this._data=_.data;let S=null;_.resourceTiming&&_.resourceTiming[this.id]&&(S=_.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&u.e(A,{resourceTiming:S}),this.fire(new u.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return u._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const _=yield this.actor.sendAsync({type:c,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(_,this.map.painter,c==="RT")}))}abortTile(r){return u._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return u._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ja extends u.E{constructor(r,c,p,_){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}load(r){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Oe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(u.a1.fromLngLat);var p;return this.tileID=(function(_){const S=u.a2.fromPoints(_),A=S.width(),O=S.height(),R=Math.max(A,O),U=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),G=Math.pow(2,U);return new u.a4(U,Math.floor((S.minX+S.maxX)/2*G),Math.floor((S.minY+S.maxY)/2*G))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new u.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:p,maxX:_,maxY:S}=u.a2.fromPoints(r),A={};for(let O=0;O<=u.a3;O++){const R=Math.pow(2,O),U=Math.floor(c*R),G=Math.floor(p*R),Z=Math.floor(_*R),q=Math.floor(S*R);A[O]={minTileX:U,minTileY:G,maxTileX:Z,maxTileY:q}}return A}}class ks extends ja{constructor(r,c,p,_){super(r,c,p,_),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a5(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new u.k(new u.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new u.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mo extends ja{constructor(r,c,p,_){super(r,c,p,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((A=>typeof A!="number"))))||this.fire(new u.k(new u.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a6(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.k(new u.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new u.T(c,this.canvas,p.RGBA,{premultiply:!0});let _=!1;for(const S in this.tiles){const A=this.tiles[S];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,_=!0)}_&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Bs={},Ls=w=>{switch(w){case"geojson":return na;case"image":return ja;case"raster":return un;case"raster-dem":return qi;case"vector":return Jr;case"video":return ks;case"canvas":return mo}return Bs[w]},li="RTLPluginLoaded";class js extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=or()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,(function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=j.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return u._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(li))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ko=null;function Wo(){return Ko||(Ko=new js),Ko}class Qo{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a7(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(_,S){const A={};if(!S)return A;for(const O of _){const R=O.layerIds.map((U=>S.getLayer(U))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((U=>R.filter((G=>G.id===U))[0])));for(const U of R)A[U.id]=O}}return A})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof u.a9){if(this.hasSymbolBuckets=!0,!p)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof u.a9&&S.hasRTLText){this.hasRTLText=!0,Wo().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const S=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(_).queryRadius(S))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new u.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new u.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new u.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,p,_,S,A,O,R,U,G,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:S,scale:A,tileSize:this.tileSize,pixelPosMatrix:G,transform:R,params:O,queryPadding:this.queryPadding*U,getElevation:Z},r,c,p):{}}querySourceFeatures(r,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),S=c&&c.sourceLayer?c.sourceLayer:"",A=_._geojsonTileLayer||_[S];if(!A)return;const O=u.aa(c?.filter,c?.globalState),{z:R,x:U,y:G}=this.tileID.canonical,Z={z:R,x:U,y:G};for(let q=0;q<A.length;q++){const K=A.feature(q);if(O.needGeometry){const fe=u.ab(K,!0);if(!O.filter(new u.F(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!O.filter(new u.F(this.tileID.overscaledZ),K))continue;const re=p.getId(K,S),he=new u.ac(K,R,U,G,re);he.tile=Z,r.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const p=u.ad(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(c)if(this.expirationTime<c)_=!0;else{const S=this.expirationTime-c;S?this.expirationTime=p+Math.max(S,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!c.style.hasLayer(_))continue;const S=this.buckets[_],A=S.layers[0].sourceLayer||"_geojsonTileLayer",O=p[A],R=r[A];if(!O||!R||Object.keys(R).length===0)continue;S.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=c&&c.style&&c.style.getLayer(_);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=j.now()+r}setDependencies(r,c){const p={};for(const _ of c)p[_]=!0;this.dependencies[r]=p}hasDependency(r,c){for(const p of r){const _=this.dependencies[p];if(_){for(const S of c)if(_[S])return!0}}return!1}}class De{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,p){const _=r.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const S={value:c,timeout:void 0};if(p!==void 0&&(S.timeout=setTimeout((()=>{this.remove(r,S)}),p)),this.data[_].push(S),this.order.push(_),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const p=r.wrapped().key,_=c===void 0?0:this.data[p].indexOf(c),S=this.data[p][_];return this.data[p].splice(_,1),S.timeout&&clearTimeout(S.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(S.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const p in this.data)for(const _ of this.data[p])r(_.value)||c.push(_);for(const p of c)this.remove(p.value.tileID,p)}}class ee{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,p){const _=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][_]=this.stateChanges[r][_]||{},u.e(this.stateChanges[r][_],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const S in this.state[r])S!==_&&(this.deletedStates[r][S]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][_]===null){this.deletedStates[r][_]={};for(const S in this.state[r][_])p[S]||(this.deletedStates[r][_][S]=null)}else for(const S in p)this.deletedStates[r]&&this.deletedStates[r][_]&&this.deletedStates[r][_][S]===null&&delete this.deletedStates[r][_][S]}removeFeatureState(r,c,p){if(this.deletedStates[r]===null)return;const _=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&c!==void 0)this.deletedStates[r][_]!==null&&(this.deletedStates[r][_]=this.deletedStates[r][_]||{},this.deletedStates[r][_][p]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][_])for(p in this.deletedStates[r][_]={},this.stateChanges[r][_])this.deletedStates[r][_][p]=null;else this.deletedStates[r][_]=null;else this.deletedStates[r]=null}getState(r,c){const p=String(c),_=u.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const S=this.deletedStates[r][c];if(S===null)return{};for(const A in S)delete _[A]}return _}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const S={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),u.e(this.state[_][A],this.stateChanges[_][A]),S[A]=this.state[_][A];p[_]=S}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const S={};if(this.deletedStates[_]===null)for(const A in this.state[_])S[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(const O of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][O];S[A]=this.state[_][A]}p[_]=p[_]||{},u.e(p[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in r)r[_].setFeatureState(p,c)}}const te=89.25;function se(w,r){const c=u.ah(r.lat,-u.ai,u.ai);return new u.P(u.V(r.lng)*w,u.U(c)*w)}function _e(w,r){return new u.a1(r.x/w,r.y/w).toLngLat()}function we(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(u.ae(90-w.pitch)),Math.tan(u.ae(te-w.pitch)))}function Ce(w,r){const c=w.canonical,p=r/u.af(c.z),_=c.x+Math.pow(2,c.z)*w.wrap,S=u.ag(new Float64Array(16));return u.M(S,S,[_*p,c.y*p,0]),u.N(S,S,[p/u.$,p/u.$,1]),S}function Ne(w,r,c,p,_){const S=u.a1.fromLngLat(w,r),A=_*u.aj(1,w.lat),O=A*Math.cos(u.ae(c)),R=Math.sqrt(A*A-O*O),U=R*Math.sin(u.ae(-p)),G=R*Math.cos(u.ae(-p));return new u.a1(S.x+U,S.y+G,S.z+O)}function ke(w,r,c){const p=r.intersectsFrustum(w);if(!c||p===0)return p;const _=r.intersectsPlane(c);return _===0?0:p===2&&_===2?2:1}function Qe(w,r,c){let p=0;const _=(c-r)/10;for(let S=0;S<10;S++)p+=_*Math.pow(Math.cos(r+(S+.5)/10*(c-r)),w);return p}function pt(w,r){return function(c,p,_,S,A){const O=2*((w-1)/u.ak(Math.cos(u.ae(te-A))/Math.cos(u.ae(te)))-1),R=Math.acos(_/S),U=2*Qe(O-1,0,u.ae(A/2)),G=Math.min(u.ae(te),R+u.ae(A/2)),Z=Qe(O-1,Math.min(G,R-u.ae(A/2)),G),q=Math.atan(p/_),K=Math.hypot(p,_);let re=c;return re+=u.ak(S/K/Math.max(.5,Math.cos(u.ae(A/2)))),re+=O*u.ak(Math.cos(q))/2,re-=u.ak(Math.max(1,Z/U/r))/2,re}}const et=pt(9.314,3);function It(w,r){const c=(r.roundZoom?Math.round:Math.floor)(w.zoom+u.ak(w.tileSize/r.tileSize));return Math.max(0,c)}function Re(w,r){const c=w.getCameraFrustum(),p=w.getClippingPlane(),_=w.screenPointToMercatorCoordinate(w.getCameraPoint()),S=u.a1.fromLngLat(w.center,w.elevation);_.z=S.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const A=w.getCoveringTilesDetailsProvider(),O=A.allowVariableZoom(w,r),R=It(w,r),U=r.minzoom||0,G=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,Z=Math.min(Math.max(0,R),G),q=Math.pow(2,Z),K=[q*_.x,q*_.y,0],re=[q*S.x,q*S.y,0],he=Math.hypot(S.x-_.x,S.y-_.y),fe=Math.abs(S.z-_.z),de=Math.hypot(he,fe),pe=xe=>({zoom:0,x:0,y:0,wrap:xe,fullyVisible:!1}),ye=[],ge=[];if(w.renderWorldCopies&&A.allowWorldCopies())for(let xe=1;xe<=3;xe++)ye.push(pe(-xe)),ye.push(pe(xe));for(ye.push(pe(0));ye.length>0;){const xe=ye.pop(),Me=xe.x,ve=xe.y;let Pe=xe.fullyVisible;const Ze={x:Me,y:ve,z:xe.zoom},Ue=A.getTileBoundingVolume(Ze,xe.wrap,w.elevation,r);if(!Pe){const mt=ke(c,Ue,p);if(mt===0)continue;Pe=mt===2}const Ge=A.distanceToTile2d(_.x,_.y,Ze,Ue);let He=R;O&&(He=(r.calculateTileZoom||et)(w.zoom+u.ak(w.tileSize/r.tileSize),Ge,fe,de,w.fov)),He=(r.roundZoom?Math.round:Math.floor)(He),He=Math.max(0,He);const yt=Math.min(He,G);if(xe.wrap=A.getWrap(S,Ze,xe.wrap),xe.zoom>=yt){if(xe.zoom<U)continue;const mt=Z-xe.zoom,st=K[0]-.5-(Me<<mt),Ct=K[1]-.5-(ve<<mt),lr=r.reparseOverscaled?Math.max(xe.zoom,He):xe.zoom;ge.push({tileID:new u.Z(xe.zoom===G?lr:xe.zoom,xe.wrap,xe.zoom,Me,ve),distanceSq:u.al([re[0]-.5-Me,re[1]-.5-ve]),tileDistanceToCamera:Math.sqrt(st*st+Ct*Ct)})}else for(let mt=0;mt<4;mt++)ye.push({zoom:xe.zoom+1,x:(Me<<1)+mt%2,y:(ve<<1)+(mt>>1),wrap:xe.wrap,fullyVisible:Pe})}return ge.sort(((xe,Me)=>xe.distanceSq-Me.distanceSq)).map((xe=>xe.tileID))}const Yt=u.a2.fromPoints([new u.P(0,0),new u.P(u.$,u.$)]);class gr extends u.E{constructor(r,c,p){super(),this.id=r,this.dispatcher=p,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,S,A,O)=>{const R=new(Ls(S.type))(_,S,A,O);if(R.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${R.id}`);return R})(r,c,p,this),this._tiles={},this._cache=new De(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ee,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,p){return u._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,p)}catch(_){r.state="errored",_.status!==404?this._source.fire(new u.k(_,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((r=>r.tileID)).sort(Lt).map((r=>r.key))}getRenderableIds(r){const c=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&c.push(this._tiles[p]);return r?c.sort(((p,_)=>{const S=p.tileID,A=_.tileID,O=new u.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians),R=new u.P(A.canonical.x,A.canonical.y)._rotate(-this.transform.bearingInRadians);return S.overscaledZ-A.overscaledZ||R.y-O.y||R.x-O.x})).map((p=>p.tileID.key)):c.map((p=>p.tileID)).sort(Lt).map((p=>p.key))}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)r?this._reloadTile(c,"expired"):this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return u._(this,void 0,void 0,(function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,r,c))}))}_tileLoaded(r,c,p){r.timeAdded=j.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let _=0;_<c.length;_++){const S=c[_];if(r.neighboringTiles&&r.neighboringTiles[S]){const A=this.getTileByID(S);p(r,A),p(A,r)}}function p(_,S){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let A=S.tileID.canonical.x-_.tileID.canonical.x;const O=S.tileID.canonical.y-_.tileID.canonical.y,R=Math.pow(2,_.tileID.canonical.z),U=S.tileID.key;A===0&&O===0||Math.abs(O)>1||(Math.abs(A)>1&&(Math.abs(A+R)===1?A+=R:Math.abs(A-R)===1&&(A-=R)),S.dem&&_.dem&&(_.dem.backfillBorder(S.dem,A,O),_.neighboringTiles&&_.neighboringTiles[U]&&(_.neighboringTiles[U].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c){const p=Object.values(r),_=this._getLoadedDescendents(p),S={};for(const A of p){const O=_[A.key];if(!O?.length){S[A.key]=A;continue}const R=A.overscaledZ+gr.maxUnderzooming,U=O.filter((q=>q.tileID.overscaledZ<=R));if(!U.length){S[A.key]=A;continue}const G=Math.min(...U.map((q=>q.tileID.overscaledZ))),Z=U.filter((q=>q.tileID.overscaledZ===G)).map((q=>q.tileID));for(const q of Z)c[q.key]=q;this._areDescendentsComplete(Z,G,A.overscaledZ)||(S[A.key]=A)}return S}_getLoadedDescendents(r){var c;const p={};for(const _ in this._tiles){const S=this._tiles[_];if(S.hasData())for(const A of r)S.tileID.isChildOf(A)&&(p[c=A.key]||(p[c]=[])).push(S)}return p}_areDescendentsComplete(r,c,p){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===c:Math.pow(4,c-p)===r.length}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=r.overscaledZ-1;p>=c;p--){const _=r.scaledTo(p),S=this._getLoadedTile(_);if(S)return S}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,_=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(S)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const p={};for(const _ in this._tiles){const S=this._tiles[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+c),p[S.tileID.key]=S}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(r,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((U=>new u.Z(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y))):(p=Re(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter((U=>this._source.hasTile(U))))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=It(r,this._source),S=Math.max(_-gr.maxOverzooming,this._source.minzoom),A=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(p,_);hr(this._source.type)&&!c&&this._updateFadingTiles(O,S);for(const U in O)this._tiles[U].clearFadeHold();const R=u.am(this._tiles,O);for(const U of R){const G=this._tiles[U];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}_addTerrainIdealTiles(r){const c=[];for(const p of r)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);c.push(_);const S=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));c.push(S)}return r.concat(c)}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var p;const _={},S={},A=Math.max(c-gr.maxOverzooming,this._source.minzoom);let O={};for(const R of r){const U=this._addTile(R);_[R.key]=R,U.hasData()||(O[R.key]=R)}O=this._retainLoadedChildren(O,_);for(const R in O){const U=O[R];let G=this._tiles[R],Z=G?.wasRequested();for(let q=U.overscaledZ-1;q>=A;--q){const K=U.scaledTo(q);if(S[K.key])break;if(S[K.key]=!0,G=this.getTile(K),!G&&Z&&(G=this._addTile(K)),G){const re=G.hasData();if((re||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||Z)&&(_[K.key]=K),Z=G.wasRequested(),re)break}}}return _}_updateFadingTiles(r,c){const p={},_={},S=Object.keys(r),A=j.now();for(const O of S){const R=r[O],U=this._tiles[O];if(!U||U.fadeEndTime!==0&&U.fadeEndTime<=A)continue;const G=this.findLoadedParent(R,c),Z=this.findLoadedSibling(R),q=G||Z||null;q&&(this._addTile(q.tileID),p[q.tileID.key]=q.tileID),_[O]=R}this._retainLoadedChildren(_,r);for(const O in p)r[O]||(this._coveredTiles[O]=!0,r[O]=p[O])}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let p,_=this._tiles[r].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){p=this._loadedParentTiles[_.key];break}c.push(_.key);const S=_.scaledTo(_.overscaledZ-1);if(p=this._getLoadedTile(S),p)break;_=S}for(const S of c)this._loadedParentTiles[S]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const p=c;return c||(c=new Qo(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,p||this._source.fire(new u.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=c.getExpiryTimeout();p&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),p))}refreshTiles(r){for(const c in this._tiles)(this._isIdRenderable(c)||this._tiles[c].state=="errored")&&r.some((p=>p.equals(this._tiles[c].tileID.canonical)))&&this._reloadTile(c,"expired")}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,p){const _=[],S=this.transform;if(!S)return _;const A=S.getCoveringTilesDetailsProvider().allowWorldCopies(),O=p?S.getCameraQueryGeometry(r):r,R=K=>S.screenPointToMercatorCoordinate(K,this.terrain),U=this.transformBbox(r,R,!A),G=this.transformBbox(O,R,!A),Z=this.getIds(),q=u.a2.fromPoints(G);for(let K=0;K<Z.length;K++){const re=this._tiles[Z[K]];if(re.holdingForFade())continue;const he=A?[re.tileID]:[re.tileID.unwrapTo(-1),re.tileID.unwrapTo(0)],fe=Math.pow(2,S.zoom-re.tileID.overscaledZ),de=c*re.queryPadding*u.$/re.tileSize/fe;for(const pe of he){const ye=q.map((ge=>pe.getTilePoint(new u.a1(ge.x,ge.y))));if(ye.expandBy(de),ye.intersects(Yt)){const ge=U.map((Me=>pe.getTilePoint(Me))),xe=G.map((Me=>pe.getTilePoint(Me)));_.push({tile:re,tileID:A?pe:pe.unwrapTo(0),queryGeometry:ge,cameraQueryGeometry:xe,scale:fe})}}}return _}transformBbox(r,c,p){let _=r.map(c);if(p){const S=u.a2.fromPoints(r);S.shrinkBy(.001*Math.min(S.width(),S.height()));const A=S.map(c);u.a2.fromPoints(_).covers(A)||(_=_.map((O=>O.x>.5?new u.a1(O.x-1,O.y,O.z):O)))}return _}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((p=>this._tiles[p].tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(hr(this._source.type)){const r=j.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,p){this._state.updateState(r=r||"_geojsonTileLayer",c,p)}removeFeatureState(r,c,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,p)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,p){const _=this._tiles[r];_&&_.setDependencies(c,p)}reloadTilesForDependencies(r,c){for(const p in this._tiles)this._tiles[p].hasDependency(r,c)&&this._reloadTile(p,"reloading");this._cache.filter((p=>!p.hasDependency(r,c)))}}function Lt(w,r){const c=Math.abs(2*w.wrap)-+(w.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return w.overscaledZ-r.overscaledZ||p-c||r.canonical.y-w.canonical.y||r.canonical.x-w.canonical.x}function hr(w){return w==="raster"||w==="image"||w==="video"}gr.maxOverzooming=10,gr.maxUnderzooming=3;class en{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ah(r,0,1);let c=1,p=this._distances[c];const _=r*this.paddedLength+this.padding;for(;p<_&&c<this._distances.length;)p=this._distances[++c];const S=c-1,A=this._distances[S],O=p-A,R=O>0?(_-A)/O:0;return this.points[S].mult(1-R).add(this.points[c].mult(R))}}function An(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class Mn{constructor(r,c,p){const _=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(c/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,p,_,S){this._forEachCell(c,p,_,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}insertCircle(r,c,p,_){this._forEachCell(c-_,p-_,c+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(p),this.circles.push(_)}_insertBoxCell(r,c,p,_,S,A){this.boxCells[S].push(A)}_insertCircleCell(r,c,p,_,S,A){this.circleCells[S].push(A)}_query(r,c,p,_,S,A,O){if(p<0||r>this.width||_<0||c>this.height)return[];const R=[];if(r<=0&&c<=0&&this.width<=p&&this.height<=_){if(S)return[{key:null,x1:r,y1:c,x2:p,y2:_}];for(let U=0;U<this.boxKeys.length;U++)R.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const G=this.circles[3*U],Z=this.circles[3*U+1],q=this.circles[3*U+2];R.push({key:this.circleKeys[U],x1:G-q,y1:Z-q,x2:G+q,y2:Z+q})}}else this._forEachCell(r,c,p,_,this._queryCell,R,{hitTest:S,overlapMode:A,seenUids:{box:{},circle:{}}},O);return R}query(r,c,p,_){return this._query(r,c,p,_,!1,null)}hitTest(r,c,p,_,S,A){return this._query(r,c,p,_,!0,S,A).length>0}hitTestCircle(r,c,p,_,S){const A=r-p,O=r+p,R=c-p,U=c+p;if(O<0||A>this.width||U<0||R>this.height)return!1;const G=[];return this._forEachCell(A,R,O,U,this._queryCellCircle,G,{hitTest:!0,overlapMode:_,circle:{x:r,y:c,radius:p},seenUids:{box:{},circle:{}}},S),G.length>0}_queryCell(r,c,p,_,S,A,O,R){const{seenUids:U,hitTest:G,overlapMode:Z}=O,q=this.boxCells[S];if(q!==null){const re=this.bboxes;for(const he of q)if(!U.box[he]){U.box[he]=!0;const fe=4*he,de=this.boxKeys[he];if(r<=re[fe+2]&&c<=re[fe+3]&&p>=re[fe+0]&&_>=re[fe+1]&&(!R||R(de))&&(!G||!An(Z,de.overlapMode))&&(A.push({key:de,x1:re[fe],y1:re[fe+1],x2:re[fe+2],y2:re[fe+3]}),G))return!0}}const K=this.circleCells[S];if(K!==null){const re=this.circles;for(const he of K)if(!U.circle[he]){U.circle[he]=!0;const fe=3*he,de=this.circleKeys[he];if(this._circleAndRectCollide(re[fe],re[fe+1],re[fe+2],r,c,p,_)&&(!R||R(de))&&(!G||!An(Z,de.overlapMode))){const pe=re[fe],ye=re[fe+1],ge=re[fe+2];if(A.push({key:de,x1:pe-ge,y1:ye-ge,x2:pe+ge,y2:ye+ge}),G)return!0}}}return!1}_queryCellCircle(r,c,p,_,S,A,O,R){const{circle:U,seenUids:G,overlapMode:Z}=O,q=this.boxCells[S];if(q!==null){const re=this.bboxes;for(const he of q)if(!G.box[he]){G.box[he]=!0;const fe=4*he,de=this.boxKeys[he];if(this._circleAndRectCollide(U.x,U.y,U.radius,re[fe+0],re[fe+1],re[fe+2],re[fe+3])&&(!R||R(de))&&!An(Z,de.overlapMode))return A.push(!0),!0}}const K=this.circleCells[S];if(K!==null){const re=this.circles;for(const he of K)if(!G.circle[he]){G.circle[he]=!0;const fe=3*he,de=this.circleKeys[he];if(this._circlesCollide(re[fe],re[fe+1],re[fe+2],U.x,U.y,U.radius)&&(!R||R(de))&&!An(Z,de.overlapMode))return A.push(!0),!0}}}_forEachCell(r,c,p,_,S,A,O,R){const U=this._convertToXCellCoord(r),G=this._convertToYCellCoord(c),Z=this._convertToXCellCoord(p),q=this._convertToYCellCoord(_);for(let K=U;K<=Z;K++)for(let re=G;re<=q;re++)if(S.call(this,r,c,p,_,this.xCellCount*re+K,A,O,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,p,_,S,A){const O=_-r,R=S-c,U=p+A;return U*U>O*O+R*R}_circleAndRectCollide(r,c,p,_,S,A,O){const R=(A-_)/2,U=Math.abs(r-(_+R));if(U>R+p)return!1;const G=(O-S)/2,Z=Math.abs(c-(S+G));if(Z>G+p)return!1;if(U<=R||Z<=G)return!0;const q=U-R,K=Z-G;return q*q+K*K<=p*p}}function ci(w,r,c){const p=u.L();if(!w){const{vecSouth:Z,vecEast:q}=tn(r),K=P();K[0]=q[0],K[1]=q[1],K[2]=Z[0],K[3]=Z[1],_=K,(G=(A=(S=K)[0])*(U=S[3])-(R=S[2])*(O=S[1]))&&(_[0]=U*(G=1/G),_[1]=-O*G,_[2]=-R*G,_[3]=A*G),p[0]=K[0],p[1]=K[1],p[4]=K[2],p[5]=K[3]}var _,S,A,O,R,U,G;return u.N(p,p,[1/c,1/c,1]),p}function ei(w,r,c,p){if(w){const _=u.L();if(!r){const{vecSouth:S,vecEast:A}=tn(c);_[0]=A[0],_[1]=A[1],_[4]=S[0],_[5]=S[1]}return u.N(_,_,[p,p,1]),_}return c.pixelsToClipSpaceMatrix}function tn(w){const r=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),p=Math.cos(w.pitchInRadians),_=Math.cos(w.bearingInRadians),S=Math.sin(w.bearingInRadians),A=u.ar();A[0]=-_*p*c-S*r,A[1]=-S*p*c+_*r;const O=u.as(A);O<1e-9?u.at(A):u.au(A,A,1/O);const R=u.ar();R[0]=_*p*r-S*c,R[1]=S*p*r+_*c;const U=u.as(R);return U<1e-9?u.at(R):u.au(R,R,1/U),{vecEast:R,vecSouth:A}}function Bn(w,r,c,p){let _;p?(_=[w,r,p(w,r),1],u.aw(_,_,c)):(_=[w,r,0,1],yo(_,_,c));const S=_[3];return{point:new u.P(_[0]/S,_[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function rt(w,r){return .5+w/r*.5}function En(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function ia(w,r,c,p,_,S,A,O,R,U,G,Z,q){const K=c?w.textSizeData:w.iconSizeData,re=u.an(K,r.transform.zoom),he=[256/r.width*2+1,256/r.height*2+1],fe=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;fe.clear();const de=w.lineVertexArray,pe=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,ye=r.transform.width/r.transform.height;let ge=!1;for(let xe=0;xe<pe.length;xe++){const Me=pe.get(xe);if(Me.hidden||Me.writingMode===u.ao.vertical&&!ge){$i(Me.numGlyphs,fe);continue}ge=!1;const ve=new u.P(Me.anchorX,Me.anchorY),Pe={getElevation:q,pitchedLabelPlaneMatrix:p,lineVertexArray:de,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:ve,unwrappedTileID:R,width:U,height:G,translation:Z},Ze=Fs(Me.anchorX,Me.anchorY,Pe);if(!En(Ze.point,he)){$i(Me.numGlyphs,fe);continue}const Ue=rt(r.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),Ge=u.ap(K,re,Me),He=S?Ge*r.transform.getPitchedTextCorrection(Me.anchorX,Me.anchorY,R)/Ue:Ge*Ue,yt=ut({projectionContext:Pe,pitchedLabelPlaneMatrixInverse:_,symbol:Me,fontSize:He,flip:!1,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:ye,rotateToLine:O});ge=yt.useVertical,(yt.notEnoughRoom||ge||yt.needsFlipping&&ut({projectionContext:Pe,pitchedLabelPlaneMatrixInverse:_,symbol:Me,fontSize:He,flip:!0,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:ye,rotateToLine:O}).notEnoughRoom)&&$i(Me.numGlyphs,fe)}c?w.text.dynamicLayoutVertexBuffer.updateData(fe):w.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Ns(w,r,c,p,_,S,A,O){const R=S.glyphStartIndex+S.numGlyphs,U=S.lineStartIndex,G=S.lineStartIndex+S.lineLength,Z=r.getoffsetX(S.glyphStartIndex),q=r.getoffsetX(R-1),K=go(w*Z,c,p,_,S.segment,U,G,O,A);if(!K)return null;const re=go(w*q,c,p,_,S.segment,U,G,O,A);return re?O.projectionCache.anyProjectionOccluded?null:{first:K,last:re}:null}function Pn(w,r,c,p){return w===u.ao.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*p?{useVertical:!0}:(w===u.ao.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function ut(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:p,fontSize:_,flip:S,keepUpright:A,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:U,rotateToLine:G}=w,Z=_/24,q=p.lineOffsetX*Z,K=p.lineOffsetY*Z;let re;if(p.numGlyphs>1){const he=p.glyphStartIndex+p.numGlyphs,fe=p.lineStartIndex,de=p.lineStartIndex+p.lineLength,pe=Ns(Z,O,q,K,S,p,G,r);if(!pe)return{notEnoughRoom:!0};const ye=Il(pe.first.point.x,pe.first.point.y,r,c),ge=Il(pe.last.point.x,pe.last.point.y,r,c);if(A&&!S){const xe=Pn(p.writingMode,ye,ge,U);if(xe)return xe}re=[pe.first];for(let xe=p.glyphStartIndex+1;xe<he-1;xe++){const Me=go(Z*O.getoffsetX(xe),q,K,S,p.segment,fe,de,r,G);if(!Me)return{notEnoughRoom:!0};re.push(Me)}re.push(pe.last)}else{if(A&&!S){const fe=ui(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,de=p.lineStartIndex+p.segment+1,pe=new u.P(r.lineVertexArray.getx(de),r.lineVertexArray.gety(de)),ye=ui(pe.x,pe.y,r),ge=ye.signedDistanceFromCamera>0?ye.point:$t(r.tileAnchorPoint,pe,fe,1,r),xe=Il(fe.x,fe.y,r,c),Me=Il(ge.x,ge.y,r,c),ve=Pn(p.writingMode,xe,Me,U);if(ve)return ve}const he=go(Z*O.getoffsetX(p.glyphStartIndex),q,K,S,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,G);if(!he||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[he]}for(const he of re)u.av(R,he.point,he.angle);return{}}function $t(w,r,c,p,_){const S=w.add(w.sub(r)._unit()),A=ui(S.x,S.y,_).point,O=c.sub(A);return c.add(O._mult(p/O.mag()))}function ir(w,r,c){const p=r.projectionCache;if(p.projections[w])return p.projections[w];const _=new u.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),S=ui(_.x,_.y,r);if(S.signedDistanceFromCamera>0)return p.projections[w]=S.point,p.anyProjectionOccluded=p.anyProjectionOccluded||S.isOccluded,S.point;const A=w-c.direction;return $t(c.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(A),r.lineVertexArray.gety(A)),_,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function ui(w,r,c){const p=w+c.translation[0],_=r+c.translation[1];let S;return c.pitchWithMap?(S=Bn(p,_,c.pitchedLabelPlaneMatrix,c.getElevation),S.isOccluded=!1):(S=c.transform.projectTileCoordinates(p,_,c.unwrappedTileID,c.getElevation),S.point.x=(.5*S.point.x+.5)*c.width,S.point.y=(.5*-S.point.y+.5)*c.height),S}function Il(w,r,c,p){if(c.pitchWithMap){const _=[w,r,0,1];return u.aw(_,_,p),c.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-r/c.height*2}}function Fs(w,r,c){return c.transform.projectTileCoordinates(w,r,c.unwrappedTileID,c.getElevation)}function sr(w,r,c){return w._unit()._perp()._mult(r*c)}function Us(w,r,c,p,_,S,A,O,R){if(O.projectionCache.offsets[w])return O.projectionCache.offsets[w];const U=c.add(r);if(w+R.direction<p||w+R.direction>=_)return O.projectionCache.offsets[w]=U,U;const G=ir(w+R.direction,O,R),Z=sr(G.sub(c),A,R.direction),q=c.add(Z),K=G.add(Z);return O.projectionCache.offsets[w]=u.ax(S,U,q,K)||U,O.projectionCache.offsets[w]}function go(w,r,c,p,_,S,A,O,R){const U=p?w-r:w+r;let G=U>0?1:-1,Z=0;p&&(G*=-1,Z=Math.PI),G<0&&(Z+=Math.PI);let q,K=G>0?S+_:S+_+1;O.projectionCache.cachedAnchorPoint?q=O.projectionCache.cachedAnchorPoint:(q=ui(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=q);let re,he,fe=q,de=q,pe=0,ye=0;const ge=Math.abs(U),xe=[];let Me;for(;pe+ye<=ge;){if(K+=G,K<S||K>=A)return null;pe+=ye,de=fe,he=re;const Ze={absOffsetX:ge,direction:G,distanceFromAnchor:pe,previousVertex:de};if(fe=ir(K,O,Ze),c===0)xe.push(de),Me=fe.sub(de);else{let Ue;const Ge=fe.sub(de);Ue=Ge.mag()===0?sr(ir(K+G,O,Ze).sub(fe),c,G):sr(Ge,c,G),he||(he=de.add(Ue)),re=Us(K,Ue,fe,S,A,he,c,O,Ze),xe.push(he),Me=re.sub(he)}ye=Me.mag()}const ve=Me._mult((ge-pe)/ye)._add(he||de),Pe=Z+Math.atan2(fe.y-de.y,fe.x-de.x);return xe.push(ve),{point:ve,angle:R?Pe:0,path:xe}}const Jo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $i(w,r){for(let c=0;c<w;c++){const p=r.length;r.resize(p+4),r.float32.set(Jo,3*p)}}function yo(w,r,c){const p=r[0],_=r[1];return w[0]=c[0]*p+c[4]*_+c[12],w[1]=c[1]*p+c[5]*_+c[13],w[3]=c[3]*p+c[7]*_+c[15],w}const rn=100;class Un{constructor(r,c=new Mn(r.width+200,r.height+200,25),p=new Mn(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+rn,this.screenBottomBoundary=r.height+rn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,p,_,S,A,O,R,U,G,Z,q){const K=this.projectAndGetPerspectiveRatio(r.anchorPointX+R[0],r.anchorPointY+R[1],S,G,q),re=p*K.perspectiveRatio;let he;if(A||O)he=this._projectCollisionBox(r,re,_,S,A,O,R,K,G,Z,q);else{const Me=K.x+(Z?Z.x*re:0),ve=K.y+(Z?Z.y*re:0);he={allPointsOccluded:!1,box:[Me+r.x1*re,ve+r.y1*re,Me+r.x2*re,ve+r.y2*re]}}const[fe,de,pe,ye]=he.box,ge=A?he.allPointsOccluded:K.isOccluded;let xe=ge;return xe||(xe=K.perspectiveRatio<this.perspectiveRatioCutoff),xe||(xe=!this.isInsideGrid(fe,de,pe,ye)),xe||c!=="always"&&this.grid.hitTest(fe,de,pe,ye,c,U)?{box:[fe,de,pe,ye],placeable:!1,offscreen:!1,occluded:ge}:{box:[fe,de,pe,ye],placeable:!0,offscreen:this.isOffscreen(fe,de,pe,ye),occluded:ge}}placeCollisionCircles(r,c,p,_,S,A,O,R,U,G,Z,q,K,re){const he=[],fe=new u.P(c.anchorX,c.anchorY),de=this.getPerspectiveRatio(fe.x,fe.y,A,re),pe=(U?S*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,A)/de:S*de)/u.aB,ye={getElevation:re,pitchedLabelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:fe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:K},ge=Ns(pe,_,c.lineOffsetX*pe,c.lineOffsetY*pe,!1,c,!1,ye);let xe=!1,Me=!1,ve=!0;if(ge){const Pe=.5*Z*de+q,Ze=new u.P(-100,-100),Ue=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Ge=new en,He=ge.first,yt=ge.last;let mt=[];for(let lr=He.path.length-1;lr>=1;lr--)mt.push(He.path[lr]);for(let lr=1;lr<yt.path.length;lr++)mt.push(yt.path[lr]);const st=2.5*Pe;if(U){const lr=this.projectPathToScreenSpace(mt,ye);mt=lr.some((Br=>Br.signedDistanceFromCamera<=0))?[]:lr.map((Br=>Br.point))}let Ct=[];if(mt.length>0){const lr=mt[0].clone(),Br=mt[0].clone();for(let on=1;on<mt.length;on++)lr.x=Math.min(lr.x,mt[on].x),lr.y=Math.min(lr.y,mt[on].y),Br.x=Math.max(Br.x,mt[on].x),Br.y=Math.max(Br.y,mt[on].y);Ct=lr.x>=Ze.x&&Br.x<=Ue.x&&lr.y>=Ze.y&&Br.y<=Ue.y?[mt]:Br.x<Ze.x||lr.x>Ue.x||Br.y<Ze.y||lr.y>Ue.y?[]:u.ay([mt],Ze.x,Ze.y,Ue.x,Ue.y)}for(const lr of Ct){Ge.reset(lr,.25*Pe);let Br=0;Br=Ge.length<=.5*Pe?1:Math.ceil(Ge.paddedLength/st)+1;for(let on=0;on<Br;on++){const Wr=on/Math.max(Br-1,1),hn=Ge.lerp(Wr),sn=hn.x+rn,ii=hn.y+rn;he.push(sn,ii,Pe,0);const fn=sn-Pe,$r=ii-Pe,Yr=sn+Pe,vr=ii+Pe;if(ve=ve&&this.isOffscreen(fn,$r,Yr,vr),Me=Me||this.isInsideGrid(fn,$r,Yr,vr),r!=="always"&&this.grid.hitTestCircle(sn,ii,Pe,r,G)&&(xe=!0,!R))return{circles:[],offscreen:!1,collisionDetected:xe}}}}return{circles:!R&&xe||!Me||de<this.perspectiveRatioCutoff?[]:he,offscreen:ve,collisionDetected:xe}}projectPathToScreenSpace(r,c){const p=(function(_,S){const A=u.L();return u.aq(A,S.pitchedLabelPlaneMatrix),_.map((O=>{const R=Bn(O.x,O.y,A,S.getElevation),U=S.transform.projectTileCoordinates(R.point.x,R.point.y,S.unwrappedTileID,S.getElevation);return U.point.x=(.5*U.point.x+.5)*S.width,U.point.y=(.5*-U.point.y+.5)*S.height,U}))})(r,c);return(function(_){let S=0,A=0,O=0,R=0;for(let U=0;U<_.length;U++)_[U].isOccluded?(O=U+1,R=0):(R++,R>A&&(A=R,S=O));return _.slice(S,S+A)})(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],p=new u.a2;for(const Z of r){const q=new u.P(Z.x+rn,Z.y+rn);p.extend(q),c.push(q)}const{minX:_,minY:S,maxX:A,maxY:O}=p,R=this.grid.query(_,S,A,O).concat(this.ignoredGrid.query(_,S,A,O)),U={},G={};for(const Z of R){const q=Z.key;if(U[q.bucketInstanceId]===void 0&&(U[q.bucketInstanceId]={}),U[q.bucketInstanceId][q.featureIndex])continue;const K=[new u.P(Z.x1,Z.y1),new u.P(Z.x2,Z.y1),new u.P(Z.x2,Z.y2),new u.P(Z.x1,Z.y2)];u.az(c,K)&&(U[q.bucketInstanceId][q.featureIndex]=!0,G[q.bucketInstanceId]===void 0&&(G[q.bucketInstanceId]=[]),G[q.bucketInstanceId].push(q.featureIndex))}return G}insertCollisionBox(r,c,p,_,S,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:S,collisionGroupID:A,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,p,_,S,A){const O=p?this.ignoredGrid:this.grid,R={bucketInstanceId:_,featureIndex:S,collisionGroupID:A,overlapMode:c};for(let U=0;U<r.length;U+=4)O.insertCircle(R,r[U],r[U+1],r[U+2])}projectAndGetPerspectiveRatio(r,c,p,_,S){if(S){let A;_?(A=[r,c,_(r,c),1],u.aw(A,A,S)):(A=[r,c,0,1],yo(A,A,S));const O=A[3];return{x:(A[0]/O+1)/2*this.transform.width+rn,y:(-A[1]/O+1)/2*this.transform.height+rn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const A=this.transform.projectTileCoordinates(r,c,p,_);return{x:(A.point.x+1)/2*this.transform.width+rn,y:(1-A.point.y)/2*this.transform.height+rn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,p,_){const S=this.transform.projectTileCoordinates(r,c,p,_);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(r,c,p,_){return p<rn||r>=this.screenRightBoundary||_<rn||c>this.screenBottomBoundary}isInsideGrid(r,c,p,_){return p>=0&&r<this.gridRightBoundary&&_>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=u.ag([]);return u.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,p,_,S,A,O,R,U,G,Z){let q=1,K=0,re=0,he=1;const fe=r.anchorPointX+O[0],de=r.anchorPointY+O[1];if(A&&!S){const mt=this.projectAndGetPerspectiveRatio(fe+1,de,_,U,Z),st=mt.x-R.x,Ct=Math.atan((mt.y-R.y)/st)+(st<0?Math.PI:0),lr=Math.sin(Ct),Br=Math.cos(Ct);q=Br,K=lr,re=-lr,he=Br}else if(!A&&S){const mt=tn(this.transform);q=mt.vecEast[0],K=mt.vecEast[1],re=mt.vecSouth[0],he=mt.vecSouth[1]}let pe=R.x,ye=R.y,ge=c;S&&(pe=fe,ye=de,ge=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),ge*=this.transform.getPitchedTextCorrection(fe,de,_),G||(ge*=u.ah(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),G&&(pe+=q*G.x*ge+re*G.y*ge,ye+=K*G.x*ge+he*G.y*ge);const xe=r.x1*ge,Me=r.x2*ge,ve=(xe+Me)/2,Pe=r.y1*ge,Ze=r.y2*ge,Ue=(Pe+Ze)/2,Ge=[{offsetX:xe,offsetY:Pe},{offsetX:ve,offsetY:Pe},{offsetX:Me,offsetY:Pe},{offsetX:Me,offsetY:Ue},{offsetX:Me,offsetY:Ze},{offsetX:ve,offsetY:Ze},{offsetX:xe,offsetY:Ze},{offsetX:xe,offsetY:Ue}];let He=[];for(const{offsetX:mt,offsetY:st}of Ge)He.push(new u.P(pe+q*mt+re*st,ye+K*mt+he*st));let yt=!1;if(S){const mt=He.map((st=>this.projectAndGetPerspectiveRatio(st.x,st.y,_,U,Z)));yt=mt.some((st=>!st.isOccluded)),He=mt.map((st=>new u.P(st.x,st.y)))}else yt=!0;return{box:u.aA(He),allPointsOccluded:!yt}}}class Zi{constructor(r,c,p,_){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Hr{constructor(r,c,p,_,S){this.text=new Zi(r?r.text:null,c,p,S),this.icon=new Zi(r?r.icon:null,c,_,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gs{constructor(r,c,p){this.text=r,this.icon=c,this.skipFade=p}}class vo{constructor(r,c,p,_,S){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=S}}class vf{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[r]}}function es(w,r,c,p,_){const{horizontalAlign:S,verticalAlign:A}=u.aH(w);return new u.P(-(S-.5)*r+p[0]*_,-(A-.5)*c+p[1]*_)}class ts{constructor(r,c,p,_,S){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new Un(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new vf(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(p,_)=>c.getElevation(r,p,_):null}getBucketParts(r,c,p,_){const S=p.getBucket(c),A=p.latestFeatureIndex;if(!S||!A||c.id!==S.layerIds[0])return;const O=p.collisionBoxArray,R=S.layers[0].layout,U=S.layers[0].paint,G=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Z=p.tileSize/u.$,q=p.tileID.toUnwrapped(),K=R.get("text-rotation-alignment")==="map",re=u.aC(p,1,this.transform.zoom),he=u.aD(this.collisionIndex.transform,p,U.get("text-translate"),U.get("text-translate-anchor")),fe=u.aD(this.collisionIndex.transform,p,U.get("icon-translate"),U.get("icon-translate-anchor")),de=ci(K,this.transform,re);this.retainedQueryData[S.bucketInstanceId]=new vo(S.bucketInstanceId,A,S.sourceLayerIndex,S.index,p.tileID);const pe={bucket:S,layout:R,translationText:he,translationIcon:fe,unwrappedTileID:q,pitchedLabelPlaneMatrix:de,scale:G,textPixelRatio:Z,holdingForFade:p.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:u.an(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(_)for(const ye of S.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:xe,symbolInstanceEnd:Me}=ye;r.push({sortKey:ge,symbolInstanceStart:xe,symbolInstanceEnd:Me,parameters:pe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(r,c,p,_,S,A,O,R,U,G,Z,q,K,re,he,fe,de,pe,ye,ge){const xe=u.aE[r.textAnchor],Me=[r.textOffset0,r.textOffset1],ve=es(xe,p,_,Me,S),Pe=this.collisionIndex.placeCollisionBox(c,q,R,U,G,O,A,fe,Z.predicate,ye,ve,ge);if((!pe||this.collisionIndex.placeCollisionBox(pe,q,R,U,G,O,A,de,Z.predicate,ye,ve,ge).placeable)&&Pe.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Me,width:p,height:_,anchor:xe,textBoxScale:S,prevAnchor:Ze},this.markUsedJustification(re,xe,K,he),re.allowVerticalPlacement&&(this.markUsedOrientation(re,he,K),this.placedOrientations[K.crossTileID]=he),{shift:ve,placedGlyphBoxes:Pe}}}placeLayerBucketPart(r,c,p){const{bucket:_,layout:S,translationText:A,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:U,textPixelRatio:G,holdingForFade:Z,collisionBoxArray:q,partiallyEvaluatedTextSize:K,collisionGroup:re}=r.parameters,he=S.get("text-optional"),fe=S.get("icon-optional"),de=u.aF(S,"text-overlap","text-allow-overlap"),pe=de==="always",ye=u.aF(S,"icon-overlap","icon-allow-overlap"),ge=ye==="always",xe=S.get("text-rotation-alignment")==="map",Me=S.get("text-pitch-alignment")==="map",ve=S.get("icon-text-fit")!=="none",Pe=S.get("symbol-z-order")==="viewport-y",Ze=pe&&(ge||!_.hasIconData()||fe),Ue=ge&&(pe||!_.hasTextData()||he);!_.collisionArrays&&q&&_.deserializeCollisionBoxes(q);const Ge=this.retainedQueryData[_.bucketInstanceId].tileID,He=this._getTerrainElevationFunc(Ge),yt=this.transform.getFastPathSimpleProjectionMatrix(Ge),mt=(st,Ct,lr)=>{var Br,on;if(c[st.crossTileID])return;if(Z)return void(this.placements[st.crossTileID]=new Gs(!1,!1,!1));let Wr=!1,hn=!1,sn=!0,ii=null,fn={box:null,placeable:!1,offscreen:null,occluded:!1},$r={placeable:!1},Yr=null,vr=null,ai=null,Ga=0,ll=0,Fo=0;Ct.textFeatureIndex?Ga=Ct.textFeatureIndex:st.useRuntimeCollisionCircles&&(Ga=st.featureIndex),Ct.verticalTextFeatureIndex&&(ll=Ct.verticalTextFeatureIndex);const Yl=Ct.textBox;if(Yl){const ga=qn=>{let jn=u.ao.horizontal;if(_.allowVerticalPlacement&&!qn&&this.prevPlacement){const Fi=this.prevPlacement.placedOrientations[st.crossTileID];Fi&&(this.placedOrientations[st.crossTileID]=Fi,jn=Fi,this.markUsedOrientation(_,jn,st))}return jn},gs=(qn,jn)=>{if(_.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(const Fi of _.writingModes)if(Fi===u.ao.vertical?(fn=jn(),$r=fn):fn=qn(),fn&&fn.placeable)break}else fn=qn()},so=st.textAnchorOffsetStartIndex,ys=st.textAnchorOffsetEndIndex;if(ys===so){const qn=(jn,Fi)=>{const ln=this.collisionIndex.placeCollisionBox(jn,de,G,Ge,R,Me,xe,A,re.predicate,He,void 0,yt);return ln&&ln.placeable&&(this.markUsedOrientation(_,Fi,st),this.placedOrientations[st.crossTileID]=Fi),ln};gs((()=>qn(Yl,u.ao.horizontal)),(()=>{const jn=Ct.verticalTextBox;return _.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&jn?qn(jn,u.ao.vertical):{box:null,offscreen:null}})),ga(fn&&fn.placeable)}else{let qn=u.aE[(on=(Br=this.prevPlacement)===null||Br===void 0?void 0:Br.variableOffsets[st.crossTileID])===null||on===void 0?void 0:on.anchor];const jn=(ln,kh,Bh)=>{const $f=ln.x2-ln.x1,lp=ln.y2-ln.y1,ju=st.textBoxScale,Bc=ve&&ye==="never"?kh:null;let ya=null,Uo=de==="never"?1:2,Va="never";qn&&Uo++;for(let Go=0;Go<Uo;Go++){for(let ul=so;ul<ys;ul++){const Nu=_.textAnchorOffsets.get(ul);if(qn&&Nu.textAnchor!==qn)continue;const Xl=this.attemptAnchorPlacement(Nu,ln,$f,lp,ju,xe,Me,G,Ge,R,re,Va,st,_,Bh,A,O,Bc,He);if(Xl&&(ya=Xl.placedGlyphBoxes,ya&&ya.placeable))return Wr=!0,ii=Xl.shift,ya}qn?qn=null:Va=de}return p&&!ya&&(ya={box:this.collisionIndex.placeCollisionBox(Yl,"always",G,Ge,R,Me,xe,A,re.predicate,He,void 0,yt).box,offscreen:!1,placeable:!1,occluded:!1}),ya};gs((()=>jn(Yl,Ct.iconBox,u.ao.horizontal)),(()=>{const ln=Ct.verticalTextBox;return _.allowVerticalPlacement&&(!fn||!fn.placeable)&&st.numVerticalGlyphVertices>0&&ln?jn(ln,Ct.verticalIconBox,u.ao.vertical):{box:null,occluded:!0,offscreen:null}})),fn&&(Wr=fn.placeable,sn=fn.offscreen);const Fi=ga(fn&&fn.placeable);if(!Wr&&this.prevPlacement){const ln=this.prevPlacement.variableOffsets[st.crossTileID];ln&&(this.variableOffsets[st.crossTileID]=ln,this.markUsedJustification(_,ln.anchor,st,Fi))}}}if(Yr=fn,Wr=Yr&&Yr.placeable,sn=Yr&&Yr.offscreen,st.useRuntimeCollisionCircles&&st.centerJustifiedTextSymbolIndex>=0){const ga=_.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex),gs=u.ap(_.textSizeData,K,ga),so=S.get("text-padding");vr=this.collisionIndex.placeCollisionCircles(de,ga,_.lineVertexArray,_.glyphOffsetArray,gs,R,U,p,Me,re.predicate,st.collisionCircleDiameter,so,A,He),vr.circles.length&&vr.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Wr=pe||vr.circles.length>0&&!vr.collisionDetected,sn=sn&&vr.offscreen}if(Ct.iconFeatureIndex&&(Fo=Ct.iconFeatureIndex),Ct.iconBox){const ga=gs=>this.collisionIndex.placeCollisionBox(gs,ye,G,Ge,R,Me,xe,O,re.predicate,He,ve&&ii?ii:void 0,yt);$r&&$r.placeable&&Ct.verticalIconBox?(ai=ga(Ct.verticalIconBox),hn=ai.placeable):(ai=ga(Ct.iconBox),hn=ai.placeable),sn=sn&&ai.offscreen}const kc=he||st.numHorizontalGlyphVertices===0&&st.numVerticalGlyphVertices===0,ms=fe||st.numIconVertices===0;kc||ms?ms?kc||(hn=hn&&Wr):Wr=hn&&Wr:hn=Wr=hn&&Wr;const cl=hn&&ai.placeable;if(Wr&&Yr.placeable&&this.collisionIndex.insertCollisionBox(Yr.box,de,S.get("text-ignore-placement"),_.bucketInstanceId,$r&&$r.placeable&&ll?ll:Ga,re.ID),cl&&this.collisionIndex.insertCollisionBox(ai.box,ye,S.get("icon-ignore-placement"),_.bucketInstanceId,Fo,re.ID),vr&&Wr&&this.collisionIndex.insertCollisionCircles(vr.circles,de,S.get("text-ignore-placement"),_.bucketInstanceId,Ga,re.ID),p&&this.storeCollisionData(_.bucketInstanceId,lr,Ct,Yr,ai,vr),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[st.crossTileID]=new Gs((Wr||Ze)&&!Yr?.occluded,(hn||Ue)&&!ai?.occluded,sn||_.justReloaded),c[st.crossTileID]=!0};if(Pe){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const st=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ct=st.length-1;Ct>=0;--Ct){const lr=st[Ct];mt(_.symbolInstances.get(lr),_.collisionArrays[lr],lr)}}else for(let st=r.symbolInstanceStart;st<r.symbolInstanceEnd;st++)mt(_.symbolInstances.get(st),_.collisionArrays[st],st);_.justReloaded=!1}storeCollisionData(r,c,p,_,S,A){if(p.textBox||p.iconBox){let O,R;this.collisionBoxArrays.has(r)?O=this.collisionBoxArrays.get(r):(O=new Map,this.collisionBoxArrays.set(r,O)),O.has(c)?R=O.get(c):(R={text:null,icon:null},O.set(c,R)),p.textBox&&(R.text=_.box),p.iconBox&&(R.icon=S.box)}if(A){let O=this.collisionCircleArrays[r];O===void 0&&(O=this.collisionCircleArrays[r]=[]);for(let R=0;R<A.circles.length;R+=4)O.push(A.circles[R+0]-rn),O.push(A.circles[R+1]-rn),O.push(A.circles[R+2]),O.push(A.collisionDetected?1:0)}}markUsedJustification(r,c,p,_){let S;S=_===u.ao.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.aG(c)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const O of A)O>=0&&(r.text.placedSymbolArray.get(O).crossTileID=S>=0&&O!==S?0:p.crossTileID)}markUsedOrientation(r,c,p){const _=c===u.ao.horizontal||c===u.ao.horizontalOnly?c:0,S=c===u.ao.vertical?c:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const O of A)r.text.placedSymbolArray.get(O).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const _=c?c.symbolFadeChange(r):1,S=c?c.opacities:{},A=c?c.variableOffsets:{},O=c?c.placedOrientations:{};for(const R in this.placements){const U=this.placements[R],G=S[R];G?(this.opacities[R]=new Hr(G,_,U.text,U.icon),p=p||U.text!==G.text.placed||U.icon!==G.icon.placed):(this.opacities[R]=new Hr(null,_,U.text,U.icon,U.skipFade),p=p||U.text||U.icon)}for(const R in S){const U=S[R];if(!this.opacities[R]){const G=new Hr(U,_,!1,!1);G.isHidden()||(this.opacities[R]=G,p=p||U.text.placed||U.icon.placed)}}for(const R in A)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=A[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const p={};for(const _ of c){const S=_.getBucket(r);S&&_.latestFeatureIndex&&r.id===S.layerIds[0]&&this.updateBucketOpacities(S,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(r,c,p,_){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const S=r.layers[0],A=S.layout,O=new Hr(null,0,!1,!1,!0),R=A.get("text-allow-overlap"),U=A.get("icon-allow-overlap"),G=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Z=A.get("text-rotation-alignment")==="map",q=A.get("text-pitch-alignment")==="map",K=A.get("icon-text-fit")!=="none",re=new Hr(null,0,R&&(U||!r.hasIconData()||A.get("icon-optional")),U&&(R||!r.hasTextData()||A.get("text-optional")),!0);!r.collisionArrays&&_&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(_);const he=(de,pe,ye)=>{for(let ge=0;ge<pe/4;ge++)de.opacityVertexArray.emplaceBack(ye);de.hasVisibleVertices=de.hasVisibleVertices||ye!==rs},fe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let de=0;de<r.symbolInstances.length;de++){const pe=r.symbolInstances.get(de),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:ge,crossTileID:xe}=pe;let Me=this.opacities[xe];p[xe]?Me=O:Me||(Me=re,this.opacities[xe]=Me),p[xe]=!0;const ve=pe.numIconVertices>0,Pe=this.placedOrientations[pe.crossTileID],Ze=Pe===u.ao.vertical,Ue=Pe===u.ao.horizontal||Pe===u.ao.horizontalOnly;if(ye>0||ge>0){const He=dh(Me.text);he(r.text,ye,Ze?rs:He),he(r.text,ge,Ue?rs:He);const yt=Me.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach((Ct=>{Ct>=0&&(r.text.placedSymbolArray.get(Ct).hidden=yt||Ze?1:0)})),pe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=yt||Ue?1:0);const mt=this.variableOffsets[pe.crossTileID];mt&&this.markUsedJustification(r,mt.anchor,pe,Pe);const st=this.placedOrientations[pe.crossTileID];st&&(this.markUsedJustification(r,"left",pe,st),this.markUsedOrientation(r,st,pe))}if(ve){const He=dh(Me.icon),yt=!(K&&pe.verticalPlacedIconSymbolIndex&&Ze);pe.placedIconSymbolIndex>=0&&(he(r.icon,pe.numIconVertices,yt?He:rs),r.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=Me.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(he(r.icon,pe.numVerticalIconVertices,yt?rs:He),r.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}const Ge=fe&&fe.has(de)?fe.get(de):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const He=r.collisionArrays[de];if(He){let yt=new u.P(0,0);if(He.textBox||He.verticalTextBox){let mt=!0;if(G){const st=this.variableOffsets[xe];st?(yt=es(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale),Z&&yt._rotate(q?-this.transform.bearingInRadians:this.transform.bearingInRadians)):mt=!1}if(He.textBox||He.verticalTextBox){let st;He.textBox&&(st=Ze),He.verticalTextBox&&(st=Ue),_f(r.textCollisionBox.collisionVertexArray,Me.text.placed,!mt||st,Ge.text,yt.x,yt.y)}}if(He.iconBox||He.verticalIconBox){const mt=!!(!Ue&&He.verticalIconBox);let st;He.iconBox&&(st=mt),He.verticalIconBox&&(st=!mt),_f(r.iconCollisionBox.collisionVertexArray,Me.icon.placed,st,Ge.icon,K?yt.x:0,K?yt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function _f(w,r,c,p,_,S){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-rn,O=p[1]-rn,R=p[2]-rn,U=p[3]-rn;w.emplaceBack(r?1:0,c?1:0,_||0,S||0,A,O),w.emplaceBack(r?1:0,c?1:0,_||0,S||0,R,O),w.emplaceBack(r?1:0,c?1:0,_||0,S||0,R,U),w.emplaceBack(r?1:0,c?1:0,_||0,S||0,A,U)}const au=Math.pow(2,25),ou=Math.pow(2,24),aa=Math.pow(2,17),Aa=Math.pow(2,16),Hd=Math.pow(2,9),Sm=Math.pow(2,8),bf=Math.pow(2,1);function dh(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*au+r*ou+c*aa+r*Aa+c*Hd+r*Sm+c*bf+r}const rs=0;class xf{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,p,_,S){const A=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(A,_,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<A.length;)if(c.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,S())return!0;return!1}}class oa{constructor(r,c,p,_,S,A,O,R){this.placement=new ts(r,c,A,O,R),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(r,c,p){const _=j.now(),S=()=>!this._forceFullPlacement&&j.now()-_>2;for(;this._currentPlacementIndex>=0;){const A=c[r[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=O)&&(!A.maxzoom||A.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new xf(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Vs=512/u.$/2;class ph{constructor(r,c,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let S=0;S<c.length;S++){const A=c.get(S),O=A.key,R=_.get(O);R?R.push(A):_.set(O,[A])}for(const[S,A]of _){const O={positions:A.map((R=>({x:Math.floor(R.anchorX*Vs),y:Math.floor(R.anchorY*Vs)}))),crossTileIDs:A.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new u.aI(O.positions.length,16,Uint16Array);for(const{x:U,y:G}of O.positions)R.add(U,G);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[S]=O}}getScaledCoordinates(r,c){const{x:p,y:_,z:S}=this.tileID.canonical,{x:A,y:O,z:R}=c.canonical,U=Vs/Math.pow(2,R-S),G=(O*u.$+r.anchorY)*U,Z=_*u.$*Vs;return{x:Math.floor((A*u.$+r.anchorX)*U-p*u.$*Vs),y:Math.floor(G-Z)}}findMatches(r,c,p){const _=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let S=0;S<r.length;S++){const A=r.get(S);if(A.crossTileID)continue;const O=this._symbolsByKey[A.key];if(!O)continue;const R=this.getScaledCoordinates(A,c);if(O.index){const U=O.index.range(R.x-_,R.y-_,R.x+_,R.y+_).sort();for(const G of U){const Z=O.crossTileIDs[G];if(!p[Z]){p[Z]=!0,A.crossTileID=Z;break}}}else if(O.positions)for(let U=0;U<O.positions.length;U++){const G=O.positions[U],Z=O.crossTileIDs[U];if(Math.abs(G.x-R.x)<=_&&Math.abs(G.y-R.y)<=_&&!p[Z]){p[Z]=!0,A.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class su{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class pc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const p in this.indexes){const _=this.indexes[p],S={};for(const A in _){const O=_[A];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+c),S[O.tileID.key]=O}this.indexes[p]=S}this.lng=r}addBucket(r,c,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let S=0;S<c.symbolInstances.length;S++)c.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const _=this.usedCrossTileIDs[r.overscaledZ];for(const S in this.indexes){const A=this.indexes[S];if(Number(S)>r.overscaledZ)for(const O in A){const R=A[O];R.tileID.isChildOf(r)&&R.findMatches(c.symbolInstances,r,_)}else{const O=A[r.scaledTo(Number(S)).key];O&&O.findMatches(c.symbolInstances,r,_)}}for(let S=0;S<c.symbolInstances.length;S++){const A=c.symbolInstances.get(S);A.crossTileID||(A.crossTileID=p.generate(),_[A.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ph(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const p of c.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[r][_]}removeStaleBuckets(r){let c=!1;for(const p in this.indexes){const _=this.indexes[p];for(const S in _)r[_[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[S]),delete _[S],c=!0)}return c}}class Ol{constructor(){this.layerIndexes={},this.crossTileIDs=new su,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,p){let _=this.layerIndexes[r.id];_===void 0&&(_=this.layerIndexes[r.id]=new pc);let S=!1;const A={};_.handleWrapJump(p);for(const O of c){const R=O.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(O.tileID,R,this.crossTileIDs)&&(S=!0),A[R.bucketInstanceId]=!0)}return _.removeStaleBuckets(A)&&(S=!0),S}pruneUnusedLayers(r){const c={};r.forEach((p=>{c[p]=!0}));for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}var mc="void main() {fragColor=vec4(1.0);}";const zi={prelude:br(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:br("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:br("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:br(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:br(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:br(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:br(mc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:br(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:br(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:br("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:br("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:br(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:br("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:br(mc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:br(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:br(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:br(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:br(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:br(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:br(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:br(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:br(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:br(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:br(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:br(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:br(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:br(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:br(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:br("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:br("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:br("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:br("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:br(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:br("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function br(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),_=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=S?S.concat(_):_,O={};return{fragmentSource:w=w.replace(c,((R,U,G,Z,q)=>(O[q]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${q}
in ${G} ${Z} ${q};
#else
uniform ${G} ${Z} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${G} ${Z} ${q} = u_${q};
#endif
`))),vertexSource:r=r.replace(c,((R,U,G,Z,q)=>{const K=Z==="float"?"vec2":"vec4",re=q.match(/color/)?"color":K;return O[q]?U==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${G} ${K} a_${q};
out ${G} ${Z} ${q};
#else
uniform ${G} ${Z} u_${q};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${G} ${Z} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${re}(a_${q}, u_${q}_t);
#else
    ${G} ${Z} ${q} = u_${q};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${G} ${K} a_${q};
#else
uniform ${G} ${Z} u_${q};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${G} ${Z} ${q} = a_${q};
#else
    ${G} ${Z} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${G} ${Z} ${q} = unpack_mix_${re}(a_${q}, u_${q}_t);
#else
    ${G} ${Z} ${q} = u_${q};
#endif
`})),staticAttributes:p,staticUniforms:A}}class qs{constructor(r,c,p){this.vertexBuffer=r,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ns=u.aJ([{name:"a_pos",type:"Int16",components:2}]);const to="#define PROJECTION_MERCATOR",zl="mercator";class xr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return zl}get shaderDefine(){return to}get shaderPreludeCode(){return zi.projectionMercator}get vertexShaderPreludeCode(){return zi.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,p,_,S){if(this._cachedMesh)return this._cachedMesh;const A=new u.aL;A.emplaceBack(0,0),A.emplaceBack(u.$,0),A.emplaceBack(0,u.$),A.emplaceBack(u.$,u.$);const O=r.createVertexBuffer(A,ns.members),R=u.aM.simpleSegment(0,0,4,2),U=new u.aN;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const G=r.createIndexBuffer(U);return this._cachedMesh=new qs(O,G,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class _o{constructor(r=0,c=0,p=0,_=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=p,this.right=_}interpolate(r,c,p){return c.top!=null&&r.top!=null&&(this.top=u.C.number(r.top,c.top,p)),c.bottom!=null&&r.bottom!=null&&(this.bottom=u.C.number(r.bottom,c.bottom,p)),c.left!=null&&r.left!=null&&(this.left=u.C.number(r.left,c.left,p)),c.right!=null&&r.right!=null&&(this.right=u.C.number(r.right,c.right,p)),this}getCenter(r,c){const p=u.ah((this.left+r-this.right)/2,0,r),_=u.ah((this.top+c-this.bottom)/2,0,c);return new u.P(p,_)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new _o(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Na(w,r){if(!w.renderWorldCopies||w.lngRange)return;const c=r.lng-w.center.lng;r.lng+=c>180?-360:c<-180?360:0}function gc(w){return Math.max(0,Math.floor(w))}class Pi{constructor(r,c,p,_,S,A){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=A===void 0||!!A,this._minZoom=c||0,this._maxZoom=p||22,this._minPitch=_??0,this._maxPitch=S??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=gc(this._zoom),this._scale=u.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new _o,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=gc(this._zoom),this._scale=u.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new _o(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=u.aO(r,-180,180)*Math.PI/180;var p,_,S,A,O,R,U,G,Z;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=P(),p=this._rotationMatrix,S=-this._bearingInRadians,A=(_=this._rotationMatrix)[0],O=_[1],R=_[2],U=_[3],G=Math.sin(S),Z=Math.cos(S),p[0]=A*Z+R*G,p[1]=O*Z+U*G,p[2]=A*-G+R*Z,p[3]=O*-G+U*Z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=u.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aP(this._fovInRadians)}setFov(r){r=u.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=u.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=u.af(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,p){this._unmodified=!1,this._edgeInsets.interpolate(r,c,p),this._constrain(),this._calcMatrices()}resize(r,c,p=!0){this._width=r,this._height=c,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new _r([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-u.ai,u.ai])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:p,minY:_,maxX:S,maxY:A}=u.a2.fromPoints(c).extend(r);return[new u.P(p,_),new u.P(S,_),new u.P(S,A),new u.P(p,A),new u.P(p,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=u.ag(new Float64Array(16));u.N(r,r,[this._width/2,-this._height/2,1]),u.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=u.ag(new Float64Array(16)),u.N(r,r,[1,-1,1]),u.M(r,r,[-1,-1,0]),u.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,p,_){const S=p!==void 0?p:this.bearing,A=_=_!==void 0?_:this.pitch,O=u.a1.fromLngLat(r,c),R=-Math.cos(u.ae(A)),U=Math.sin(u.ae(A)),G=U*Math.sin(u.ae(S)),Z=-U*Math.cos(u.ae(S));let q=this.elevation;const K=c-q;let re;R*K>=0||Math.abs(R)<.1?(re=1e4,q=c+re*R):re=-K/R;let he,fe,de=u.aQ(1,O.y),pe=0;do{if(pe+=1,pe>10)break;fe=re/de,he=new u.a1(O.x+G*fe,O.y+Z*fe),de=1/he.meterInMercatorCoordinateUnits()}while(Math.abs(re-fe*de)>1e-12);return{center:he.toLngLat(),elevation:q,zoom:u.ak(this.height/2/Math.tan(this.fovInRadians/2)/fe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=u.aj(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/c,_=u.a1.fromLngLat(this.center,this.elevation),S=Ne(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const A=this.calculateCenterFromCameraLngLatAlt(S.toLngLat(),u.aQ(S.z,_.y),this.bearing,this.pitch);this._elevation=A.elevation,this._center=A.center,this.setZoom(A.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=u.aj(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/u.$,1/c/u.$]}}class Cn{constructor(r,c){this.min=r,this.max=c,this.center=u.aR([],u.aS([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],p=u.aT(this.min),_=u.aT(this.max);for(let S=0;S<c.length;S++)p[S]=c[S]?this.min[S]:this.center[S],_[S]=c[S]?this.center[S]:this.max[S];return _[2]=this.max[2],new Cn(p,_)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let p=0;p<r.planes.length;p++){const _=this.intersectsPlane(r.planes[p]);if(_===0)return 0;_===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],p=r[3];for(let _=0;_<3;_++)r[_]>0?(c+=r[_]*this.min[_],p+=r[_]*this.max[_]):(p+=r[_]*this.min[_],c+=r[_]*this.max[_]);return c>=0?2:p<0?0:1}}class ti{distanceToTile2d(r,c,p,_){const S=_.distanceX([r,c]),A=_.distanceY([r,c]);return Math.hypot(S,A)}getWrap(r,c,p){return p}getTileBoundingVolume(r,c,p,_){var S,A;let O=0,R=0;if(_?.terrain){const G=new u.Z(r.z,c,r.z,r.x,r.y),Z=_.terrain.getMinMaxElevation(G);O=(S=Z.minElevation)!==null&&S!==void 0?S:Math.min(0,p),R=(A=Z.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}const U=1<<r.z;return new Cn([c+r.x/U,r.y/U,O],[c+(r.x+1)/U,(r.y+1)/U,R])}allowVariableZoom(r,c){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,_=u.ah(78.5-p/2,0,60);return!!c.terrain||r.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Gn{constructor(r,c,p){this.points=r,this.planes=c,this.aabb=p}static fromInvProjectionMatrix(r,c=1,p=0,_,S){const A=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,p),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((q=>(function(K,re,he,fe){const de=u.aw([],K,re),pe=1/de[3]/he*fe;return u.aY(de,de,[pe,pe,1/de[3],pe])})(q,r,c,O)));_&&(function(q,K,re,he){const fe=he?4:0,de=he?0:4;let pe=0;const ye=[],ge=[];for(let ve=0;ve<4;ve++){const Pe=u.aU([],q[ve+de],q[ve+fe]),Ze=u.aZ(Pe);u.aR(Pe,Pe,1/Ze),ye.push(Ze),ge.push(Pe)}for(let ve=0;ve<4;ve++){const Pe=u.a_(q[ve+fe],ge[ve],re);pe=Pe!==null&&Pe>=0?Math.max(pe,Pe):Math.max(pe,ye[ve])}const xe=(function(ve,Pe){const Ze=u.aU([],ve[Pe[0]],ve[Pe[1]]),Ue=u.aU([],ve[Pe[2]],ve[Pe[1]]),Ge=[0,0,0,0];return u.aV(Ge,u.aW([],Ze,Ue)),Ge[3]=-u.aX(Ge,ve[Pe[0]]),Ge})(q,K),Me=(function(ve,Pe){const Ze=u.a$(ve),Ue=u.b0([],ve,1/Ze),Ge=u.aU([],Pe,u.aR([],Ue,u.aX(Pe,Ue))),He=u.a$(Ge);if(He>0){const yt=Math.sqrt(1-Ue[3]*Ue[3]),mt=u.aR([],Ue,-Ue[3]),st=u.aS([],mt,u.aR([],Ge,yt/He));return u.b1(Pe,st)}return null})(re,xe);if(Me!==null){const ve=Me/u.aX(ge[0],xe);pe=Math.min(pe,ve)}for(let ve=0;ve<4;ve++){const Pe=Math.min(pe,ye[ve]);q[ve+de]=[q[ve+fe][0]+ge[ve][0]*Pe,q[ve+fe][1]+ge[ve][1]*Pe,q[ve+fe][2]+ge[ve][2]*Pe,1]}})(R,A[0],_,S);const U=A.map((q=>{const K=u.aU([],R[q[0]],R[q[1]]),re=u.aU([],R[q[2]],R[q[1]]),he=u.aV([],u.aW([],K,re)),fe=-u.aX(he,R[q[1]]);return he.concat(fe)})),G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Z=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const q of R)for(let K=0;K<3;K++)G[K]=Math.min(G[K],q[K]),Z[K]=Math.max(Z[K],q[K]);return new Gn(R,U,new Cn(G,Z))}}class Gr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,p,_,S){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Pi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(A,O)=>this.getConstrained(A,O)},r,c,p,_,S),this._coveringTilesDetailsProvider=new ti}clone(){const r=new Gr;return r.apply(this),r}apply(r,c,p){this._helper.apply(r,c,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new u.b2(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new u.P(0,0)),_=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),O=Math.floor(Math.min(p.x,_.x,S.x,A.x)),R=Math.floor(Math.max(p.x,_.x,S.x,A.x)),U=1;for(let G=O-U;G<=R+U;G++)G!==0&&c.push(new u.b2(G,r))}return c}getCameraFrustum(){return Gn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,c){const p=u.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(c,p),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),A=u.a1.fromLngLat(r),O=new u.a1(A.x-(_.x-S.x),A.y-(_.y-S.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(u.a1.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.a1.fromLngLat(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const p=c||0,_=[r.x,r.y,0,1],S=[r.x,r.y,1,1];u.aw(_,_,this._pixelMatrixInverse),u.aw(S,S,this._pixelMatrixInverse);const A=_[3],O=S[3],R=_[1]/A,U=S[1]/O,G=_[2]/A,Z=S[2]/O,q=G===Z?0:(p-G)/(Z-G);return new u.a1(u.C.number(_[0]/A,S[0]/O,q)/this.worldSize,u.C.number(R,U,q)/this.worldSize,p)}coordinatePoint(r,c=0,p=this._pixelMatrix){const _=[r.x*this.worldSize,r.y*this.worldSize,c,1];return u.aw(_,_,p),new u.P(_[0]/_[3],_[1]/_[3])}getBounds(){const r=Math.max(0,this._helper._height/2-we(this));return new _r().extend(this.screenPointToLocation(new u.P(0,r))).extend(this.screenPointToLocation(new u.P(this._helper._width,r))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-we(this)}calculatePosMatrix(r,c=!1,p){var _;const S=(_=r.key)!==null&&_!==void 0?_:u.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),A=c?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(S)){const U=A.get(S);return p?U.f32:U.f64}const O=Ce(r,this.worldSize);u.O(O,c?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return A.set(S,R),p?R.f32:R.f64}calculateFogMatrix(r){const c=r.key,p=this._fogMatrixCacheF32;if(p.has(c))return p.get(c);const _=Ce(r,this.worldSize);return u.O(_,this._fogMatrix,_),p.set(c,new Float32Array(_)),p.get(c)}getConstrained(r,c){c=u.ah(+c,this.minZoom,this.maxZoom);const p={center:new u.S(r.lng,r.lat),zoom:c};let _=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){const ye=179.9999999999;_=[-ye,ye]}const S=this.tileSize*u.af(p.zoom);let A=0,O=S,R=0,U=S,G=0,Z=0;const{x:q,y:K}=this.size;if(this._helper._latRange){const ye=this._helper._latRange;A=u.U(ye[1])*S,O=u.U(ye[0])*S,O-A<K&&(G=K/(O-A))}_&&(R=u.aO(u.V(_[0])*S,0,S),U=u.aO(u.V(_[1])*S,0,S),U<R&&(U+=S),U-R<q&&(Z=q/(U-R)));const{x:re,y:he}=se(S,r);let fe,de;const pe=Math.max(Z||0,G||0);if(pe){const ye=new u.P(Z?(U+R)/2:re,G?(O+A)/2:he);return p.center=_e(S,ye).wrap(),p.zoom+=u.ak(pe),p}if(this._helper._latRange){const ye=K/2;he-ye<A&&(de=A+ye),he+ye>O&&(de=O-ye)}if(_){const ye=(R+U)/2;let ge=re;this._helper._renderWorldCopies&&(ge=u.aO(re,ye-S/2,ye+S/2));const xe=q/2;ge-xe<R&&(fe=R+xe),ge+xe>U&&(fe=U-xe)}if(fe!==void 0||de!==void 0){const ye=new u.P(fe??re,de??he);p.center=_e(S,ye).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,_)}_calculateNearFarZIfNeeded(r,c,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=r-_*this._helper._pixelPerMeter/Math.cos(c),A=_<0?S:r,O=Math.PI/2+this.pitchInRadians,R=u.ae(this.fov)*(Math.abs(Math.cos(u.ae(this.roll)))*this.height+Math.abs(Math.sin(u.ae(this.roll)))*this.width)/this.height*(.5+p.y/this.height),U=Math.sin(R)*A/Math.sin(u.ah(Math.PI-O-R,.01,Math.PI-.01)),G=we(this),Z=Math.atan(G/this._helper.cameraToCenterDistance),q=u.ae(.75),K=Z>q?2*Z*(.5+p.y/(2*G)):q,re=Math.sin(K)*A/Math.sin(u.ah(Math.PI-O-K,.01,Math.PI-.01)),he=Math.min(U,re);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*he+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=se(this.worldSize,this.center),p=c.x,_=c.y;this._helper._pixelPerMeter=u.aj(1,this.center.lat)*this.worldSize;const S=u.ae(Math.min(this.pitch,te)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let O;this._calculateNearFarZIfNeeded(A,S,r),O=new Float64Array(16),u.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.aq(this._invProjMatrix,O),O[8]=2*-r.x/this._helper._width,O[9]=2*r.y/this._helper._height,this._projectionMatrix=u.b5(O),u.N(O,O,[1,-1,1]),u.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),u.b6(O,O,-this.rollInRadians),u.b7(O,O,this.pitchInRadians),u.b6(O,O,-this.bearingInRadians),u.M(O,O,[-p,-_,0]),this._mercatorMatrix=u.N([],O,[this.worldSize,this.worldSize,this.worldSize]),u.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),u.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=u.aq([],O);const R=[0,0,-1,1];u.aw(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),u.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,u.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.M(this._fogMatrix,this._fogMatrix,[-p,-_,0]),u.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const U=this._helper._width%2/2,G=this._helper._height%2/2,Z=Math.cos(this.bearingInRadians),q=Math.sin(-this.bearingInRadians),K=p-Math.round(p)+Z*U+q*G,re=_-Math.round(_)+Z*G+q*U,he=new Float64Array(O);if(u.M(he,he,[K>.5?K-1:K,re>.5?re-1:re,0]),this._alignedProjMatrix=he,O=u.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new u.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.aw(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=u.aj(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const p=u.a1.fromLngLat(r),_=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(r){const{overscaledTileID:c,aligned:p,applyTerrainMatrix:_}=r,S=this._helper.getMercatorTileCoordinates(c),A=c?this.calculatePosMatrix(c,p,!0):null;let O;return O=c&&c.terrainRttPosMatrix32f&&_?c.terrainRttPosMatrix32f:A||u.b8(),{mainMatrix:O,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,p){return 1}transformLightDirection(r){return u.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,p,_){const S=this.calculatePosMatrix(p);let A;_?(A=[r,c,_(r,c),1],u.aw(A,A,S)):(A=[r,c,0,1],yo(A,A,S));const O=A[3];return{point:new u.P(A[0]/O,A[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const p=u.a1.fromLngLat(r,c),_=p.meterInMercatorCoordinateUnits(),S=u.b9();return u.M(S,S,[p.x,p.y,p.z]),u.b6(S,S,Math.PI),u.b7(S,S,Math.PI/2),u.N(S,S,[-_,_,_]),S}getProjectionDataForCustomLayer(r=!0){const c=new u.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),_=Ce(c,this.worldSize);u.O(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const S=[u.$,u.$,this.worldSize/this._helper.pixelsPerMeter],A=u.ba();return u.N(A,_,S),p.fallbackMatrix=A,p.mainMatrix=A,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function wf(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function hi(w){if(w.useSlerp)if(w.k<1){const r=u.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=u.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),p=new Float64Array(4);u.bc(p,r,c,w.k);const _=u.bd(p);w.tr.setRoll(_.roll),w.tr.setPitch(_.pitch),w.tr.setBearing(_.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(u.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(u.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(u.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Vn(w,r,c,p,_){const S=_.padding,A=se(_.worldSize,c.getNorthWest()),O=se(_.worldSize,c.getNorthEast()),R=se(_.worldSize,c.getSouthEast()),U=se(_.worldSize,c.getSouthWest()),G=u.ae(-p),Z=A.rotate(G),q=O.rotate(G),K=R.rotate(G),re=U.rotate(G),he=new u.P(Math.max(Z.x,q.x,re.x,K.x),Math.max(Z.y,q.y,re.y,K.y)),fe=new u.P(Math.min(Z.x,q.x,re.x,K.x),Math.min(Z.y,q.y,re.y,K.y)),de=he.sub(fe),pe=(_.width-(S.left+S.right+r.left+r.right))/de.x,ye=(_.height-(S.top+S.bottom+r.top+r.bottom))/de.y;if(ye<0||pe<0)return void wf();const ge=Math.min(u.ak(_.scale*Math.min(pe,ye)),w.maxZoom),xe=u.P.convert(w.offset),Me=new u.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(u.ae(p)),ve=xe.add(Me).mult(_.scale/u.af(ge));return{center:_e(_.worldSize,A.add(R).div(2).sub(ve)),zoom:ge,bearing:p}}class _i{get useGlobeControls(){return!1}handlePanInertia(r,c){const p=r.mag(),_=Math.abs(we(c));return{easingOffset:r.mult(Math.min(.75*_/p,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,p){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,c,p,_,S){return Vn(r,c,p,_,S)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(u.S.convert(c.center))}handleEaseTo(r,c){const p=r.zoom,_=r.padding,S={roll:r.roll,pitch:r.pitch,bearing:r.bearing},A={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},O=c.zoom!==void 0,R=!r.isPaddingEqual(c.padding);let U=!1;const G=O?+c.zoom:r.zoom;let Z=r.centerPoint.add(c.offsetAsPoint);const q=r.screenPointToLocation(Z),{center:K,zoom:re}=r.getConstrained(u.S.convert(c.center||q),G??p);Na(r,K);const he=se(r.worldSize,q),fe=se(r.worldSize,K).sub(he),de=u.af(re-p);return U=re!==p,{easeFunc:pe=>{if(U&&r.setZoom(u.C.number(p,re,pe)),u.be(S,A)||hi({startEulerAngles:S,endEulerAngles:A,tr:r,k:pe,useSlerp:S.roll!=A.roll}),R&&(r.interpolatePadding(_,c.padding,pe),Z=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const ye=u.af(r.zoom-p),ge=re>p?Math.min(2,de):Math.max(.5,de),xe=Math.pow(ge,1-pe),Me=_e(r.worldSize,he.add(fe.mult(pe*xe)).mult(ye));r.setLocationAtPoint(r.renderWorldCopies?Me.wrap():Me,Z)}},isZooming:U,elevationCenter:K}}handleFlyTo(r,c){const p=c.zoom!==void 0,_=r.zoom,S=r.getConstrained(u.S.convert(c.center||c.locationAtOffset),p?+c.zoom:_),A=S.center,O=S.zoom;Na(r,A);const R=se(r.worldSize,c.locationAtOffset),U=se(r.worldSize,A).sub(R),G=U.mag(),Z=u.af(O-_);let q;if(c.minZoom!==void 0){const K=Math.min(+c.minZoom,_,O),re=r.getConstrained(A,K).zoom;q=u.af(re-_)}return{easeFunc:(K,re,he,fe)=>{r.setZoom(K===1?O:_+u.ak(re));const de=K===1?A:_e(r.worldSize,R.add(U.mult(he)).mult(re));r.setLocationAtPoint(r.renderWorldCopies?de.wrap():de,fe)},scaleOfZoom:Z,targetCenter:A,scaleOfMinZoom:q,pixelPathLength:G}}}class Vr{constructor(r,c,p){this.blendFunction=r,this.blendColor=c,this.mask=p}}Vr.Replace=[1,0],Vr.disabled=new Vr(Vr.Replace,u.bf.transparent,[!1,!1,!1,!1]),Vr.unblended=new Vr(Vr.Replace,u.bf.transparent,[!0,!0,!0,!0]),Vr.alphaBlended=new Vr([1,771],u.bf.transparent,[!0,!0,!0,!0]);const sa=2305;class Zt{constructor(r,c,p){this.enable=r,this.mode=c,this.frontFace=p}}Zt.disabled=new Zt(!1,1029,sa),Zt.backCCW=new Zt(!0,1029,sa),Zt.frontCCW=new Zt(!0,1028,sa);class rr{constructor(r,c,p){this.func=r,this.mask=c,this.range=p}}rr.ReadOnly=!1,rr.ReadWrite=!0,rr.disabled=new rr(519,rr.ReadOnly,[0,1]);const bo=7680;class Tr{constructor(r,c,p,_,S,A){this.test=r,this.ref=c,this.mask=p,this.fail=_,this.depthFail=S,this.pass=A}}Tr.disabled=new Tr({func:519,mask:0},0,0,bo,bo,bo);const Ri=new WeakMap;function ro(w){var r;if(Ri.has(w))return Ri.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ri.set(w,c),c}}class Dn{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,p=c.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new u.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const S=new u.aN;S.emplaceBack(0,1,2),this._fullscreenTriangle=new qs(c.createVertexBuffer(_,ns.members),c.createIndexBuffer(S),u.aM.simpleSegment(0,0,_.length,S.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(p.TEXTURE1);const A=p.createTexture();p.bindTexture(p.TEXTURE_2D,A),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),ro(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:u.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,rr.disabled,Tr.disabled,Vr.unblended,Zt.disabled,((S,A)=>({u_input:S,u_output_expected:A}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ro(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const S=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ro(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Dn._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const xo=u.$/128;function yc(w,r){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,p=c+(w.generateBorders?2:0),_=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),S=p+1,A=_+1,O=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,U=c+(w.generateBorders?1:0),G=c+(w.generateBorders||w.extendToSouthPole?1:0),Z=S*A,q=p*_*6,K=S*A>65536;if(K&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const re=K||r==="32bit",he=new Int16Array(2*Z);let fe=0;for(let ye=R;ye<=G;ye++)for(let ge=O;ge<=U;ge++){let xe=ge/c*u.$;ge===-1&&(xe=-xo),ge===c+1&&(xe=u.$+xo);let Me=ye/c*u.$;ye===-1&&(Me=w.extendToNorthPole?u.bh:-xo),ye===c+1&&(Me=w.extendToSouthPole?u.bi:u.$+xo),he[fe++]=xe,he[fe++]=Me}const de=re?new Uint32Array(q):new Uint16Array(q);let pe=0;for(let ye=0;ye<_;ye++)for(let ge=0;ge<p;ge++){const xe=ge+1+ye*S,Me=ge+(ye+1)*S,ve=ge+1+(ye+1)*S;de[pe++]=ge+ye*S,de[pe++]=Me,de[pe++]=xe,de[pe++]=xe,de[pe++]=Me,de[pe++]=ve}return{vertices:he.buffer.slice(0),indices:de.buffer.slice(0),uses32bitIndices:re}}const wo=new u.aK({fill:new u.bj(128,2),line:new u.bj(512,0),tile:new u.bj(128,32),stencil:new u.bj(128,1),circle:3});class lu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return zi.projectionGlobe}get vertexShaderPreludeCode(){return zi.projectionMercator.vertexSource}get subdivisionGranularity(){return wo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Dn(r));const c=u.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(c,p),S=j.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=S);const A=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bl(A))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,p,_,S){const A=(S==="stencil"?wo.stencil:wo.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:A,generateBorders:p,extendToNorthPole:c.y===0&&_,extendToSouthPole:c.y===(1<<c.z)-1&&_})}_getMesh(r,c){const p=this._getMeshKey(c);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=(function(S,A){const O=yc(A,"16bit"),R=u.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),U=u.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new qs(S.createVertexBuffer(R,ns.members),S.createIndexBuffer(U),u.aM.simpleSegment(0,0,R.length,U.length))})(r,c);return this._tileMeshCache[p]=_,_}recalculate(r){}hasTransition(){const r=j.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const vc=new u.r({type:new u.D(u.v.projection.type)});class _c extends u.E{constructor(r){super(),this._transitionable=new u.t(vc,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.F(0)),this._mercatorProjection=new xr,this._verticalPerspectiveProjection=new lu}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof u.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,p,_,S){return this.currentProjection.getMeshFromTileID(r,c,p,_,S)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function $s(w){const r=bc(w.worldSize,w.center.lat);return 2*Math.PI*r}function la(w,r,c,p,_){const S=1/(1<<_),A=r/u.$*S+p*S,O=u.bo((w/u.$*S+c*S)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,U=Math.cos(R),G=new Float64Array(3);return G[0]=Math.sin(O)*U,G[1]=Math.sin(R),G[2]=Math.cos(O)*U,G}function fi(w){return(function(r,c){const p=Math.cos(c),_=new Float64Array(3);return _[0]=Math.sin(r)*p,_[1]=Math.sin(c),_[2]=Math.cos(r)*p,_})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function bc(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function cu(w){const r=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const p=w[0]/c,_=Math.acos(w[2]/c),S=(p>0?_:-_)/Math.PI*180;return new u.S(u.aO(S,-180,180),r)}return new u.S(0,r)}function Rl(w){return Math.cos(w*Math.PI/180)}function wn(w,r){const c=Rl(w),p=Rl(r);return u.ak(p/c)}function Yd(w,r){const c=w.rotate(r.bearingInRadians),p=r.zoom+wn(r.center.lat,0),_=u.bk(1/Rl(r.center.lat),1/Rl(Math.min(Math.abs(r.center.lat),60)),u.bn(p,7,3,0,1)),S=360/$s({worldSize:r.worldSize,center:{lat:r.center.lat}});return new u.S(r.center.lng-c.x*S*_,u.ah(r.center.lat+c.y*S,-u.ai,u.ai))}function uu(w){const r=.5*w,c=Math.sin(r),p=Math.cos(r);return Math.log(c+p)-Math.log(p-c)}function Sf(w,r,c,p){const _=w.lat+c*p;if(Math.abs(c)>1){const S=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,A=Math.abs(w.lat+c)*Math.PI/180,O=uu(S+p*(A-S)),R=uu(S),U=uu(A);return new u.S(w.lng+r*((O-R)/(U-R)),_)}return new u.S(w.lng+r*p,_)}class Tm{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,p,_){const S=`${r.z}_${r.x}_${r.y}_${_?.terrain?"t":""}`,A=this._cache.get(S);if(A)return A;const O=this._cachePrevious.get(S);if(O)return this._cache.set(S,O),O;const R=this._boundingVolumeFactory(r,c,p,_);return this._cache.set(S,R),this._hadAnyChanges=!0,R}}class xc{constructor(r,c,p,_){this.min=p,this.max=_,this.points=r,this.planes=c}static fromAabb(r,c){const p=[];for(let _=0;_<8;_++)p.push([1&~_?r[0]:c[0],(_>>1&1)==1?c[1]:r[1],(_>>2&1)==1?c[2]:r[2]]);return new xc(p,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,p){const _=u.br([],p[0],p[1],p[2]),S=u.bs([],[c[0],0,0],_),A=u.bs([],[0,c[1],0],_),O=u.bs([],[0,0,c[2]],_),R=[...r],U=[...r];for(let Z=0;Z<8;Z++)for(let q=0;q<3;q++){const K=r[q]+S[q]*(1&~Z?-1:1)+A[q]*((Z>>1&1)==1?1:-1)+O[q]*((Z>>2&1)==1?1:-1);R[q]=Math.min(R[q],K),U[q]=Math.max(U[q],K)}const G=[];for(let Z=0;Z<8;Z++){const q=[...r];u.aS(q,q,u.aR([],S,1&~Z?-1:1)),u.aS(q,q,u.aR([],A,(Z>>1&1)==1?1:-1)),u.aS(q,q,u.aR([],O,(Z>>2&1)==1?1:-1)),G.push(q)}return new xc(G,[[...S,-u.aX(S,G[0])],[...A,-u.aX(A,G[0])],[...O,-u.aX(O,G[0])],[-S[0],-S[1],-S[2],-u.aX(S,G[7])],[-A[0],-A[1],-A[2],-u.aX(A,G[7])],[-O[0],-O[1],-O[2],-u.aX(O,G[7])]],R,U)}intersectsFrustum(r){let c=!0;const p=this.points.length,_=this.planes.length,S=r.planes.length,A=r.points.length;for(let O=0;O<S;O++){const R=r.planes[O];let U=0;for(let G=0;G<p;G++){const Z=this.points[G];R[0]*Z[0]+R[1]*Z[1]+R[2]*Z[2]+R[3]>=0&&U++}if(U===0)return 0;U<p&&(c=!1)}if(c)return 2;for(let O=0;O<_;O++){const R=this.planes[O];let U=0;for(let G=0;G<A;G++){const Z=r.points[G];R[0]*Z[0]+R[1]*Z[1]+R[2]*Z[2]+R[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let p=0;for(let _=0;_<c;_++){const S=this.points[_];r[0]*S[0]+r[1]*S[1]+r[2]*S[2]+r[3]>=0&&p++}return p===c?2:p===0?0:1}}function bi(w,r,c){const p=w-r;return p<0?-p:Math.max(0,p-c)}function hu(w,r,c,p,_){const S=w-c;let A;return A=S<0?Math.min(-S,1+S-_):S>1?Math.min(Math.max(S-_,0),1-S):0,Math.max(A,bi(r,p,_))}class So{constructor(){this._boundingVolumeCache=new Tm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,p,_){const S=1<<p.z,A=1/S,O=p.x/S,R=p.y/S;let U=2;return U=Math.min(U,hu(r,c,O,R,A)),U=Math.min(U,hu(r,c,O+.5,-R-A,A)),U=Math.min(U,hu(r,c,O+.5,2-R-A,A)),U}getWrap(r,c,p){const _=1<<c.z,S=1/_,A=c.x/_,O=bi(r.x,A,S),R=bi(r.x,A-1,S),U=bi(r.x,A+1,S),G=Math.min(O,R,U);return G===U?1:G===R?-1:0}allowVariableZoom(r,c){return It(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,p,_){return this._boundingVolumeCache.getTileBoundingVolume(r,c,p,_)}_computeTileBoundingVolume(r,c,p,_){var S,A;let O=0,R=0;if(_?.terrain){const U=new u.Z(r.z,c,r.z,r.x,r.y),G=_.terrain.getMinMaxElevation(U);O=(S=G.minElevation)!==null&&S!==void 0?S:Math.min(0,p),R=(A=G.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}if(O/=u.bu,R/=u.bu,O+=1,R+=1,r.z<=0)return xc.fromAabb([-R,-R,-R],[R,R,R]);if(r.z===1)return xc.fromAabb([r.x===0?-R:0,r.y===0?0:-R,-R],[r.x===0?0:R,r.y===0?R:0,R]);{const U=[la(0,0,r.x,r.y,r.z),la(u.$,0,r.x,r.y,r.z),la(u.$,u.$,r.x,r.y,r.z),la(0,u.$,r.x,r.y,r.z)],G=[];for(const Ge of U)G.push(u.aR([],Ge,R));if(R!==O)for(const Ge of U)G.push(u.aR([],Ge,O));r.y===0&&G.push([0,1,0]),r.y===(1<<r.z)-1&&G.push([0,-1,0]);const Z=[1,1,1],q=[-1,-1,-1];for(const Ge of G)for(let He=0;He<3;He++)Z[He]=Math.min(Z[He],Ge[He]),q[He]=Math.max(q[He],Ge[He]);const K=la(u.$/2,u.$/2,r.x,r.y,r.z),re=u.aW([],[0,1,0],K);u.aV(re,re);const he=u.aW([],K,re);u.aV(he,he);const fe=u.aW([],U[2],U[1]);u.aV(fe,fe);const de=u.aW([],U[0],U[3]);u.aV(de,de),G.push(u.aR([],K,R)),r.y>=(1<<r.z)/2&&G.push(u.aR([],la(u.$/2,0,r.x,r.y,r.z),R)),r.y<(1<<r.z)/2&&G.push(u.aR([],la(u.$/2,u.$,r.x,r.y,r.z),R));const pe=fu(K,G),ye=fu(he,G),ge=[-K[0],-K[1],-K[2],pe.max],xe=[K[0],K[1],K[2],-pe.min],Me=[-he[0],-he[1],-he[2],ye.max],ve=[he[0],he[1],he[2],-ye.min],Pe=[...fe,0],Ze=[...de,0],Ue=[];return r.y===0?Ue.push(u.bt(Ze,Pe,ge),u.bt(Ze,Pe,xe)):Ue.push(u.bt(Me,Pe,ge),u.bt(Me,Pe,xe),u.bt(Me,Ze,ge),u.bt(Me,Ze,xe)),r.y===(1<<r.z)-1?Ue.push(u.bt(Ze,Pe,ge),u.bt(Ze,Pe,xe)):Ue.push(u.bt(ve,Pe,ge),u.bt(ve,Pe,xe),u.bt(ve,Ze,ge),u.bt(ve,Ze,xe)),new xc(Ue,[ge,xe,Me,ve,Pe,Ze],Z,q)}}}function fu(w,r){let c=1/0,p=-1/0;for(const _ of r){const S=u.aX(w,_);c=Math.min(c,S),p=Math.max(p,S)}return{min:c,max:p}}class du{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=u.bv(),this._projectionMatrix=u.b9(),this._globeViewProjMatrix32f=u.b8(),this._globeViewProjMatrixNoCorrection=u.b9(),this._globeViewProjMatrixNoCorrectionInverted=u.b9(),this._globeProjMatrixInverted=u.b9(),this._cameraPosition=u.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Pi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new So}clone(){const r=new du;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=u.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:p}=r,_=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,p=this.cameraToCenterDistance/r,_=Math.sin(c)*p,S=Math.cos(c)*p+1,A=1/Math.sqrt(_*_+S*S)*1;let O=-_,R=S;const U=Math.sqrt(O*O+R*R);O/=U,R/=U;const G=[0,O,R];u.bw(G,G,[0,0,0],-this.bearingInRadians),u.bx(G,G,[0,0,0],-1*this.center.lat*Math.PI/180),u.by(G,G,[0,0,0],this.center.lng*Math.PI/180);const Z=1/u.aZ(G);return u.aR(G,G,Z),[...G,-A*Z]}isLocationOccluded(r){return!this.isSurfacePointVisible(fi(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),S=[Math.sin(c)*_,Math.sin(p),Math.cos(c)*_],A=[S[2],0,-S[0]],O=[0,0,0];u.aW(O,A,S),u.aV(A,A),u.aV(O,O);const R=[0,0,0];return u.aV(R,[A[0]*r[0]+O[0]*r[1]+S[0]*r[2],A[1]*r[0]+O[1]*r[1]+S[1]*r[2],A[2]*r[0]+O[2]*r[1]+S[2]*r[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,p){const _=(function(O,R,U){const G=1/(1<<U.z);return new u.a1(O/u.$*G+U.x*G,R/u.$*G+U.y*G)})(r,c,p.canonical),S=(A=_.y,[u.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(r,c,p,_){const S=p.canonical,A=la(r,c,S.x,S.y,S.z),O=1+(_?_(r,c):0)/u.bu,R=[A[0]*O,A[1]*O,A[2]*O,1];u.aw(R,R,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,G=U[0]*A[0]+U[1]*A[1]+U[2]*A[2]+U[3]<0;return{point:new u.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:G}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=bc(this.worldSize,this.center.lat),c=u.ba(),p=u.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),u.b4(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;c[8]=2*-_.x/this._helper._width,c[9]=2*_.y/this._helper._height,this._projectionMatrix=u.b5(c),this._globeProjMatrixInverted=u.ba(),u.aq(this._globeProjMatrixInverted,c),u.M(c,c,[0,0,-this.cameraToCenterDistance]),u.b6(c,c,this.rollInRadians),u.b7(c,c,-this.pitchInRadians),u.b6(c,c,this.bearingInRadians),u.M(c,c,[0,0,-r]);const S=u.bp();S[0]=r,S[1]=r,S[2]=r,u.b7(p,c,this.center.lat*Math.PI/180),u.bz(p,p,-this.center.lng*Math.PI/180),u.N(p,p,S),this._globeViewProjMatrixNoCorrection=p,u.b7(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bz(c,c,-this.center.lng*Math.PI/180),u.N(c,c,S),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=u.ba(),u.aq(this._globeViewProjMatrixNoCorrectionInverted,p);const A=u.bp();this._cameraPosition=u.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,u.bw(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),u.bx(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),u.bw(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),u.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bx(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),u.by(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const O=u.b5(this._globeViewProjMatrixNoCorrectionInverted);u.N(O,O,[1,1,-1]),this._cachedFrustum=Gn.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){u.w("calculateFogMatrix is not supported on globe projection.");const c=u.ba();return u.ag(c),c}getVisibleUnwrappedCoordinates(r){return[new u.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=fi(r);u.aR(p,p,1+c/u.bu);const _=u.bv();return u.aw(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,p=[new u.P(0,0),new u.P(r,0),new u.P(this.width,0),new u.P(this.width,c),new u.P(this.width,this.height),new u.P(r,this.height),new u.P(0,this.height),new u.P(0,c)],_=[];for(const Z of p)_.push(this.unprojectScreenPoint(Z));let S=0,A=0,O=0,R=0;const U=this.center;for(const Z of _){const q=u.bA(U.lng,Z.lng),K=u.bA(U.lat,Z.lat);q<A&&(A=q),q>S&&(S=q),K<R&&(R=K),K>O&&(O=K)}const G=[U.lng+A,U.lat+R,U.lng+S,U.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(G[3]=90,G[0]=-180,G[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(G[1]=-90,G[0]=-180,G[2]=180),new _r(G)}getConstrained(r,c){const p=u.ah(r.lat,-u.ai,u.ai),_=u.ah(+c,this.minZoom+wn(0,p),this.maxZoom);return{center:new u.S(r.lng,p),zoom:_}}calculateCenterFromCameraLngLatAlt(r,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,_)}setLocationAtPoint(r,c){const p=fi(this.unprojectScreenPoint(c)),_=fi(r),S=u.bp();u.bB(S);const A=u.bp();u.by(A,p,S,-this.center.lng*Math.PI/180),u.bx(A,A,S,this.center.lat*Math.PI/180);const O=_[0]*_[0]+_[2]*_[2],R=A[0]*A[0];if(O<R)return;const U=Math.sqrt(O-R),G=-U,Z=u.bC(_[0],_[2],A[0],U),q=u.bC(_[0],_[2],A[0],G),K=u.bp();u.by(K,_,S,-Z);const re=u.bC(K[1],K[2],A[1],A[2]),he=u.bp();u.by(he,_,S,-q);const fe=u.bC(he[1],he[2],A[1],A[2]),de=.5*Math.PI,pe=re>=-de&&re<=de,ye=fe>=-de&&fe<=de;let ge,xe;if(pe&&ye){const Ze=this.center.lng*Math.PI/180,Ue=this.center.lat*Math.PI/180;u.bD(Z,Ze)+u.bD(re,Ue)<u.bD(q,Ze)+u.bD(fe,Ue)?(ge=Z,xe=re):(ge=q,xe=fe)}else if(pe)ge=Z,xe=re;else{if(!ye)return;ge=q,xe=fe}const Me=ge/Math.PI*180,ve=xe/Math.PI*180,Pe=this.center.lat;this.setCenter(new u.S(Me,u.ah(ve,-90,90))),this.setZoom(this.zoom+wn(Pe,this.center.lat))}locationToScreenPoint(r,c){const p=fi(r);if(c){const _=c.getElevationForLngLatZoom(r,this._helper._tileZoom);u.aR(p,p,1+_/u.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const c=u.bv();return u.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new u.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const p=c.pointCoordinate(r);if(p)return p}return u.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var p;return(p=this.screenPointToMercatorCoordinate(r,c))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,c){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(r){const c=u.bv();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,u.aw(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const p=u.bp();p[0]=c[0]-this._cameraPosition[0],p[1]=c[1]-this._cameraPosition[1],p[2]=c[2]-this._cameraPosition[2];const _=u.bp();return u.aV(_,p),_}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=u.bv();return u.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const p=u.aX(r,c),_=u.bp(),S=u.bp();u.aR(S,c,p),u.aU(_,r,S);const A=1-u.aX(_,_);if(A<0)return null;const O=u.aX(r,r)-1,R=-p+(p<0?1:-1)*Math.sqrt(A),U=O/R,G=R;return{tMin:Math.min(U,G),tMax:Math.max(U,G)}}unprojectScreenPoint(r){const c=this._cameraPosition,p=this.getRayDirectionFromPixel(r),_=this.rayPlanetIntersection(c,p);if(_){const G=u.bp();u.aS(G,c,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const Z=u.bp();return u.aV(Z,G),cu(Z)}const S=this._cachedClippingPlane,A=S[0]*p[0]+S[1]*p[1]+S[2]*p[2],O=-u.b1(S,c)/A,R=u.bp();if(O>0)u.aS(R,c,[p[0]*O,p[1]*O,p[2]*O]);else{const G=u.bp();u.aS(G,c,[2*p[0],2*p[1],2*p[2]]);const Z=u.b1(this._cachedClippingPlane,G);u.aU(R,G,[this._cachedClippingPlane[0]*Z,this._cachedClippingPlane[1]*Z,this._cachedClippingPlane[2]*Z])}const U=(function(G){const Z=u.bp();return Z[0]=G[0]*-G[3],Z[1]=G[1]*-G[3],Z[2]=G[2]*-G[3],{center:Z,radius:Math.sqrt(1-G[3]*G[3])}})(S);return cu((function(G,Z,q){const K=u.bp();u.aU(K,q,G);const re=u.bp();return u.bq(re,G,K,Z/u.a$(K)),re})(U.center,U.radius,R))}getMatrixForModel(r,c){const p=u.S.convert(r),_=1/u.bu,S=u.b9();return u.bz(S,S,p.lng/180*Math.PI),u.b7(S,S,-p.lat/180*Math.PI),u.M(S,S,[0,0,1+c/u.bu]),u.b7(S,S,.5*Math.PI),u.N(S,S,[_,_,_]),S}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new u.Z(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class kl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,p){return this._helper.interpolatePadding(r,c,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,p=!0){this._helper.resize(r,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Pi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new Gr,this._verticalPerspectiveTransform=new du}clone(){const r=new kl;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:c.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return u.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,p){const _=this._mercatorTransform.getPitchedTextCorrection(r,c,p),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,p);return u.bk(_,S,this._globeness)}projectTileCoordinates(r,c,p,_){return this.currentTransform.projectTileCoordinates(r,c,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,p,_)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=c.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class ki{get useGlobeControls(){return!0}handlePanInertia(r,c){const p=Yd(r,c);return Math.abs(p.lng-c.center.lng)>180&&(p.lng=c.center.lng+179.5*Math.sign(p.lng-c.center.lng)),{easingCenter:p,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const p=r.around,_=c.screenPointToLocation(p);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const S=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const A=c.zoom-S;if(A===0)return;const O=u.bA(c.center.lng,_.lng),R=O/(Math.abs(O/180)+1),U=u.bA(c.center.lat,_.lat),G=c.getRayDirectionFromPixel(p),Z=c.cameraPosition,q=-1*u.aX(Z,G),K=u.bp();u.aS(K,Z,[G[0]*q,G[1]*q,G[2]*q]);const re=u.aZ(K)-1,he=Math.exp(.5*-Math.max(re-.3,0)),fe=bc(c.worldSize,c.center.lat)/Math.min(c.width,c.height),de=u.bn(fe,.9,.5,1,.25),pe=(1-u.af(-A))*Math.min(he,de),ye=c.center.lat,ge=c.zoom,xe=new u.S(c.center.lng+R*pe,u.ah(c.center.lat+U*pe,-u.ai,u.ai));c.setLocationAtPoint(_,p);const Me=c.center,ve=u.bn(Math.abs(O),45,85,0,1),Pe=u.bn(fe,.75,.35,0,1),Ze=Math.pow(Math.max(ve,Pe),.25),Ue=u.bA(Me.lng,xe.lng),Ge=u.bA(Me.lat,xe.lat);c.setCenter(new u.S(Me.lng+Ue*Ze,Me.lat+Ge*Ze).wrap()),c.setZoom(ge+wn(ye,c.center.lat))}handleMapControlsPan(r,c,p){if(!r.panDelta)return;const _=c.center.lat,S=c.zoom;c.setCenter(Yd(r.panDelta,c).wrap()),c.setZoom(S+wn(_,c.center.lat))}cameraForBoxAndBearing(r,c,p,_,S){const A=Vn(r,c,p,_,S),O=c.left/S.width*2-1,R=(S.width-c.right)/S.width*2-1,U=c.top/S.height*-2+1,G=(S.height-c.bottom)/S.height*-2+1,Z=u.bA(p.getWest(),p.getEast())<0,q=Z?p.getEast():p.getWest(),K=Z?p.getWest():p.getEast(),re=Math.max(p.getNorth(),p.getSouth()),he=Math.min(p.getNorth(),p.getSouth()),fe=q+.5*u.bA(q,K),de=re+.5*u.bA(re,he),pe=S.clone();pe.setCenter(A.center),pe.setBearing(A.bearing),pe.setPitch(0),pe.setRoll(0),pe.setZoom(A.zoom);const ye=pe.modelViewProjectionMatrix,ge=[fi(p.getNorthWest()),fi(p.getNorthEast()),fi(p.getSouthWest()),fi(p.getSouthEast()),fi(new u.S(K,de)),fi(new u.S(q,de)),fi(new u.S(fe,re)),fi(new u.S(fe,he))],xe=fi(A.center);let Me=Number.POSITIVE_INFINITY;for(const ve of ge)O<0&&(Me=ki.getLesserNonNegativeNonNull(Me,ki.solveVectorScale(ve,xe,ye,"x",O))),R>0&&(Me=ki.getLesserNonNegativeNonNull(Me,ki.solveVectorScale(ve,xe,ye,"x",R))),U>0&&(Me=ki.getLesserNonNegativeNonNull(Me,ki.solveVectorScale(ve,xe,ye,"y",U))),G<0&&(Me=ki.getLesserNonNegativeNonNull(Me,ki.solveVectorScale(ve,xe,ye,"y",G)));if(Number.isFinite(Me)&&Me!==0)return A.zoom=pe.zoom+u.ak(Me),A;wf()}handleJumpToCenterZoom(r,c){const p=r.center.lat,_=r.getConstrained(c.center?u.S.convert(c.center):r.center,r.zoom).center;r.setCenter(_.wrap());const S=c.zoom!==void 0?+c.zoom:r.zoom+wn(p,_.lat);r.zoom!==S&&r.setZoom(S)}handleEaseTo(r,c){const p=r.zoom,_=r.center,S=r.padding,A={roll:r.roll,pitch:r.pitch,bearing:r.bearing},O={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},R=c.zoom!==void 0,U=!r.isPaddingEqual(c.padding);let G=!1;const Z=c.center?u.S.convert(c.center):_,q=r.getConstrained(Z,p).center;Na(r,q);const K=r.clone();K.setCenter(q),K.setZoom(R?+c.zoom:p+wn(_.lat,Z.lat)),K.setBearing(c.bearing);const re=new u.P(u.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),u.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));K.setLocationAtPoint(q,re);const he=(c.offset&&c.offsetAsPoint.mag())>0?K.center:q,fe=R?+c.zoom:p+wn(_.lat,he.lat),de=p+wn(_.lat,0),pe=fe+wn(he.lat,0),ye=u.bA(_.lng,he.lng),ge=u.bA(_.lat,he.lat),xe=u.af(pe-de);return G=fe!==p,{easeFunc:Me=>{if(u.be(A,O)||hi({startEulerAngles:A,endEulerAngles:O,tr:r,k:Me,useSlerp:A.roll!=O.roll}),U&&r.interpolatePadding(S,c.padding,Me),c.around)u.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const ve=pe>de?Math.min(2,xe):Math.max(.5,xe),Pe=Math.pow(ve,1-Me),Ze=Sf(_,ye,ge,Me*Pe);r.setCenter(Ze.wrap())}if(G){const ve=u.C.number(de,pe,Me)+wn(0,r.center.lat);r.setZoom(ve)}},isZooming:G,elevationCenter:he}}handleFlyTo(r,c){const p=c.zoom!==void 0,_=r.center,S=r.zoom,A=r.padding,O=!r.isPaddingEqual(c.padding),R=r.getConstrained(u.S.convert(c.center||c.locationAtOffset),S).center,U=p?+c.zoom:r.zoom+wn(r.center.lat,R.lat),G=r.clone();G.setCenter(R),G.setZoom(U),G.setBearing(c.bearing);const Z=new u.P(u.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),u.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));G.setLocationAtPoint(R,Z);const q=G.center;Na(r,q);const K=(function(ge,xe,Me){const ve=fi(xe),Pe=fi(Me),Ze=u.aX(ve,Pe),Ue=Math.acos(Ze),Ge=$s(ge);return Ue/(2*Math.PI)*Ge})(r,_,q),re=S+wn(_.lat,0),he=U+wn(q.lat,0),fe=u.af(he-re);let de;if(typeof c.minZoom=="number"){const ge=+c.minZoom+wn(q.lat,0),xe=Math.min(ge,re,he)+wn(0,q.lat),Me=r.getConstrained(q,xe).zoom+wn(q.lat,0);de=u.af(Me-re)}const pe=u.bA(_.lng,q.lng),ye=u.bA(_.lat,q.lat);return{easeFunc:(ge,xe,Me,ve)=>{const Pe=Sf(_,pe,ye,Me);O&&r.interpolatePadding(A,c.padding,ge);const Ze=ge===1?q:Pe;r.setCenter(Ze.wrap());const Ue=re+u.ak(xe);r.setZoom(ge===1?U:Ue+wn(0,Ze.lat))},scaleOfZoom:fe,targetCenter:q,scaleOfMinZoom:de,pixelPathLength:K}}static solveVectorScale(r,c,p,_,S){const A=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],O=[p[3],p[7],p[11],p[15]],R=r[0]*A[0]+r[1]*A[1]+r[2]*A[2],U=r[0]*O[0]+r[1]*O[1]+r[2]*O[2],G=c[0]*A[0]+c[1]*A[1]+c[2]*A[2],Z=c[0]*O[0]+c[1]*O[1]+c[2]*O[2];return G+S*U===R+S*Z||O[3]*(R-G)+A[3]*(Z-U)+R*Z==G*U?null:(G+A[3]-S*Z-S*O[3])/(G-R-S*Z+S*U)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Xd{constructor(r){this._globe=r,this._mercatorCameraHelper=new _i,this._verticalPerspectiveCameraHelper=new ki}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,p){this.currentHelper.handleMapControlsPan(r,c,p)}cameraForBoxAndBearing(r,c,p,_,S){return this.currentHelper.cameraForBoxAndBearing(r,c,p,_,S)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const mh=(w,r)=>u.y(w,r&&r.filter((c=>c.identifier!=="source.canvas"))),Kd=u.bE();class Tf extends u.E{constructor(r,c={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const A in this.sourceCaches){const O=this.sourceCaches[A].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[A].reload()}},this.map=r,this.dispatcher=new Gt(Rt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((A,O)=>this.getGlyphs(A,O))),this.dispatcher.registerMessageHandler("GI",((A,O)=>this.getImages(A,O))),this.dispatcher.registerMessageHandler("GDA",((A,O)=>this.getDashes(A,O))),this.imageManager=new Mt,this.imageManager.setEventedParent(this);const S=((p=r._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new Ft(r._requestManager,c.localIdeographFontFamily,S),this.lineAtlas=new bt(256,512),this.crossTileSymbolIndex=new Ol,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",u.bG()),Wo().on(li,this._rtlPluginLoaded),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const O=this.sourceCaches[A.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const U in this._layers){const G=this._layers[U];G.source===R.id&&this._validateLayer(G)}}))}setGlobalStateProperty(r,c){var p,_,S;this._checkLoaded();const A=c===null?(S=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[r])===null||_===void 0?void 0:_.default)!==null&&S!==void 0?S:null:c;if(u.bH(A,this._globalState[r]))return this;this._globalState[r]=A,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const p in r)!u.bH(this._globalState[p],r[p].default)&&(c.push(p),this._globalState[p]=r[p].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,p={};for(const _ of r){p[_]=this._globalState[_];for(const S in this._layers){const A=this._layers[S],O=A.getLayoutAffectingGlobalStateRefs(),R=A.getPaintAffectingGlobalStateRefs();if(O.has(_)&&c.add(A.source),R.has(_))for(const{name:U,value:G}of R.get(_))this._updatePaintProperty(A,U,G)}}this.dispatcher.broadcast("UGS",p);for(const _ in this.sourceCaches)c.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(r,c={},p){this.fire(new u.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const _=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;u.j(_,this._loadStyleRequest).then((A=>{this._loadStyleRequest=null,this._load(A.data,c,p)})).catch((A=>{this._loadStyleRequest=null,A&&!S.signal.aborted&&this.fire(new u.k(A))}))}loadJSON(r,c={},p){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,p)})).catch((()=>{}))}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(Kd,{validate:!1})}_load(r,c,p){var _,S;let A=c.transformStyle?c.transformStyle(p,r):r;if(!c.validate||!mh(this,u.z(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const O in A.sources)this.addSource(O,A.sources[O],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new $e(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Dt(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){var r;const c=u.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",c),this._order=c.map((p=>p.id)),this._layers={},this._serializedLayers=null;for(const p of c){const _=u.bJ(p,this._globalState);_.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=_}}_loadSprite(r,c=!1,p=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(S,A,O,R){return u._(this,void 0,void 0,(function*(){const U=Le(S),G=O>1?"@2x":"",Z={},q={};for(const{id:K,url:re}of U){const he=A.transformRequest(qe(re,G,".json"),"SpriteJSON");Z[K]=u.j(he,R);const fe=A.transformRequest(qe(re,G,".png"),"SpriteImage");q[K]=Oe.getImage(fe,R)}return yield Promise.all([...Object.values(Z),...Object.values(q)]),(function(K,re){return u._(this,void 0,void 0,(function*(){const he={};for(const fe in K){he[fe]={};const de=j.getImageCanvasContext((yield re[fe]).data),pe=(yield K[fe]).data;for(const ye in pe){const{width:ge,height:xe,x:Me,y:ve,sdf:Pe,pixelRatio:Ze,stretchX:Ue,stretchY:Ge,content:He,textFitWidth:yt,textFitHeight:mt}=pe[ye];he[fe][ye]={data:null,pixelRatio:Ze,sdf:Pe,stretchX:Ue,stretchY:Ge,content:He,textFitWidth:yt,textFitHeight:mt,spriteData:{width:ge,height:xe,x:Me,y:ve,context:de}}}}return he}))})(Z,q)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((S=>{if(this._spriteRequest=null,S)for(const A in S){this._spritesImagesIds[A]=[];const O=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter((R=>!(R in S))):[];for(const R of O)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in S[A]){const U=A==="default"?R:`${A}:${R}`;this._spritesImagesIds[A].push(U),U in this.imageManager.images?this.imageManager.updateImage(U,S[A][R],!1):this.imageManager.addImage(U,S[A][R]),c&&(this._changedImages[U]=!0)}}})).catch((S=>{this._spriteRequest=null,_=S,this.fire(new u.k(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),p&&p(_)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const p=r.sourceLayer;if(!p)return;const _=c.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?u.bK(p):p);const _=[];for(const S of r)if(p[S]){const A=c?u.bK(p[S]):p[S];_.push(A)}return _}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const _=this._layers[p];_.type!=="custom"&&(r[p]=_.serialize())}return r}hasTransitions(){var r,c,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const _=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(_.length||S.length)&&this._updateWorkerLayers(_,S);for(const A in this._updatedSources){const O=this._updatedSources[A];if(O==="reload")this._reloadSource(A);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const S=this.sourceCaches[_];p[_]=S.used,S.used=!1}for(const _ of this._order){const S=this._layers[_];S.recalculate(r,this._availableImages),!S.isHidden(r.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const _ in p){const S=this.sourceCaches[_];!!p[_]!=!!S.used&&S.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var p;this._checkLoaded();const _=this.serialize();if(r=c.transformStyle?c.transformStyle(_,r):r,((p=c.validate)===null||p===void 0||p)&&mh(this,u.z(r)))return!1;(r=u.bK(r)).layers=u.bI(r.layers);const S=u.bL(_,r),A=this._getOperationsToPerform(S);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const O of A.operations)O();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],p=[];for(const _ of r)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":c.push((()=>{}));break;default:p.push(_.command)}return{operations:c,unimplemented:p}}addImage(r,c){if(this.getImage(r))return this.fire(new u.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.z.source,`sources.${r}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const _=this.sourceCaches[r]=new gr(r,c,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:r}))),_.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new u.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,p={}){this._checkLoaded();const _=r.id;if(this.getLayer(_))return void this.fire(new u.k(new Error(`Layer "${_}" already exists on this map.`)));let S;if(r.type==="custom"){if(mh(this,u.bM(r)))return;S=u.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(_,r.source),r=u.bK(r),r=u.e(r,{source:_})),this._validate(u.z.layer,`layers.${_}`,r,{arrayIndex:-1},p))return;S=u.bJ(r,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:_}})}const A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new u.k(new Error(`Cannot add layer "${_}" before non-existing layer "${c}".`)));else{if(this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=S,this._removedLayers[_]&&S.source&&S.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const p=this._order.indexOf(r);this._order.splice(p,1);const _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new u.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(_,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,p){this._checkLoaded();const _=this.getLayer(r);_?_.minzoom===c&&_.maxzoom===p||(c!=null&&(_.minzoom=c),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,p={}){this._checkLoaded();const _=this.getLayer(r);if(_){if(!u.bH(_.filter,c))return c==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(u.z.filter,`layers.${_.id}.filter`,c,null,p)||(_.setFilter(u.bK(c)),this._updateLayer(_)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.bK(this.getLayer(r).filter)}setLayoutProperty(r,c,p,_={}){this._checkLoaded();const S=this.getLayer(r);S?u.bH(S.getLayoutProperty(c),p)||(S.setLayoutProperty(c,p,_),this._updateLayer(S)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const p=this.getLayer(r);if(p)return p.getLayoutProperty(c);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,p,_={}){this._checkLoaded();const S=this.getLayer(r);S?u.bH(S.getPaintProperty(c),p)||this._updatePaintProperty(S,c,p,_):this.fire(new u.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,p,_={}){r.setPaintProperty(c,p,_)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const p=r.source,_=r.sourceLayer,S=this.sourceCaches[p];if(S===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const A=S.getSource().type;A==="geojson"&&_?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||_?(r.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(_,r.id,c)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const p=r.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const S=_.getSource().type,A=S==="vector"?r.sourceLayer:void 0;S!=="vector"||A?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(A,r.id,c):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,p=r.sourceLayer,_=this.sourceCaches[c];if(_!==void 0)return _.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,r.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.bN(this.sourceCaches,(S=>S.serialize())),c=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return u.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:r,layers:c,terrain:p},(S=>S!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=A=>this._layers[A].type==="fill-extrusion",p={},_=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(c(O)){p[O]=A;for(const R of r){const U=R[O];if(U)for(const G of U)_.push(G)}}}_.sort(((A,O)=>O.intersectionZ-A.intersectionZ));const S=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(c(O))for(let R=_.length-1;R>=0;R--){const U=_[R].feature;if(p[U.layer.id]<A)break;S.push(U),_.pop()}else for(const R of r){const U=R[O];if(U)for(const G of U)S.push(G.feature)}}return S}queryRenderedFeatures(r,c,p){c&&c.filter&&this._validate(u.z.filter,"queryRenderedFeatures.filter",c.filter,null,c);const _={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of c.layers){const G=this._layers[U];if(!G)return this.fire(new u.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];_[G.source]=!0}}const S=[];c.availableImages=this._availableImages;const A=this._serializedAllLayers(),O=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,R=Object.assign(Object.assign({},c),{layers:O,globalState:this._globalState});for(const U in this.sourceCaches)c.layers&&!_[U]||S.push(vt(this.sourceCaches[U],this._layers,A,r,R,p,this.map.terrain?(G,Z,q)=>this.map.terrain.getElevation(G,Z,q):void 0));return this.placement&&S.push((function(U,G,Z,q,K,re,he){const fe={},de=re.queryRenderedSymbols(q),pe=[];for(const ye of Object.keys(de).map(Number))pe.push(he[ye]);pe.sort(Wt);for(const ye of pe){const ge=ye.featureIndex.lookupSymbolFeatures(de[ye.bucketInstanceId],G,ye.bucketIndex,ye.sourceLayerIndex,{filterSpec:K.filter,globalState:K.globalState},K.layers,K.availableImages,U);for(const xe in ge){const Me=fe[xe]=fe[xe]||[],ve=ge[xe];ve.sort(((Pe,Ze)=>{const Ue=ye.featureSortOrder;if(Ue){const Ge=Ue.indexOf(Pe.featureIndex);return Ue.indexOf(Ze.featureIndex)-Ge}return Ze.featureIndex-Pe.featureIndex}));for(const Pe of ve)Me.push(Pe)}}return(function(ye,ge,xe){for(const Me in ye)for(const ve of ye[Me])ur(ve,xe[ge[Me].source]);return ye})(fe,U,Z)})(this._layers,A,this.sourceCaches,r,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(r,c){c?.filter&&this._validate(u.z.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[r];return p?(function(_,S){const A=_.getRenderableIds().map((U=>_.getTileByID(U))),O=[],R={};for(let U=0;U<A.length;U++){const G=A[U],Z=G.tileID.canonical.key;R[Z]||(R[Z]=!0,G.querySourceFeatures(O,S))}return O})(p,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const A in r)if(!u.bH(r[A],p[A])){_=!0;break}if(!_)return;const S={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(S)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!r&&!p)return;if(r&&!p)_=!0;else if(!r&&p)_=!0;else for(const A in r)if(!u.bH(r[A],p[A])){_=!0;break}if(!_)return;const S={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(S)}_setProjectionInternal(r){const c=(function(p){if(Array.isArray(p)){const _=new _c({type:p});return{projection:_,transform:new kl,cameraHelper:new Xd(_)}}switch(p){case"mercator":return{projection:new xr,transform:new Gr,cameraHelper:new _i};case"globe":{const _=new _c({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new kl,cameraHelper:new Xd(_)}}case"vertical-perspective":return{projection:new lu,transform:new du,cameraHelper:new ki};default:return u.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new xr,transform:new Gr,cameraHelper:new _i}}})(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,c,p,_,S={}){return(!S||S.validate!==!1)&&mh(this,r.call(u.z,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},_)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Wo().off(li,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,p,_,S=!1){let A=!1,O=!1;const R={};for(const U of this._order){const G=this._layers[U];if(G.type!=="symbol")continue;if(!R[G.source]){const q=this.sourceCaches[G.source];R[G.source]=q.getRenderableIds(!0).map((K=>q.getTileByID(K))).sort(((K,re)=>re.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(re.tileID)?-1:1)))}const Z=this.crossTileSymbolIndex.addLayer(G,R[G.source],r.center.lng);A=A||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.now(),r.zoom))&&(this.pauseablePlacement=new oa(r,this.map.terrain,this._order,S,c,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.now()),O=!0),A&&this.pauseablePlacement.placement.setStale()),O||A)for(const U of this._order){const G=this._layers[U];G.type==="symbol"&&this.placement.updateLayerOpacities(G,R[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return u._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[c.source];return _&&_.setDependencies(c.tileID.key,c.type,c.icons),p}))}getGlyphs(r,c){return u._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),_=this.sourceCaches[c.source];return _&&_.setDependencies(c.tileID.key,c.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(u.z.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,c){return u._(this,void 0,void 0,(function*(){const p={};for(const[_,S]of Object.entries(c.dashes))p[_]=this.lineAtlas.getDash(S.dasharray,S.round);return p}))}addSprite(r,c,p={},_){this._checkLoaded();const S=[{id:r,url:c}],A=[...Le(this.stylesheet.sprite),...S];this._validate(u.z.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(S,!0,_))}removeSprite(r){this._checkLoaded();const c=Le(this.stylesheet.sprite);if(c.find((p=>p.id===r))){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex((p=>p.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Le(this.stylesheet.sprite)}setSprite(r,c={},p){this._checkLoaded(),r&&this._validate(u.z.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var Am=u.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Mm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,p,_,S,A,O,R,U){this.context=r;let G=this.boundPaintVertexBuffers.length!==_.length;for(let Z=0;!G&&Z<_.length;Z++)this.boundPaintVertexBuffers[Z]!==_[Z]&&(G=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||G||this.boundIndexBuffer!==S||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==U?this.freshBind(c,p,_,S,A,O,R,U):(r.bindVertexArray.set(this.vao),O&&O.bind(),S&&S.dynamicDraw&&S.bind(),R&&R.bind(),U&&U.bind())}freshBind(r,c,p,_,S,A,O,R){const U=r.numAttributes,G=this.context,Z=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,c.enableAttributes(Z,r);for(const q of p)q.enableAttributes(Z,r);A&&A.enableAttributes(Z,r),O&&O.enableAttributes(Z,r),R&&R.enableAttributes(Z,r),c.bind(),c.setVertexAttribPointers(Z,r,S);for(const q of p)q.bind(),q.setVertexAttribPointers(Z,r,S);A&&(A.bind(),A.setVertexAttribPointers(Z,r,S)),_&&_.bind(),O&&(O.bind(),O.setVertexAttribPointers(Z,r,S)),R&&(R.bind(),R.setVertexAttribPointers(Z,r,S)),G.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const gh=(w,r,c,p,_)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):u.bf.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:c?c.calculateFogBlendOpacity(p):0,u_horizon_color:c?c.properties.get("horizon-color"):u.bf.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),Af={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Bl(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const p=w[c].split(" ");r.push(p.pop())}return r}class Mf{constructor(r,c,p,_,S,A,O,R,U=[]){const G=r.gl;this.program=G.createProgram();const Z=Bl(c.staticAttributes),q=p?p.getBinderAttributes():[],K=Z.concat(q),re=zi.prelude.staticUniforms?Bl(zi.prelude.staticUniforms):[],he=O.staticUniforms?Bl(O.staticUniforms):[],fe=c.staticUniforms?Bl(c.staticUniforms):[],de=p?p.getBinderUniforms():[],pe=re.concat(he).concat(fe).concat(de),ye=[];for(const Ue of pe)ye.indexOf(Ue)<0&&ye.push(Ue);const ge=p?p.defines():[];ro(G)&&ge.unshift("#version 300 es"),S&&ge.push("#define OVERDRAW_INSPECTOR;"),A&&ge.push("#define TERRAIN3D;"),R&&ge.push(R),U&&ge.push(...U);let xe=ge.concat(zi.prelude.fragmentSource,O.fragmentSource,c.fragmentSource).join(`
`),Me=ge.concat(zi.prelude.vertexSource,O.vertexSource,c.vertexSource).join(`
`);ro(G)||(xe=(function(Ue){return Ue.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(xe),Me=(function(Ue){return Ue.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Me));const ve=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(ve,xe),G.compileShader(ve),!G.getShaderParameter(ve,G.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${G.getShaderInfoLog(ve)}`);G.attachShader(this.program,ve);const Pe=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(Pe,Me),G.compileShader(Pe),!G.getShaderParameter(Pe,G.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${G.getShaderInfoLog(Pe)}`);G.attachShader(this.program,Pe),this.attributes={};const Ze={};this.numAttributes=K.length;for(let Ue=0;Ue<this.numAttributes;Ue++)K[Ue]&&(G.bindAttribLocation(this.program,Ue,K[Ue]),this.attributes[K[Ue]]=Ue);if(G.linkProgram(this.program),!G.getProgramParameter(this.program,G.LINK_STATUS))throw new Error(`Program failed to link: ${G.getProgramInfoLog(this.program)}`);G.deleteShader(Pe),G.deleteShader(ve);for(let Ue=0;Ue<ye.length;Ue++){const Ge=ye[Ue];if(Ge&&!Ze[Ge]){const He=G.getUniformLocation(this.program,Ge);He&&(Ze[Ge]=He)}}this.fixedUniforms=_(r,Ze),this.terrainUniforms=((Ue,Ge)=>({u_depth:new u.bP(Ue,Ge.u_depth),u_terrain:new u.bP(Ue,Ge.u_terrain),u_terrain_dim:new u.bg(Ue,Ge.u_terrain_dim),u_terrain_matrix:new u.bR(Ue,Ge.u_terrain_matrix),u_terrain_unpack:new u.bS(Ue,Ge.u_terrain_unpack),u_terrain_exaggeration:new u.bg(Ue,Ge.u_terrain_exaggeration)}))(r,Ze),this.projectionUniforms=((Ue,Ge)=>({u_projection_matrix:new u.bR(Ue,Ge.u_projection_matrix),u_projection_tile_mercator_coords:new u.bS(Ue,Ge.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bS(Ue,Ge.u_projection_clipping_plane),u_projection_transition:new u.bg(Ue,Ge.u_projection_transition),u_projection_fallback_matrix:new u.bR(Ue,Ge.u_projection_fallback_matrix)}))(r,Ze),this.binderUniforms=p?p.getUniforms(r,Ze):[]}draw(r,c,p,_,S,A,O,R,U,G,Z,q,K,re,he,fe,de,pe,ye){const ge=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(_),r.setColorMode(S),r.setCullFace(A),R){r.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,R.texture);for(const Me in this.terrainUniforms)this.terrainUniforms[Me].set(R[Me])}if(U)for(const Me in U)this.projectionUniforms[Af[Me]].set(U[Me]);if(O)for(const Me in this.fixedUniforms)this.fixedUniforms[Me].set(O[Me]);fe&&fe.setUniforms(r,this.binderUniforms,re,{zoom:he});let xe=0;switch(c){case ge.LINES:xe=2;break;case ge.TRIANGLES:xe=3;break;case ge.LINE_STRIP:xe=1}for(const Me of K.get()){const ve=Me.vaos||(Me.vaos={});(ve[G]||(ve[G]=new Mm)).bind(r,this,Z,fe?fe.getPaintVertexBuffers():[],q,Me.vertexOffset,de,pe,ye),ge.drawElements(c,Me.primitiveLength*xe,ge.UNSIGNED_SHORT,Me.primitiveOffset*xe*2)}}}function yh(w,r,c){const p=1/u.aC(c,1,r.transform.tileZoom),_=Math.pow(2,c.tileID.overscaledZ),S=c.tileSize*Math.pow(2,r.transform.tileZoom)/_,A=S*(c.tileID.canonical.x+c.tileID.wrap*_),O=S*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[A>>16,O>>16],u_pixel_coord_lower:[65535&A,65535&O]}}const no=(w,r,c,p)=>{const _=w.style.light,S=_.properties.get("position"),A=[S.x,S.y,S.z],O=u.bV();_.properties.get("anchor")==="viewport"&&u.bW(O,w.transform.bearingInRadians),u.bX(A,A,O);const R=w.transform.transformLightDirection(A),U=_.properties.get("color");return{u_lightpos:A,u_lightpos_globe:R,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:p}},Ef=(w,r,c,p,_,S,A)=>u.e(no(w,r,c,p),yh(S,w,A),{u_height_factor:-Math.pow(2,_.overscaledZ)/A.tileSize/8}),Zs=(w,r,c,p)=>u.e(yh(r,w,c),{u_fill_translate:p}),pu=(w,r)=>({u_world:w,u_fill_translate:r}),wc=(w,r,c,p,_)=>u.e(Zs(w,r,c,_),{u_world:p}),Wd=(w,r,c,p,_)=>{const S=w.transform;let A,O,R=0;if(c.paint.get("circle-pitch-alignment")==="map"){const U=u.aC(r,1,S.zoom);A=!0,O=[U,U],R=U/(u.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*_}else A=!1,O=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:p}},mu=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Qd=w=>({u_viewport_size:[w.width,w.height]}),Hs=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),Ll=(w,r,c,p)=>{const _=u.aC(w,1,r)/(u.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:u.aC(w,1,r),u_intensity:c,u_globe_extrude_scale:_}},Pf=(w,r,c,p)=>{const _=u.L();u.bY(_,0,w.width,w.height,0,0,1);const S=w.context.gl;return{u_matrix:_,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:c,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},Em=(w,r,c)=>{const p=c.paint.get("hillshade-accent-color");let _;switch(c.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const S=c.getIlluminationProperties();for(let A=0;A<S.directionRadians.length;A++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[A]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:vh(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:p,u_method:_,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},Jd=(w,r)=>{const c=r.stride,p=u.L();return u.bY(p,0,u.$,-u.$,0,0,1),u.M(p,p,[0,-u.$,0]),{u_matrix:p,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function vh(w,r){const c=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new u.a1(0,p/c).toLngLat().lat,new u.a1(0,(p+1)/c).toLngLat().lat]}const Cf=(w,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),Ys=(w,r,c,p)=>{const _=w.transform;return{u_translation:bh(w,r,c),u_ratio:p/u.aC(r,1,_.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Sc=(w,r,c,p,_)=>u.e(Ys(w,r,c,p),{u_image:0,u_image_height:_}),ep=(w,r,c,p,_)=>{const S=w.transform,A=_h(r,S);return{u_translation:bh(w,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:p/u.aC(r,1,S.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},To=(w,r,c,p,_)=>{const S=_h(r,w.transform);return u.e(Ys(w,r,c,p),{u_tileratio:S,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function _h(w,r){return 1/u.aC(w,1,r.tileZoom)}function bh(w,r,c){return u.aD(w.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const jl=(w,r,c,p,_)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(A=p.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(S=p.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Df(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var S,A};function Df(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Tc=(w,r,c,p,_,S,A,O,R,U,G,Z,q)=>{const K=A.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:K.width/K.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+G,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:S,u_texsize:Z,u_texture:0,u_translation:U,u_pitched_scale:q}},If=(w,r,c,p,_,S,A,O,R,U,G,Z,q,K)=>{const re=A.transform;return u.e(Tc(w,r,c,p,_,S,A,O,R,U,G,Z,K),{u_gamma_scale:p?Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},tp=(w,r,c,p,_,S,A,O,R,U,G,Z,q)=>u.e(If(w,r,c,p,_,S,A,O,R,U,!0,G,0,q),{u_texsize_icon:Z,u_texture_icon:1}),rp=(w,r)=>({u_opacity:w,u_color:r}),np=(w,r,c,p,_)=>u.e((function(S,A,O,R){const U=O.imageManager.getPattern(S.from.toString()),G=O.imageManager.getPattern(S.to.toString()),{width:Z,height:q}=O.imageManager.getPixelSize(),K=Math.pow(2,R.tileID.overscaledZ),re=R.tileSize*Math.pow(2,O.transform.tileZoom)/K,he=re*(R.tileID.canonical.x+R.tileID.wrap*K),fe=re*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[Z,q],u_mix:A.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/u.aC(R,1,O.transform.tileZoom),u_pixel_coord_upper:[he>>16,fe>>16],u_pixel_coord_lower:[65535&he,65535&fe]}})(c,_,r,p),{u_opacity:w}),Of=(w,r)=>{},zf={fillExtrusion:(w,r)=>({u_lightpos:new u.bT(w,r.u_lightpos),u_lightpos_globe:new u.bT(w,r.u_lightpos_globe),u_lightintensity:new u.bg(w,r.u_lightintensity),u_lightcolor:new u.bT(w,r.u_lightcolor),u_vertical_gradient:new u.bg(w,r.u_vertical_gradient),u_opacity:new u.bg(w,r.u_opacity),u_fill_translate:new u.bU(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new u.bT(w,r.u_lightpos),u_lightpos_globe:new u.bT(w,r.u_lightpos_globe),u_lightintensity:new u.bg(w,r.u_lightintensity),u_lightcolor:new u.bT(w,r.u_lightcolor),u_vertical_gradient:new u.bg(w,r.u_vertical_gradient),u_height_factor:new u.bg(w,r.u_height_factor),u_opacity:new u.bg(w,r.u_opacity),u_fill_translate:new u.bU(w,r.u_fill_translate),u_image:new u.bP(w,r.u_image),u_texsize:new u.bU(w,r.u_texsize),u_pixel_coord_upper:new u.bU(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.bU(w,r.u_pixel_coord_lower),u_scale:new u.bT(w,r.u_scale),u_fade:new u.bg(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new u.bU(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new u.bP(w,r.u_image),u_texsize:new u.bU(w,r.u_texsize),u_pixel_coord_upper:new u.bU(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.bU(w,r.u_pixel_coord_lower),u_scale:new u.bT(w,r.u_scale),u_fade:new u.bg(w,r.u_fade),u_fill_translate:new u.bU(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new u.bU(w,r.u_world),u_fill_translate:new u.bU(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new u.bU(w,r.u_world),u_image:new u.bP(w,r.u_image),u_texsize:new u.bU(w,r.u_texsize),u_pixel_coord_upper:new u.bU(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.bU(w,r.u_pixel_coord_lower),u_scale:new u.bT(w,r.u_scale),u_fade:new u.bg(w,r.u_fade),u_fill_translate:new u.bU(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new u.bg(w,r.u_camera_to_center_distance),u_scale_with_map:new u.bP(w,r.u_scale_with_map),u_pitch_with_map:new u.bP(w,r.u_pitch_with_map),u_extrude_scale:new u.bU(w,r.u_extrude_scale),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new u.bg(w,r.u_globe_extrude_scale),u_translate:new u.bU(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new u.bU(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new u.bU(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new u.bQ(w,r.u_color),u_overlay:new u.bP(w,r.u_overlay),u_overlay_scale:new u.bg(w,r.u_overlay_scale)}),depth:Of,clippingMask:Of,heatmap:(w,r)=>({u_extrude_scale:new u.bg(w,r.u_extrude_scale),u_intensity:new u.bg(w,r.u_intensity),u_globe_extrude_scale:new u.bg(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new u.bR(w,r.u_matrix),u_world:new u.bU(w,r.u_world),u_image:new u.bP(w,r.u_image),u_color_ramp:new u.bP(w,r.u_color_ramp),u_opacity:new u.bg(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new u.bP(w,r.u_image),u_latrange:new u.bU(w,r.u_latrange),u_exaggeration:new u.bg(w,r.u_exaggeration),u_altitudes:new u.b_(w,r.u_altitudes),u_azimuths:new u.b_(w,r.u_azimuths),u_accent:new u.bQ(w,r.u_accent),u_method:new u.bP(w,r.u_method),u_shadows:new u.bZ(w,r.u_shadows),u_highlights:new u.bZ(w,r.u_highlights)}),hillshadePrepare:(w,r)=>({u_matrix:new u.bR(w,r.u_matrix),u_image:new u.bP(w,r.u_image),u_dimension:new u.bU(w,r.u_dimension),u_zoom:new u.bg(w,r.u_zoom),u_unpack:new u.bS(w,r.u_unpack)}),colorRelief:(w,r)=>({u_image:new u.bP(w,r.u_image),u_unpack:new u.bS(w,r.u_unpack),u_dimension:new u.bU(w,r.u_dimension),u_elevation_stops:new u.bP(w,r.u_elevation_stops),u_color_stops:new u.bP(w,r.u_color_stops),u_color_ramp_size:new u.bP(w,r.u_color_ramp_size),u_opacity:new u.bg(w,r.u_opacity)}),line:(w,r)=>({u_translation:new u.bU(w,r.u_translation),u_ratio:new u.bg(w,r.u_ratio),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new u.bU(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new u.bU(w,r.u_translation),u_ratio:new u.bg(w,r.u_ratio),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new u.bU(w,r.u_units_to_pixels),u_image:new u.bP(w,r.u_image),u_image_height:new u.bg(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new u.bU(w,r.u_translation),u_texsize:new u.bU(w,r.u_texsize),u_ratio:new u.bg(w,r.u_ratio),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_image:new u.bP(w,r.u_image),u_units_to_pixels:new u.bU(w,r.u_units_to_pixels),u_scale:new u.bT(w,r.u_scale),u_fade:new u.bg(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new u.bU(w,r.u_translation),u_ratio:new u.bg(w,r.u_ratio),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new u.bU(w,r.u_units_to_pixels),u_image:new u.bP(w,r.u_image),u_mix:new u.bg(w,r.u_mix),u_tileratio:new u.bg(w,r.u_tileratio),u_crossfade_from:new u.bg(w,r.u_crossfade_from),u_crossfade_to:new u.bg(w,r.u_crossfade_to),u_lineatlas_width:new u.bg(w,r.u_lineatlas_width),u_lineatlas_height:new u.bg(w,r.u_lineatlas_height)}),raster:(w,r)=>({u_tl_parent:new u.bU(w,r.u_tl_parent),u_scale_parent:new u.bg(w,r.u_scale_parent),u_buffer_scale:new u.bg(w,r.u_buffer_scale),u_fade_t:new u.bg(w,r.u_fade_t),u_opacity:new u.bg(w,r.u_opacity),u_image0:new u.bP(w,r.u_image0),u_image1:new u.bP(w,r.u_image1),u_brightness_low:new u.bg(w,r.u_brightness_low),u_brightness_high:new u.bg(w,r.u_brightness_high),u_saturation_factor:new u.bg(w,r.u_saturation_factor),u_contrast_factor:new u.bg(w,r.u_contrast_factor),u_spin_weights:new u.bT(w,r.u_spin_weights),u_coords_top:new u.bS(w,r.u_coords_top),u_coords_bottom:new u.bS(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new u.bP(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bP(w,r.u_is_size_feature_constant),u_size_t:new u.bg(w,r.u_size_t),u_size:new u.bg(w,r.u_size),u_camera_to_center_distance:new u.bg(w,r.u_camera_to_center_distance),u_pitch:new u.bg(w,r.u_pitch),u_rotate_symbol:new u.bP(w,r.u_rotate_symbol),u_aspect_ratio:new u.bg(w,r.u_aspect_ratio),u_fade_change:new u.bg(w,r.u_fade_change),u_label_plane_matrix:new u.bR(w,r.u_label_plane_matrix),u_coord_matrix:new u.bR(w,r.u_coord_matrix),u_is_text:new u.bP(w,r.u_is_text),u_pitch_with_map:new u.bP(w,r.u_pitch_with_map),u_is_along_line:new u.bP(w,r.u_is_along_line),u_is_variable_anchor:new u.bP(w,r.u_is_variable_anchor),u_texsize:new u.bU(w,r.u_texsize),u_texture:new u.bP(w,r.u_texture),u_translation:new u.bU(w,r.u_translation),u_pitched_scale:new u.bg(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new u.bP(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bP(w,r.u_is_size_feature_constant),u_size_t:new u.bg(w,r.u_size_t),u_size:new u.bg(w,r.u_size),u_camera_to_center_distance:new u.bg(w,r.u_camera_to_center_distance),u_pitch:new u.bg(w,r.u_pitch),u_rotate_symbol:new u.bP(w,r.u_rotate_symbol),u_aspect_ratio:new u.bg(w,r.u_aspect_ratio),u_fade_change:new u.bg(w,r.u_fade_change),u_label_plane_matrix:new u.bR(w,r.u_label_plane_matrix),u_coord_matrix:new u.bR(w,r.u_coord_matrix),u_is_text:new u.bP(w,r.u_is_text),u_pitch_with_map:new u.bP(w,r.u_pitch_with_map),u_is_along_line:new u.bP(w,r.u_is_along_line),u_is_variable_anchor:new u.bP(w,r.u_is_variable_anchor),u_texsize:new u.bU(w,r.u_texsize),u_texture:new u.bP(w,r.u_texture),u_gamma_scale:new u.bg(w,r.u_gamma_scale),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_is_halo:new u.bP(w,r.u_is_halo),u_translation:new u.bU(w,r.u_translation),u_pitched_scale:new u.bg(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new u.bP(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bP(w,r.u_is_size_feature_constant),u_size_t:new u.bg(w,r.u_size_t),u_size:new u.bg(w,r.u_size),u_camera_to_center_distance:new u.bg(w,r.u_camera_to_center_distance),u_pitch:new u.bg(w,r.u_pitch),u_rotate_symbol:new u.bP(w,r.u_rotate_symbol),u_aspect_ratio:new u.bg(w,r.u_aspect_ratio),u_fade_change:new u.bg(w,r.u_fade_change),u_label_plane_matrix:new u.bR(w,r.u_label_plane_matrix),u_coord_matrix:new u.bR(w,r.u_coord_matrix),u_is_text:new u.bP(w,r.u_is_text),u_pitch_with_map:new u.bP(w,r.u_pitch_with_map),u_is_along_line:new u.bP(w,r.u_is_along_line),u_is_variable_anchor:new u.bP(w,r.u_is_variable_anchor),u_texsize:new u.bU(w,r.u_texsize),u_texsize_icon:new u.bU(w,r.u_texsize_icon),u_texture:new u.bP(w,r.u_texture),u_texture_icon:new u.bP(w,r.u_texture_icon),u_gamma_scale:new u.bg(w,r.u_gamma_scale),u_device_pixel_ratio:new u.bg(w,r.u_device_pixel_ratio),u_is_halo:new u.bP(w,r.u_is_halo),u_translation:new u.bU(w,r.u_translation),u_pitched_scale:new u.bg(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new u.bg(w,r.u_opacity),u_color:new u.bQ(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new u.bg(w,r.u_opacity),u_image:new u.bP(w,r.u_image),u_pattern_tl_a:new u.bU(w,r.u_pattern_tl_a),u_pattern_br_a:new u.bU(w,r.u_pattern_br_a),u_pattern_tl_b:new u.bU(w,r.u_pattern_tl_b),u_pattern_br_b:new u.bU(w,r.u_pattern_br_b),u_texsize:new u.bU(w,r.u_texsize),u_mix:new u.bg(w,r.u_mix),u_pattern_size_a:new u.bU(w,r.u_pattern_size_a),u_pattern_size_b:new u.bU(w,r.u_pattern_size_b),u_scale_a:new u.bg(w,r.u_scale_a),u_scale_b:new u.bg(w,r.u_scale_b),u_pixel_coord_upper:new u.bU(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.bU(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.bg(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new u.bP(w,r.u_texture),u_ele_delta:new u.bg(w,r.u_ele_delta),u_fog_matrix:new u.bR(w,r.u_fog_matrix),u_fog_color:new u.bQ(w,r.u_fog_color),u_fog_ground_blend:new u.bg(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.bg(w,r.u_fog_ground_blend_opacity),u_horizon_color:new u.bQ(w,r.u_horizon_color),u_horizon_fog_blend:new u.bg(w,r.u_horizon_fog_blend),u_is_globe_mode:new u.bg(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new u.bg(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new u.bP(w,r.u_texture),u_terrain_coords_id:new u.bg(w,r.u_terrain_coords_id),u_ele_delta:new u.bg(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new u.bg(w,r.u_input),u_output_expected:new u.bg(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new u.bT(w,r.u_sun_pos),u_atmosphere_blend:new u.bg(w,r.u_atmosphere_blend),u_globe_position:new u.bT(w,r.u_globe_position),u_globe_radius:new u.bg(w,r.u_globe_radius),u_inv_proj_matrix:new u.bR(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new u.bQ(w,r.u_sky_color),u_horizon_color:new u.bQ(w,r.u_horizon_color),u_horizon:new u.bU(w,r.u_horizon),u_horizon_normal:new u.bU(w,r.u_horizon_normal),u_sky_horizon_blend:new u.bg(w,r.u_sky_horizon_blend),u_sky_blend:new u.bg(w,r.u_sky_blend)})};class ip{constructor(r,c,p){this.context=r;const _=r.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ma{constructor(r,c,p,_){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=_,this.context=r;const S=r.gl;this.buffer=S.createBuffer(),r.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let p=0;p<this.attributes.length;p++){const _=c.attributes[this.attributes[p].name];_!==void 0&&r.enableVertexAttribArray(_)}}setVertexAttribPointers(r,c,p){for(let _=0;_<this.attributes.length;_++){const S=this.attributes[_],A=c.attributes[S.name];A!==void 0&&r.vertexAttribPointer(A,S.components,r[Bi[S.type]],!1,this.itemSize,S.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Or{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xh extends Or{getDefault(){return u.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class wh extends Or{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Rf extends Or{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class gu extends Or{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Nl extends Or{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Xs extends Or{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class kf extends Or{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class yu extends Or{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Bf extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class ap extends Or{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ks extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ac extends Or{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Sh extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class vu extends Or{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ao extends Or{getDefault(){return u.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class _u extends Or{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Th extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Ws extends Or{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class bu extends Or{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Mc extends Or{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Fa extends Or{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Lf extends Or{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class jf extends Or{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xu extends Or{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ci extends Or{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Fl extends Or{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Hi extends Or{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Mo extends Or{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const p=this.gl;ro(p)?p.bindVertexArray(r):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Ec extends Or{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class wu extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class is extends Or{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Eo extends Or{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Qs extends Eo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ah extends Eo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yr extends Eo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Po="Framebuffer is not complete";class Pm{constructor(r,c,p,_,S){this.context=r,this.width=c,this.height=p;const A=r.gl,O=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Qs(r,O),_)this.depthAttachment=S?new yr(r,O):new Ah(r,O);else if(S)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(Po)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class ca{constructor(r){var c,p;if(this.gl=r,this.clearColor=new xh(this),this.clearDepth=new wh(this),this.clearStencil=new Rf(this),this.colorMask=new gu(this),this.depthMask=new Nl(this),this.stencilMask=new Xs(this),this.stencilFunc=new kf(this),this.stencilOp=new yu(this),this.stencilTest=new Bf(this),this.depthRange=new ap(this),this.depthTest=new Ks(this),this.depthFunc=new Ac(this),this.blend=new Sh(this),this.blendFunc=new vu(this),this.blendColor=new Ao(this),this.blendEquation=new _u(this),this.cullFace=new Th(this),this.cullFaceSide=new Ws(this),this.frontFace=new bu(this),this.program=new Mc(this),this.activeTexture=new Fa(this),this.viewport=new Lf(this),this.bindFramebuffer=new jf(this),this.bindRenderbuffer=new xu(this),this.bindTexture=new Ci(this),this.bindVertexBuffer=new Fl(this),this.bindElementBuffer=new Hi(this),this.bindVertexArray=new Mo(this),this.pixelStoreUnpack=new Ec(this),this.pixelStoreUnpackPremultiplyAlpha=new wu(this),this.pixelStoreUnpackFlipY=new is(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ro(r)){this.HALF_FLOAT=r.HALF_FLOAT;const _=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:_?.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:_?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const _=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new ip(this,r,c)}createVertexBuffer(r,c,p){return new Ma(this,r,c,p)}createRenderbuffer(r,c,p){const _=this.gl,S=_.createRenderbuffer();return this.bindRenderbuffer.set(S),_.renderbufferStorage(_.RENDERBUFFER,r,c,p),this.bindRenderbuffer.set(null),S}createFramebuffer(r,c,p,_){return new Pm(this,r,c,p,_)}clear({color:r,depth:c,stencil:p}){const _=this.gl;let S=0;r&&(S|=_.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(S|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(S|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(S)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.bH(r.blendFunction,Vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ro(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return ro(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Co;function Do(w,r,c,p,_){const S=w.context,A=w.transform,O=S.gl,R=w.useProgram("collisionBox"),U=[];let G=0,Z=0;for(let de=0;de<p.length;de++){const pe=p[de],ye=r.getTile(pe).getBucket(c);if(!ye)continue;const ge=_?ye.textCollisionBox:ye.iconCollisionBox,xe=ye.collisionCircleArray;xe.length>0&&(U.push({circleArray:xe,circleOffset:Z,coord:pe}),G+=xe.length/4,Z=G),ge&&R.draw(S,O.LINES,rr.disabled,Tr.disabled,w.colorModeForRenderPass(),Zt.disabled,mu(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(pe),A.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,w.transform.zoom,null,null,ge.collisionVertexBuffer)}if(!_||!U.length)return;const q=w.useProgram("collisionCircle"),K=new u.b$;K.resize(4*G),K._trim();let re=0;for(const de of U)for(let pe=0;pe<de.circleArray.length/4;pe++){const ye=4*pe,ge=de.circleArray[ye+0],xe=de.circleArray[ye+1],Me=de.circleArray[ye+2],ve=de.circleArray[ye+3];K.emplace(re++,ge,xe,Me,ve,0),K.emplace(re++,ge,xe,Me,ve,1),K.emplace(re++,ge,xe,Me,ve,2),K.emplace(re++,ge,xe,Me,ve,3)}(!Co||Co.length<2*G)&&(Co=(function(de){const pe=2*de,ye=new u.c1;ye.resize(pe),ye._trim();for(let ge=0;ge<pe;ge++){const xe=6*ge;ye.uint16[xe+0]=4*ge+0,ye.uint16[xe+1]=4*ge+1,ye.uint16[xe+2]=4*ge+2,ye.uint16[xe+3]=4*ge+2,ye.uint16[xe+4]=4*ge+3,ye.uint16[xe+5]=4*ge+0}return ye})(G));const he=S.createIndexBuffer(Co,!0),fe=S.createVertexBuffer(K,u.c0.members,!0);for(const de of U){const pe=Qd(w.transform);q.draw(S,O.TRIANGLES,rr.disabled,Tr.disabled,w.colorModeForRenderPass(),Zt.disabled,pe,w.style.map.terrain&&w.style.map.terrain.getTerrainData(de.coord),null,c.id,fe,he,u.aM.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,w.transform.zoom,null,null,null)}fe.destroy(),he.destroy()}const op=u.ag(new Float32Array(16));function Su(w,r,c,p,_,S){const{horizontalAlign:A,verticalAlign:O}=u.aH(w);return new u.P((-(A-.5)*r/_+p[0])*S,(-(O-.5)*c/_+p[1])*S)}function Ul(w,r,c,p,_,S){const A=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let O=p.mult(S);c||(O=O.rotate(-_));const R=A.add(O);return Bn(R.x,R.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const O=ui(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return w.add(p.rotate(R))}return w.add(p)}function Tu(w,r,c,p,_,S,A,O,R,U,G,Z){const q=w.text.placedSymbolArray,K=w.text.dynamicLayoutVertexArray,re=w.icon.dynamicLayoutVertexArray,he={};K.clear();for(let fe=0;fe<q.length;fe++){const de=q.get(fe),pe=de.hidden||!de.crossTileID||w.allowVerticalPlacement&&!de.placedOrientation?null:p[de.crossTileID];if(pe){const ye=new u.P(de.anchorX,de.anchorY),ge={getElevation:Z,width:_.width,height:_.height,pitchedLabelPlaneMatrix:S,pitchWithMap:c,transform:_,tileAnchorPoint:ye,translation:U,unwrappedTileID:G},xe=c?Fs(ye.x,ye.y,ge):ui(ye.x,ye.y,ge),Me=rt(_.cameraToCenterDistance,xe.signedDistanceFromCamera);let ve=u.ap(w.textSizeData,O,de)*Me/u.aB;c&&(ve*=w.tilePixelRatio/A);const{width:Pe,height:Ze,anchor:Ue,textOffset:Ge,textBoxScale:He}=pe,yt=Su(Ue,Pe,Ze,Ge,He,ve),mt=_.getPitchedTextCorrection(ye.x+U[0],ye.y+U[1],G),st=Ul(xe.point,ge,r,yt,-_.bearingInRadians,mt),Ct=w.allowVerticalPlacement&&de.placedOrientation===u.ao.vertical?Math.PI/2:0;for(let lr=0;lr<de.numGlyphs;lr++)u.av(K,st,Ct);R&&de.associatedIconIndex>=0&&(he[de.associatedIconIndex]={shiftedAnchor:st,angle:Ct})}else $i(de.numGlyphs,K)}if(R){re.clear();const fe=w.icon.placedSymbolArray;for(let de=0;de<fe.length;de++){const pe=fe.get(de);if(pe.hidden)$i(pe.numGlyphs,re);else{const ye=he[de];if(ye)for(let ge=0;ge<pe.numGlyphs;ge++)u.av(re,ye.shiftedAnchor,ye.angle);else $i(pe.numGlyphs,re)}}w.icon.dynamicLayoutVertexBuffer.updateData(re)}w.text.dynamicLayoutVertexBuffer.updateData(K)}function Au(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Gl(w,r,c,p,_,S,A,O,R,U,G,Z,q){const K=w.context,re=K.gl,he=w.transform,fe=O==="map",de=R==="map",pe=O!=="viewport"&&c.layout.get("symbol-placement")!=="point",ye=fe&&!de&&!pe,ge=!c.layout.get("symbol-sort-key").isConstant();let xe=!1;const Me=w.getDepthModeForSublayer(0,rr.ReadOnly),ve=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Pe=[],Ze=he.getCircleRadiusCorrection();for(const Ue of p){const Ge=r.getTile(Ue),He=Ge.getBucket(c);if(!He)continue;const yt=_?He.text:He.icon;if(!yt||!yt.segments.get().length||!yt.hasVisibleVertices)continue;const mt=yt.programConfigurations.get(c.id),st=_||He.sdfIcons,Ct=_?He.textSizeData:He.iconSizeData,lr=de||he.pitch!==0,Br=w.useProgram(Au(st,_,He),mt),on=u.an(Ct,he.zoom),Wr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ue);let hn,sn,ii,fn,$r=[0,0],Yr=null;if(_)sn=Ge.glyphAtlasTexture,ii=re.LINEAR,hn=Ge.glyphAtlasTexture.size,He.iconsInText&&($r=Ge.imageAtlasTexture.size,Yr=Ge.imageAtlasTexture,fn=lr||w.options.rotating||w.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?re.LINEAR:re.NEAREST);else{const qn=c.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;sn=Ge.imageAtlasTexture,ii=st||w.options.rotating||w.options.zooming||qn||lr?re.LINEAR:re.NEAREST,hn=Ge.imageAtlasTexture.size}const vr=u.aC(Ge,1,w.transform.zoom),ai=ci(fe,w.transform,vr),Ga=u.L();u.aq(Ga,ai);const ll=ei(de,fe,w.transform,vr),Fo=u.aD(he,Ge,S,A),Yl=he.getProjectionData({overscaledTileID:Ue,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),kc=ve&&He.hasTextData(),ms=c.layout.get("icon-text-fit")!=="none"&&kc&&He.hasIconData();if(pe){const qn=w.style.map.terrain?(Fi,ln)=>w.style.map.terrain.getElevation(Ue,Fi,ln):null,jn=c.layout.get("text-rotation-alignment")==="map";ia(He,w,_,ai,Ga,de,U,jn,Ue.toUnwrapped(),he.width,he.height,Fo,qn)}const cl=_&&ve||ms,ga=pe||cl?op:de?ai:w.transform.clipSpaceToPixelsMatrix,gs=st&&c.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let so;so=st?He.iconsInText?tp(Ct.kind,on,ye,de,pe,cl,w,ga,ll,Fo,hn,$r,Ze):If(Ct.kind,on,ye,de,pe,cl,w,ga,ll,Fo,_,hn,0,Ze):Tc(Ct.kind,on,ye,de,pe,cl,w,ga,ll,Fo,_,hn,Ze);const ys={program:Br,buffers:yt,uniformValues:so,projectionData:Yl,atlasTexture:sn,atlasTextureIcon:Yr,atlasInterpolation:ii,atlasInterpolationIcon:fn,isSDF:st,hasHalo:gs};if(ge&&He.canOverlap){xe=!0;const qn=yt.segments.get();for(const jn of qn)Pe.push({segments:new u.aM([jn]),sortKey:jn.sortKey,state:ys,terrainData:Wr})}else Pe.push({segments:yt.segments,sortKey:0,state:ys,terrainData:Wr})}xe&&Pe.sort(((Ue,Ge)=>Ue.sortKey-Ge.sortKey));for(const Ue of Pe){const Ge=Ue.state;if(K.activeTexture.set(re.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,re.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(K.activeTexture.set(re.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),Ge.isSDF){const He=Ge.uniformValues;Ge.hasHalo&&(He.u_is_halo=1,Pc(Ge.buffers,Ue.segments,c,w,Ge.program,Me,G,Z,He,Ge.projectionData,Ue.terrainData)),He.u_is_halo=0}Pc(Ge.buffers,Ue.segments,c,w,Ge.program,Me,G,Z,Ge.uniformValues,Ge.projectionData,Ue.terrainData)}}function Pc(w,r,c,p,_,S,A,O,R,U,G){const Z=p.context;_.draw(Z,Z.gl.TRIANGLES,S,A,O,Zt.backCCW,R,G,U,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,p.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function ua(w,r,c,p,_){const S=w.context,A=S.gl,O=Tr.disabled,R=new Vr([A.ONE,A.ONE],u.bf.transparent,[!0,!0,!0,!0]),U=r.getBucket(c);if(!U)return;const G=p.key;let Z=c.heatmapFbos.get(G);Z||(Z=Io(S,r.tileSize,r.tileSize),c.heatmapFbos.set(G,Z)),S.bindFramebuffer.set(Z.framebuffer),S.viewport.set([0,0,r.tileSize,r.tileSize]),S.clear({color:u.bf.transparent});const q=U.programConfigurations.get(c.id),K=w.useProgram("heatmap",q,!_),re=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),he=w.style.map.terrain.getTerrainData(p);K.draw(S,A.TRIANGLES,rr.disabled,O,R,Zt.disabled,Ll(r,w.transform.zoom,c.paint.get("heatmap-intensity"),1),he,re,c.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,c.paint,w.transform.zoom,q)}function Vl(w,r,c,p,_){const S=w.context,A=S.gl,O=w.transform;S.setColorMode(w.colorModeForRenderPass());const R=Js(S,r),U=c.key,G=r.heatmapFbos.get(U);if(!G)return;S.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,G.colorAttachment.get()),S.activeTexture.set(A.TEXTURE1),R.bind(A.LINEAR,A.CLAMP_TO_EDGE);const Z=O.getProjectionData({overscaledTileID:c,applyTerrainMatrix:_,applyGlobeMatrix:!p});w.useProgram("heatmapTexture").draw(S,A.TRIANGLES,rr.disabled,Tr.disabled,w.colorModeForRenderPass(),Zt.disabled,Pf(w,r,0,1),null,Z,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,O.zoom),G.destroy(),r.heatmapFbos.delete(U)}function Io(w,r,c){var p,_;const S=w.gl,A=S.createTexture();S.bindTexture(S.TEXTURE_2D,A),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const O=(p=w.HALF_FLOAT)!==null&&p!==void 0?p:S.UNSIGNED_BYTE,R=(_=w.RGBA16F)!==null&&_!==void 0?_:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,R,r,c,0,S.RGBA,O,null);const U=w.createFramebuffer(r,c,!1,!1);return U.colorAttachment.set(A),U}function Js(w,r){return r.colorRampTexture||(r.colorRampTexture=new u.T(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function as(w,r,c,p,_){if(!c||!p||!p.imageAtlas)return;const S=p.imageAtlas.patternPositions;let A=S[c.to.toString()],O=S[c.from.toString()];if(!A&&O&&(A=O),!O&&A&&(O=A),!A||!O){const R=_.getPaintProperty(r);A=S[R],O=S[R]}A&&O&&w.setConstantPatternPositions(A,O)}function xi(w,r,c,p,_,S,A,O){const R=w.context.gl,U="fill-pattern",G=c.paint.get(U),Z=G&&G.constantOr(1),q=c.getCrossfadeParameters();let K,re,he,fe,de;const pe=w.transform,ye=c.paint.get("fill-translate"),ge=c.paint.get("fill-translate-anchor");A?(re=Z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=R.LINES):(re=Z?"fillPattern":"fill",K=R.TRIANGLES);const xe=G.constantOr(null);for(const Me of p){const ve=r.getTile(Me);if(Z&&!ve.patternsLoaded())continue;const Pe=ve.getBucket(c);if(!Pe)continue;const Ze=Pe.programConfigurations.get(c.id),Ue=w.useProgram(re,Ze),Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me);Z&&(w.context.activeTexture.set(R.TEXTURE0),ve.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ze.updatePaintBuffers(q)),as(Ze,U,xe,ve,c);const He=pe.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),yt=u.aD(pe,ve,ye,ge);if(A){fe=Pe.indexBuffer2,de=Pe.segments2;const st=[R.drawingBufferWidth,R.drawingBufferHeight];he=re==="fillOutlinePattern"&&Z?wc(w,q,ve,st,yt):pu(st,yt)}else fe=Pe.indexBuffer,de=Pe.segments,he=Z?Zs(w,q,ve,yt):{u_fill_translate:yt};const mt=w.stencilModeForClipping(Me);Ue.draw(w.context,K,_,mt,S,Zt.backCCW,he,Ge,He,c.id,Pe.layoutVertexBuffer,fe,de,c.paint,w.transform.zoom,Ze)}}function Li(w,r,c,p,_,S,A,O){const R=w.context,U=R.gl,G="fill-extrusion-pattern",Z=c.paint.get(G),q=Z.constantOr(1),K=c.getCrossfadeParameters(),re=c.paint.get("fill-extrusion-opacity"),he=Z.constantOr(null),fe=w.transform;for(const de of p){const pe=r.getTile(de),ye=pe.getBucket(c);if(!ye)continue;const ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(de),xe=ye.programConfigurations.get(c.id),Me=w.useProgram(q?"fillExtrusionPattern":"fillExtrusion",xe);q&&(w.context.activeTexture.set(U.TEXTURE0),pe.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),xe.updatePaintBuffers(K));const ve=fe.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!O,applyTerrainMatrix:!0});as(xe,G,he,pe,c);const Pe=u.aD(fe,pe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ze=c.paint.get("fill-extrusion-vertical-gradient"),Ue=q?Ef(w,Ze,re,Pe,de,K,pe):no(w,Ze,re,Pe);Me.draw(R,R.gl.TRIANGLES,_,S,A,Zt.backCCW,Ue,ge,ve,c.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,c.paint,w.transform.zoom,xe,w.style.map.terrain&&ye.centroidVertexBuffer)}}function Oo(w,r,c,p,_,S,A,O,R){var U;const G=w.style.projection,Z=w.context,q=w.transform,K=Z.gl,re=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],he=w.useProgram("hillshade",null,!1,re),fe=!w.options.moving;for(const de of p){const pe=r.getTile(de),ye=pe.fbo;if(!ye)continue;const ge=G.getMeshFromTileID(Z,de.canonical,O,!0,"raster"),xe=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(de);Z.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ye.colorAttachment.get());const Me=q.getProjectionData({overscaledTileID:de,aligned:fe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});he.draw(Z,K.TRIANGLES,S,_[de.overscaledZ],A,Zt.backCCW,Em(w,pe,c),xe,Me,c.id,ge.vertexBuffer,ge.indexBuffer,ge.segments)}}function ji(w,r,c,p,_,S,A,O,R){var U;const G=w.style.projection,Z=w.context,q=w.transform,K=Z.gl,re=w.useProgram("colorRelief"),he=!w.options.moving;let fe=!0,de=0;for(const pe of p){const ye=r.getTile(pe),ge=ye.dem;if(fe){const Ue=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Ge,colorTexture:He}=c.getColorRampTextures(Z,Ue,ge.getUnpackVector());Z.activeTexture.set(K.TEXTURE1),Ge.bind(K.NEAREST,K.CLAMP_TO_EDGE),Z.activeTexture.set(K.TEXTURE4),He.bind(K.LINEAR,K.CLAMP_TO_EDGE),fe=!1,de=Ge.size[0]}if(!ge||!ge.data)continue;const xe=ge.stride,Me=ge.getPixels();if(Z.activeTexture.set(K.TEXTURE0),Z.pixelStoreUnpackPremultiplyAlpha.set(!1),ye.demTexture=ye.demTexture||w.getTileTexture(xe),ye.demTexture){const Ue=ye.demTexture;Ue.update(Me,{premultiply:!1}),Ue.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else ye.demTexture=new u.T(Z,Me,K.RGBA,{premultiply:!1}),ye.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ve=G.getMeshFromTileID(Z,pe.canonical,O,!0,"raster"),Pe=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(pe),Ze=q.getProjectionData({overscaledTileID:pe,aligned:he,applyGlobeMatrix:!R,applyTerrainMatrix:!0});re.draw(Z,K.TRIANGLES,S,_[pe.overscaledZ],A,Zt.backCCW,Cf(c,ye.dem,de),Pe,Ze,c.id,ve.vertexBuffer,ve.indexBuffer,ve.segments)}}const Ua=[new u.P(0,0),new u.P(u.$,0),new u.P(u.$,u.$),new u.P(0,u.$)];function Ea(w,r,c,p,_,S,A,O,R=!1,U=!1){const G=p[p.length-1].overscaledZ,Z=w.context,q=Z.gl,K=w.useProgram("raster"),re=w.transform,he=w.style.projection,fe=w.colorModeForRenderPass(),de=!w.options.moving;for(const pe of p){const ye=w.getDepthModeForSublayer(pe.overscaledZ-G,c.paint.get("raster-opacity")===1?rr.ReadWrite:rr.ReadOnly,q.LESS),ge=r.getTile(pe);ge.registerFadeDuration(c.paint.get("raster-fade-duration"));const xe=r.findLoadedParent(pe,0),Me=r.findLoadedSibling(pe),ve=Mu(ge,xe||Me||null,r,c,w.transform,w.style.map.terrain);let Pe,Ze;const Ue=c.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;Z.activeTexture.set(q.TEXTURE0),ge.texture.bind(Ue,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set(q.TEXTURE1),xe?(xe.texture.bind(Ue,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Pe=Math.pow(2,xe.tileID.overscaledZ-ge.tileID.overscaledZ),Ze=[ge.tileID.canonical.x*Pe%1,ge.tileID.canonical.y*Pe%1]):ge.texture.bind(Ue,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),ge.texture.useMipmap&&Z.extTextureFilterAnisotropic&&w.transform.pitch>20&&q.texParameterf(q.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(pe),He=re.getProjectionData({overscaledTileID:pe,aligned:de,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),yt=jl(Ze||[0,0],Pe||1,ve,c,O),mt=he.getMeshFromTileID(Z,pe.canonical,S,A,"raster");K.draw(Z,q.TRIANGLES,ye,_?_[pe.overscaledZ]:Tr.disabled,fe,R?Zt.frontCCW:Zt.backCCW,yt,Ge,He,c.id,mt.vertexBuffer,mt.indexBuffer,mt.segments)}}function Mu(w,r,c,p,_,S){const A=p.paint.get("raster-fade-duration");if(!S&&A>0){const O=j.now(),R=(O-w.timeAdded)/A,U=r?(O-r.timeAdded)/A:-1,G=c.getSource(),Z=It(_,{tileSize:G.tileSize,roundZoom:G.roundZoom}),q=!r||Math.abs(r.tileID.overscaledZ-Z)>Math.abs(w.tileID.overscaledZ-Z),K=q&&w.refreshedUponExpiration?1:u.ah(q?R:1-U,0,1);return w.refreshedUponExpiration&&R>=1&&(w.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const Eu=new u.bf(1,0,0,1),Mh=new u.bf(0,1,0,1),Nf=new u.bf(0,0,1,1),ri=new u.bf(1,0,1,1),nn=new u.bf(0,1,1,1);function Pr(w,r,c,p){Cr(w,0,r+c/2,w.transform.width,c,p)}function zo(w,r,c,p){Cr(w,r-c/2,0,c,w.transform.height,p)}function Cr(w,r,c,p,_,S){const A=w.context,O=A.gl;O.enable(O.SCISSOR_TEST),O.scissor(r*w.pixelRatio,c*w.pixelRatio,p*w.pixelRatio,_*w.pixelRatio),A.clear({color:S}),O.disable(O.SCISSOR_TEST)}function os(w,r,c){const p=w.context,_=p.gl,S=w.useProgram("debug"),A=rr.disabled,O=Tr.disabled,R=w.colorModeForRenderPass(),U="$debug",G=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);p.activeTexture.set(_.TEXTURE0);const Z=r.getTileByID(c.key).latestRawTileData,q=Math.floor((Z&&Z.byteLength||0)/1024),K=r.getTile(c).tileSize,re=512/Math.min(K,512)*(c.overscaledZ/w.transform.zoom)*.5;let he=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(he+=` => ${c.overscaledZ}`),(function(de,pe){de.initDebugOverlayCanvas();const ye=de.debugOverlayCanvas,ge=de.context.gl,xe=de.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,ye.width,ye.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(pe,5,5),xe.strokeText(pe,5,5),de.debugOverlayTexture.update(ye),de.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)})(w,`${he} ${q}kB`);const fe=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(p,_.TRIANGLES,A,O,Vr.alphaBlended,Zt.disabled,Hs(u.bf.transparent,re),null,fe,U,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),S.draw(p,_.LINE_STRIP,A,O,R,Zt.disabled,Hs(u.bf.red),G,fe,U,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function ni(w,r,c,p){const{isRenderingGlobe:_}=p,S=w.context,A=S.gl,O=w.transform,R=w.colorModeForRenderPass(),U=w.getDepthModeFor3D(),G=w.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,w.width,w.height]);for(const Z of c){const q=r.getTerrainMesh(Z.tileID),K=w.renderToTexture.getTexture(Z),re=r.getTerrainData(Z.tileID);S.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,K.texture);const he=r.getMeshFrameDelta(O.zoom),fe=O.calculateFogMatrix(Z.tileID.toUnwrapped()),de=gh(he,fe,w.style.sky,O.pitch,_),pe=O.getProjectionData({overscaledTileID:Z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});G.draw(S,A.TRIANGLES,U,Tr.disabled,R,Zt.backCCW,de,re,pe,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}}function Pu(w,r){if(!r.mesh){const c=new u.aL;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const p=new u.aN;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new qs(w.createVertexBuffer(c,ns.members),w.createIndexBuffer(p),u.aM.simpleSegment(0,0,c.length,p.length))}return r.mesh}class Cu{constructor(r,c){this.context=new ca(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=gr.maxUnderzooming+gr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ol}resize(r,c,p){if(this.width=Math.floor(r*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const r=this.context,c=new u.aL;c.emplaceBack(0,0),c.emplaceBack(u.$,0),c.emplaceBack(0,u.$),c.emplaceBack(u.$,u.$),this.tileExtentBuffer=r.createVertexBuffer(c,ns.members),this.tileExtentSegments=u.aM.simpleSegment(0,0,4,2);const p=new u.aL;p.emplaceBack(0,0),p.emplaceBack(u.$,0),p.emplaceBack(0,u.$),p.emplaceBack(u.$,u.$),this.debugBuffer=r.createVertexBuffer(p,ns.members),this.debugSegments=u.aM.simpleSegment(0,0,4,5);const _=new u.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(u.$,0,u.$,0),_.emplaceBack(0,u.$,0,u.$),_.emplaceBack(u.$,u.$,u.$,u.$),this.rasterBoundsBuffer=r.createVertexBuffer(_,Am.members),this.rasterBoundsSegments=u.aM.simpleSegment(0,0,4,2);const S=new u.aL;S.emplaceBack(0,0),S.emplaceBack(u.$,0),S.emplaceBack(0,u.$),S.emplaceBack(u.$,u.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(S,ns.members),this.rasterBoundsSegmentsPosOnly=u.aM.simpleSegment(0,0,4,5);const A=new u.aL;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(A,ns.members),this.viewportSegments=u.aM.simpleSegment(0,0,4,2);const O=new u.c7;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(O);const R=new u.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(R);const U=this.context.gl;this.stencilClearMode=new Tr({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new qs(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.L();u.bY(p,0,this.width,this.height,0,0,1),u.N(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,rr.disabled,this.stencilClearMode,Vr.disabled,Zt.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const _=this.context;_.setColorMode(Vr.disabled),_.setDepthMode(rr.disabled);const S={};for(const A of c)S[A.key]=this.nextStencilID++;this._renderTileMasks(S,c,p,!0),this._renderTileMasks(S,c,p,!1),this._tileClippingMaskIDs=S}_renderTileMasks(r,c,p,_){const S=this.context,A=S.gl,O=this.style.projection,R=this.transform,U=this.useProgram("clippingMask");for(const G of c){const Z=r[G.key],q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(G),K=O.getMeshFromTileID(this.context,G.canonical,_,!0,"stencil"),re=R.getProjectionData({overscaledTileID:G,applyGlobeMatrix:!p,applyTerrainMatrix:!0});U.draw(S,A.TRIANGLES,rr.disabled,new Tr({func:A.ALWAYS,mask:0},Z,255,A.KEEP,A.KEEP,A.REPLACE),Vr.disabled,p?Zt.disabled:Zt.backCCW,null,q,re,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,p=this.style.projection,_=this.transform,S=this.useProgram("depth"),A=this.getDepthModeFor3D(),O=Re(_,{tileSize:_.tileSize});for(const R of O){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),G=p.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),Z=_.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(r,c.TRIANGLES,A,Tr.disabled,Vr.disabled,Zt.backCCW,null,U,Z,"$clipping",G.vertexBuffer,G.indexBuffer,G.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Tr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Tr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,p=r.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),_=p[p.length-1].overscaledZ,S=p[0].overscaledZ-_+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const A={};for(let O=0;O<S;O++)A[O+_]=new Tr({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=S,[A,p]}return[{[_]:Tr.disabled},p]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,p=r.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),_=p[p.length-1].overscaledZ,S=p[0].overscaledZ-_+1;if(this.clearStencil(),S>1){const A={},O={};for(let R=0;R<S;R++)A[R+_]=new Tr({func:c.GREATER,mask:255},S+1+R,255,c.KEEP,c.KEEP,c.REPLACE),O[R+_]=new Tr({func:c.GREATER,mask:255},1+R,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*S+1,[A,O,p]}return this.nextStencilID=3,[{[_]:new Tr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[_]:new Tr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Vr([r.CONSTANT_COLOR,r.ONE],new u.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Vr.unblended:Vr.alphaBlended}getDepthModeForSublayer(r,c,p){if(!this.opaquePassEnabledForLayer())return rr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new rr(p||this.context.gl.LEQUAL,c,[_,_])}getDepthModeFor3D(){return new rr(this.context.gl.LEQUAL,rr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var p,_;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(j.now()),this.imageManager.beginFrame();const S=this.style._order,A=this.style.sourceCaches,O={},R={},U={},G={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const q in A){const K=A[q];K.used&&K.prepare(this.context),O[q]=K.getVisibleCoordinates(!1),R[q]=O[q].slice().reverse(),U[q]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<S.length;q++)if(this.style._layers[S[q]].is3D()){this.opaquePassCutoff=q;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const q of S){const K=this.style._layers[q];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const re=R[K.source];(K.type==="custom"||re.length)&&this.renderLayer(this,A[K.source],K,re,G)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:q=>this.useProgram(q)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.bf.black:u.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(q,K){const re=q.context,he=re.gl,fe=((Me,ve,Pe)=>{const Ze=Math.cos(ve.rollInRadians),Ue=Math.sin(ve.rollInRadians),Ge=we(ve),He=ve.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Me.properties.get("sky-color"),u_horizon_color:Me.properties.get("horizon-color"),u_horizon:[(ve.width/2-Ge*Ue)*Pe,(ve.height/2+Ge*Ze)*Pe],u_horizon_normal:[-Ue,Ze],u_sky_horizon_blend:Me.properties.get("sky-horizon-blend")*ve.height/2*Pe,u_sky_blend:He}})(K,q.style.map.transform,q.pixelRatio),de=new rr(he.LEQUAL,rr.ReadWrite,[0,1]),pe=Tr.disabled,ye=q.colorModeForRenderPass(),ge=q.useProgram("sky"),xe=Pu(re,K);ge.draw(re,he.TRIANGLES,de,pe,ye,Zt.disabled,fe,null,void 0,"sky",xe.vertexBuffer,xe.indexBuffer,xe.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[S[this.currentLayer]],K=A[q.source],re=O[q.source];this._renderTileClippingMasks(q,re,!1),this.renderLayer(this,K,q,re,G)}this.renderPass="translucent";let Z=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const q=this.style._layers[S[this.currentLayer]],K=A[q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(q,G))continue;this.opaquePassEnabledForLayer()||Z||(Z=!0,G.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const re=(q.type==="symbol"?U:R)[q.source];this._renderTileClippingMasks(q,O[q.source],!!this.renderToTexture),this.renderLayer(this,K,q,re,G)}if(G.isRenderingGlobe&&(function(q,K,re){const he=q.context,fe=he.gl,de=q.useProgram("atmosphere"),pe=new rr(fe.LEQUAL,rr.ReadOnly,[0,1]),ye=q.transform,ge=(function(He,yt){const mt=He.properties.get("position"),st=[-mt.x,-mt.y,-mt.z],Ct=u.ag(new Float64Array(16));return He.properties.get("anchor")==="map"&&(u.b6(Ct,Ct,yt.rollInRadians),u.b7(Ct,Ct,-yt.pitchInRadians),u.b6(Ct,Ct,yt.bearingInRadians),u.b7(Ct,Ct,yt.center.lat*Math.PI/180),u.bz(Ct,Ct,-yt.center.lng*Math.PI/180)),u.c5(st,st,Ct),st})(re,q.transform),xe=ye.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Me=K.properties.get("atmosphere-blend")*xe.projectionTransition;if(Me===0)return;const ve=bc(ye.worldSize,ye.center.lat),Pe=ye.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,u.aw(Ze,Ze,ye.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,u.aw(Ze,Ze,Pe),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const Ue=((He,yt,mt,st,Ct)=>({u_sun_pos:He,u_atmosphere_blend:yt,u_globe_position:mt,u_globe_radius:st,u_inv_proj_matrix:Ct}))(ge,Me,[Ze[0],Ze[1],Ze[2]],ve,Pe),Ge=Pu(he,K);de.draw(he,fe.TRIANGLES,pe,Tr.disabled,Vr.alphaBlended,Zt.disabled,Ue,null,null,"atmosphere",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const q=(function(K,re){let he=null;const fe=Object.values(K._layers).flatMap((ge=>ge.source&&!ge.isHidden(re)?[K.sourceCaches[ge.source]]:[])),de=fe.filter((ge=>ge.getSource().type==="vector")),pe=fe.filter((ge=>ge.getSource().type!=="vector")),ye=ge=>{(!he||he.getSource().maxzoom<ge.getSource().maxzoom)&&(he=ge)};return de.forEach((ge=>ye(ge))),he||pe.forEach((ge=>ye(ge))),he})(this.style,this.transform.zoom);q&&(function(K,re,he){for(let fe=0;fe<he.length;fe++)os(K,re,he[fe])})(this,q,q.getVisibleCoordinates())}this.options.showPadding&&(function(q){const K=q.transform.padding;Pr(q,q.transform.height-(K.top||0),3,Eu),Pr(q,K.bottom||0,3,Mh),zo(q,K.left||0,3,Nf),zo(q,q.transform.width-(K.right||0),3,ri);const re=q.transform.centerPoint;(function(he,fe,de,pe){Cr(he,fe-1,de-10,2,20,pe),Cr(he,fe-10,de-1,20,2,pe)})(q,re.x,q.transform.height-re.y,nn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=r?!u.c8(c,p):!u.c9(c,p)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(u.ca(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(S,A){const O=S.context,R=O.gl,U=S.transform,G=Vr.unblended,Z=new rr(R.LEQUAL,rr.ReadWrite,[0,1]),q=A.sourceCache.getRenderableTiles(),K=S.useProgram("terrainDepth");O.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),O.clear({color:u.bf.transparent,depth:1});for(const re of q){const he=A.getTerrainMesh(re.tileID),fe=A.getTerrainData(re.tileID),de=U.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),pe={u_ele_delta:A.getMeshFrameDelta(U.zoom)};K.draw(O,R.TRIANGLES,Z,Tr.disabled,G,Zt.backCCW,pe,fe,de,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain),(function(S,A){const O=S.context,R=O.gl,U=S.transform,G=Vr.unblended,Z=new rr(R.LEQUAL,rr.ReadWrite,[0,1]),q=A.getCoordsTexture(),K=A.sourceCache.getRenderableTiles(),re=S.useProgram("terrainCoords");O.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),O.clear({color:u.bf.transparent,depth:1}),A.coordsIndex=[];for(const he of K){const fe=A.getTerrainMesh(he.tileID),de=A.getTerrainData(he.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,q.texture);const pe={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(U.zoom)},ye=U.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(O,R.TRIANGLES,Z,Tr.disabled,G,Zt.backCCW,pe,de,ye,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments),A.coordsIndex.push(he.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain))}renderLayer(r,c,p,_,S){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,u.cb(p)?(function(A,O,R,U,G,Z){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:q}=Z,K=Tr.disabled,re=A.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(he,fe,de,pe,ye,ge,xe,Me,ve){const Pe=fe.transform,Ze=fe.style.map.terrain,Ue=ye==="map",Ge=ge==="map";for(const He of he){const yt=pe.getTile(He),mt=yt.getBucket(de);if(!mt||!mt.text||!mt.text.segments.get().length)continue;const st=u.an(mt.textSizeData,Pe.zoom),Ct=u.aC(yt,1,fe.transform.zoom),lr=ci(Ue,fe.transform,Ct),Br=de.layout.get("icon-text-fit")!=="none"&&mt.hasIconData();if(st){const on=Math.pow(2,Pe.zoom-yt.tileID.overscaledZ),Wr=Ze?(hn,sn)=>Ze.getElevation(He,hn,sn):null;Tu(mt,Ue,Ge,ve,Pe,lr,on,st,Br,u.aD(Pe,yt,xe,Me),He.toUnwrapped(),Wr)}}})(U,A,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),G),R.paint.get("icon-opacity").constantOr(1)!==0&&Gl(A,O,R,U,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),K,re,q),R.paint.get("text-opacity").constantOr(1)!==0&&Gl(A,O,R,U,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),K,re,q),O.map.showCollisionBoxes&&(Do(A,O,R,U,!0),Do(A,O,R,U,!1))})(r,c,p,_,this.style.placement.variableOffsets,S):u.cc(p)?(function(A,O,R,U,G){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=G,q=R.paint.get("circle-opacity"),K=R.paint.get("circle-stroke-width"),re=R.paint.get("circle-stroke-opacity"),he=!R.layout.get("circle-sort-key").isConstant();if(q.constantOr(1)===0&&(K.constantOr(1)===0||re.constantOr(1)===0))return;const fe=A.context,de=fe.gl,pe=A.transform,ye=A.getDepthModeForSublayer(0,rr.ReadOnly),ge=Tr.disabled,xe=A.colorModeForRenderPass(),Me=[],ve=pe.getCircleRadiusCorrection();for(let Pe=0;Pe<U.length;Pe++){const Ze=U[Pe],Ue=O.getTile(Ze),Ge=Ue.getBucket(R);if(!Ge)continue;const He=R.paint.get("circle-translate"),yt=R.paint.get("circle-translate-anchor"),mt=u.aD(pe,Ue,He,yt),st=Ge.programConfigurations.get(R.id),Ct=A.useProgram("circle",st),lr=Ge.layoutVertexBuffer,Br=Ge.indexBuffer,on=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ze),Wr={programConfiguration:st,program:Ct,layoutVertexBuffer:lr,indexBuffer:Br,uniformValues:Wd(A,Ue,R,mt,ve),terrainData:on,projectionData:pe.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!Z,applyTerrainMatrix:!0})};if(he){const hn=Ge.segments.get();for(const sn of hn)Me.push({segments:new u.aM([sn]),sortKey:sn.sortKey,state:Wr})}else Me.push({segments:Ge.segments,sortKey:0,state:Wr})}he&&Me.sort(((Pe,Ze)=>Pe.sortKey-Ze.sortKey));for(const Pe of Me){const{programConfiguration:Ze,program:Ue,layoutVertexBuffer:Ge,indexBuffer:He,uniformValues:yt,terrainData:mt,projectionData:st}=Pe.state;Ue.draw(fe,de.TRIANGLES,ye,ge,xe,Zt.backCCW,yt,mt,st,R.id,Ge,He,Pe.segments,R.paint,A.transform.zoom,Ze)}})(r,c,p,_,S):u.cd(p)?(function(A,O,R,U,G){if(R.paint.get("heatmap-opacity")===0)return;const Z=A.context,{isRenderingToTexture:q,isRenderingGlobe:K}=G;if(A.style.map.terrain){for(const re of U){const he=O.getTile(re);O.hasRenderableParent(re)||(A.renderPass==="offscreen"?ua(A,he,R,re,K):A.renderPass==="translucent"&&Vl(A,R,re,q,K))}Z.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(re,he,fe,de){const pe=re.context,ye=pe.gl,ge=re.transform,xe=Tr.disabled,Me=new Vr([ye.ONE,ye.ONE],u.bf.transparent,[!0,!0,!0,!0]);(function(ve,Pe,Ze){const Ue=ve.gl;ve.activeTexture.set(Ue.TEXTURE1),ve.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Ge=Ze.heatmapFbos.get(u.c2);Ge?(Ue.bindTexture(Ue.TEXTURE_2D,Ge.colorAttachment.get()),ve.bindFramebuffer.set(Ge.framebuffer)):(Ge=Io(ve,Pe.width/4,Pe.height/4),Ze.heatmapFbos.set(u.c2,Ge))})(pe,re,fe),pe.clear({color:u.bf.transparent});for(let ve=0;ve<de.length;ve++){const Pe=de[ve];if(he.hasRenderableParent(Pe))continue;const Ze=he.getTile(Pe),Ue=Ze.getBucket(fe);if(!Ue)continue;const Ge=Ue.programConfigurations.get(fe.id),He=re.useProgram("heatmap",Ge),yt=ge.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),mt=ge.getCircleRadiusCorrection();He.draw(pe,ye.TRIANGLES,rr.disabled,xe,Me,Zt.backCCW,Ll(Ze,ge.zoom,fe.paint.get("heatmap-intensity"),mt),null,yt,fe.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,fe.paint,ge.zoom,Ge)}pe.viewport.set([0,0,re.width,re.height])})(A,O,R,U):A.renderPass==="translucent"&&(function(re,he){const fe=re.context,de=fe.gl;fe.setColorMode(re.colorModeForRenderPass());const pe=he.heatmapFbos.get(u.c2);pe&&(fe.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,pe.colorAttachment.get()),fe.activeTexture.set(de.TEXTURE1),Js(fe,he).bind(de.LINEAR,de.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(fe,de.TRIANGLES,rr.disabled,Tr.disabled,re.colorModeForRenderPass(),Zt.disabled,Pf(re,he,0,1),null,null,he.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,he.paint,re.transform.zoom))})(A,R)})(r,c,p,_,S):u.ce(p)?(function(A,O,R,U,G){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=G,q=R.paint.get("line-opacity"),K=R.paint.get("line-width");if(q.constantOr(1)===0||K.constantOr(1)===0)return;const re=A.getDepthModeForSublayer(0,rr.ReadOnly),he=A.colorModeForRenderPass(),fe=R.paint.get("line-dasharray"),de=fe.constantOr(1),pe=R.paint.get("line-pattern"),ye=pe.constantOr(1),ge=R.paint.get("line-gradient"),xe=R.getCrossfadeParameters(),Me=ye?"linePattern":de?"lineSDF":ge?"lineGradient":"line",ve=A.context,Pe=ve.gl,Ze=A.transform;let Ue=!0;for(const Ge of U){const He=O.getTile(Ge);if(ye&&!He.patternsLoaded())continue;const yt=He.getBucket(R);if(!yt)continue;const mt=yt.programConfigurations.get(R.id),st=A.context.program.get(),Ct=A.useProgram(Me,mt),lr=Ue||Ct.program!==st,Br=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ge),on=pe.constantOr(null),Wr=fe&&fe.constantOr(null);if(on&&He.imageAtlas){const $r=He.imageAtlas,Yr=$r.patternPositions[on.to.toString()],vr=$r.patternPositions[on.from.toString()];Yr&&vr&&mt.setConstantPatternPositions(Yr,vr)}else if(Wr){const $r=R.layout.get("line-cap")==="round",Yr=A.lineAtlas.getDash(Wr.to,$r),vr=A.lineAtlas.getDash(Wr.from,$r);mt.setConstantDashPositions(Yr,vr)}const hn=Ze.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),sn=Ze.getPixelScale(),ii=ye?ep(A,He,R,sn,xe):de?To(A,He,R,sn,xe):ge?Sc(A,He,R,sn,yt.lineClipsArray.length):Ys(A,He,R,sn);if(ye)ve.activeTexture.set(Pe.TEXTURE0),He.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),mt.updatePaintBuffers(xe);else if(de)(lr||A.lineAtlas.dirty)&&(ve.activeTexture.set(Pe.TEXTURE0),A.lineAtlas.bind(ve)),mt.updatePaintBuffers(xe);else if(ge){const $r=yt.gradients[R.id];let Yr=$r.texture;if(R.gradientVersion!==$r.version){let vr=256;if(R.stepInterpolant){const ai=O.getSource().maxzoom,Ga=Ge.canonical.z===ai?Math.ceil(1<<A.transform.maxZoom-Ge.canonical.z):1;vr=u.ah(u.c3(yt.maxLineLength/u.$*1024*Ga),256,ve.maxTextureSize)}$r.gradient=u.c4({expression:R.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:$r.gradient||void 0,clips:yt.lineClipsArray}),$r.texture?$r.texture.update($r.gradient):$r.texture=new u.T(ve,$r.gradient,Pe.RGBA),$r.version=R.gradientVersion,Yr=$r.texture}ve.activeTexture.set(Pe.TEXTURE0),Yr.bind(R.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}const fn=A.stencilModeForClipping(Ge);Ct.draw(ve,Pe.TRIANGLES,re,fn,he,Zt.disabled,ii,Br,hn,R.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,R.paint,A.transform.zoom,mt,yt.layoutVertexBuffer2),Ue=!1}})(r,c,p,_,S):u.cf(p)?(function(A,O,R,U,G){const Z=R.paint.get("fill-color"),q=R.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const{isRenderingToTexture:K}=G,re=A.colorModeForRenderPass(),he=R.paint.get("fill-pattern"),fe=A.opaquePassEnabledForLayer()&&!he.constantOr(1)&&Z.constantOr(u.bf.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===fe){const de=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?rr.ReadWrite:rr.ReadOnly);xi(A,O,R,U,de,re,!1,K)}if(A.renderPass==="translucent"&&R.paint.get("fill-antialias")){const de=A.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,rr.ReadOnly);xi(A,O,R,U,de,re,!0,K)}})(r,c,p,_,S):u.cg(p)?(function(A,O,R,U,G){const Z=R.paint.get("fill-extrusion-opacity");if(Z===0)return;const{isRenderingToTexture:q}=G;if(A.renderPass==="translucent"){const K=new rr(A.context.gl.LEQUAL,rr.ReadWrite,A.depthRangeFor3D);if(Z!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))Li(A,O,R,U,K,Tr.disabled,Vr.disabled,q),Li(A,O,R,U,K,A.stencilModeFor3D(),A.colorModeForRenderPass(),q);else{const re=A.colorModeForRenderPass();Li(A,O,R,U,K,Tr.disabled,re,q)}}})(r,c,p,_,S):u.ch(p)?(function(A,O,R,U,G){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=G,q=A.context,K=A.style.projection.useSubdivision,re=A.getDepthModeForSublayer(0,rr.ReadOnly),he=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(fe,de,pe,ye,ge,xe,Me){const ve=fe.context,Pe=ve.gl;for(const Ze of pe){const Ue=de.getTile(Ze),Ge=Ue.dem;if(!Ge||!Ge.data||!Ue.needsHillshadePrepare)continue;const He=Ge.dim,yt=Ge.stride,mt=Ge.getPixels();if(ve.activeTexture.set(Pe.TEXTURE1),ve.pixelStoreUnpackPremultiplyAlpha.set(!1),Ue.demTexture=Ue.demTexture||fe.getTileTexture(yt),Ue.demTexture){const Ct=Ue.demTexture;Ct.update(mt,{premultiply:!1}),Ct.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE)}else Ue.demTexture=new u.T(ve,mt,Pe.RGBA,{premultiply:!1}),Ue.demTexture.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE);ve.activeTexture.set(Pe.TEXTURE0);let st=Ue.fbo;if(!st){const Ct=new u.T(ve,{width:He,height:He,data:null},Pe.RGBA);Ct.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),st=Ue.fbo=ve.createFramebuffer(He,He,!0,!1),st.colorAttachment.set(Ct.texture)}ve.bindFramebuffer.set(st.framebuffer),ve.viewport.set([0,0,He,He]),fe.useProgram("hillshadePrepare").draw(ve,Pe.TRIANGLES,ge,xe,Me,Zt.disabled,Jd(Ue.tileID,Ge),null,null,ye.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),Ue.needsHillshadePrepare=!1}})(A,O,U,R,re,Tr.disabled,he),q.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(K){const[fe,de,pe]=A.stencilConfigForOverlapTwoPass(U);Oo(A,O,R,pe,fe,re,he,!1,Z),Oo(A,O,R,pe,de,re,he,!0,Z)}else{const[fe,de]=A.getStencilConfigForOverlapAndUpdateStencilID(U);Oo(A,O,R,de,fe,re,he,!1,Z)}})(r,c,p,_,S):u.ci(p)?(function(A,O,R,U,G){if(A.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:Z}=G,q=A.style.projection.useSubdivision,K=A.getDepthModeForSublayer(0,rr.ReadOnly),re=A.colorModeForRenderPass();if(q){const[he,fe,de]=A.stencilConfigForOverlapTwoPass(U);ji(A,O,R,de,he,K,re,!1,Z),ji(A,O,R,de,fe,K,re,!0,Z)}else{const[he,fe]=A.getStencilConfigForOverlapAndUpdateStencilID(U);ji(A,O,R,fe,he,K,re,!1,Z)}})(r,c,p,_,S):u.cj(p)?(function(A,O,R,U,G){if(A.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:Z}=G,q=O.getSource(),K=A.style.projection.useSubdivision;if(q instanceof ja)Ea(A,O,R,U,null,!1,!1,q.tileCoords,q.flippedWindingOrder,Z);else if(K){const[re,he,fe]=A.stencilConfigForOverlapTwoPass(U);Ea(A,O,R,fe,re,!1,!0,Ua,!1,Z),Ea(A,O,R,fe,he,!0,!0,Ua,!1,Z)}else{const[re,he]=A.getStencilConfigForOverlapAndUpdateStencilID(U);Ea(A,O,R,he,re,!1,!0,Ua,!1,Z)}})(r,c,p,_,S):u.ck(p)?(function(A,O,R,U,G){const Z=R.paint.get("background-color"),q=R.paint.get("background-opacity");if(q===0)return;const{isRenderingToTexture:K}=G,re=A.context,he=re.gl,fe=A.style.projection,de=A.transform,pe=de.tileSize,ye=R.paint.get("background-pattern");if(A.isPatternMissing(ye))return;const ge=!ye&&Z.a===1&&q===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==ge)return;const xe=Tr.disabled,Me=A.getDepthModeForSublayer(0,ge==="opaque"?rr.ReadWrite:rr.ReadOnly),ve=A.colorModeForRenderPass(),Pe=A.useProgram(ye?"backgroundPattern":"background"),Ze=U||Re(de,{tileSize:pe,terrain:A.style.map.terrain});ye&&(re.activeTexture.set(he.TEXTURE0),A.imageManager.bind(A.context));const Ue=R.getCrossfadeParameters();for(const Ge of Ze){const He=de.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),yt=ye?np(q,A,ye,{tileID:Ge,tileSize:pe},Ue):rp(q,Z),mt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ge),st=fe.getMeshFromTileID(re,Ge.canonical,!1,!0,"raster");Pe.draw(re,he.TRIANGLES,Me,xe,ve,Zt.backCCW,yt,mt,He,R.id,st.vertexBuffer,st.indexBuffer,st.segments)}})(r,0,p,_,S):u.cl(p)&&(function(A,O,R,U){const{isRenderingGlobe:G}=U,Z=A.context,q=R.implementation,K=A.style.projection,re=A.transform,he=re.getProjectionDataForCustomLayer(G),fe={farZ:re.farZ,nearZ:re.nearZ,fov:re.fov*Math.PI/180,modelViewProjectionMatrix:re.modelViewProjectionMatrix,projectionMatrix:re.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:he},de=q.renderingMode?q.renderingMode:"2d";if(A.renderPass==="offscreen"){const pe=q.prerender;pe&&(A.setCustomLayerDefaults(),Z.setColorMode(A.colorModeForRenderPass()),pe.call(q,Z.gl,fe),Z.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),Z.setColorMode(A.colorModeForRenderPass()),Z.setStencilMode(Tr.disabled);const pe=de==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,rr.ReadOnly);Z.setDepthMode(pe),q.render(Z.gl,fe),Z.setDirty(),A.setBaseState(),Z.bindFramebuffer.set(null)}})(r,0,p,S))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!c||!p}useProgram(r,c,p=!1,_=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,A=this.style.projection,O=p?zi.projectionMercator:A.shaderPreludeCode,R=p?to:A.shaderDefine,U=r+(c?c.cacheKey:"")+`/${p?zl:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[U]||(this.cache[U]=new Mf(this.context,zi[r],c,zf[r],this._showOverdrawInspector,S,O,R,_)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function el(w,r){let c,p=!1,_=null,S=null;const A=()=>{_=null,p&&(w.apply(S,c),_=setTimeout(A,r),p=!1)};return(...O)=>(p=!0,S=this,c=O,_||A(),_)}class Pa{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(p=_)})),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let S=window.location.hash.replace(_,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let A=window.location.href.replace(/(#.+)?$/,S);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=el(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,_),A=Math.round(c.lng*S)/S,O=Math.round(c.lat*S)/S,R=this._map.getBearing(),U=this._map.getPitch();let G="";if(G+=r?`/${A}/${O}/${p}`:`${p}/${O}/${A}`,(R||U)&&(G+="/"+Math.round(10*R)/10),U&&(G+=`/${Math.round(U)}`),this._hashName){const Z=this._hashName;let q=!1;const K=window.location.hash.slice(1).split("&").map((re=>{const he=re.split("=")[0];return he===Z?(q=!0,`${he}=${G}`):re})).filter((re=>re));return q||K.push(`${Z}=${G}`),`#${K.join("&")}`}return`#${G}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new u.S(+r[2],+r[1])}catch{return!1}const c=+r[0],p=+(r[3]||0),_=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const ss={linearity:.3,easing:u.cm(0,0,.3,1)},ls=u.e({deceleration:2500,maxSpeed:1400},ss),Du=u.e({deceleration:20,maxSpeed:1400},ss),tl=u.e({deceleration:1e3,maxSpeed:360},ss),Ro=u.e({deceleration:1e3,maxSpeed:90},ss),cs=u.e({deceleration:1e3,maxSpeed:360},ss);class ko{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=j.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)c.zoom+=S.zoomDelta||0,c.bearing+=S.bearingDelta||0,c.pitch+=S.pitchDelta||0,c.roll+=S.rollDelta||0,S.panDelta&&c.pan._add(S.panDelta),S.around&&(c.around=S.around),S.pinchAround&&(c.pinchAround=S.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(c.pan.mag()){const S=Ca(c.pan.mag(),p,u.e({},ls,r||{})),A=c.pan.mult(S.amount/c.pan.mag()),O=this._map.cameraHelper.handlePanInertia(A,this._map.transform);_.center=O.easingCenter,_.offset=O.easingOffset,rl(_,S)}if(c.zoom){const S=Ca(c.zoom,p,Du);_.zoom=this._map.transform.zoom+S.amount,rl(_,S)}if(c.bearing){const S=Ca(c.bearing,p,tl);_.bearing=this._map.transform.bearing+u.ah(S.amount,-179,179),rl(_,S)}if(c.pitch){const S=Ca(c.pitch,p,Ro);_.pitch=this._map.transform.pitch+S.amount,rl(_,S)}if(c.roll){const S=Ca(c.roll,p,cs);_.roll=this._map.transform.roll+u.ah(S.amount,-179,179),rl(_,S)}if(_.zoom||_.bearing){const S=c.pinchAround===void 0?c.around:c.pinchAround;_.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),u.e(_,{noMoveStart:!0})}}function rl(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function Ca(w,r,c){const{maxSpeed:p,linearity:_,deceleration:S}=c,A=u.ah(w*_/(r/1e3),-p,p),O=Math.abs(A)/(S*_);return{easing:c.easing,duration:1e3*O,amount:A*(O/2)}}class di extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const S=N.mousePos(c.getCanvas(),p),A=c.unproject(S);super(r,u.e({point:S,lngLat:A,originalEvent:p},_)),this._defaultPrevented=!1,this.target=c}}class us extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){const _=r==="touchend"?p.changedTouches:p.touches,S=N.touchPos(c.getCanvasContainer(),_),A=S.map((R=>c.unproject(R))),O=S.reduce(((R,U,G,Z)=>R.add(U.div(Z.length))),new u.P(0,0));super(r,{points:S,point:O,lngLats:A,lngLat:c.unproject(O),originalEvent:p}),this._defaultPrevented=!1}}class hs extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class wi{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new hs(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new di(r.type,this._map,r))}mouseup(r){this._map.fire(new di(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new di(r.type,this._map,r))}dblclick(r){return this._firePreventable(new di(r.type,this._map,r))}mouseover(r){this._map.fire(new di(r.type,this._map,r))}mouseout(r){this._map.fire(new di(r.type,this._map,r))}touchstart(r){return this._firePreventable(new us(r.type,this._map,r))}touchmove(r){this._map.fire(new us(r.type,this._map,r))}touchend(r){this._map.fire(new us(r.type,this._map,r))}touchcancel(r){this._map.fire(new us(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Iu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new di(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new di(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ql{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(u.P.convert(r),this._map.terrain)}}class Ff{constructor(r,c){this._map=r,this._tr=new ql(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(N.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const S=Math.min(_.x,p.x),A=Math.max(_.x,p.x),O=Math.min(_.y,p.y),R=Math.max(_.y,p.y);N.setTransform(this._box,`translate(${S}px,${O}px)`),this._box.style.width=A-S+"px",this._box.style.height=R-O+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const p=this._startPos,_=c;if(this.reset(),N.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:r})),{cameraAnimation:S=>S.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new u.l(r,{originalEvent:c}))}}function Eh(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let p=0;p<w.length;p++)c[w[p].identifier]=r[p];return c}class Ph{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=(function(_){const S=new u.P(0,0);for(const A of _)S._add(A);return S.div(_.length)})(c),this.touches=Eh(p,c)))}touchmove(r,c,p){if(this.aborted||!this.centroid)return;const _=Eh(p,c);for(const S in this.touches){const A=_[S];(!A||A.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(r,c,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class In{constructor(r){this.singleTap=new Ph(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,p){this.singleTap.touchstart(r,c,p)}touchmove(r,c,p){this.singleTap.touchmove(r,c,p)}touchend(r,c,p){const _=this.singleTap.touchend(r,c,p);if(_){const S=r.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(S&&A||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class ha{constructor(r){this._tr=new ql(r),this._zoomIn=new In({numTouches:1,numTaps:2}),this._zoomOut=new In({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,p){this._zoomIn.touchstart(r,c,p),this._zoomOut.touchstart(r,c,p)}touchmove(r,c,p){this._zoomIn.touchmove(r,c,p),this._zoomOut.touchmove(r,c,p)}touchend(r,c,p){const _=this._zoomIn.touchend(r,c,p),S=this._zoomOut.touchend(r,c,p),A=this._tr;return _?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(_)},{originalEvent:r})}):S?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(S)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const _=Array.isArray(c)?c[0]:c;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&N.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Cc=0,Da=2,io={[Cc]:1,[Da]:2};class Bo{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=N.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,p){const _=io[p];return c.buttons===void 0||(c.buttons&_)!==_})(r,this._eventButton)}isValidEndEvent(r){return N.mouseButton(r)===this._eventButton}}class Cm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class sp{constructor(r=new Bo({checkCorrectEvent:()=>!0}),c=new Cm){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,p){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Ch=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class Uf{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,p){return this._calculateTransform(r,c,p)}touchmove(r,c,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,c,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,p){this._calculateTransform(r,c,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,p){p.length>0&&(this._active=!0);const _=Eh(p,c),S=new u.P(0,0),A=new u.P(0,0);let O=0;for(const U in _){const G=_[U],Z=this._touches[U];Z&&(S._add(G),A._add(G.sub(Z)),O++,_[U]=G)}if(this._touches=_,this._shouldBePrevented(O)||!A.mag())return;const R=A.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ia{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,p){if(!this._firstTwoTouches)return;r.preventDefault();const[_,S]=this._firstTwoTouches,A=fa(p,c,_),O=fa(p,c,S);if(!A||!O)return;const R=this._aroundCenter?null:A.add(O).div(2);return this._move([A,O],R,r)}touchend(r,c,p){if(!this._firstTwoTouches)return;const[_,S]=this._firstTwoTouches,A=fa(p,c,_),O=fa(p,c,S);A&&O||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function fa(w,r,c){for(let p=0;p<w.length;p++)if(w[p].identifier===c)return r[p]}function Et(w,r){return Math.log(w/r)/Math.LN2}class Dh extends Ia{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Et(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Et(this._distance,p),pinchAround:c}}}function fs(w,r){return 180*w.angleWith(r)/Math.PI}class Ou extends Ia{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,p){const _=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fs(this._vector,_),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,p=fs(r,this._startVector);return Math.abs(p)<c}}function Lo(w){return Math.abs(w.y)>Math.abs(w.x)}class ds extends Ia{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,p){super.touchstart(r,c,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Lo(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=r[0].sub(this._lastPoints[0]),S=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,S,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(_.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,p){if(this._valid!==void 0)return this._valid;const _=r.mag()>=2,S=c.mag()>=2;if(!_&&!S)return;if(!_||!S)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=r.y>0==c.y>0;return Lo(r)&&Lo(c)&&A}}const Ih={panStep:100,bearingStep:15,pitchStep:10};class wr{constructor(r){this._tr=new ql(r);const c=Ih;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,p=0,_=0,S=0,A=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),S=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),S=1);break;case 38:r.shiftKey?_=1:(r.preventDefault(),A=-1);break;case 40:r.shiftKey?_=-1:(r.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:ps,zoom:c?Math.round(R.zoom)+c*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+p*this._bearingStep,pitch:R.pitch+_*this._pitchStep,offset:[-S*this._panStep,-A*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ps(w){return w*(2-w)}const nl=4.000244140625,Oh=1/450;class Gf{constructor(r,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new ql(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Oh}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=j.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%nl==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(_*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=N.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(u.S.convert(p.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>nl?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const U=typeof this._targetZoom!="number"?r.scale:u.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),u.ak(U*R)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let S,A=!1;if(this._type==="wheel"&&p&&_){const O=j.now()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),U=_(R);S=u.C.number(p,c,U),R<1?this._frameId||(this._frameId=!0):A=!0}else S=c,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!A,zoomDelta:S-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=u.co;if(this._prevEase){const p=this._prevEase,_=(j.now()-p.start)/p.duration,S=p.easing(_+.01)-p.easing(_),A=.27/Math.sqrt(S*S+1e-4)*.01,O=Math.sqrt(.0729-A*A);c=u.cm(A,O,.25,1)}return this._prevEase={start:j.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class $l{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dc{constructor(r){this._tr=new ql(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this._tap=new In({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,p){if(!this._swipePoint)if(this._tapTime){const _=c[0],S=r.timeStamp-this._tapTime<500,A=this._tapPoint.dist(_)<30;S&&A?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,c,p)}touchmove(r,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=c[0],S=_.y-this._swipePoint.y;return this._swipePoint=_,r.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(r,c,p)}touchend(r,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(r,c,p);_&&(this._tapTime=r.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zl{constructor(r,c,p){this._el=r,this._mousePan=c,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zu{constructor(r,c,p,_){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class zh{constructor(r,c,p,_){this._el=r,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class il{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=c,this._container.appendChild(_);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=p,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ru=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Yi extends u.l{}function Lr(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Vf{constructor(r,c){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,S)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},R={},U={};for(const{handlerName:q,handler:K,allowed:re}of this._handlers){if(!K.isEnabled())continue;let he;if(this._blockedByActive(U,re,q))K.reset();else if(K[S||_.type]){if(u.cp(_,S||_.type)){const fe=N.mousePos(this._map.getCanvas(),_);he=K[S||_.type](_,fe)}else if(u.cq(_,S||_.type)){const fe=this._getMapTouches(_.touches),de=N.touchPos(this._map.getCanvas(),fe);he=K[S||_.type](_,de,fe)}else u.cr(S||_.type)||(he=K[S||_.type](_));this.mergeHandlerResult(O,R,he,q,A),he&&he.needsRenderFrame&&this._triggerRenderFrame()}(he||K.isActive())&&(U[q]=K)}const G={};for(const q in this._previousActiveHandlers)U[q]||(G[q]=A);this._previousActiveHandlers=U,(Object.keys(G).length||Lr(O))&&(this._changes.push([O,R,G]),this._triggerRenderFrame()),(Object.keys(U).length||Lr(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=O;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ko(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,S,A]of this._listeners)N.addEventListener(_,S,_===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[r,c,p]of this._listeners)N.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new wi(c,r));const _=c.boxZoom=new Ff(c,r);this._add("boxZoom",_),r.interactive&&r.boxZoom&&_.enable();const S=c.cooperativeGestures=new il(c,r.cooperativeGestures);this._add("cooperativeGestures",S),r.cooperativeGestures&&S.enable();const A=new ha(c),O=new Dc(c);c.doubleClickZoom=new $l(O,A),this._add("tapZoom",A),this._add("clickZoom",O),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const R=new Ic;this._add("tapDragZoom",R);const U=c.touchPitch=new ds(c);this._add("touchPitch",U),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const G=()=>c.project(c.getCenter()),Z=(function({enable:ge,clickTolerance:xe,aroundCenter:Me=!0,minPixelCenterThreshold:ve=100,rotateDegreesPerPixelMoved:Pe=.8},Ze){const Ue=new Bo({checkCorrectEvent:Ge=>N.mouseButton(Ge)===0&&Ge.ctrlKey||N.mouseButton(Ge)===2&&!Ge.ctrlKey});return new pi({clickTolerance:xe,move:(Ge,He)=>{const yt=Ze();if(Me&&Math.abs(yt.y-Ge.y)>ve)return{bearingDelta:u.cn(new u.P(Ge.x,He.y),He,yt)};let mt=(He.x-Ge.x)*Pe;return Me&&He.y<yt.y&&(mt=-mt),{bearingDelta:mt}},moveStateManager:Ue,enable:ge,assignEvents:Ch})})(r,G),q=(function({enable:ge,clickTolerance:xe,pitchDegreesPerPixelMoved:Me=-.5}){const ve=new Bo({checkCorrectEvent:Pe=>N.mouseButton(Pe)===0&&Pe.ctrlKey||N.mouseButton(Pe)===2});return new pi({clickTolerance:xe,move:(Pe,Ze)=>({pitchDelta:(Ze.y-Pe.y)*Me}),moveStateManager:ve,enable:ge,assignEvents:Ch})})(r),K=(function({enable:ge,clickTolerance:xe,rollDegreesPerPixelMoved:Me=.3},ve){const Pe=new Bo({checkCorrectEvent:Ze=>N.mouseButton(Ze)===2&&Ze.ctrlKey});return new pi({clickTolerance:xe,move:(Ze,Ue)=>{const Ge=ve();let He=(Ue.x-Ze.x)*Me;return Ue.y<Ge.y&&(He=-He),{rollDelta:He}},moveStateManager:Pe,enable:ge,assignEvents:Ch})})(r,G);c.dragRotate=new zu(r,Z,q,K),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",q,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const re=(function({enable:ge,clickTolerance:xe}){const Me=new Bo({checkCorrectEvent:ve=>N.mouseButton(ve)===0&&!ve.ctrlKey});return new pi({clickTolerance:xe,move:(ve,Pe)=>({around:Pe,panDelta:Pe.sub(ve)}),activateOnStart:!0,moveStateManager:Me,enable:ge,assignEvents:Ch})})(r),he=new Uf(r,c);c.dragPan=new Zl(p,re,he),this._add("mousePan",re),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const fe=new Ou,de=new Dh;c.touchZoomRotate=new zh(p,de,fe,R),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const pe=c.scrollZoom=new Gf(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",pe,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const ye=c.keyboard=new wr(c);this._add("keyboard",ye),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Iu(c))}_add(r,c,p){this._handlers.push({handlerName:r,handler:c,allowed:p}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ru(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,p){for(const _ in r)if(_!==p&&(!c||c.indexOf(_)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const p of r)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(r,c,p,_,S){if(!p)return;u.e(r,p);const A={handlerName:_,originalEvent:p.originalEvent||S};p.zoomDelta!==void 0&&(c.zoom=A),p.panDelta!==void 0&&(c.drag=A),p.rollDelta!==void 0&&(c.roll=A),p.pitchDelta!==void 0&&(c.pitch=A),p.bearingDelta!==void 0&&(c.rotate=A)}_applyChanges(){const r={},c={},p={};for(const[_,S,A]of this._changes)_.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(_.panDelta)),_.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(r.rollDelta=(r.rollDelta||0)+_.rollDelta),_.around!==void 0&&(r.around=_.around),_.pinchAround!==void 0&&(r.pinchAround=_.pinchAround),_.noInertia&&(r.noInertia=_.noInertia),u.e(c,S),u.e(p,A);this._updateMapTransform(r,c,p),this._changes=[]}_updateMapTransform(r,c,p){const _=this._map,S=_._getTransformForUpdate(),A=_.terrain;if(!(Lr(r)||A&&this._terrainMovement))return this._fireEvents(c,p,!0);_._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:U,pitchDelta:G,rollDelta:Z,around:q,pinchAround:K}=r;K!==void 0&&(q=K),q=q||_.transform.centerPoint,A&&!S.isPointOnMapSurface(q)&&(q=S.centerPoint);const re={panDelta:O,zoomDelta:R,rollDelta:Z,pitchDelta:G,bearingDelta:U,around:q};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface(q)&&(q=S.centerPoint);const he=q.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(O?q.sub(O):q);this._handleMapControls({terrain:A,tr:S,deltasForHelper:re,preZoomAroundLoc:he,combinedEventsInProgress:c,panDelta:O}),_._applyUpdatedTransform(S),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,p,!0)}_handleMapControls({terrain:r,tr:c,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:S,panDelta:A}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(p,c),r)return O.useGlobeControls?(this._terrainMovement||!S.drag&&!S.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(p,c,_)):this._terrainMovement||!S.drag&&!S.zoom?void(S.drag&&this._terrainMovement&&A?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(A))):O.handleMapControlsPan(p,c,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(p,c,_));O.handleMapControlsPan(p,c,_)}_fireEvents(r,c,p){const _=Ru(this._eventsInProgress),S=Ru(r),A={};for(const Z in r){const{originalEvent:q}=r[Z];this._eventsInProgress[Z]||(A[`${Z}start`]=q),this._eventsInProgress[Z]=r[Z]}!_&&S&&this._fireEvent("movestart",S.originalEvent);for(const Z in A)this._fireEvent(Z,A[Z]);S&&this._fireEvent("move",S.originalEvent);for(const Z in r){const{originalEvent:q}=r[Z];this._fireEvent(Z,q)}const O={};let R;for(const Z in this._eventsInProgress){const{handlerName:q,originalEvent:K}=this._eventsInProgress[Z];this._handlersById[q].isActive()||(delete this._eventsInProgress[Z],R=c[q]||K,O[`${Z}end`]=R)}for(const Z in O)this._fireEvent(Z,O[Z]);const U=Ru(this._eventsInProgress),G=(_||S)&&!U;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Z)}if(p&&G){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!Z||!Z.essential&&j.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:R})),q(this._map.getBearing())&&this._map.resetNorth()):(q(Z.bearing||this._map.getBearing())&&(Z.bearing=0),Z.freezeElevation=!0,this._map.easeTo(Z,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new u.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new Yi("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ao extends u.E{constructor(r,c,p){super(),this._renderFrameCallback=()=>{const _=Math.min((j.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new u.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,p){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},c),p)}panTo(r,c,p){return this.easeTo(u.e({center:r},c),p)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,p){return this.easeTo(u.e({zoom:r},c),p)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new u.l("movestart",c)).fire(new u.l("move",c)).fire(new u.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,p){return this.easeTo(u.e({bearing:r},c),p)}resetNorth(r,c){return this.rotateTo(0,u.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=_r.convert(r).adjustAntiMeridian();const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,c)}_cameraForBoxAndBearing(r,c,p,_){const S={top:0,bottom:0,right:0,left:0};if(typeof(_=u.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const U=_.padding;_.padding={top:U,bottom:U,right:U,left:U}}const A=u.e(S,_.padding);_.padding=A;const O=this.transform,R=new _r(r,c);return this.cameraHelper.cameraForBoxAndBearing(_,A,R,p,O)}fitBounds(r,c,p){return this._fitInternal(this.cameraForBounds(r,c),c,p)}fitScreenCoordinates(r,c,p,_,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(r)),this.transform.screenPointToLocation(u.P.convert(c)),p,_),_,S)}_fitInternal(r,c,p){return r?(delete(c=u.e(r,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(r,c){this.stop();const p=this._getTransformForUpdate();let _=!1,S=!1,A=!1;const O=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const R=p.zoom!==O;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(_=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(S=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(A=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new u.l("movestart",c)).fire(new u.l("move",c)),R&&this.fire(new u.l("zoomstart",c)).fire(new u.l("zoom",c)).fire(new u.l("zoomend",c)),_&&this.fire(new u.l("rotatestart",c)).fire(new u.l("rotate",c)).fire(new u.l("rotateend",c)),S&&this.fire(new u.l("pitchstart",c)).fire(new u.l("pitch",c)).fire(new u.l("pitchend",c)),A&&this.fire(new u.l("rollstart",c)).fire(new u.l("roll",c)).fire(new u.l("rollend",c)),this.fire(new u.l("moveend",c))}calculateCameraOptionsFromTo(r,c,p,_=0){const S=u.a1.fromLngLat(r,c),A=u.a1.fromLngLat(p,_),O=A.x-S.x,R=A.y-S.y,U=A.z-S.z,G=Math.hypot(O,R,U);if(G===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(O,R),q=u.ak(this.transform.cameraToCenterDistance/G/this.transform.tileSize),K=180*Math.atan2(O,-R)/Math.PI;let re=180*Math.acos(Z/G)/Math.PI;return re=U<0?90-re:90+re,{center:A.toLngLat(),elevation:_,zoom:q,pitch:re,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,p,_,S){const A=this.transform.calculateCenterFromCameraLngLatAlt(r,c,p,_);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:p,pitch:_,roll:S}}easeTo(r,c){this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.co},r)).animate===!1||!r.essential&&j.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),S=p.pitch,A=p.roll,O="bearing"in r?this._normalizeBearing(r.bearing,_):_,R="pitch"in r?+r.pitch:S,U="roll"in r?this._normalizeBearing(r.roll,A):A,G="padding"in r?r.padding:p.padding,Z=u.P.convert(r.offset);let q,K;r.around&&(q=u.S.convert(r.around),K=p.locationToScreenPoint(q));const re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},he=this.cameraHelper.handleEaseTo(p,{bearing:O,pitch:R,roll:U,padding:G,around:q,aroundPoint:K,offsetAsPoint:Z,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||_!==O,this._pitching=this._pitching||R!==S,this._rolling=this._rolling||U!==A,this._padding=!p.isPaddingEqual(G),this._zooming=this._zooming||he.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,re),this.terrain&&this._prepareElevation(he.elevationCenter),this._ease((fe=>{he.easeFunc(fe),this.terrain&&!r.freezeElevation&&this._updateElevation(fe),this._applyUpdatedTransform(p),this._fireMoveEvents(c)}),(fe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,fe)}),r),this}_prepareEase(r,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new u.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new u.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new u.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new u.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(c-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(u.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),p=r.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(p<_){const S=this.calculateCameraOptionsFromTo(c,_,r.center,r.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&c.push((_=>this.transformCameraUpdate(_))),!c.length)return;const p=r.clone();for(const _ of c){const S=p.clone(),{center:A,zoom:O,roll:R,pitch:U,bearing:G,elevation:Z}=_(S);A&&S.setCenter(A),Z!==void 0&&S.setElevation(Z),O!==void 0&&S.setZoom(O),R!==void 0&&S.setRoll(R),U!==void 0&&S.setPitch(U),G!==void 0&&S.setBearing(G),p.apply(S)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new u.l("move",r)),this._zooming&&this.fire(new u.l("zoom",r)),this._rotating&&this.fire(new u.l("rotate",r)),this._pitching&&this.fire(new u.l("pitch",r)),this._rolling&&this.fire(new u.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,_=this._rotating,S=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new u.l("zoomend",r)),_&&this.fire(new u.l("rotateend",r)),S&&this.fire(new u.l("pitchend",r)),A&&this.fire(new u.l("rollend",r)),this.fire(new u.l("moveend",r))}flyTo(r,c){if(!r.essential&&j.prefersReducedMotion){const He=u.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(He,c)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.co},r);const p=this._getTransformForUpdate(),_=p.bearing,S=p.pitch,A=p.roll,O=p.padding,R="bearing"in r?this._normalizeBearing(r.bearing,_):_,U="pitch"in r?+r.pitch:S,G="roll"in r?this._normalizeBearing(r.roll,A):A,Z="padding"in r?r.padding:p.padding,q=u.P.convert(r.offset);let K=p.centerPoint.add(q);const re=p.screenPointToLocation(K),he=this.cameraHelper.handleFlyTo(p,{bearing:R,pitch:U,roll:G,padding:Z,locationAtOffset:re,offsetAsPoint:q,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let fe=r.curve;const de=Math.max(p.width,p.height),pe=de/he.scaleOfZoom,ye=he.pixelPathLength;typeof he.scaleOfMinZoom=="number"&&(fe=Math.sqrt(de/he.scaleOfMinZoom/ye*2));const ge=fe*fe;function xe(He){const yt=(pe*pe-de*de+(He?-1:1)*ge*ge*ye*ye)/(2*(He?pe:de)*ge*ye);return Math.log(Math.sqrt(yt*yt+1)-yt)}function Me(He){return(Math.exp(He)-Math.exp(-He))/2}function ve(He){return(Math.exp(He)+Math.exp(-He))/2}const Pe=xe(!1);let Ze=function(He){return ve(Pe)/ve(Pe+fe*He)},Ue=function(He){return de*((ve(Pe)*(Me(yt=Pe+fe*He)/ve(yt))-Me(Pe))/ge)/ye;var yt},Ge=(xe(!0)-Pe)/fe;if(Math.abs(ye)<2e-6||!isFinite(Ge)){if(Math.abs(de-pe)<1e-6)return this.easeTo(r,c);const He=pe<de?-1:1;Ge=Math.abs(Math.log(pe/de))/fe,Ue=()=>0,Ze=yt=>Math.exp(He*fe*yt)}return r.duration="duration"in r?+r.duration:1e3*Ge/("screenSpeed"in r?+r.screenSpeed/fe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==R,this._pitching=U!==S,this._rolling=G!==A,this._padding=!p.isPaddingEqual(Z),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(he.targetCenter),this._ease((He=>{const yt=He*Ge,mt=1/Ze(yt),st=Ue(yt);this._rotating&&p.setBearing(u.C.number(_,R,He)),this._pitching&&p.setPitch(u.C.number(S,U,He)),this._rolling&&p.setRoll(u.C.number(A,G,He)),this._padding&&(p.interpolatePadding(O,Z,He),K=p.centerPoint.add(q)),he.easeFunc(He,mt,st,K),this.terrain&&!r.freezeElevation&&this._updateElevation(He),this._applyUpdatedTransform(p),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,c)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,c,p){p.animate===!1||p.duration===0?(r(1),c()):(this._easeStart=j.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=u.aO(r,-180,180);const p=Math.abs(r-c);return Math.abs(r-360-c)<p&&(r-=360),Math.abs(r+360-c)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.S.convert(r),this.transform.tileZoom):null}}const oo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Hl{constructor(r=oo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const p=this._map._getUIString(`AttributionControl.${c}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const c=this._map.style.sourceCaches;for(const _ in c){const S=c[_];if(S.used||S.usedForTerrain){const A=S.getSource();A.attribution&&r.indexOf(A.attribution)<0&&r.push(A.attribution)}}r=r.filter((_=>String(_).trim())),r.sort(((_,S)=>_.length-S.length)),r=r.filter(((_,S)=>{for(let A=S+1;A<r.length;A++)if(r[A].indexOf(_)>=0)return!1;return!0}));const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=N.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ku{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const c=N.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const _ of p)if(_.id===r)return void(_.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Bu=u.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class da extends u.E{constructor(r){super(),this._lastTilesetChange=j.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const p={};for(const _ of Re(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),u.bY(_.terrainRttPosMatrix32f,0,u.$,u.$,0,0,1),this._tiles[_.key]=new Qo(_,this.tileSize),this._lastTilesetChange=j.now());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(r){for(const c in this._tiles){const p=this._tiles[c];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,S=r.clone(),A=u.ba();if(_.canonical.equals(r.canonical))u.bY(A,0,u.$,u.$,0,0,1);else if(_.canonical.isChildOf(r.canonical)){const O=_.canonical.z-r.canonical.z,R=_.canonical.x-(_.canonical.x>>O<<O),U=_.canonical.y-(_.canonical.y>>O<<O),G=u.$>>O;u.bY(A,0,G,G,0,0,1),u.M(A,A,[-R*G,-U*G,0])}else{if(!r.canonical.isChildOf(_.canonical))continue;{const O=r.canonical.z-_.canonical.z,R=r.canonical.x-(r.canonical.x>>O<<O),U=r.canonical.y-(r.canonical.y>>O<<O),G=u.$>>O;u.bY(A,0,u.$,u.$,0,0,1),u.M(A,A,[R*G,U*G,0]),u.N(A,A,[1/2**O,1/2**O,0])}}S.terrainRttPosMatrix32f=new Float32Array(A),c[p]=S}return c}_getTerrainCoordsForTileRanges(r,c){const p={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID;if(!this._isWithinTileRanges(S,c))continue;const A=r.clone(),O=u.ba();if(S.canonical.z===r.canonical.z){const R=r.canonical.x-S.canonical.x,U=r.canonical.y-S.canonical.y;u.bY(O,0,u.$,u.$,0,0,1),u.M(O,O,[R*u.$,U*u.$,0])}else if(S.canonical.z>r.canonical.z){const R=S.canonical.z-r.canonical.z,U=S.canonical.x-(S.canonical.x>>R<<R),G=S.canonical.y-(S.canonical.y>>R<<R),Z=r.canonical.x-(S.canonical.x>>R),q=r.canonical.y-(S.canonical.y>>R),K=u.$>>R;u.bY(O,0,K,K,0,0,1),u.M(O,O,[-U*K+Z*u.$,-G*K+q*u.$,0])}else{const R=r.canonical.z-S.canonical.z,U=r.canonical.x-(r.canonical.x>>R<<R),G=r.canonical.y-(r.canonical.y>>R<<R),Z=(r.canonical.x>>R)-S.canonical.x,q=(r.canonical.y>>R)-S.canonical.y,K=u.$<<R;u.bY(O,0,K,K,0,0,1),u.M(O,O,[U*u.$+Z*K,G*u.$+q*K,0])}A.terrainRttPosMatrix32f=new Float32Array(O),p[_]=A}return p}getSourceTile(r,c){const p=this.sourceCache._source;let _=r.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(_).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!S||!S.dem)&&c)for(;_>=p.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(r.scaledTo(_--).key);return S}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class Lu{constructor(r,c,p){this._meshCache={},this.painter=r,this.sourceCache=new da(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,p,_=u.$){var S;if(!(c>=0&&c<_&&p>=0&&p<_))return 0;const A=this.getTerrainData(r),O=(S=A.tile)===null||S===void 0?void 0:S.dem;if(!O)return 0;const R=u.cs([],[c/_*u.$,p/_*u.$],A.u_terrain_matrix),U=[R[0]*O.dim,R[1]*O.dim],G=Math.floor(U[0]),Z=Math.floor(U[1]),q=U[0]-G,K=U[1]-Z;return O.get(G,Z)*(1-q)*(1-K)+O.get(G+1,Z)*q*(1-K)+O.get(G,Z+1)*(1-q)*K+O.get(G+1,Z+1)*q*K}getElevationForLngLatZoom(r,c){if(!u.ct(c,r.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(p,_%u.$,S%u.$,u.$)}getElevation(r,c,p,_=u.$){return this.getDEMElevation(r,c,p,_)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const _=this.painter.context,S=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new u.T(_,S,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new u.T(_,new u.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ag([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const _=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new u.T(_,c.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),c.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const _=this.sourceCache.sourceCache._source.maxzoom;let S=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=_?S=r.canonical.z-_:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=r.canonical.x-(r.canonical.x>>S<<S),O=r.canonical.y-(r.canonical.y>>S<<S),R=u.cu(new Float64Array(16),[1/(u.$<<S),1/(u.$<<S),0]);u.M(R,R,[A*u.$,O*u.$,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,p=c.width/devicePixelRatio,_=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new u.T(c.context,{width:p,height:_,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new u.T(c.context,{width:p,height:_,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,A=0;S<this._coordsTextureSize;S++)for(let O=0;O<this._coordsTextureSize;O++,A+=4)c[A+0]=255&O,c[A+1]=255&S,c[A+2]=O>>8<<4|S>>8,c[A+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),_=new u.T(r,p,r.gl.RGBA,{premultiply:!1});return _.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,_=p.gl,S=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(S,O-A-1,1,1,_.RGBA,_.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const R=c[0]+(c[2]>>4<<8),U=c[1]+((15&c[2])<<8),G=this.coordsIndex[255-c[3]],Z=G&&this.sourceCache.getTileByID(G);if(!Z)return null;const q=this._coordsTextureSize,K=(1<<Z.tileID.canonical.z)*q;return new u.a1((Z.tileID.canonical.x*q+R)/K+Z.tileID.wrap,(Z.tileID.canonical.y*q+U)/K,this.getElevation(Z.tileID,R,U,q))}depthAtPoint(r){const c=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const p=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,_=p&&r.canonical.y===0,S=p&&r.canonical.y===(1<<r.canonical.z)-1,A=`m_${_?"n":""}_${S?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const O=this.painter.context,R=new u.cv,U=new u.aN,G=this.meshSize,Z=u.$/G,q=G*G;for(let ve=0;ve<=G;ve++)for(let Pe=0;Pe<=G;Pe++)R.emplaceBack(Pe*Z,ve*Z,0);for(let ve=0;ve<q;ve+=G+1)for(let Pe=0;Pe<G;Pe++)U.emplaceBack(Pe+ve,G+Pe+ve+1,G+Pe+ve+2),U.emplaceBack(Pe+ve,G+Pe+ve+2,Pe+ve+1);const K=R.length,re=K+(G+1),he=(G+1)*G,fe=_?u.bh:0,de=_?0:1,pe=S?u.bi:u.$,ye=S?0:1;for(let ve=0;ve<=G;ve++)R.emplaceBack(ve*Z,fe,de);for(let ve=0;ve<=G;ve++)R.emplaceBack(ve*Z,pe,ye);for(let ve=0;ve<G;ve++)U.emplaceBack(he+ve,re+ve,re+ve+1),U.emplaceBack(he+ve,re+ve+1,he+ve+1),U.emplaceBack(0+ve,K+ve+1,K+ve),U.emplaceBack(0+ve,0+ve+1,K+ve+1);const ge=R.length,xe=ge+2*(G+1);for(const ve of[0,1])for(let Pe=0;Pe<=G;Pe++)for(const Ze of[0,1])R.emplaceBack(ve*u.$,Pe*Z,Ze);for(let ve=0;ve<2*G;ve+=2)U.emplaceBack(ge+ve,ge+ve+1,ge+ve+3),U.emplaceBack(ge+ve,ge+ve+3,ge+ve+2),U.emplaceBack(xe+ve,xe+ve+3,xe+ve+1),U.emplaceBack(xe+ve,xe+ve+2,xe+ve+3);const Me=new qs(O.createVertexBuffer(R,Bu.members),O.createIndexBuffer(U),u.aM.simpleSegment(0,0,R.length,U.length));return this._meshCache[A]=Me,Me}getMeshFrameDelta(r){return 2*Math.PI*u.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var p;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,c){const p=u.a1.fromLngLat(r.wrap()),_=(1<<c)*u.$,S=p.x*_,A=p.y*_,O=Math.floor(S/u.$),R=Math.floor(A/u.$);return{tileID:new u.Z(c,0,c,O,R),mercatorX:S,mercatorY:A}}}class kt{constructor(r,c,p){this._context=r,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new u.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:r,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const jt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class al{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new kt(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter((p=>!r._layers[p].isHidden(c))),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const _=r.sourceCaches[p].getVisibleCoordinates(),S=r.sourceCaches[p].getSource(),A=S instanceof ja?S.terrainTileRanges:null;for(const O of _){const R=this.terrain.sourceCache.getTerrainCoords(O,A);for(const U in R)this._coordsAscending[p][U]||(this._coordsAscending[p][U]=[]),this._coordsAscending[p][U].push(R[U])}}this._coordsAscendingStr={};for(const p of r._order){const _=r._layers[p],S=_.source;if(jt[_.type]&&!this._coordsAscendingStr[S]){this._coordsAscendingStr[S]={};for(const A in this._coordsAscending[S])this._coordsAscendingStr[S][A]=this._coordsAscending[S][A].map((O=>O.key)).sort().join()}}for(const p of this._renderableTiles)for(const _ in this._coordsAscendingStr){const S=this._coordsAscendingStr[_][p.tileID.key];S&&S!==p.rttCoords[_]&&(p.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),_=r.type,S=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(jt[_]&&(this._prevType&&jt[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(r.id),!A))return!0;if(jt[this._prevType]||jt[_]&&A){this._prevType=_;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(ni(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[O]){const Z=this.pool.getObjectForId(U.rtt[O].id);if(Z.stamp===U.rtt[O].stamp){this.pool.useObject(Z);continue}}const G=this.pool.getOrCreateFreeObject();this.pool.useObject(G),this.pool.stampObject(G),U.rtt[O]={id:G.id,stamp:G.stamp},S.context.bindFramebuffer.set(G.fbo.framebuffer),S.context.clear({color:u.bf.transparent,stencil:0}),S.currentStencilSource=void 0;for(let Z=0;Z<R.length;Z++){const q=S.style._layers[R[Z]],K=q.source?this._coordsAscending[q.source][U.tileID.key]:[U.tileID];S.context.viewport.set([0,0,G.fbo.width,G.fbo.height]),S._renderTileClippingMasks(q,K,!0),S.renderLayer(S,S.style.sourceCaches[q.source],q,K,p),q.source&&(U.rttCoords[q.source]=this._coordsAscendingStr[q.source][U.tileID.key])}}return ni(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),jt[_]}return!1}}const qf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Oc=E,Si={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oo,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},pa={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ln{constructor(r,c,p=!1){this.mousedown=S=>{this.startMove(S,N.mousePos(this.element,S)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,N.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const _=new sp;this._rotatePitchHandler=new pi({clickTolerance:3,move:(S,A)=>{const O=c.getBoundingClientRect(),R=new u.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:u.cn(new u.P(S.x,A.y),A,R),pitchDelta:p?-.5*(A.y-S.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=r,N.addEventListener(c,"mousedown",this.mousedown),N.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),N.disableDrag()}move(r,c){const p=this.map,{bearingDelta:_,pitchDelta:S}=this._rotatePitchHandler.dragMove(r,c)||{};_&&p.setBearing(p.getBearing()+_),S&&p.setPitch(p.getPitch()+S)}off(){const r=this.element;N.removeEventListener(r,"mousedown",this.mousedown),N.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let ma;function ol(w,r,c,p=!1){if(p||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const _=new u.S(w.lng,w.lat);if(w=new u.S(w.lng,w.lat),r){const S=new u.S(w.lng-360,w.lat),A=new u.S(w.lng+360,w.lat),O=c.locationToScreenPoint(w).distSqr(r);c.locationToScreenPoint(S).distSqr(r)<O?w=S:c.locationToScreenPoint(A).distSqr(r)<O&&(w=A)}for(;Math.abs(w.lng-c.center.lng)>180;){const S=c.locationToScreenPoint(w);if(S.x>=0&&S.y>=0&&S.x<=c.width&&S.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:_}const an={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qr(w,r,c){const p=w.classList;for(const _ in an)p.remove(`maplibregl-${c}-anchor-${_}`);p.add(`maplibregl-${c}-anchor-${r}`)}class Ni extends u.E{constructor(r){if(super(),this._onKeyPress=c=>{const p=c.code,_=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=ol(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${an[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${_}`),j.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const c=N.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${_}px`),c.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const S=N.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const A=N.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const O=N.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of R){const pe=N.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",de.rx),pe.setAttributeNS(null,"ry",de.ry),O.appendChild(pe)}const U=N.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const G=N.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(G);const Z=N.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const q=N.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild(q);const K=N.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const re=N.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=N.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const fe=N.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),re.appendChild(he),re.appendChild(fe),A.appendChild(O),A.appendChild(U),A.appendChild(Z),A.appendChild(K),A.appendChild(re),c.appendChild(A),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),qr(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const _=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,p;const _=(c=this._map)===null||c===void 0?void 0:c.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!_||S){const K=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const A=this._map,O=A.terrain.depthAtPoint(this._pos),R=A.terrain.getElevationForLngLatZoom(this._lngLat,A.transform.tileZoom);if(A.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/A.transform.pixelsPerMeter,G=Math.sin(A.getPitch()*Math.PI/180)*U,Z=A.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),q=A.transform.lngLatToCameraDepth(this._lngLat,R+G)-Z>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&q&&this._popup.remove(),this._element.style.opacity=q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const vn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let jo=0,Xi=!1;const dr={maxWidth:100,unit:"metric"};function jr(w,r,c){const p=c&&c.maxWidth||100,_=w._container.clientHeight/2,S=w._container.clientWidth/2,A=w.unproject([S-p/2,_]),O=w.unproject([S+p/2,_]),R=Math.round(w.project(O).x-w.project(A).x),U=Math.min(p,R,w._container.clientWidth),G=A.distanceTo(O);if(c&&c.unit==="imperial"){const Z=3.2808*G;Z>5280?Kr(r,U,Z/5280,w._getUIString("ScaleControl.Miles")):Kr(r,U,Z,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Kr(r,U,G/1852,w._getUIString("ScaleControl.NauticalMiles")):G>=1e3?Kr(r,U,G/1e3,w._getUIString("ScaleControl.Kilometers")):Kr(r,U,G,w._getUIString("ScaleControl.Meters"))}function Kr(w,r,c,p){const _=(function(S){const A=Math.pow(10,`${Math.floor(S)}`.length-1);let O=S/A;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const U=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*U)/U})(O),A*O})(c);w.style.width=r*(_/c)+"px",w.innerHTML=`${_}&nbsp;${p}`}const zc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},sl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function No(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,w),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-w),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(w,0),right:new u.P(-w,0)}}if(w instanceof u.P||Array.isArray(w)){const r=u.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(w.center||[0,0]),top:u.P.convert(w.top||[0,0]),"top-left":u.P.convert(w["top-left"]||[0,0]),"top-right":u.P.convert(w["top-right"]||[0,0]),bottom:u.P.convert(w.bottom||[0,0]),"bottom-left":u.P.convert(w["bottom-left"]||[0,0]),"bottom-right":u.P.convert(w["bottom-right"]||[0,0]),left:u.P.convert(w.left||[0,0]),right:u.P.convert(w.right||[0,0])}}return No(new u.P(0,0))}const Rc=E;g.AJAXError=u.cz,g.Event=u.l,g.Evented=u.E,g.LngLat=u.S,g.MercatorCoordinate=u.a1,g.Point=u.P,g.addProtocol=u.cA,g.config=u.a,g.removeProtocol=u.cB,g.AttributionControl=Hl,g.BoxZoomHandler=Ff,g.CanvasSource=mo,g.CooperativeGesturesHandler=il,g.DoubleClickZoomHandler=$l,g.DragPanHandler=Zl,g.DragRotateHandler=zu,g.EdgeInsets=_o,g.FullscreenControl=class extends u.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=na,g.GeolocateControl=class extends u.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new u.S(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,_=this._map.getBearing(),S=u.e({bearing:_},this.options.fitBoundsOptions),A=_r.fromLngLat(c,p);this._map.fitBounds(A,S,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new u.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Xi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ni({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ni({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const p=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))}))}},this.options=u.e({},vn,w)}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return u._(this,arguments,void 0,(function*(r=!1){if(ma!==void 0&&!r)return ma;if(window.navigator.permissions===void 0)return ma=!!window.navigator.geolocation,ma;try{ma=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ma=!!window.navigator.geolocation}return ma}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,jo=0,Xi=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const r=this._map.project(w),c=this._map.unproject([r.x+100,r.y]),p=w.distanceTo(c)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jo--,Xi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jo++,jo>1?(w={maximumAge:6e5,timeout:0},Xi=!0):(w=this.options.positionOptions,Xi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=N.create("button","maplibregl-ctrl-globe",this._container),N.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},g.Hash=Pa,g.ImageSource=ja,g.KeyboardHandler=wr,g.LngLatBounds=_r,g.LogoControl=ku,g.Map=class extends ao{constructor(w){var r,c;u.cw.mark(u.cx.create);const p=Object.assign(Object.assign(Object.assign({},Si),w),{canvasContextAttributes:Object.assign(Object.assign({},Si.canvasContextAttributes),w.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Gr,S=new _i;if(p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),super(_,S,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Rh,this._controls=[],this._mapId=u.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},qf),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Oe.addThrottleControl((()=>this.isMoving())),this._requestManager=new Be(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const R=el((U=>{this._trackResize&&!this._removed&&(this.resize(U),this.redraw())}),50);this._resizeObserver=new ResizeObserver((U=>{O?R(U):O=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Vf(this,p),this._hash=p.hash&&new Pa(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,u.e({},p.fitBoundsOptions,{duration:0}))));const A=typeof p.style=="string"||((c=(r=p.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Hl(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new ku,p.logoPosition),this.on("style.load",(()=>{if(A||this._resizeTransform(),this.transform.unmodified){const O=u.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new u.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new u.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new u.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,r){return this.style.setGlobalStateProperty(w,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return Re(this.transform,w)}calculateCameraOptionsFromTo(w,r,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,r,c,p)}resize(w,r=!0){const[c,p]=this._containerDimensions(),_=this._getClampedPixelRatio(c,p);if(this._resizeCanvas(c,p,_),this.painter.resize(c,p,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const O=this._getClampedPixelRatio(c,p);this._resizeCanvas(c,p,O),this.painter.resize(c,p,O)}this._resizeTransform(r);const S=!this._moving;return S&&(this.stop(),this.fire(new u.l("movestart",w)).fire(new u.l("move",w))),this.fire(new u.l("resize",w)),S&&this.fire(new u.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[c,p]=this._containerDimensions();this.transform.resize(c,p,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,p,w)}_getClampedPixelRatio(w,r){const{0:c,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),S=w*_,A=r*_;return Math.min(S>c?c/S:1,A>p?p/A:1)*_}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(_r.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(u.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(u.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:S=>{const A=r.filter((R=>this.getLayer(R))),O=A.length!==0?this.queryRenderedFeatures(S.point,{layers:A}):[];O.length?p||(p=!0,c.call(this,new di(w,this,S.originalEvent,{features:O}))):p=!1},mouseout:()=>{p=!1}}}}if(w==="mouseleave"||w==="mouseout"){let p=!1;return{layers:r,listener:c,delegates:{mousemove:A=>{const O=r.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(A.point,{layers:O}):[]).length?p=!0:p&&(p=!1,c.call(this,new di(w,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,c.call(this,new di(w,this,A.originalEvent)))}}}}{const p=_=>{const S=r.filter((O=>this.getLayer(O))),A=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];A.length&&(_.features=A,c.call(this,_),delete _.features)};return{layers:r,listener:c,delegates:{[w]:p}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const p=this._delegatedListeners[w];for(let _=0;_<p.length;_++){const S=p[_];if(S.listener===c&&S.layers.length===r.length&&S.layers.every((A=>r.includes(A)))){for(const A in S.delegates)this.off(A,S.delegates[A]);return void p.splice(_,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(w,p,c);this._saveDelegatedListener(w,_);for(const S in _.delegates)this.on(S,_.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(w,p,c)}}}once(w,r,c){if(c===void 0)return super.once(w,r);const p=typeof r=="string"?[r]:r,_=this._createDelegatedListener(w,p,c);for(const S in _.delegates){const A=_.delegates[S];_.delegates[S]=(...O)=>{this._removeDelegatedListener(w,p,c),A(...O)}}this._saveDelegatedListener(w,_);for(const S in _.delegates)this.once(S,_.delegates[S]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const p=w instanceof u.P||Array.isArray(w),_=p?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:w)||{},_ instanceof u.P||typeof _[0]=="number")c=[u.P.convert(_)];else{const S=u.P.convert(_[0]),A=u.P.convert(_[1]);c=[S,new u.P(A.x,S.y),A,new u.P(S.x,A.y),S]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var c,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,r)));const _=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Tf(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,_):this.style.loadJSON(w,r,_),this):((p=(c=this.style)===null||c===void 0?void 0:c.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Tf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");u.j(c,new AbortController).then((p=>{this._updateDiff(p.data,r)})).catch((p=>{p&&this.fire(new u.k(p))}))}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.sourceCaches[w];if(r!==void 0)return r.loaded();this.fire(new u.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.sourceCaches[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===w.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===w.source&&u.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Lu(this.painter,r,w),this.painter.renderToTexture=new al(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var p;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=c.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const r in w){const c=w[r]._tiles;for(const p in c){const _=c[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,c){if(c){const p=this.getSource(c);if(!p)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);p.calculateTileZoom=pt(Math.max(1,w),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=pt(Math.max(1,w),Math.max(1,r));return this._update(!0),this}refreshTiles(w,r){const c=this.style.sourceCaches[w];if(!c)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((p=>new u.a4(p.z,p.x,p.y))))}addImage(w,r,c={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:S,stretchY:A,content:O,textFitWidth:R,textFitHeight:U}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:Z,data:q}=r,K=r;return this.style.addImage(w,{data:new u.R({width:G,height:Z},new Uint8Array(q)),pixelRatio:p,stretchX:S,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,w),this}}{const{width:G,height:Z,data:q}=j.getImageData(r);this.style.addImage(w,{data:new u.R({width:G,height:Z},q),pixelRatio:p,stretchX:S,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:_,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||u.b(r)?j.getImageData(r):r,{width:_,height:S,data:A}=p;if(_===void 0||S===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==c.data.width||S!==c.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(r instanceof HTMLImageElement||u.b(r));return c.data.replace(A,O),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Oe.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,p={}){return this.style.setPaintProperty(w,r,c,p),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,p={}){return this.style.setLayoutProperty(w,r,c,p),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,(p=>{p||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,(c=>{c||this._update(!0)})),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=N.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const _=this._controlContainer=N.create("div","maplibregl-control-container",w),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((A=>{S[A]=N.create("div",`maplibregl-ctrl-${A} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{r={requestedAttributes:w},p&&(r.statusMessage=p.statusMessage,r.type=p.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new Cu(c,this.transform),$.testSupport(c)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,c,p,_,S;const A=this._idleTriggered?this._fadeDuration:0,O=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,q=j.now();this.style.zoomHistory.update(Z,q);const K=new u.F(Z,{now:q,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=K.crossFadingFactor();re===1&&re===this._crossFadingFactor||(R=!0,this._crossFadingFactor=re),this.style.update(K)}const U=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==O;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cw.mark(u.cx.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const G=this._sourcesDirty||this._styleDirty||this._placementDirty;return G||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||G||(this._fullyLoaded=!0,u.cw.mark(u.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Oe.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cw.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,j.frame(this._frameRequest,(w=>{u.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!u.cy(r)&&!(function(c){return c.message===Po})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Oc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},g.MapMouseEvent=di,g.MapTouchEvent=us,g.MapWheelEvent=hs,g.Marker=Ni,g.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);r.title=p,r.setAttribute("aria-label",p)},this.options=u.e({},pa,w),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ln(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=N.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},g.Popup=class extends u.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ol(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=No(this.options.offset);if(!p){const A=this._container.offsetWidth,O=this._container.offsetHeight;let R;R=c.y+_.bottom.y<O?["top"]:c.y>this._map.transform.height-O?["bottom"]:[],c.x<A/2?R.push("left"):c.x>this._map.transform.width-A/2&&R.push("right"),p=R.length===0?"bottom":R.join("-")}let S=c.add(_[p]);this.options.subpixelPositioning||(S=S.round()),N.setTransform(this._container,`${an[p]} translate(${S.x}px,${S.y}px)`),qr(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(zc),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=u.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=w;p=c.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(sl);w&&w.focus()}},g.RasterDEMTileSource=qi,g.RasterTileSource=un,g.ScaleControl=class{constructor(w){this._onMove=()=>{jr(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,jr(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},dr),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=Gf,g.Style=Tf,g.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=ds,g.TwoFingersTouchRotateHandler=Ou,g.TwoFingersTouchZoomHandler=Dh,g.TwoFingersTouchZoomRotateHandler=zh,g.VectorTileSource=Jr,g.VideoSource=ks,g.addSourceType=(w,r)=>u._(void 0,void 0,void 0,(function*(){if(Ls(w))throw new Error(`A source type called "${w}" already exists.`);((c,p)=>{Bs[c]=p})(w,r)})),g.clearPrewarmedResources=function(){const w=xt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(tr),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.createTileMesh=yc,g.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return Wo().getRTLTextPluginStatus()},g.getVersion=function(){return Rc},g.getWorkerCount=function(){return Ae.workerCount},g.getWorkerUrl=function(){return u.a.WORKER_URL},g.importScriptInWorkers=function(w){return or().broadcast("IS",w)},g.prewarm=function(){Rt().acquire(tr)},g.setMaxParallelImageRequests=function(w){u.a.MAX_PARALLEL_IMAGE_REQUESTS=w},g.setRTLTextPlugin=function(w,r){return Wo().setRTLTextPlugin(w,r)},g.setWorkerCount=function(w){Ae.workerCount=w},g.setWorkerUrl=function(w){u.a.WORKER_URL=w}}));var y=i;return y}))})(Ev)),Ev.exports}var wD=xD();const Xu=El(wD);function ka(e){return(t,...i)=>SD(e,t,i)}function hm(e,t){return ka(XA(e,t).get)}const{apply:SD,getOwnPropertyDescriptor:XA,getPrototypeOf:$x,ownKeys:TD}=Reflect,{iterator:ty,toStringTag:AD}=Symbol,MD=Object,{create:Zx,defineProperty:ED}=MD,PD=Array,CD=PD.prototype,KA=CD[ty],DD=ka(KA),WA=ArrayBuffer,ID=WA.prototype;hm(ID,"byteLength");const Qw=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Qw&&hm(Qw.prototype,"byteLength");const QA=$x(Uint8Array);QA.from;const po=QA.prototype;po[ty];ka(po.keys);ka(po.values);ka(po.entries);ka(po.set);ka(po.reverse);ka(po.fill);ka(po.copyWithin);ka(po.sort);ka(po.slice);ka(po.subarray);hm(po,"buffer");hm(po,"byteOffset");hm(po,"length");hm(po,AD);const OD=Uint8Array,JA=Uint16Array,Hx=Uint32Array,zD=Float32Array,Vg=$x([][ty]()),eM=ka(Vg.next),RD=ka((function*(){})().next),kD=$x(Vg),BD=DataView.prototype,LD=ka(BD.getUint16),Yx=WeakMap,tM=Yx.prototype,rM=ka(tM.get),jD=ka(tM.set),nM=new Yx,ND=Zx(null,{next:{value:function(){const t=rM(nM,this);return eM(t)}},[ty]:{value:function(){return this}}});function FD(e){if(e[ty]===KA&&Vg.next===eM)return e;const t=Zx(ND);return jD(nM,t,DD(e)),t}const UD=new Yx,GD=Zx(kD,{next:{value:function(){const t=rM(UD,this);return RD(t)},writable:!0,configurable:!0}});for(const e of TD(Vg))e!=="next"&&ED(GD,e,XA(Vg,e));const iM=new WA(4),VD=new zD(iM),qD=new Hx(iM),Qc=new JA(512),Jc=new OD(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(Qc[e]=0,Qc[e|256]=32768,Jc[e]=24,Jc[e|256]=24):t<-14?(Qc[e]=1024>>-t-14,Qc[e|256]=1024>>-t-14|32768,Jc[e]=-t-1,Jc[e|256]=-t-1):t<=15?(Qc[e]=t+15<<10,Qc[e|256]=t+15<<10|32768,Jc[e]=13,Jc[e|256]=13):t<128?(Qc[e]=31744,Qc[e|256]=64512,Jc[e]=24,Jc[e|256]=24):(Qc[e]=31744,Qc[e|256]=64512,Jc[e]=13,Jc[e|256]=13)}const Xx=new Hx(2048);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;(t&8388608)===0;)t<<=1,i-=8388608;t&=-8388609,i+=947912704,Xx[e]=t|i}for(let e=1024;e<2048;++e)Xx[e]=939524096+(e-1024<<13);const fm=new Hx(64);for(let e=1;e<31;++e)fm[e]=e<<23;fm[31]=1199570944;fm[32]=2147483648;for(let e=33;e<63;++e)fm[e]=2147483648+(e-32<<23);fm[63]=3347054592;const aM=new JA(64);for(let e=1;e<64;++e)e!==32&&(aM[e]=1024);function $D(e){const t=e>>10;return qD[0]=Xx[aM[t]+(e&1023)]+fm[t],VD[0]}function oM(e,t,...i){return $D(LD(e,t,...FD(i)))}var av={exports:{}},Jw;function ZD(){if(Jw)return av.exports;Jw=1;function e(t,i,o){const d=o&&o.debug||!1;d&&console.log("[xml-utils] getting "+i+" in "+t);const y=typeof t=="object"?t.outer:t,g=y.slice(0,y.indexOf(">")+1),u=['"',"'"];for(let E=0;E<u.length;E++){const P=u[E],C=i+"\\="+P+"([^"+P+"]*)"+P;d&&console.log("[xml-utils] pattern:",C);const j=new RegExp(C).exec(g);if(d&&console.log("[xml-utils] match:",j),j)return j[1]}}return av.exports=e,av.exports.default=e,av.exports}var HD=ZD();const f_=El(HD);var ov={exports:{}},sv={exports:{}},lv={exports:{}},e2;function YD(){if(e2)return lv.exports;e2=1;function e(t,i,o){const y=new RegExp(i).exec(t.slice(o));return y?o+y.index:-1}return lv.exports=e,lv.exports.default=e,lv.exports}var cv={exports:{}},t2;function XD(){if(t2)return cv.exports;t2=1;function e(t,i,o){const y=new RegExp(i).exec(t.slice(o));return y?o+y.index+y[0].length-1:-1}return cv.exports=e,cv.exports.default=e,cv.exports}var uv={exports:{}},r2;function KD(){if(r2)return uv.exports;r2=1;function e(t,i){const o=new RegExp(i,"g"),d=t.match(o);return d?d.length:0}return uv.exports=e,uv.exports.default=e,uv.exports}var n2;function WD(){if(n2)return sv.exports;n2=1;const e=YD(),t=XD(),i=KD();function o(d,y,g){const u=g&&g.debug||!1,E=!(g&&typeof g.nested===!1),P=g&&g.startIndex||0;u&&console.log("[xml-utils] starting findTagByName with",y," and ",g);const C=e(d,`<${y}[ 
>/]`,P);if(u&&console.log("[xml-utils] start:",C),C===-1)return;const z=d.slice(C+y.length);let j=t(z,"^[^<]*[ /]>",0);const N=j!==-1&&z[j-1]==="/";if(u&&console.log("[xml-utils] selfClosing:",N),N===!1)if(E){let oe=0,le=1,ue=0;for(;(j=t(z,"[ /]"+y+">",oe))!==-1;){const Oe=z.substring(oe,j+1);if(le+=i(Oe,"<"+y+`[ 
	>]`),ue+=i(Oe,"</"+y+">"),ue>=le)break;oe=j}}else j=t(z,"[ /]"+y+">",0);const $=C+y.length+j+1;if(u&&console.log("[xml-utils] end:",$),$===-1)return;const X=d.slice(C,$);let W;return N?W=null:W=X.slice(X.indexOf(">")+1,X.lastIndexOf("<")),{inner:W,outer:X,start:C,end:$}}return sv.exports=o,sv.exports.default=o,sv.exports}var i2;function QD(){if(i2)return ov.exports;i2=1;const e=WD();function t(i,o,d){const y=[],g=d&&d.debug||!1,u=d&&typeof d.nested=="boolean"?d.nested:!0;let E=d&&d.startIndex||0,P;for(;P=e(i,o,{debug:g,startIndex:E});)u?E=P.start+1+o.length:E=P.end,y.push(P);return g&&console.log("findTagsByName found",y.length,"tags"),y}return ov.exports=t,ov.exports.default=t,ov.exports}var JD=QD();const eI=El(JD),jg={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},eu={};for(const e in jg)jg.hasOwnProperty(e)&&(eu[jg[e]]=parseInt(e,10));const tI=[eu.BitsPerSample,eu.ExtraSamples,eu.SampleFormat,eu.StripByteCounts,eu.StripOffsets,eu.StripRowCounts,eu.TileByteCounts,eu.TileOffsets,eu.SubIFDs],d_={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Er={};for(const e in d_)d_.hasOwnProperty(e)&&(Er[d_[e]]=parseInt(e,10));const Ss={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},rI={Unspecified:0},nV={AddCompression:1},iV={None:0,Deflate:1,Zstandard:2},nI={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function iI(e,t){const{width:i,height:o}=e,d=new Uint8Array(i*o*3);let y;for(let g=0,u=0;g<e.length;++g,u+=3)y=256-e[g]/t*256,d[u]=y,d[u+1]=y,d[u+2]=y;return d}function aI(e,t){const{width:i,height:o}=e,d=new Uint8Array(i*o*3);let y;for(let g=0,u=0;g<e.length;++g,u+=3)y=e[g]/t*256,d[u]=y,d[u+1]=y,d[u+2]=y;return d}function oI(e,t){const{width:i,height:o}=e,d=new Uint8Array(i*o*3),y=t.length/3,g=t.length/3*2;for(let u=0,E=0;u<e.length;++u,E+=3){const P=e[u];d[E]=t[P]/65536*256,d[E+1]=t[P+y]/65536*256,d[E+2]=t[P+g]/65536*256}return d}function sI(e){const{width:t,height:i}=e,o=new Uint8Array(t*i*3);for(let d=0,y=0;d<e.length;d+=4,y+=3){const g=e[d],u=e[d+1],E=e[d+2],P=e[d+3];o[y]=255*((255-g)/256)*((255-P)/256),o[y+1]=255*((255-u)/256)*((255-P)/256),o[y+2]=255*((255-E)/256)*((255-P)/256)}return o}function lI(e){const{width:t,height:i}=e,o=new Uint8ClampedArray(t*i*3);for(let d=0,y=0;d<e.length;d+=3,y+=3){const g=e[d],u=e[d+1],E=e[d+2];o[y]=g+1.402*(E-128),o[y+1]=g-.34414*(u-128)-.71414*(E-128),o[y+2]=g+1.772*(u-128)}return o}const cI=.95047,uI=1,hI=1.08883;function fI(e){const{width:t,height:i}=e,o=new Uint8Array(t*i*3);for(let d=0,y=0;d<e.length;d+=3,y+=3){const g=e[d+0],u=e[d+1]<<24>>24,E=e[d+2]<<24>>24;let P=(g+16)/116,C=u/500+P,z=P-E/200,j,N,$;C=cI*(C*C*C>.008856?C*C*C:(C-16/116)/7.787),P=uI*(P*P*P>.008856?P*P*P:(P-16/116)/7.787),z=hI*(z*z*z>.008856?z*z*z:(z-16/116)/7.787),j=C*3.2406+P*-1.5372+z*-.4986,N=C*-.9689+P*1.8758+z*.0415,$=C*.0557+P*-.204+z*1.057,j=j>.0031308?1.055*j**(1/2.4)-.055:12.92*j,N=N>.0031308?1.055*N**(1/2.4)-.055:12.92*N,$=$>.0031308?1.055*$**(1/2.4)-.055:12.92*$,o[y]=Math.max(0,Math.min(1,j))*255,o[y+1]=Math.max(0,Math.min(1,N))*255,o[y+2]=Math.max(0,Math.min(1,$))*255}return o}const dI="modulepreload",pI=function(e){return"/"+e},a2={},ff=function(t,i,o){let d=Promise.resolve();if(i&&i.length>0){let E=function(P){return Promise.all(P.map(C=>Promise.resolve(C).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),u=g?.nonce||g?.getAttribute("nonce");d=E(i.map(P=>{if(P=pI(P),P in a2)return;a2[P]=!0;const C=P.endsWith(".css"),z=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${P}"]${z}`))return;const j=document.createElement("link");if(j.rel=C?"stylesheet":dI,C||(j.as="script"),j.crossOrigin="",j.href=P,u&&j.setAttribute("nonce",u),document.head.appendChild(j),C)return new Promise((N,$)=>{j.addEventListener("load",N),j.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${P}`)))})}))}function y(g){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=g,window.dispatchEvent(u),!u.defaultPrevented)throw g}return d.then(g=>{for(const u of g||[])u.status==="rejected"&&y(u.reason);return t().catch(y)})},sM=new Map;function df(e,t){Array.isArray(e)||(e=[e]),e.forEach(i=>sM.set(i,t))}async function lM(e){const t=sM.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const i=await t();return new i(e)}df([void 0,1],()=>ff(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1])).then(e=>e.default));df(5,()=>ff(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1])).then(e=>e.default));df(6,()=>{throw new Error("old style JPEG compression is not supported.")});df(7,()=>ff(()=>import("./jpeg-vtRboCKw.js"),__vite__mapDeps([3,1])).then(e=>e.default));df([8,32946],()=>ff(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([4,5,1])).then(e=>e.default));df(32773,()=>ff(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1])).then(e=>e.default));df(34887,()=>ff(()=>import("./lerc-BGsRiwbr.js"),__vite__mapDeps([7,5,1])).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));df(50001,()=>ff(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([8,1])).then(e=>e.default));function f0(e,t,i,o=1){return new(Object.getPrototypeOf(e)).constructor(t*i*o)}function mI(e,t,i,o,d){const y=t/o,g=i/d;return e.map(u=>{const E=f0(u,o,d);for(let P=0;P<d;++P){const C=Math.min(Math.round(g*P),i-1);for(let z=0;z<o;++z){const j=Math.min(Math.round(y*z),t-1),N=u[C*t+j];E[P*o+z]=N}}return E})}function Qp(e,t,i){return(1-i)*e+i*t}function gI(e,t,i,o,d){const y=t/o,g=i/d;return e.map(u=>{const E=f0(u,o,d);for(let P=0;P<d;++P){const C=g*P,z=Math.floor(C),j=Math.min(Math.ceil(C),i-1);for(let N=0;N<o;++N){const $=y*N,X=$%1,W=Math.floor($),oe=Math.min(Math.ceil($),t-1),le=u[z*t+W],ue=u[z*t+oe],Oe=u[j*t+W],Be=u[j*t+oe],Le=Qp(Qp(le,ue,X),Qp(Oe,Be,X),C%1);E[P*o+N]=Le}}return E})}function yI(e,t,i,o,d,y="nearest"){switch(y.toLowerCase()){case"nearest":return mI(e,t,i,o,d);case"bilinear":case"linear":return gI(e,t,i,o,d);default:throw new Error(`Unsupported resampling method: '${y}'`)}}function vI(e,t,i,o,d,y){const g=t/o,u=i/d,E=f0(e,o,d,y);for(let P=0;P<d;++P){const C=Math.min(Math.round(u*P),i-1);for(let z=0;z<o;++z){const j=Math.min(Math.round(g*z),t-1);for(let N=0;N<y;++N){const $=e[C*t*y+j*y+N];E[P*o*y+z*y+N]=$}}}return E}function _I(e,t,i,o,d,y){const g=t/o,u=i/d,E=f0(e,o,d,y);for(let P=0;P<d;++P){const C=u*P,z=Math.floor(C),j=Math.min(Math.ceil(C),i-1);for(let N=0;N<o;++N){const $=g*N,X=$%1,W=Math.floor($),oe=Math.min(Math.ceil($),t-1);for(let le=0;le<y;++le){const ue=e[z*t*y+W*y+le],Oe=e[z*t*y+oe*y+le],Be=e[j*t*y+W*y+le],Le=e[j*t*y+oe*y+le],qe=Qp(Qp(ue,Oe,X),Qp(Be,Le,X),C%1);E[P*o*y+N*y+le]=qe}}}return E}function bI(e,t,i,o,d,y,g="nearest"){switch(g.toLowerCase()){case"nearest":return vI(e,t,i,o,d,y);case"bilinear":case"linear":return _I(e,t,i,o,d,y);default:throw new Error(`Unsupported resampling method: '${g}'`)}}function xI(e,t,i){let o=0;for(let d=t;d<i;++d)o+=e[d];return o}function Hb(e,t,i){switch(e){case 1:if(t<=8)return new Uint8Array(i);if(t<=16)return new Uint16Array(i);if(t<=32)return new Uint32Array(i);break;case 2:if(t===8)return new Int8Array(i);if(t===16)return new Int16Array(i);if(t===32)return new Int32Array(i);break;case 3:switch(t){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}break}throw Error("Unsupported data format/bitsPerSample")}function wI(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function SI(e,t,i,o,d,y,g){const u=new DataView(e),E=i===2?g*y:g*y*o,P=i===2?1:o,C=Hb(t,d,E),z=parseInt("1".repeat(d),2);if(t===1){let j;i===1?j=o*d:j=d;let N=y*j;(N&7)!==0&&(N=N+7&-8);for(let $=0;$<g;++$){const X=$*N;for(let W=0;W<y;++W){const oe=X+W*P*d;for(let le=0;le<P;++le){const ue=oe+le*d,Oe=($*y+W)*P+le,Be=Math.floor(ue/8),Le=ue%8;if(Le+d<=8)C[Oe]=u.getUint8(Be)>>8-d-Le&z;else if(Le+d<=16)C[Oe]=u.getUint16(Be)>>16-d-Le&z;else if(Le+d<=24){const qe=u.getUint16(Be)<<8|u.getUint8(Be+2);C[Oe]=qe>>24-d-Le&z}else C[Oe]=u.getUint32(Be)>>32-d-Le&z}}}}return C.buffer}class TI{constructor(t,i,o,d,y,g){this.fileDirectory=t,this.geoKeys=i,this.dataView=o,this.littleEndian=d,this.tiles=y?{}:null,this.isTiled=!t.StripOffsets;const u=t.PlanarConfiguration;if(this.planarConfiguration=typeof u>"u"?1:u,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=g}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let i=0;i<this.fileDirectory.BitsPerSample.length;++i)t+=this.getSampleByteSize(i);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const i=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,o=this.fileDirectory.BitsPerSample[t];switch(i){case 1:if(o<=8)return DataView.prototype.getUint8;if(o<=16)return DataView.prototype.getUint16;if(o<=32)return DataView.prototype.getUint32;break;case 2:if(o<=8)return DataView.prototype.getInt8;if(o<=16)return DataView.prototype.getInt16;if(o<=32)return DataView.prototype.getInt32;break;case 3:switch(o){case 16:return function(d,y){return oM(this,d,y)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,i){const o=this.getSampleFormat(t),d=this.getBitsPerSample(t);return Hb(o,d,i)}async getTileOrStrip(t,i,o,d,y){const g=Math.ceil(this.getWidth()/this.getTileWidth()),u=Math.ceil(this.getHeight()/this.getTileHeight());let E;const{tiles:P}=this;this.planarConfiguration===1?E=i*g+t:this.planarConfiguration===2&&(E=o*g*u+i*g+t);let C,z;this.isTiled?(C=this.fileDirectory.TileOffsets[E],z=this.fileDirectory.TileByteCounts[E]):(C=this.fileDirectory.StripOffsets[E],z=this.fileDirectory.StripByteCounts[E]);const j=(await this.source.fetch([{offset:C,length:z}],y))[0];let N;return P===null||!P[E]?(N=(async()=>{let $=await d.decode(this.fileDirectory,j);const X=this.getSampleFormat(),W=this.getBitsPerSample();return wI(X,W)&&($=SI($,X,this.planarConfiguration,this.getSamplesPerPixel(),W,this.getTileWidth(),this.getBlockHeight(i))),$})(),P!==null&&(P[E]=N)):N=P[E],{x:t,y:i,sample:o,data:await N}}async _readRaster(t,i,o,d,y,g,u,E,P){const C=this.getTileWidth(),z=this.getTileHeight(),j=this.getWidth(),N=this.getHeight(),$=Math.max(Math.floor(t[0]/C),0),X=Math.min(Math.ceil(t[2]/C),Math.ceil(j/C)),W=Math.max(Math.floor(t[1]/z),0),oe=Math.min(Math.ceil(t[3]/z),Math.ceil(N/z)),le=t[2]-t[0];let ue=this.getBytesPerPixel();const Oe=[],Be=[];for(let at=0;at<i.length;++at)this.planarConfiguration===1?Oe.push(xI(this.fileDirectory.BitsPerSample,0,i[at])/8):Oe.push(0),Be.push(this.getReaderForSample(i[at]));const Le=[],{littleEndian:qe}=this;for(let at=W;at<oe;++at)for(let Mt=$;Mt<X;++Mt){let Ot;this.planarConfiguration===1&&(Ot=this.getTileOrStrip(Mt,at,0,y,P));for(let ft=0;ft<i.length;++ft){const gt=ft,Ft=i[ft];this.planarConfiguration===2&&(ue=this.getSampleByteSize(Ft),Ot=this.getTileOrStrip(Mt,at,Ft,y,P));const Ht=Ot.then(Kt=>{const $e=Kt.data,ot=new DataView($e),Dt=this.getBlockHeight(Kt.y),bt=Kt.y*z,tr=Kt.x*C,Ae=bt+Dt,Ve=(Kt.x+1)*C,xt=Be[gt],Pt=Math.min(Dt,Dt-(Ae-t[3]),N-bt),Rt=Math.min(C,C-(Ve-t[2]),j-tr);for(let Gt=Math.max(0,t[1]-bt);Gt<Pt;++Gt)for(let or=Math.max(0,t[0]-tr);or<Rt;++or){const kr=(Gt*C+or)*ue,vt=xt.call(ot,kr+Oe[gt],qe);let Wt;d?(Wt=(Gt+bt-t[1])*le*i.length+(or+tr-t[0])*i.length+gt,o[Wt]=vt):(Wt=(Gt+bt-t[1])*le+or+tr-t[0],o[gt][Wt]=vt)}});Le.push(Ht)}}if(await Promise.all(Le),g&&t[2]-t[0]!==g||u&&t[3]-t[1]!==u){let at;return d?at=bI(o,t[2]-t[0],t[3]-t[1],g,u,i.length,E):at=yI(o,t[2]-t[0],t[3]-t[1],g,u,E),at.width=g,at.height=u,at}return o.width=g||t[2]-t[0],o.height=u||t[3]-t[1],o}async readRasters({window:t,samples:i=[],interleave:o,pool:d=null,width:y,height:g,resampleMethod:u,fillValue:E,signal:P}={}){const C=t||[0,0,this.getWidth(),this.getHeight()];if(C[0]>C[2]||C[1]>C[3])throw new Error("Invalid subsets");const z=C[2]-C[0],j=C[3]-C[1],N=z*j,$=this.getSamplesPerPixel();if(!i||!i.length)for(let le=0;le<$;++le)i.push(le);else for(let le=0;le<i.length;++le)if(i[le]>=$)return Promise.reject(new RangeError(`Invalid sample index '${i[le]}'.`));let X;if(o){const le=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,ue=Math.max.apply(null,this.fileDirectory.BitsPerSample);X=Hb(le,ue,N*i.length),E&&X.fill(E)}else{X=[];for(let le=0;le<i.length;++le){const ue=this.getArrayForSample(i[le],N);Array.isArray(E)&&le<E.length?ue.fill(E[le]):E&&!Array.isArray(E)&&ue.fill(E),X.push(ue)}}const W=d||await lM(this.fileDirectory);return await this._readRaster(C,i,X,o,W,y,g,u,P)}async readRGB({window:t,interleave:i=!0,pool:o=null,width:d,height:y,resampleMethod:g,enableAlpha:u=!1,signal:E}={}){const P=t||[0,0,this.getWidth(),this.getHeight()];if(P[0]>P[2]||P[1]>P[3])throw new Error("Invalid subsets");const C=this.fileDirectory.PhotometricInterpretation;if(C===Ss.RGB){let oe=[0,1,2];if(this.fileDirectory.ExtraSamples!==rI.Unspecified&&u){oe=[];for(let le=0;le<this.fileDirectory.BitsPerSample.length;le+=1)oe.push(le)}return this.readRasters({window:t,interleave:i,samples:oe,pool:o,width:d,height:y,resampleMethod:g,signal:E})}let z;switch(C){case Ss.WhiteIsZero:case Ss.BlackIsZero:case Ss.Palette:z=[0];break;case Ss.CMYK:z=[0,1,2,3];break;case Ss.YCbCr:case Ss.CIELab:z=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const j={window:P,interleave:!0,samples:z,pool:o,width:d,height:y,resampleMethod:g,signal:E},{fileDirectory:N}=this,$=await this.readRasters(j),X=2**this.fileDirectory.BitsPerSample[0];let W;switch(C){case Ss.WhiteIsZero:W=iI($,X);break;case Ss.BlackIsZero:W=aI($,X);break;case Ss.Palette:W=oI($,N.ColorMap);break;case Ss.CMYK:W=sI($);break;case Ss.YCbCr:W=lI($);break;case Ss.CIELab:W=fI($);break;default:throw new Error("Unsupported photometric interpretation.")}if(!i){const oe=new Uint8Array(W.length/3),le=new Uint8Array(W.length/3),ue=new Uint8Array(W.length/3);for(let Oe=0,Be=0;Oe<W.length;Oe+=3,++Be)oe[Be]=W[Oe],le[Be]=W[Oe+1],ue[Be]=W[Oe+2];W=[oe,le,ue]}return W.width=$.width,W.height=$.height,W}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let i=0;i<this.fileDirectory.ModelTiepoint.length;i+=6)t.push({i:this.fileDirectory.ModelTiepoint[i],j:this.fileDirectory.ModelTiepoint[i+1],k:this.fileDirectory.ModelTiepoint[i+2],x:this.fileDirectory.ModelTiepoint[i+3],y:this.fileDirectory.ModelTiepoint[i+4],z:this.fileDirectory.ModelTiepoint[i+5]});return t}getGDALMetadata(t=null){const i={};if(!this.fileDirectory.GDAL_METADATA)return null;const o=this.fileDirectory.GDAL_METADATA;let d=eI(o,"Item");t===null?d=d.filter(y=>f_(y,"sample")===void 0):d=d.filter(y=>Number(f_(y,"sample"))===t);for(let y=0;y<d.length;++y){const g=d[y];i[f_(g,"name")]=g.inner}return i}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,i=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(i)return[i[3],i[7],i[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const i=this.fileDirectory.ModelPixelScale,o=this.fileDirectory.ModelTransformation;if(i)return[i[0],-i[1],i[2]];if(o)return o[1]===0&&o[4]===0?[o[0],-o[5],o[10]]:[Math.sqrt(o[0]*o[0]+o[4]*o[4]),-Math.sqrt(o[1]*o[1]+o[5]*o[5]),o[10]];if(t){const[d,y,g]=t.getResolution();return[d*t.getWidth()/this.getWidth(),y*t.getHeight()/this.getHeight(),g*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const i=this.getHeight(),o=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[d,y,g,u,E,P,C,z]=this.fileDirectory.ModelTransformation,N=[[0,0],[0,i],[o,0],[o,i]].map(([W,oe])=>[u+d*W+y*oe,z+E*W+P*oe]),$=N.map(W=>W[0]),X=N.map(W=>W[1]);return[Math.min(...$),Math.min(...X),Math.max(...$),Math.max(...X)]}else{const d=this.getOrigin(),y=this.getResolution(),g=d[0],u=d[1],E=g+y[0]*o,P=u+y[1]*i;return[Math.min(g,E),Math.min(u,P),Math.max(g,E),Math.max(u,P)]}}}class AI{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,i){const o=this.getUint32(t,i),d=this.getUint32(t+4,i);let y;if(i){if(y=o+2**32*d,!Number.isSafeInteger(y))throw new Error(`${y} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return y}if(y=2**32*o+d,!Number.isSafeInteger(y))throw new Error(`${y} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return y}getInt64(t,i){let o=0;const d=(this._dataView.getUint8(t+(i?7:0))&128)>0;let y=!0;for(let g=0;g<8;g++){let u=this._dataView.getUint8(t+(i?g:7-g));d&&(y?u!==0&&(u=~(u-1)&255,y=!1):u=~u&255),o+=u*256**g}return d&&(o=-o),o}getUint8(t,i){return this._dataView.getUint8(t,i)}getInt8(t,i){return this._dataView.getInt8(t,i)}getUint16(t,i){return this._dataView.getUint16(t,i)}getInt16(t,i){return this._dataView.getInt16(t,i)}getUint32(t,i){return this._dataView.getUint32(t,i)}getInt32(t,i){return this._dataView.getInt32(t,i)}getFloat16(t,i){return oM(this._dataView,t,i)}getFloat32(t,i){return this._dataView.getFloat32(t,i)}getFloat64(t,i){return this._dataView.getFloat64(t,i)}}class MI{constructor(t,i,o,d){this._dataView=new DataView(t),this._sliceOffset=i,this._littleEndian=o,this._bigTiff=d}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,i){return this.sliceOffset<=t&&this.sliceTop>=t+i}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const i=this.readUint32(t),o=this.readUint32(t+4);let d;if(this._littleEndian){if(d=i+2**32*o,!Number.isSafeInteger(d))throw new Error(`${d} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return d}if(d=2**32*i+o,!Number.isSafeInteger(d))throw new Error(`${d} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return d}readInt64(t){let i=0;const o=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let d=!0;for(let y=0;y<8;y++){let g=this._dataView.getUint8(t+(this._littleEndian?y:7-y));o&&(d?g!==0&&(g=~(g-1)&255,d=!1):g=~g&255),i+=g*256**y}return o&&(i=-i),i}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const EI=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class PI{constructor(t=EI,i){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=i?Promise.resolve(i):new Promise(o=>{ff(()=>import("./decoder-tqM1uIvc.js"),[]).then(d=>{o(d.create)})}),this._awaitingDecoder.then(o=>{this._awaitingDecoder=null,this.workers=[];for(let d=0;d<t;d++)this.workers.push({worker:o(),idle:!0})}))}async decode(t,i){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?lM(t).then(o=>o.decode(t,i)):new Promise(o=>{const d=this.workers.find(u=>u.idle)||this.workers[Math.floor(Math.random()*this.size)];d.idle=!1;const y=this.messageId++,g=u=>{u.data.id===y&&(d.idle=!0,o(u.data.decoded),d.worker.removeEventListener("message",g))};d.worker.addEventListener("message",g),d.worker.postMessage({fileDirectory:t,buffer:i,id:y},[i])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const o2=`\r
\r
`;function cM(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[i,o]of e)t[i.toLowerCase()]=o;return t}function CI(e){const t=e.split(`\r
`).map(i=>{const o=i.split(":").map(d=>d.trim());return o[0]=o[0].toLowerCase(),o});return cM(t)}function DI(e){const[t,...i]=e.split(";").map(d=>d.trim()),o=i.map(d=>d.split("="));return{type:t,params:cM(o)}}function Yb(e){let t,i,o;return e&&([,t,i,o]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),i=parseInt(i,10),o=parseInt(o,10)),{start:t,end:i,total:o}}function II(e,t){let i=null;const o=new TextDecoder("ascii"),d=[],y=`--${t}`,g=`${y}--`;for(let u=0;u<10;++u)o.decode(new Uint8Array(e,u,y.length))===y&&(i=u);if(i===null)throw new Error("Could not find initial boundary");for(;i<e.byteLength;){const u=o.decode(new Uint8Array(e,i,Math.min(y.length+1024,e.byteLength-i)));if(u.length===0||u.startsWith(g))break;if(!u.startsWith(y))throw new Error("Part does not start with boundary");const E=u.substr(y.length+2);if(E.length===0)break;const P=E.indexOf(o2),C=CI(E.substr(0,P)),{start:z,end:j,total:N}=Yb(C["content-range"]),$=i+y.length+P+o2.length,X=parseInt(j,10)+1-parseInt(z,10);d.push({headers:C,data:e.slice($,$+X),offset:z,length:X,fileSize:N}),i=$+X+4}return d}class uM{async fetch(t,i=void 0){return Promise.all(t.map(o=>this.fetchSlice(o,i)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}let OI=class extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[i,o]of t)this.onEviction(i,o.value)}_deleteIfExpired(t,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,i.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,i){if(this._deleteIfExpired(t,i)===!1)return i.value}_getItemValue(t,i){return i.expiry?this._getOrDeleteIfExpired(t,i):i.value}_peek(t,i){const o=i.get(t);return this._getItemValue(t,o)}_set(t,i){this.cache.set(t,i),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,i){this.oldCache.delete(t),this._set(t,i)}*_entriesAscending(){for(const t of this.oldCache){const[i,o]=t;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield t)}for(const t of this.cache){const[i,o]=t;this._deleteIfExpired(i,o)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const i=this.cache.get(t);return this._getItemValue(t,i)}if(this.oldCache.has(t)){const i=this.oldCache.get(t);if(this._deleteIfExpired(t,i)===!1)return this._moveToRecent(t,i),i.value}}set(t,i,{maxAge:o=this.maxAge}={}){const d=typeof o=="number"&&o!==Number.POSITIVE_INFINITY?Date.now()+o:void 0;return this.cache.has(t)?this.cache.set(t,{value:i,expiry:d}):this._set(t,{value:i,expiry:d}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const i=this.cache.delete(t);return i&&this._size--,this.oldCache.delete(t)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const i=[...this._entriesAscending()],o=i.length-t;o<0?(this.cache=new Map(i),this.oldCache=new Map,this._size=i.length):(o>0&&this._emitEvictions(i.slice(0,o)),this.oldCache=new Map(i.slice(o)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[i,o]=t;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}for(const t of this.oldCache){const[i,o]=t;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesDescending(){let t=[...this.cache];for(let i=t.length-1;i>=0;--i){const o=t[i],[d,y]=o;this._deleteIfExpired(d,y)===!1&&(yield[d,y.value])}t=[...this.oldCache];for(let i=t.length-1;i>=0;--i){const o=t[i],[d,y]=o;this.cache.has(d)||this._deleteIfExpired(d,y)===!1&&(yield[d,y.value])}}*entriesAscending(){for(const[t,i]of this._entriesAscending())yield[t,i.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const i of this.oldCache.keys())this.cache.has(i)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,i=this){for(const[o,d]of this.entriesAscending())t.call(i,d,o,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};async function zI(e){return new Promise(t=>setTimeout(t,e))}function RI(e,t){const i=Array.isArray(e)?e:Array.from(e),o=Array.isArray(t)?t:Array.from(t);return i.map((d,y)=>[d,o[y]])}class tm extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,tm),this.name="AbortError"}}class kI extends Error{constructor(t,i){super(i),this.errors=t,this.message=i,this.name="AggregateError"}}const BI=kI;class LI{constructor(t,i,o=null){this.offset=t,this.length=i,this.data=o}get top(){return this.offset+this.length}}class s2{constructor(t,i,o){this.offset=t,this.length=i,this.blockIds=o}}class jI extends uM{constructor(t,{blockSize:i=65536,cacheSize:o=100}={}){super(),this.source=t,this.blockSize=i,this.blockCache=new OI({maxSize:o,onEviction:(d,y)=>{this.evictedBlocks.set(d,y)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,i){const o=[],d=[],y=[];this.evictedBlocks.clear();for(const{offset:j,length:N}of t){let $=j+N;const{fileSize:X}=this;X!==null&&($=Math.min($,X));const W=Math.floor(j/this.blockSize)*this.blockSize;for(let oe=W;oe<$;oe+=this.blockSize){const le=Math.floor(oe/this.blockSize);!this.blockCache.has(le)&&!this.blockRequests.has(le)&&(this.blockIdsToFetch.add(le),d.push(le)),this.blockRequests.has(le)&&o.push(this.blockRequests.get(le)),y.push(le)}}await zI(),this.fetchBlocks(i);const g=[];for(const j of d)this.blockRequests.has(j)&&g.push(this.blockRequests.get(j));await Promise.allSettled(o),await Promise.allSettled(g);const u=[],E=y.filter(j=>this.abortedBlockIds.has(j)||!this.blockCache.has(j));if(E.forEach(j=>this.blockIdsToFetch.add(j)),E.length>0&&i&&!i.aborted){this.fetchBlocks(null);for(const j of E){const N=this.blockRequests.get(j);if(!N)throw new Error(`Block ${j} is not in the block requests`);u.push(N)}await Promise.allSettled(u)}if(i&&i.aborted)throw new tm("Request was aborted");const P=y.map(j=>this.blockCache.get(j)||this.evictedBlocks.get(j)),C=P.filter(j=>!j);if(C.length)throw new BI(C,"Request failed");const z=new Map(RI(y,P));return this.readSliceData(t,z)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const i=this.groupBlocks(this.blockIdsToFetch),o=this.source.fetch(i,t);for(let d=0;d<i.length;++d){const y=i[d];for(const g of y.blockIds)this.blockRequests.set(g,(async()=>{try{const u=(await o)[d],E=g*this.blockSize,P=E-u.offset,C=Math.min(P+this.blockSize,u.data.byteLength),z=u.data.slice(P,C),j=new LI(E,z.byteLength,z,g);this.blockCache.set(g,j),this.abortedBlockIds.delete(g)}catch(u){if(u.name==="AbortError")u.signal=t,this.blockCache.delete(g),this.abortedBlockIds.add(g);else throw u}finally{this.blockRequests.delete(g)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const i=Array.from(t).sort((g,u)=>g-u);if(i.length===0)return[];let o=[],d=null;const y=[];for(const g of i)d===null||d+1===g?(o.push(g),d=g):(y.push(new s2(o[0]*this.blockSize,o.length*this.blockSize,o)),o=[g],d=g);return y.push(new s2(o[0]*this.blockSize,o.length*this.blockSize,o)),y}readSliceData(t,i){return t.map(o=>{let d=o.offset+o.length;this.fileSize!==null&&(d=Math.min(this.fileSize,d));const y=Math.floor(o.offset/this.blockSize),g=Math.floor(d/this.blockSize),u=new ArrayBuffer(o.length),E=new Uint8Array(u);for(let P=y;P<=g;++P){const C=i.get(P),z=C.offset-o.offset,j=C.top-d;let N=0,$=0,X;z<0?N=-z:z>0&&($=z),j<0?X=C.length-N:X=d-C.offset-N;const W=new Uint8Array(C.data,N,X);E.set(W,$)}return u})}}class Kx{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Wx{constructor(t){this.url=t}async request({headers:t,signal:i}={}){throw new Error("request is not implemented")}}class NI extends Kx{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class FI extends Wx{constructor(t,i){super(t),this.credentials=i}async request({headers:t,signal:i}={}){const o=await fetch(this.url,{headers:t,credentials:this.credentials,signal:i});return new NI(o)}}class UI extends Kx{constructor(t,i){super(),this.xhr=t,this.data=i}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class GI extends Wx{constructRequest(t,i){return new Promise((o,d)=>{const y=new XMLHttpRequest;y.open("GET",this.url),y.responseType="arraybuffer";for(const[g,u]of Object.entries(t))y.setRequestHeader(g,u);y.onload=()=>{const g=y.response;o(new UI(y,g))},y.onerror=d,y.onabort=()=>d(new tm("Request aborted")),y.send(),i&&(i.aborted&&y.abort(),i.addEventListener("abort",()=>y.abort()))})}async request({headers:t,signal:i}={}){return await this.constructRequest(t,i)}}const p_={};class VI extends Kx{constructor(t,i){super(),this.response=t,this.dataPromise=i}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class qI extends Wx{constructor(t){super(t),this.parsedUrl=p_.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",p_)}constructRequest(t,i){return new Promise((o,d)=>{const y=this.httpApi.get({...this.parsedUrl,headers:t},g=>{const u=new Promise(E=>{const P=[];g.on("data",C=>{P.push(C)}),g.on("end",()=>{const C=Buffer.concat(P).buffer;E(C)}),g.on("error",d)});o(new VI(g,u))});y.on("error",d),i&&(i.aborted&&y.destroy(new tm("Request aborted")),i.addEventListener("abort",()=>y.destroy(new tm("Request aborted"))))})}async request({headers:t,signal:i}={}){return await this.constructRequest(t,i)}}class Qx extends uM{constructor(t,i,o,d){super(),this.client=t,this.headers=i,this.maxRanges=o,this.allowFullFile=d,this._fileSize=null}async fetch(t,i){return this.maxRanges>=t.length?this.fetchSlices(t,i):(this.maxRanges>0&&t.length>1,Promise.all(t.map(o=>this.fetchSlice(o,i))))}async fetchSlices(t,i){const o=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:d,length:y})=>`${d}-${d+y}`).join(",")}`},signal:i});if(o.ok)if(o.status===206){const{type:d,params:y}=DI(o.getHeader("content-type"));if(d==="multipart/byteranges"){const z=II(await o.getData(),y.boundary);return this._fileSize=z[0].fileSize||null,z}const g=await o.getData(),{start:u,end:E,total:P}=Yb(o.getHeader("content-range"));this._fileSize=P||null;const C=[{data:g,offset:u,length:E-u}];if(t.length>1){const z=await Promise.all(t.slice(1).map(j=>this.fetchSlice(j,i)));return C.concat(z)}return C}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const d=await o.getData();return this._fileSize=d.byteLength,[{data:d,offset:0,length:d.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,i){const{offset:o,length:d}=t,y=await this.client.request({headers:{...this.headers,Range:`bytes=${o}-${o+d}`},signal:i});if(y.ok)if(y.status===206){const g=await y.getData(),{total:u}=Yb(y.getHeader("content-range"));return this._fileSize=u||null,{data:g,offset:o,length:d}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const g=await y.getData();return this._fileSize=g.byteLength,{data:g,offset:0,length:g.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Jx(e,{blockSize:t,cacheSize:i}){return t===null?e:new jI(e,{blockSize:t,cacheSize:i})}function $I(e,{headers:t={},credentials:i,maxRanges:o=0,allowFullFile:d=!1,...y}={}){const g=new FI(e,i),u=new Qx(g,t,o,d);return Jx(u,y)}function ZI(e,{headers:t={},maxRanges:i=0,allowFullFile:o=!1,...d}={}){const y=new GI(e),g=new Qx(y,t,i,o);return Jx(g,d)}function HI(e,{headers:t={},maxRanges:i=0,allowFullFile:o=!1,...d}={}){const y=new qI(e),g=new Qx(y,t,i,o);return Jx(g,d)}function YI(e,{forceXHR:t=!1,...i}={}){return typeof fetch=="function"&&!t?$I(e,i):typeof XMLHttpRequest<"u"?ZI(e,i):HI(e,i)}function Xb(e){switch(e){case Er.BYTE:case Er.ASCII:case Er.SBYTE:case Er.UNDEFINED:return 1;case Er.SHORT:case Er.SSHORT:return 2;case Er.LONG:case Er.SLONG:case Er.FLOAT:case Er.IFD:return 4;case Er.RATIONAL:case Er.SRATIONAL:case Er.DOUBLE:case Er.LONG8:case Er.SLONG8:case Er.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function XI(e){const t=e.GeoKeyDirectory;if(!t)return null;const i={};for(let o=4;o<=t[3]*4;o+=4){const d=nI[t[o]],y=t[o+1]?jg[t[o+1]]:null,g=t[o+2],u=t[o+3];let E=null;if(!y)E=u;else{if(E=e[y],typeof E>"u"||E===null)throw new Error(`Could not get value of geoKey '${d}'.`);typeof E=="string"?E=E.substring(u,u+g-1):E.subarray&&(E=E.subarray(u,u+g),g===1&&(E=E[0]))}i[d]=E}return i}function Hp(e,t,i,o){let d=null,y=null;const g=Xb(t);switch(t){case Er.BYTE:case Er.ASCII:case Er.UNDEFINED:d=new Uint8Array(i),y=e.readUint8;break;case Er.SBYTE:d=new Int8Array(i),y=e.readInt8;break;case Er.SHORT:d=new Uint16Array(i),y=e.readUint16;break;case Er.SSHORT:d=new Int16Array(i),y=e.readInt16;break;case Er.LONG:case Er.IFD:d=new Uint32Array(i),y=e.readUint32;break;case Er.SLONG:d=new Int32Array(i),y=e.readInt32;break;case Er.LONG8:case Er.IFD8:d=new Array(i),y=e.readUint64;break;case Er.SLONG8:d=new Array(i),y=e.readInt64;break;case Er.RATIONAL:d=new Uint32Array(i*2),y=e.readUint32;break;case Er.SRATIONAL:d=new Int32Array(i*2),y=e.readInt32;break;case Er.FLOAT:d=new Float32Array(i),y=e.readFloat32;break;case Er.DOUBLE:d=new Float64Array(i),y=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===Er.RATIONAL||t===Er.SRATIONAL)for(let u=0;u<i;u+=2)d[u]=y.call(e,o+u*g),d[u+1]=y.call(e,o+(u*g+4));else for(let u=0;u<i;++u)d[u]=y.call(e,o+u*g);return t===Er.ASCII?new TextDecoder("utf-8").decode(d):d}class KI{constructor(t,i,o){this.fileDirectory=t,this.geoKeyDirectory=i,this.nextIFDByteOffset=o}}class hv extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class WI{async readRasters(t={}){const{window:i,width:o,height:d}=t;let{resX:y,resY:g,bbox:u}=t;const E=await this.getImage();let P=E;const C=await this.getImageCount(),z=E.getBoundingBox();if(i&&u)throw new Error('Both "bbox" and "window" passed.');if(o||d){if(i){const[$,X]=E.getOrigin(),[W,oe]=E.getResolution();u=[$+i[0]*W,X+i[1]*oe,$+i[2]*W,X+i[3]*oe]}const N=u||z;if(o){if(y)throw new Error("Both width and resX passed");y=(N[2]-N[0])/o}if(d){if(g)throw new Error("Both width and resY passed");g=(N[3]-N[1])/d}}if(y||g){const N=[];for(let $=0;$<C;++$){const X=await this.getImage($),{SubfileType:W,NewSubfileType:oe}=X.fileDirectory;($===0||W===2||oe&1)&&N.push(X)}N.sort(($,X)=>$.getWidth()-X.getWidth());for(let $=0;$<N.length;++$){const X=N[$],W=(z[2]-z[0])/X.getWidth(),oe=(z[3]-z[1])/X.getHeight();if(P=X,y&&y>W||g&&g>oe)break}}let j=i;if(u){const[N,$]=E.getOrigin(),[X,W]=P.getResolution(E);j=[Math.round((u[0]-N)/X),Math.round((u[1]-$)/W),Math.round((u[2]-N)/X),Math.round((u[3]-$)/W)],j=[Math.min(j[0],j[2]),Math.min(j[1],j[3]),Math.max(j[0],j[2]),Math.max(j[1],j[3])]}return P.readRasters({...t,window:j})}}class e1 extends WI{constructor(t,i,o,d,y={}){super(),this.source=t,this.littleEndian=i,this.bigTiff=o,this.firstIFDOffset=d,this.cache=y.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,i){const o=this.bigTiff?4048:1024;return new MI((await this.source.fetch([{offset:t,length:typeof i<"u"?i:o}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const i=this.bigTiff?20:12,o=this.bigTiff?8:2;let d=await this.getSlice(t);const y=this.bigTiff?d.readUint64(t):d.readUint16(t),g=y*i+(this.bigTiff?16:6);d.covers(t,g)||(d=await this.getSlice(t,g));const u={};let E=t+(this.bigTiff?8:2);for(let z=0;z<y;E+=i,++z){const j=d.readUint16(E),N=d.readUint16(E+2),$=this.bigTiff?d.readUint64(E+4):d.readUint32(E+4);let X,W;const oe=Xb(N),le=E+(this.bigTiff?12:8);if(oe*$<=(this.bigTiff?8:4))X=Hp(d,N,$,le);else{const ue=d.readOffset(le),Oe=Xb(N)*$;if(d.covers(ue,Oe))X=Hp(d,N,$,ue);else{const Be=await this.getSlice(ue,Oe);X=Hp(Be,N,$,ue)}}$===1&&tI.indexOf(j)===-1&&!(N===Er.RATIONAL||N===Er.SRATIONAL)?W=X[0]:W=X,u[jg[j]]=W}const P=XI(u),C=d.readOffset(t+o+i*y);return new KI(u,P,C)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(i){throw i instanceof hv?new hv(t):i}return this.ifdRequests[t]=(async()=>{const i=await this.ifdRequests[t-1];if(i.nextIFDByteOffset===0)throw new hv(t);return this.parseFileDirectoryAt(i.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const i=await this.requestIFD(t);return new TI(i.fileDirectory,i.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,i=!0;for(;i;)try{await this.requestIFD(t),++t}catch(o){if(o instanceof hv)i=!1;else throw o}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const i="GDAL_STRUCTURAL_METADATA_SIZE=",o=i.length+100;let d=await this.getSlice(t,o);if(i===Hp(d,Er.ASCII,i.length,t)){const g=Hp(d,Er.ASCII,o,t).split(`
`)[0],u=Number(g.split("=")[1].split(" ")[0])+g.length;u>o&&(d=await this.getSlice(t,u));const E=Hp(d,Er.ASCII,u,t);this.ghostValues={},E.split(`
`).filter(P=>P.length>0).map(P=>P.split("=")).forEach(([P,C])=>{this.ghostValues[P]=C})}return this.ghostValues}static async fromSource(t,i,o){const d=(await t.fetch([{offset:0,length:1024}],o))[0],y=new AI(d),g=y.getUint16(0,0);let u;if(g===18761)u=!0;else if(g===19789)u=!1;else throw new TypeError("Invalid byte order value.");const E=y.getUint16(2,u);let P;if(E===42)P=!1;else if(E===43){if(P=!0,y.getUint16(4,u)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const C=P?y.getUint64(8,u):y.getUint32(4,u);return new e1(t,u,P,C,i)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function QI(e,t={},i){return e1.fromSource(YI(e,t),i)}class t1 extends Map{#r=0;#e=new Map;#t=new Map;#i;#l;#a;constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.#i=t.maxSize,this.#l=t.maxAge||Number.POSITIVE_INFINITY,this.#a=t.onEviction}get __oldCache(){return this.#t}#o(t){if(typeof this.#a=="function")for(const[i,o]of t)this.#a(i,o.value)}#n(t,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof this.#a=="function"&&this.#a(t,i.value),this.delete(t)):!1}#f(t,i){if(this.#n(t,i)===!1)return i.value}#c(t,i){return i.expiry?this.#f(t,i):i.value}#u(t,i){const o=i.get(t);return this.#c(t,o)}#h(t,i){this.#e.set(t,i),this.#r++,this.#r>=this.#i&&(this.#r=0,this.#o(this.#t),this.#t=this.#e,this.#e=new Map)}#d(t,i){this.#t.delete(t),this.#h(t,i)}*#s(){for(const t of this.#t){const[i,o]=t;this.#e.has(i)||this.#n(i,o)===!1&&(yield t)}for(const t of this.#e){const[i,o]=t;this.#n(i,o)===!1&&(yield t)}}get(t){if(this.#e.has(t)){const i=this.#e.get(t);return this.#c(t,i)}if(this.#t.has(t)){const i=this.#t.get(t);if(this.#n(t,i)===!1)return this.#d(t,i),i.value}}set(t,i,{maxAge:o=this.#l}={}){const d=typeof o=="number"&&o!==Number.POSITIVE_INFINITY?Date.now()+o:void 0;return this.#e.has(t)?this.#e.set(t,{value:i,expiry:d}):this.#h(t,{value:i,expiry:d}),this}has(t){return this.#e.has(t)?!this.#n(t,this.#e.get(t)):this.#t.has(t)?!this.#n(t,this.#t.get(t)):!1}peek(t){if(this.#e.has(t))return this.#u(t,this.#e);if(this.#t.has(t))return this.#u(t,this.#t)}expiresIn(t){const i=this.#e.get(t)??this.#t.get(t);if(i)return i.expiry?i.expiry-Date.now():Number.POSITIVE_INFINITY}delete(t){const i=this.#e.delete(t);return i&&this.#r--,this.#t.delete(t)||i}clear(){this.#e.clear(),this.#t.clear(),this.#r=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const i=[...this.#s()],o=i.length-t;o<0?(this.#e=new Map(i),this.#t=new Map,this.#r=i.length):(o>0&&this.#o(i.slice(0,o)),this.#t=new Map(i.slice(o)),this.#e=new Map,this.#r=0),this.#i=t}evict(t=1){const i=Number(t);if(!i||i<=0)return;const o=[...this.#s()],d=Math.trunc(Math.min(i,Math.max(o.length-1,0)));d<=0||(this.#o(o.slice(0,d)),this.#t=new Map(o.slice(d)),this.#e=new Map,this.#r=0)}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.#e){const[i,o]=t;this.#n(i,o)===!1&&(yield[i,o.value])}for(const t of this.#t){const[i,o]=t;this.#e.has(i)||this.#n(i,o)===!1&&(yield[i,o.value])}}*entriesDescending(){let t=[...this.#e];for(let i=t.length-1;i>=0;--i){const o=t[i],[d,y]=o;this.#n(d,y)===!1&&(yield[d,y.value])}t=[...this.#t];for(let i=t.length-1;i>=0;--i){const o=t[i],[d,y]=o;this.#e.has(d)||this.#n(d,y)===!1&&(yield[d,y.value])}}*entriesAscending(){for(const[t,i]of this.#s())yield[t,i.value]}get size(){if(!this.#r)return this.#t.size;let t=0;for(const i of this.#t.keys())this.#e.has(i)||t++;return Math.min(this.#r+t,this.#i)}get maxSize(){return this.#i}entries(){return this.entriesAscending()}forEach(t,i=this){for(const[o,d]of this.entriesAscending())t.call(i,d,o,this)}get[Symbol.toStringTag](){return"QuickLRU"}toString(){return`QuickLRU(${this.size}/${this.maxSize})`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}var m_={exports:{}},l2;function JI(){return l2||(l2=1,(function(e,t){var i=(function(){var o={},d=Math.PI/180,y=180/Math.PI,g=6378137,u=20037508342789244e-9;function E(C){return Number(C)===C&&C%1!==0}function P(C){if(C=C||{},this.size=C.size||256,this.expansion=C.antimeridian===!0?2:1,!o[this.size]){var z=this.size,j=o[this.size]={};j.Bc=[],j.Cc=[],j.zc=[],j.Ac=[];for(var N=0;N<30;N++)j.Bc.push(z/360),j.Cc.push(z/(2*Math.PI)),j.zc.push(z/2),j.Ac.push(z),z*=2}this.Bc=o[this.size].Bc,this.Cc=o[this.size].Cc,this.zc=o[this.size].zc,this.Ac=o[this.size].Ac}return P.prototype.px=function(C,z){if(E(z)){var j=this.size*Math.pow(2,z),N=j/2,$=j/360,X=j/(2*Math.PI),W=j,oe=Math.min(Math.max(Math.sin(d*C[1]),-.9999),.9999),le=N+C[0]*$,ue=N+.5*Math.log((1+oe)/(1-oe))*-X;return le>W*this.expansion&&(le=W*this.expansion),ue>W&&(ue=W),[le,ue]}else{var N=this.zc[z],oe=Math.min(Math.max(Math.sin(d*C[1]),-.9999),.9999),le=Math.round(N+C[0]*this.Bc[z]),ue=Math.round(N+.5*Math.log((1+oe)/(1-oe))*-this.Cc[z]);return le>this.Ac[z]*this.expansion&&(le=this.Ac[z]*this.expansion),ue>this.Ac[z]&&(ue=this.Ac[z]),[le,ue]}},P.prototype.ll=function(C,z){if(E(z)){var j=this.size*Math.pow(2,z),N=j/360,$=j/(2*Math.PI),X=j/2,W=(C[1]-X)/-$,oe=(C[0]-X)/N,le=y*(2*Math.atan(Math.exp(W))-.5*Math.PI);return[oe,le]}else{var W=(C[1]-this.zc[z])/-this.Cc[z],oe=(C[0]-this.zc[z])/this.Bc[z],le=y*(2*Math.atan(Math.exp(W))-.5*Math.PI);return[oe,le]}},P.prototype.bbox=function(C,z,j,N,$){N&&(z=Math.pow(2,j)-1-z);var X=[C*this.size,(+z+1)*this.size],W=[(+C+1)*this.size,z*this.size],oe=this.ll(X,j).concat(this.ll(W,j));return $==="900913"?this.convert(oe,"900913"):oe},P.prototype.xyz=function(C,z,j,N){N==="900913"&&(C=this.convert(C,"WGS84"));var $=[C[0],C[1]],X=[C[2],C[3]],W=this.px($,z),oe=this.px(X,z),le=[Math.floor(W[0]/this.size),Math.floor((oe[0]-1)/this.size)],ue=[Math.floor(oe[1]/this.size),Math.floor((W[1]-1)/this.size)],Oe={minX:Math.min.apply(Math,le)<0?0:Math.min.apply(Math,le),minY:Math.min.apply(Math,ue)<0?0:Math.min.apply(Math,ue),maxX:Math.max.apply(Math,le),maxY:Math.max.apply(Math,ue)};if(j){var Be={minY:Math.pow(2,z)-1-Oe.maxY,maxY:Math.pow(2,z)-1-Oe.minY};Oe.minY=Be.minY,Oe.maxY=Be.maxY}return Oe},P.prototype.convert=function(C,z){return z==="900913"?this.forward(C.slice(0,2)).concat(this.forward(C.slice(2,4))):this.inverse(C.slice(0,2)).concat(this.inverse(C.slice(2,4)))},P.prototype.forward=function(C){var z=[g*C[0]*d,g*Math.log(Math.tan(Math.PI*.25+.5*C[1]*d))];return z[0]>u&&(z[0]=u),z[0]<-u&&(z[0]=-u),z[1]>u&&(z[1]=u),z[1]<-u&&(z[1]=-u),z},P.prototype.inverse=function(C){return[C[0]*y/g,(Math.PI*.5-2*Math.atan(Math.exp(-C[1]/g)))*y]},P})();e.exports=i})(m_)),m_.exports}var eO=JI();const tO=El(eO),hM=256,rO=2*20037508342789244e-9,Kb=new tO({size:hM,antimeridian:!0}),nO=({x:e,y:t,z:i})=>Kb.bbox(e,t,i,!1,"900913"),iO=([e,t,i,o])=>[...Kb.inverse([e,t]),...Kb.inverse([i,o])],aO=e=>Math.log2(rO/(hM*e)),r1=3600*1e3;let g_;const c2=new t1({maxSize:16,maxAge:r1}),u2=new t1({maxSize:16,maxAge:r1}),h2=new t1({maxSize:1024,maxAge:r1}),fM=e=>{g_===void 0&&(g_=new PI);const t=y=>{const g=c2.get(y);if(g)return g;{const u=QI(y,void 0);return c2.set(y,u),u}},i=async()=>{const y=u2.get(e);if(y)return y;{const g=await t(e),u=await g.getImage(),E=u.getGDALMetadata(0),P=u.fileDirectory,C=u.fileDirectory?.Artist,z=iO(u.getBoundingBox()),j=[],N=await g.getImageCount();for(let X=0;X<N;X++){const W=await g.getImage(X),oe=aO(W.getResolution(u)[0]),le=!!(W.fileDirectory.NewSubfileType&1),ue=!!(W.fileDirectory.NewSubfileType&4);j.push({zoom:oe,isOverview:le,isMask:ue})}const $={offset:E?.OFFSET!==void 0?parseFloat(E.OFFSET):0,scale:E?.SCALE!==void 0?parseFloat(E.SCALE):1,noData:u.getGDALNoData()??void 0,photometricInterpretation:P?.PhotometricInterpretation,bitsPerSample:P?.BitsPerSample,colorMap:P?.ColorMap,artist:C,bbox:z,images:j};return u2.set(e,$),$}};return{getTilejson:async y=>{const{artist:g,images:u,bbox:E}=await i(),P=u.map(C=>C.zoom);return{tilejson:"2.2.0",tiles:[y+"/{z}/{x}/{y}"],attribution:g,minzoom:Math.round(Math.min(...P)),maxzoom:Math.round(Math.max(...P)),bounds:E}},getMetadata:i,getRawTile:async({z:y,x:g,y:u},E=256)=>{const P=`${e}/${E}/${y}/${g}/${u}`,C=h2.get(P);if(C)return C;{const z=await t(e),{noData:j}=await i(),N=j===void 0||isNaN(j)?1/0:j,$=z.readRasters({bbox:nO({x:g,y:u,z:y}),width:E,height:E,interleave:!0,resampleMethod:"nearest",pool:g_,fillValue:N});return h2.set(P,$),$}}}};function cf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oO(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function n1(e){let t,i,o;e.length!==2?(t=cf,i=(u,E)=>cf(e(u),E),o=(u,E)=>e(u)-E):(t=e===cf||e===oO?e:sO,i=e,o=e);function d(u,E,P=0,C=u.length){if(P<C){if(t(E,E)!==0)return C;do{const z=P+C>>>1;i(u[z],E)<0?P=z+1:C=z}while(P<C)}return P}function y(u,E,P=0,C=u.length){if(P<C){if(t(E,E)!==0)return C;do{const z=P+C>>>1;i(u[z],E)<=0?P=z+1:C=z}while(P<C)}return P}function g(u,E,P=0,C=u.length){const z=d(u,E,P,C-1);return z>P&&o(u[z-1],E)>-o(u[z],E)?z-1:z}return{left:d,center:g,right:y}}function sO(){return 0}function dM(e){return e===null?NaN:+e}function*lO(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const cO=n1(cf),ry=cO.right;n1(dM).center;class f2 extends Map{constructor(t,i=fO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[o,d]of t)this.set(o,d)}get(t){return super.get(d2(this,t))}has(t){return super.has(d2(this,t))}set(t,i){return super.set(uO(this,t),i)}delete(t){return super.delete(hO(this,t))}}function d2({_intern:e,_key:t},i){const o=t(i);return e.has(o)?e.get(o):i}function uO({_intern:e,_key:t},i){const o=t(i);return e.has(o)?e.get(o):(e.set(o,i),i)}function hO({_intern:e,_key:t},i){const o=t(i);return e.has(o)&&(i=e.get(o),e.delete(o)),i}function fO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dO(e=cf){if(e===cf)return pM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const o=e(t,i);return o||o===0?o:(e(i,i)===0)-(e(t,t)===0)}}function pM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pO=Math.sqrt(50),mO=Math.sqrt(10),gO=Math.sqrt(2);function Dv(e,t,i){const o=(t-e)/Math.max(0,i),d=Math.floor(Math.log10(o)),y=o/Math.pow(10,d),g=y>=pO?10:y>=mO?5:y>=gO?2:1;let u,E,P;return d<0?(P=Math.pow(10,-d)/g,u=Math.round(e*P),E=Math.round(t*P),u/P<e&&++u,E/P>t&&--E,P=-P):(P=Math.pow(10,d)*g,u=Math.round(e/P),E=Math.round(t/P),u*P<e&&++u,E*P>t&&--E),E<u&&.5<=i&&i<2?Dv(e,t,i*2):[u,E,P]}function Wb(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const o=t<e,[d,y,g]=o?Dv(t,e,i):Dv(e,t,i);if(!(y>=d))return[];const u=y-d+1,E=new Array(u);if(o)if(g<0)for(let P=0;P<u;++P)E[P]=(y-P)/-g;else for(let P=0;P<u;++P)E[P]=(y-P)*g;else if(g<0)for(let P=0;P<u;++P)E[P]=(d+P)/-g;else for(let P=0;P<u;++P)E[P]=(d+P)*g;return E}function Qb(e,t,i){return t=+t,e=+e,i=+i,Dv(e,t,i)[2]}function Jb(e,t,i){t=+t,e=+e,i=+i;const o=t<e,d=o?Qb(t,e,i):Qb(e,t,i);return(o?-1:1)*(d<0?1/-d:d)}function p2(e,t){let i;for(const o of e)o!=null&&(i<o||i===void 0&&o>=o)&&(i=o);return i}function m2(e,t){let i;for(const o of e)o!=null&&(i>o||i===void 0&&o>=o)&&(i=o);return i}function mM(e,t,i=0,o=1/0,d){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),o=Math.floor(Math.min(e.length-1,o)),!(i<=t&&t<=o))return e;for(d=d===void 0?pM:dO(d);o>i;){if(o-i>600){const E=o-i+1,P=t-i+1,C=Math.log(E),z=.5*Math.exp(2*C/3),j=.5*Math.sqrt(C*z*(E-z)/E)*(P-E/2<0?-1:1),N=Math.max(i,Math.floor(t-P*z/E+j)),$=Math.min(o,Math.floor(t+(E-P)*z/E+j));mM(e,t,N,$,d)}const y=e[t];let g=i,u=o;for(Cg(e,i,t),d(e[o],y)>0&&Cg(e,i,o);g<u;){for(Cg(e,g,u),++g,--u;d(e[g],y)<0;)++g;for(;d(e[u],y)>0;)--u}d(e[i],y)===0?Cg(e,i,u):(++u,Cg(e,u,o)),u<=t&&(i=u+1),t<=u&&(o=u-1)}return e}function Cg(e,t,i){const o=e[t];e[t]=e[i],e[i]=o}function yO(e,t,i){if(e=Float64Array.from(lO(e)),!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return m2(e);if(t>=1)return p2(e);var o,d=(o-1)*t,y=Math.floor(d),g=p2(mM(e,y).subarray(0,y+1)),u=m2(e.subarray(y+1));return g+(u-g)*(d-y)}}function vO(e,t,i=dM){if(!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return+i(e[0],0,e);if(t>=1)return+i(e[o-1],o-1,e);var o,d=(o-1)*t,y=Math.floor(d),g=+i(e[y],y,e),u=+i(e[y+1],y+1,e);return g+(u-g)*(d-y)}}function _O(e,t,i){e=+e,t=+t,i=(d=arguments.length)<2?(t=e,e=0,1):d<3?1:+i;for(var o=-1,d=Math.max(0,Math.ceil((t-e)/i))|0,y=new Array(d);++o<d;)y[o]=e+o*i;return y}function Pl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function sh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ex=Symbol("implicit");function i1(){var e=new f2,t=[],i=[],o=ex;function d(y){let g=e.get(y);if(g===void 0){if(o!==ex)return o;e.set(y,g=t.push(y)-1)}return i[g%i.length]}return d.domain=function(y){if(!arguments.length)return t.slice();t=[],e=new f2;for(const g of y)e.has(g)||e.set(g,t.push(g)-1);return d},d.range=function(y){return arguments.length?(i=Array.from(y),d):i.slice()},d.unknown=function(y){return arguments.length?(o=y,d):o},d.copy=function(){return i1(t,i).unknown(o)},Pl.apply(d,arguments),d}function a1(){var e=i1().unknown(void 0),t=e.domain,i=e.range,o=0,d=1,y,g,u=!1,E=0,P=0,C=.5;delete e.unknown;function z(){var j=t().length,N=d<o,$=N?d:o,X=N?o:d;y=(X-$)/Math.max(1,j-E+P*2),u&&(y=Math.floor(y)),$+=(X-$-y*(j-E))*C,g=y*(1-E),u&&($=Math.round($),g=Math.round(g));var W=_O(j).map(function(oe){return $+y*oe});return i(N?W.reverse():W)}return e.domain=function(j){return arguments.length?(t(j),z()):t()},e.range=function(j){return arguments.length?([o,d]=j,o=+o,d=+d,z()):[o,d]},e.rangeRound=function(j){return[o,d]=j,o=+o,d=+d,u=!0,z()},e.bandwidth=function(){return g},e.step=function(){return y},e.round=function(j){return arguments.length?(u=!!j,z()):u},e.padding=function(j){return arguments.length?(E=Math.min(1,P=+j),z()):E},e.paddingInner=function(j){return arguments.length?(E=Math.min(1,j),z()):E},e.paddingOuter=function(j){return arguments.length?(P=+j,z()):P},e.align=function(j){return arguments.length?(C=Math.max(0,Math.min(1,j)),z()):C},e.copy=function(){return a1(t(),[o,d]).round(u).paddingInner(E).paddingOuter(P).align(C)},Pl.apply(z(),arguments)}function gM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gM(t())},e}function bO(){return gM(a1.apply(null,arguments).paddingInner(1))}function o1(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function yM(e,t){var i=Object.create(e.prototype);for(var o in t)i[o]=t[o];return i}function ny(){}var qg=.7,Iv=1/qg,Jp="\\s*([+-]?\\d+)\\s*",$g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xO=/^#([0-9a-f]{3,8})$/,wO=new RegExp(`^rgb\\(${Jp},${Jp},${Jp}\\)$`),SO=new RegExp(`^rgb\\(${ru},${ru},${ru}\\)$`),TO=new RegExp(`^rgba\\(${Jp},${Jp},${Jp},${$g}\\)$`),AO=new RegExp(`^rgba\\(${ru},${ru},${ru},${$g}\\)$`),MO=new RegExp(`^hsl\\(${$g},${ru},${ru}\\)$`),EO=new RegExp(`^hsla\\(${$g},${ru},${ru},${$g}\\)$`),g2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o1(ny,Zg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y2,formatHex:y2,formatHex8:PO,formatHsl:CO,formatRgb:v2,toString:v2});function y2(){return this.rgb().formatHex()}function PO(){return this.rgb().formatHex8()}function CO(){return vM(this).formatHsl()}function v2(){return this.rgb().formatRgb()}function Zg(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=xO.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?_2(t):i===3?new Yo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?fv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?fv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wO.exec(e))?new Yo(t[1],t[2],t[3],1):(t=SO.exec(e))?new Yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TO.exec(e))?fv(t[1],t[2],t[3],t[4]):(t=AO.exec(e))?fv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MO.exec(e))?w2(t[1],t[2]/100,t[3]/100,1):(t=EO.exec(e))?w2(t[1],t[2]/100,t[3]/100,t[4]):g2.hasOwnProperty(e)?_2(g2[e]):e==="transparent"?new Yo(NaN,NaN,NaN,0):null}function _2(e){return new Yo(e>>16&255,e>>8&255,e&255,1)}function fv(e,t,i,o){return o<=0&&(e=t=i=NaN),new Yo(e,t,i,o)}function DO(e){return e instanceof ny||(e=Zg(e)),e?(e=e.rgb(),new Yo(e.r,e.g,e.b,e.opacity)):new Yo}function tx(e,t,i,o){return arguments.length===1?DO(e):new Yo(e,t,i,o??1)}function Yo(e,t,i,o){this.r=+e,this.g=+t,this.b=+i,this.opacity=+o}o1(Yo,tx,yM(ny,{brighter(e){return e=e==null?Iv:Math.pow(Iv,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qg:Math.pow(qg,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yo(zd(this.r),zd(this.g),zd(this.b),Ov(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b2,formatHex:b2,formatHex8:IO,formatRgb:x2,toString:x2}));function b2(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}`}function IO(){return`#${Cd(this.r)}${Cd(this.g)}${Cd(this.b)}${Cd((isNaN(this.opacity)?1:this.opacity)*255)}`}function x2(){const e=Ov(this.opacity);return`${e===1?"rgb(":"rgba("}${zd(this.r)}, ${zd(this.g)}, ${zd(this.b)}${e===1?")":`, ${e})`}`}function Ov(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cd(e){return e=zd(e),(e<16?"0":"")+e.toString(16)}function w2(e,t,i,o){return o<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new uc(e,t,i,o)}function vM(e){if(e instanceof uc)return new uc(e.h,e.s,e.l,e.opacity);if(e instanceof ny||(e=Zg(e)),!e)return new uc;if(e instanceof uc)return e;e=e.rgb();var t=e.r/255,i=e.g/255,o=e.b/255,d=Math.min(t,i,o),y=Math.max(t,i,o),g=NaN,u=y-d,E=(y+d)/2;return u?(t===y?g=(i-o)/u+(i<o)*6:i===y?g=(o-t)/u+2:g=(t-i)/u+4,u/=E<.5?y+d:2-y-d,g*=60):u=E>0&&E<1?0:g,new uc(g,u,E,e.opacity)}function OO(e,t,i,o){return arguments.length===1?vM(e):new uc(e,t,i,o??1)}function uc(e,t,i,o){this.h=+e,this.s=+t,this.l=+i,this.opacity=+o}o1(uc,OO,yM(ny,{brighter(e){return e=e==null?Iv:Math.pow(Iv,e),new uc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qg:Math.pow(qg,e),new uc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,o=i+(i<.5?i:1-i)*t,d=2*i-o;return new Yo(y_(e>=240?e-240:e+120,d,o),y_(e,d,o),y_(e<120?e+240:e-120,d,o),this.opacity)},clamp(){return new uc(S2(this.h),dv(this.s),dv(this.l),Ov(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ov(this.opacity);return`${e===1?"hsl(":"hsla("}${S2(this.h)}, ${dv(this.s)*100}%, ${dv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function S2(e){return e=(e||0)%360,e<0?e+360:e}function dv(e){return Math.max(0,Math.min(1,e||0))}function y_(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const s1=e=>()=>e;function zO(e,t){return function(i){return e+i*t}}function RO(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(o){return Math.pow(e+o*t,i)}}function kO(e){return(e=+e)==1?_M:function(t,i){return i-t?RO(t,i,e):s1(isNaN(t)?i:t)}}function _M(e,t){var i=t-e;return i?zO(e,i):s1(isNaN(e)?t:e)}const T2=(function e(t){var i=kO(t);function o(d,y){var g=i((d=tx(d)).r,(y=tx(y)).r),u=i(d.g,y.g),E=i(d.b,y.b),P=_M(d.opacity,y.opacity);return function(C){return d.r=g(C),d.g=u(C),d.b=E(C),d.opacity=P(C),d+""}}return o.gamma=e,o})(1);function BO(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,o=t.slice(),d;return function(y){for(d=0;d<i;++d)o[d]=e[d]*(1-y)+t[d]*y;return o}}function LO(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jO(e,t){var i=t?t.length:0,o=e?Math.min(i,e.length):0,d=new Array(o),y=new Array(i),g;for(g=0;g<o;++g)d[g]=dm(e[g],t[g]);for(;g<i;++g)y[g]=t[g];return function(u){for(g=0;g<o;++g)y[g]=d[g](u);return y}}function NO(e,t){var i=new Date;return e=+e,t=+t,function(o){return i.setTime(e*(1-o)+t*o),i}}function zv(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function FO(e,t){var i={},o={},d;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(d in t)d in e?i[d]=dm(e[d],t[d]):o[d]=t[d];return function(y){for(d in i)o[d]=i[d](y);return o}}var rx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v_=new RegExp(rx.source,"g");function UO(e){return function(){return e}}function GO(e){return function(t){return e(t)+""}}function VO(e,t){var i=rx.lastIndex=v_.lastIndex=0,o,d,y,g=-1,u=[],E=[];for(e=e+"",t=t+"";(o=rx.exec(e))&&(d=v_.exec(t));)(y=d.index)>i&&(y=t.slice(i,y),u[g]?u[g]+=y:u[++g]=y),(o=o[0])===(d=d[0])?u[g]?u[g]+=d:u[++g]=d:(u[++g]=null,E.push({i:g,x:zv(o,d)})),i=v_.lastIndex;return i<t.length&&(y=t.slice(i),u[g]?u[g]+=y:u[++g]=y),u.length<2?E[0]?GO(E[0].x):UO(t):(t=E.length,function(P){for(var C=0,z;C<t;++C)u[(z=E[C]).i]=z.x(P);return u.join("")})}function dm(e,t){var i=typeof t,o;return t==null||i==="boolean"?s1(t):(i==="number"?zv:i==="string"?(o=Zg(t))?(t=o,T2):VO:t instanceof Zg?T2:t instanceof Date?NO:LO(t)?BO:Array.isArray(t)?jO:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?FO:zv)(e,t)}function l1(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function qO(e,t){t===void 0&&(t=e,e=dm);for(var i=0,o=t.length-1,d=t[0],y=new Array(o<0?0:o);i<o;)y[i]=e(d,d=t[++i]);return function(g){var u=Math.max(0,Math.min(o-1,Math.floor(g*=o)));return y[u](g-u)}}function $O(e){return function(){return e}}function Rv(e){return+e}var A2=[0,1];function ho(e){return e}function nx(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:$O(isNaN(t)?NaN:.5)}function ZO(e,t){var i;return e>t&&(i=e,e=t,t=i),function(o){return Math.max(e,Math.min(t,o))}}function HO(e,t,i){var o=e[0],d=e[1],y=t[0],g=t[1];return d<o?(o=nx(d,o),y=i(g,y)):(o=nx(o,d),y=i(y,g)),function(u){return y(o(u))}}function YO(e,t,i){var o=Math.min(e.length,t.length)-1,d=new Array(o),y=new Array(o),g=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++g<o;)d[g]=nx(e[g],e[g+1]),y[g]=i(t[g],t[g+1]);return function(u){var E=ry(e,u,1,o)-1;return y[E](d[E](u))}}function iy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function d0(){var e=A2,t=A2,i=dm,o,d,y,g=ho,u,E,P;function C(){var j=Math.min(e.length,t.length);return g!==ho&&(g=ZO(e[0],e[j-1])),u=j>2?YO:HO,E=P=null,z}function z(j){return j==null||isNaN(j=+j)?y:(E||(E=u(e.map(o),t,i)))(o(g(j)))}return z.invert=function(j){return g(d((P||(P=u(t,e.map(o),zv)))(j)))},z.domain=function(j){return arguments.length?(e=Array.from(j,Rv),C()):e.slice()},z.range=function(j){return arguments.length?(t=Array.from(j),C()):t.slice()},z.rangeRound=function(j){return t=Array.from(j),i=l1,C()},z.clamp=function(j){return arguments.length?(g=j?!0:ho,C()):g!==ho},z.interpolate=function(j){return arguments.length?(i=j,C()):i},z.unknown=function(j){return arguments.length?(y=j,z):y},function(j,N){return o=j,d=N,C()}}function c1(){return d0()(ho,ho)}function XO(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kv(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,o=e.slice(0,i);return[o.length>1?o[0]+o.slice(2):o,+e.slice(i+1)]}function rm(e){return e=kv(Math.abs(e)),e?e[1]:NaN}function KO(e,t){return function(i,o){for(var d=i.length,y=[],g=0,u=e[0],E=0;d>0&&u>0&&(E+u+1>o&&(u=Math.max(1,o-E)),y.push(i.substring(d-=u,d+u)),!((E+=u+1)>o));)u=e[g=(g+1)%e.length];return y.reverse().join(t)}}function WO(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var QO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hg(e){if(!(t=QO.exec(e)))throw new Error("invalid format: "+e);var t;return new u1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hg.prototype=u1.prototype;function u1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}u1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JO(e){e:for(var t=e.length,i=1,o=-1,d;i<t;++i)switch(e[i]){case".":o=d=i;break;case"0":o===0&&(o=i),d=i;break;default:if(!+e[i])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(d+1):e}var bM;function ez(e,t){var i=kv(e,t);if(!i)return e+"";var o=i[0],d=i[1],y=d-(bM=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,g=o.length;return y===g?o:y>g?o+new Array(y-g+1).join("0"):y>0?o.slice(0,y)+"."+o.slice(y):"0."+new Array(1-y).join("0")+kv(e,Math.max(0,t+y-1))[0]}function M2(e,t){var i=kv(e,t);if(!i)return e+"";var o=i[0],d=i[1];return d<0?"0."+new Array(-d).join("0")+o:o.length>d+1?o.slice(0,d+1)+"."+o.slice(d+1):o+new Array(d-o.length+2).join("0")}const E2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XO,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>M2(e*100,t),r:M2,s:ez,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function P2(e){return e}var C2=Array.prototype.map,D2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tz(e){var t=e.grouping===void 0||e.thousands===void 0?P2:KO(C2.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",d=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?P2:WO(C2.call(e.numerals,String)),g=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",E=e.nan===void 0?"NaN":e.nan+"";function P(z){z=Hg(z);var j=z.fill,N=z.align,$=z.sign,X=z.symbol,W=z.zero,oe=z.width,le=z.comma,ue=z.precision,Oe=z.trim,Be=z.type;Be==="n"?(le=!0,Be="g"):E2[Be]||(ue===void 0&&(ue=12),Oe=!0,Be="g"),(W||j==="0"&&N==="=")&&(W=!0,j="0",N="=");var Le=X==="$"?i:X==="#"&&/[boxX]/.test(Be)?"0"+Be.toLowerCase():"",qe=X==="$"?o:/[%p]/.test(Be)?g:"",at=E2[Be],Mt=/[defgprs%]/.test(Be);ue=ue===void 0?6:/[gprs]/.test(Be)?Math.max(1,Math.min(21,ue)):Math.max(0,Math.min(20,ue));function Ot(ft){var gt=Le,Ft=qe,Ht,Kt,$e;if(Be==="c")Ft=at(ft)+Ft,ft="";else{ft=+ft;var ot=ft<0||1/ft<0;if(ft=isNaN(ft)?E:at(Math.abs(ft),ue),Oe&&(ft=JO(ft)),ot&&+ft==0&&$!=="+"&&(ot=!1),gt=(ot?$==="("?$:u:$==="-"||$==="("?"":$)+gt,Ft=(Be==="s"?D2[8+bM/3]:"")+Ft+(ot&&$==="("?")":""),Mt){for(Ht=-1,Kt=ft.length;++Ht<Kt;)if($e=ft.charCodeAt(Ht),48>$e||$e>57){Ft=($e===46?d+ft.slice(Ht+1):ft.slice(Ht))+Ft,ft=ft.slice(0,Ht);break}}}le&&!W&&(ft=t(ft,1/0));var Dt=gt.length+ft.length+Ft.length,bt=Dt<oe?new Array(oe-Dt+1).join(j):"";switch(le&&W&&(ft=t(bt+ft,bt.length?oe-Ft.length:1/0),bt=""),N){case"<":ft=gt+ft+Ft+bt;break;case"=":ft=gt+bt+ft+Ft;break;case"^":ft=bt.slice(0,Dt=bt.length>>1)+gt+ft+Ft+bt.slice(Dt);break;default:ft=bt+gt+ft+Ft;break}return y(ft)}return Ot.toString=function(){return z+""},Ot}function C(z,j){var N=P((z=Hg(z),z.type="f",z)),$=Math.max(-8,Math.min(8,Math.floor(rm(j)/3)))*3,X=Math.pow(10,-$),W=D2[8+$/3];return function(oe){return N(X*oe)+W}}return{format:P,formatPrefix:C}}var pv,h1,xM;rz({thousands:",",grouping:[3],currency:["$",""]});function rz(e){return pv=tz(e),h1=pv.format,xM=pv.formatPrefix,pv}function nz(e){return Math.max(0,-rm(Math.abs(e)))}function iz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rm(t)/3)))*3-rm(Math.abs(e)))}function az(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rm(t)-rm(e))+1}function wM(e,t,i,o){var d=Jb(e,t,i),y;switch(o=Hg(o??",f"),o.type){case"s":{var g=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(y=iz(d,g))&&(o.precision=y),xM(o,g)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(y=az(d,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=y-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(y=nz(d))&&(o.precision=y-(o.type==="%")*2);break}}return h1(o)}function pf(e){var t=e.domain;return e.ticks=function(i){var o=t();return Wb(o[0],o[o.length-1],i??10)},e.tickFormat=function(i,o){var d=t();return wM(d[0],d[d.length-1],i??10,o)},e.nice=function(i){i==null&&(i=10);var o=t(),d=0,y=o.length-1,g=o[d],u=o[y],E,P,C=10;for(u<g&&(P=g,g=u,u=P,P=d,d=y,y=P);C-- >0;){if(P=Qb(g,u,i),P===E)return o[d]=g,o[y]=u,t(o);if(P>0)g=Math.floor(g/P)*P,u=Math.ceil(u/P)*P;else if(P<0)g=Math.ceil(g*P)/P,u=Math.floor(u*P)/P;else break;E=P}return e},e}function f1(){var e=c1();return e.copy=function(){return iy(e,f1())},Pl.apply(e,arguments),pf(e)}function SM(e){var t;function i(o){return o==null||isNaN(o=+o)?t:o}return i.invert=i,i.domain=i.range=function(o){return arguments.length?(e=Array.from(o,Rv),i):e.slice()},i.unknown=function(o){return arguments.length?(t=o,i):t},i.copy=function(){return SM(e).unknown(t)},e=arguments.length?Array.from(e,Rv):[0,1],pf(i)}function TM(e,t){e=e.slice();var i=0,o=e.length-1,d=e[i],y=e[o],g;return y<d&&(g=i,i=o,o=g,g=d,d=y,y=g),e[i]=t.floor(d),e[o]=t.ceil(y),e}function I2(e){return Math.log(e)}function O2(e){return Math.exp(e)}function oz(e){return-Math.log(-e)}function sz(e){return-Math.exp(-e)}function lz(e){return isFinite(e)?+("1e"+e):e<0?0:e}function cz(e){return e===10?lz:e===Math.E?Math.exp:t=>Math.pow(e,t)}function uz(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z2(e){return(t,i)=>-e(-t,i)}function d1(e){const t=e(I2,O2),i=t.domain;let o=10,d,y;function g(){return d=uz(o),y=cz(o),i()[0]<0?(d=z2(d),y=z2(y),e(oz,sz)):e(I2,O2),t}return t.base=function(u){return arguments.length?(o=+u,g()):o},t.domain=function(u){return arguments.length?(i(u),g()):i()},t.ticks=u=>{const E=i();let P=E[0],C=E[E.length-1];const z=C<P;z&&([P,C]=[C,P]);let j=d(P),N=d(C),$,X;const W=u==null?10:+u;let oe=[];if(!(o%1)&&N-j<W){if(j=Math.floor(j),N=Math.ceil(N),P>0){for(;j<=N;++j)for($=1;$<o;++$)if(X=j<0?$/y(-j):$*y(j),!(X<P)){if(X>C)break;oe.push(X)}}else for(;j<=N;++j)for($=o-1;$>=1;--$)if(X=j>0?$/y(-j):$*y(j),!(X<P)){if(X>C)break;oe.push(X)}oe.length*2<W&&(oe=Wb(P,C,W))}else oe=Wb(j,N,Math.min(N-j,W)).map(y);return z?oe.reverse():oe},t.tickFormat=(u,E)=>{if(u==null&&(u=10),E==null&&(E=o===10?"s":","),typeof E!="function"&&(!(o%1)&&(E=Hg(E)).precision==null&&(E.trim=!0),E=h1(E)),u===1/0)return E;const P=Math.max(1,o*u/t.ticks().length);return C=>{let z=C/y(Math.round(d(C)));return z*o<o-.5&&(z*=o),z<=P?E(C):""}},t.nice=()=>i(TM(i(),{floor:u=>y(Math.floor(d(u))),ceil:u=>y(Math.ceil(d(u)))})),t}function AM(){const e=d1(d0()).domain([1,10]);return e.copy=()=>iy(e,AM()).base(e.base()),Pl.apply(e,arguments),e}function R2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function k2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function p1(e){var t=1,i=e(R2(t),k2(t));return i.constant=function(o){return arguments.length?e(R2(t=+o),k2(t)):t},pf(i)}function MM(){var e=p1(d0());return e.copy=function(){return iy(e,MM()).constant(e.constant())},Pl.apply(e,arguments)}function B2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hz(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fz(e){return e<0?-e*e:e*e}function m1(e){var t=e(ho,ho),i=1;function o(){return i===1?e(ho,ho):i===.5?e(hz,fz):e(B2(i),B2(1/i))}return t.exponent=function(d){return arguments.length?(i=+d,o()):i},pf(t)}function g1(){var e=m1(d0());return e.copy=function(){return iy(e,g1()).exponent(e.exponent())},Pl.apply(e,arguments),e}function dz(){return g1.apply(null,arguments).exponent(.5)}function L2(e){return Math.sign(e)*e*e}function pz(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EM(){var e=c1(),t=[0,1],i=!1,o;function d(y){var g=pz(e(y));return isNaN(g)?o:i?Math.round(g):g}return d.invert=function(y){return e.invert(L2(y))},d.domain=function(y){return arguments.length?(e.domain(y),d):e.domain()},d.range=function(y){return arguments.length?(e.range((t=Array.from(y,Rv)).map(L2)),d):t.slice()},d.rangeRound=function(y){return d.range(y).round(!0)},d.round=function(y){return arguments.length?(i=!!y,d):i},d.clamp=function(y){return arguments.length?(e.clamp(y),d):e.clamp()},d.unknown=function(y){return arguments.length?(o=y,d):o},d.copy=function(){return EM(e.domain(),t).round(i).clamp(e.clamp()).unknown(o)},Pl.apply(d,arguments),pf(d)}function PM(){var e=[],t=[],i=[],o;function d(){var g=0,u=Math.max(1,t.length);for(i=new Array(u-1);++g<u;)i[g-1]=vO(e,g/u);return y}function y(g){return g==null||isNaN(g=+g)?o:t[ry(i,g)]}return y.invertExtent=function(g){var u=t.indexOf(g);return u<0?[NaN,NaN]:[u>0?i[u-1]:e[0],u<i.length?i[u]:e[e.length-1]]},y.domain=function(g){if(!arguments.length)return e.slice();e=[];for(let u of g)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(cf),d()},y.range=function(g){return arguments.length?(t=Array.from(g),d()):t.slice()},y.unknown=function(g){return arguments.length?(o=g,y):o},y.quantiles=function(){return i.slice()},y.copy=function(){return PM().domain(e).range(t).unknown(o)},Pl.apply(y,arguments)}function CM(){var e=0,t=1,i=1,o=[.5],d=[0,1],y;function g(E){return E!=null&&E<=E?d[ry(o,E,0,i)]:y}function u(){var E=-1;for(o=new Array(i);++E<i;)o[E]=((E+1)*t-(E-i)*e)/(i+1);return g}return g.domain=function(E){return arguments.length?([e,t]=E,e=+e,t=+t,u()):[e,t]},g.range=function(E){return arguments.length?(i=(d=Array.from(E)).length-1,u()):d.slice()},g.invertExtent=function(E){var P=d.indexOf(E);return P<0?[NaN,NaN]:P<1?[e,o[0]]:P>=i?[o[i-1],t]:[o[P-1],o[P]]},g.unknown=function(E){return arguments.length&&(y=E),g},g.thresholds=function(){return o.slice()},g.copy=function(){return CM().domain([e,t]).range(d).unknown(y)},Pl.apply(pf(g),arguments)}function y1(){var e=[.5],t=[0,1],i,o=1;function d(y){return y!=null&&y<=y?t[ry(e,y,0,o)]:i}return d.domain=function(y){return arguments.length?(e=Array.from(y),o=Math.min(e.length,t.length-1),d):e.slice()},d.range=function(y){return arguments.length?(t=Array.from(y),o=Math.min(e.length,t.length-1),d):t.slice()},d.invertExtent=function(y){var g=t.indexOf(y);return[e[g-1],e[g]]},d.unknown=function(y){return arguments.length?(i=y,d):i},d.copy=function(){return y1().domain(e).range(t).unknown(i)},Pl.apply(d,arguments)}const __=new Date,b_=new Date;function ta(e,t,i,o){function d(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return d.floor=y=>(e(y=new Date(+y)),y),d.ceil=y=>(e(y=new Date(y-1)),t(y,1),e(y),y),d.round=y=>{const g=d(y),u=d.ceil(y);return y-g<u-y?g:u},d.offset=(y,g)=>(t(y=new Date(+y),g==null?1:Math.floor(g)),y),d.range=(y,g,u)=>{const E=[];if(y=d.ceil(y),u=u==null?1:Math.floor(u),!(y<g)||!(u>0))return E;let P;do E.push(P=new Date(+y)),t(y,u),e(y);while(P<y&&y<g);return E},d.filter=y=>ta(g=>{if(g>=g)for(;e(g),!y(g);)g.setTime(g-1)},(g,u)=>{if(g>=g)if(u<0)for(;++u<=0;)for(;t(g,-1),!y(g););else for(;--u>=0;)for(;t(g,1),!y(g););}),i&&(d.count=(y,g)=>(__.setTime(+y),b_.setTime(+g),e(__),e(b_),Math.floor(i(__,b_))),d.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?d.filter(o?g=>o(g)%y===0:g=>d.count(0,g)%y===0):d)),d}const Bv=ta(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ta(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):Bv);Bv.range;const Ju=1e3,wl=Ju*60,eh=wl*60,nh=eh*24,v1=nh*7,j2=nh*30,x_=nh*365,Dd=ta(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getUTCSeconds());Dd.range;const _1=ta(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ju)},(e,t)=>{e.setTime(+e+t*wl)},(e,t)=>(t-e)/wl,e=>e.getMinutes());_1.range;const b1=ta(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wl)},(e,t)=>(t-e)/wl,e=>e.getUTCMinutes());b1.range;const x1=ta(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ju-e.getMinutes()*wl)},(e,t)=>{e.setTime(+e+t*eh)},(e,t)=>(t-e)/eh,e=>e.getHours());x1.range;const w1=ta(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eh)},(e,t)=>(t-e)/eh,e=>e.getUTCHours());w1.range;const ay=ta(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wl)/nh,e=>e.getDate()-1);ay.range;const p0=ta(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>e.getUTCDate()-1);p0.range;const DM=ta(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>Math.floor(e/nh));DM.range;function Gd(e){return ta(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*wl)/v1)}const m0=Gd(0),Lv=Gd(1),mz=Gd(2),gz=Gd(3),nm=Gd(4),yz=Gd(5),vz=Gd(6);m0.range;Lv.range;mz.range;gz.range;nm.range;yz.range;vz.range;function Vd(e){return ta(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/v1)}const g0=Vd(0),jv=Vd(1),_z=Vd(2),bz=Vd(3),im=Vd(4),xz=Vd(5),wz=Vd(6);g0.range;jv.range;_z.range;bz.range;im.range;xz.range;wz.range;const S1=ta(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());S1.range;const T1=ta(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());T1.range;const ih=ta(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ih.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ta(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});ih.range;const ah=ta(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ta(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});ah.range;function IM(e,t,i,o,d,y){const g=[[Dd,1,Ju],[Dd,5,5*Ju],[Dd,15,15*Ju],[Dd,30,30*Ju],[y,1,wl],[y,5,5*wl],[y,15,15*wl],[y,30,30*wl],[d,1,eh],[d,3,3*eh],[d,6,6*eh],[d,12,12*eh],[o,1,nh],[o,2,2*nh],[i,1,v1],[t,1,j2],[t,3,3*j2],[e,1,x_]];function u(P,C,z){const j=C<P;j&&([P,C]=[C,P]);const N=z&&typeof z.range=="function"?z:E(P,C,z),$=N?N.range(P,+C+1):[];return j?$.reverse():$}function E(P,C,z){const j=Math.abs(C-P)/z,N=n1(([,,W])=>W).right(g,j);if(N===g.length)return e.every(Jb(P/x_,C/x_,z));if(N===0)return Bv.every(Math.max(Jb(P,C,z),1));const[$,X]=g[j/g[N-1][2]<g[N][2]/j?N-1:N];return $.every(X)}return[u,E]}const[Sz,Tz]=IM(ah,T1,g0,DM,w1,b1),[Az,Mz]=IM(ih,S1,m0,ay,x1,_1);function w_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dg(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function Ez(e){var t=e.dateTime,i=e.date,o=e.time,d=e.periods,y=e.days,g=e.shortDays,u=e.months,E=e.shortMonths,P=Ig(d),C=Og(d),z=Ig(y),j=Og(y),N=Ig(g),$=Og(g),X=Ig(u),W=Og(u),oe=Ig(E),le=Og(E),ue={a:ot,A:Dt,b:bt,B:tr,c:null,d:q2,e:q2,f:Kz,g:o5,G:l5,H:Hz,I:Yz,j:Xz,L:OM,m:Wz,M:Qz,p:Ae,q:Ve,Q:H2,s:Y2,S:Jz,u:e5,U:t5,V:r5,w:n5,W:i5,x:null,X:null,y:a5,Y:s5,Z:c5,"%":Z2},Oe={a:xt,A:Pt,b:Rt,B:Gt,c:null,d:$2,e:$2,f:d5,g:S5,G:A5,H:u5,I:h5,j:f5,L:RM,m:p5,M:m5,p:or,q:kr,Q:H2,s:Y2,S:g5,u:y5,U:v5,V:_5,w:b5,W:x5,x:null,X:null,y:w5,Y:T5,Z:M5,"%":Z2},Be={a:Ot,A:ft,b:gt,B:Ft,c:Ht,d:G2,e:G2,f:Vz,g:U2,G:F2,H:V2,I:V2,j:Nz,L:Gz,m:jz,M:Fz,p:Mt,q:Lz,Q:$z,s:Zz,S:Uz,u:Oz,U:zz,V:Rz,w:Iz,W:kz,x:Kt,X:$e,y:U2,Y:F2,Z:Bz,"%":qz};ue.x=Le(i,ue),ue.X=Le(o,ue),ue.c=Le(t,ue),Oe.x=Le(i,Oe),Oe.X=Le(o,Oe),Oe.c=Le(t,Oe);function Le(vt,Wt){return function(ur){var dt=[],_r=-1,Qt=0,Jr=vt.length,un,qi,na;for(ur instanceof Date||(ur=new Date(+ur));++_r<Jr;)vt.charCodeAt(_r)===37&&(dt.push(vt.slice(Qt,_r)),(qi=N2[un=vt.charAt(++_r)])!=null?un=vt.charAt(++_r):qi=un==="e"?" ":"0",(na=Wt[un])&&(un=na(ur,qi)),dt.push(un),Qt=_r+1);return dt.push(vt.slice(Qt,_r)),dt.join("")}}function qe(vt,Wt){return function(ur){var dt=Dg(1900,void 0,1),_r=at(dt,vt,ur+="",0),Qt,Jr;if(_r!=ur.length)return null;if("Q"in dt)return new Date(dt.Q);if("s"in dt)return new Date(dt.s*1e3+("L"in dt?dt.L:0));if(Wt&&!("Z"in dt)&&(dt.Z=0),"p"in dt&&(dt.H=dt.H%12+dt.p*12),dt.m===void 0&&(dt.m="q"in dt?dt.q:0),"V"in dt){if(dt.V<1||dt.V>53)return null;"w"in dt||(dt.w=1),"Z"in dt?(Qt=S_(Dg(dt.y,0,1)),Jr=Qt.getUTCDay(),Qt=Jr>4||Jr===0?jv.ceil(Qt):jv(Qt),Qt=p0.offset(Qt,(dt.V-1)*7),dt.y=Qt.getUTCFullYear(),dt.m=Qt.getUTCMonth(),dt.d=Qt.getUTCDate()+(dt.w+6)%7):(Qt=w_(Dg(dt.y,0,1)),Jr=Qt.getDay(),Qt=Jr>4||Jr===0?Lv.ceil(Qt):Lv(Qt),Qt=ay.offset(Qt,(dt.V-1)*7),dt.y=Qt.getFullYear(),dt.m=Qt.getMonth(),dt.d=Qt.getDate()+(dt.w+6)%7)}else("W"in dt||"U"in dt)&&("w"in dt||(dt.w="u"in dt?dt.u%7:"W"in dt?1:0),Jr="Z"in dt?S_(Dg(dt.y,0,1)).getUTCDay():w_(Dg(dt.y,0,1)).getDay(),dt.m=0,dt.d="W"in dt?(dt.w+6)%7+dt.W*7-(Jr+5)%7:dt.w+dt.U*7-(Jr+6)%7);return"Z"in dt?(dt.H+=dt.Z/100|0,dt.M+=dt.Z%100,S_(dt)):w_(dt)}}function at(vt,Wt,ur,dt){for(var _r=0,Qt=Wt.length,Jr=ur.length,un,qi;_r<Qt;){if(dt>=Jr)return-1;if(un=Wt.charCodeAt(_r++),un===37){if(un=Wt.charAt(_r++),qi=Be[un in N2?Wt.charAt(_r++):un],!qi||(dt=qi(vt,ur,dt))<0)return-1}else if(un!=ur.charCodeAt(dt++))return-1}return dt}function Mt(vt,Wt,ur){var dt=P.exec(Wt.slice(ur));return dt?(vt.p=C.get(dt[0].toLowerCase()),ur+dt[0].length):-1}function Ot(vt,Wt,ur){var dt=N.exec(Wt.slice(ur));return dt?(vt.w=$.get(dt[0].toLowerCase()),ur+dt[0].length):-1}function ft(vt,Wt,ur){var dt=z.exec(Wt.slice(ur));return dt?(vt.w=j.get(dt[0].toLowerCase()),ur+dt[0].length):-1}function gt(vt,Wt,ur){var dt=oe.exec(Wt.slice(ur));return dt?(vt.m=le.get(dt[0].toLowerCase()),ur+dt[0].length):-1}function Ft(vt,Wt,ur){var dt=X.exec(Wt.slice(ur));return dt?(vt.m=W.get(dt[0].toLowerCase()),ur+dt[0].length):-1}function Ht(vt,Wt,ur){return at(vt,t,Wt,ur)}function Kt(vt,Wt,ur){return at(vt,i,Wt,ur)}function $e(vt,Wt,ur){return at(vt,o,Wt,ur)}function ot(vt){return g[vt.getDay()]}function Dt(vt){return y[vt.getDay()]}function bt(vt){return E[vt.getMonth()]}function tr(vt){return u[vt.getMonth()]}function Ae(vt){return d[+(vt.getHours()>=12)]}function Ve(vt){return 1+~~(vt.getMonth()/3)}function xt(vt){return g[vt.getUTCDay()]}function Pt(vt){return y[vt.getUTCDay()]}function Rt(vt){return E[vt.getUTCMonth()]}function Gt(vt){return u[vt.getUTCMonth()]}function or(vt){return d[+(vt.getUTCHours()>=12)]}function kr(vt){return 1+~~(vt.getUTCMonth()/3)}return{format:function(vt){var Wt=Le(vt+="",ue);return Wt.toString=function(){return vt},Wt},parse:function(vt){var Wt=qe(vt+="",!1);return Wt.toString=function(){return vt},Wt},utcFormat:function(vt){var Wt=Le(vt+="",Oe);return Wt.toString=function(){return vt},Wt},utcParse:function(vt){var Wt=qe(vt+="",!0);return Wt.toString=function(){return vt},Wt}}}var N2={"-":"",_:" ",0:"0"},Sa=/^\s*\d+/,Pz=/^%/,Cz=/[\\^$*+?|[\]().{}]/g;function Qr(e,t,i){var o=e<0?"-":"",d=(o?-e:e)+"",y=d.length;return o+(y<i?new Array(i-y+1).join(t)+d:d)}function Dz(e){return e.replace(Cz,"\\$&")}function Ig(e){return new RegExp("^(?:"+e.map(Dz).join("|")+")","i")}function Og(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function Iz(e,t,i){var o=Sa.exec(t.slice(i,i+1));return o?(e.w=+o[0],i+o[0].length):-1}function Oz(e,t,i){var o=Sa.exec(t.slice(i,i+1));return o?(e.u=+o[0],i+o[0].length):-1}function zz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.U=+o[0],i+o[0].length):-1}function Rz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.V=+o[0],i+o[0].length):-1}function kz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.W=+o[0],i+o[0].length):-1}function F2(e,t,i){var o=Sa.exec(t.slice(i,i+4));return o?(e.y=+o[0],i+o[0].length):-1}function U2(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),i+o[0].length):-1}function Bz(e,t,i){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),i+o[0].length):-1}function Lz(e,t,i){var o=Sa.exec(t.slice(i,i+1));return o?(e.q=o[0]*3-3,i+o[0].length):-1}function jz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.m=o[0]-1,i+o[0].length):-1}function G2(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.d=+o[0],i+o[0].length):-1}function Nz(e,t,i){var o=Sa.exec(t.slice(i,i+3));return o?(e.m=0,e.d=+o[0],i+o[0].length):-1}function V2(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.H=+o[0],i+o[0].length):-1}function Fz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.M=+o[0],i+o[0].length):-1}function Uz(e,t,i){var o=Sa.exec(t.slice(i,i+2));return o?(e.S=+o[0],i+o[0].length):-1}function Gz(e,t,i){var o=Sa.exec(t.slice(i,i+3));return o?(e.L=+o[0],i+o[0].length):-1}function Vz(e,t,i){var o=Sa.exec(t.slice(i,i+6));return o?(e.L=Math.floor(o[0]/1e3),i+o[0].length):-1}function qz(e,t,i){var o=Pz.exec(t.slice(i,i+1));return o?i+o[0].length:-1}function $z(e,t,i){var o=Sa.exec(t.slice(i));return o?(e.Q=+o[0],i+o[0].length):-1}function Zz(e,t,i){var o=Sa.exec(t.slice(i));return o?(e.s=+o[0],i+o[0].length):-1}function q2(e,t){return Qr(e.getDate(),t,2)}function Hz(e,t){return Qr(e.getHours(),t,2)}function Yz(e,t){return Qr(e.getHours()%12||12,t,2)}function Xz(e,t){return Qr(1+ay.count(ih(e),e),t,3)}function OM(e,t){return Qr(e.getMilliseconds(),t,3)}function Kz(e,t){return OM(e,t)+"000"}function Wz(e,t){return Qr(e.getMonth()+1,t,2)}function Qz(e,t){return Qr(e.getMinutes(),t,2)}function Jz(e,t){return Qr(e.getSeconds(),t,2)}function e5(e){var t=e.getDay();return t===0?7:t}function t5(e,t){return Qr(m0.count(ih(e)-1,e),t,2)}function zM(e){var t=e.getDay();return t>=4||t===0?nm(e):nm.ceil(e)}function r5(e,t){return e=zM(e),Qr(nm.count(ih(e),e)+(ih(e).getDay()===4),t,2)}function n5(e){return e.getDay()}function i5(e,t){return Qr(Lv.count(ih(e)-1,e),t,2)}function a5(e,t){return Qr(e.getFullYear()%100,t,2)}function o5(e,t){return e=zM(e),Qr(e.getFullYear()%100,t,2)}function s5(e,t){return Qr(e.getFullYear()%1e4,t,4)}function l5(e,t){var i=e.getDay();return e=i>=4||i===0?nm(e):nm.ceil(e),Qr(e.getFullYear()%1e4,t,4)}function c5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qr(t/60|0,"0",2)+Qr(t%60,"0",2)}function $2(e,t){return Qr(e.getUTCDate(),t,2)}function u5(e,t){return Qr(e.getUTCHours(),t,2)}function h5(e,t){return Qr(e.getUTCHours()%12||12,t,2)}function f5(e,t){return Qr(1+p0.count(ah(e),e),t,3)}function RM(e,t){return Qr(e.getUTCMilliseconds(),t,3)}function d5(e,t){return RM(e,t)+"000"}function p5(e,t){return Qr(e.getUTCMonth()+1,t,2)}function m5(e,t){return Qr(e.getUTCMinutes(),t,2)}function g5(e,t){return Qr(e.getUTCSeconds(),t,2)}function y5(e){var t=e.getUTCDay();return t===0?7:t}function v5(e,t){return Qr(g0.count(ah(e)-1,e),t,2)}function kM(e){var t=e.getUTCDay();return t>=4||t===0?im(e):im.ceil(e)}function _5(e,t){return e=kM(e),Qr(im.count(ah(e),e)+(ah(e).getUTCDay()===4),t,2)}function b5(e){return e.getUTCDay()}function x5(e,t){return Qr(jv.count(ah(e)-1,e),t,2)}function w5(e,t){return Qr(e.getUTCFullYear()%100,t,2)}function S5(e,t){return e=kM(e),Qr(e.getUTCFullYear()%100,t,2)}function T5(e,t){return Qr(e.getUTCFullYear()%1e4,t,4)}function A5(e,t){var i=e.getUTCDay();return e=i>=4||i===0?im(e):im.ceil(e),Qr(e.getUTCFullYear()%1e4,t,4)}function M5(){return"+0000"}function Z2(){return"%"}function H2(e){return+e}function Y2(e){return Math.floor(+e/1e3)}var Yp,BM,LM;E5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function E5(e){return Yp=Ez(e),BM=Yp.format,Yp.parse,LM=Yp.utcFormat,Yp.utcParse,Yp}function P5(e){return new Date(e)}function C5(e){return e instanceof Date?+e:+new Date(+e)}function A1(e,t,i,o,d,y,g,u,E,P){var C=c1(),z=C.invert,j=C.domain,N=P(".%L"),$=P(":%S"),X=P("%I:%M"),W=P("%I %p"),oe=P("%a %d"),le=P("%b %d"),ue=P("%B"),Oe=P("%Y");function Be(Le){return(E(Le)<Le?N:u(Le)<Le?$:g(Le)<Le?X:y(Le)<Le?W:o(Le)<Le?d(Le)<Le?oe:le:i(Le)<Le?ue:Oe)(Le)}return C.invert=function(Le){return new Date(z(Le))},C.domain=function(Le){return arguments.length?j(Array.from(Le,C5)):j().map(P5)},C.ticks=function(Le){var qe=j();return e(qe[0],qe[qe.length-1],Le??10)},C.tickFormat=function(Le,qe){return qe==null?Be:P(qe)},C.nice=function(Le){var qe=j();return(!Le||typeof Le.range!="function")&&(Le=t(qe[0],qe[qe.length-1],Le??10)),Le?j(TM(qe,Le)):C},C.copy=function(){return iy(C,A1(e,t,i,o,d,y,g,u,E,P))},C}function D5(){return Pl.apply(A1(Az,Mz,ih,S1,m0,ay,x1,_1,Dd,BM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I5(){return Pl.apply(A1(Sz,Tz,ah,T1,g0,p0,w1,b1,Dd,LM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function y0(){var e=0,t=1,i,o,d,y,g=ho,u=!1,E;function P(z){return z==null||isNaN(z=+z)?E:g(d===0?.5:(z=(y(z)-i)*d,u?Math.max(0,Math.min(1,z)):z))}P.domain=function(z){return arguments.length?([e,t]=z,i=y(e=+e),o=y(t=+t),d=i===o?0:1/(o-i),P):[e,t]},P.clamp=function(z){return arguments.length?(u=!!z,P):u},P.interpolator=function(z){return arguments.length?(g=z,P):g};function C(z){return function(j){var N,$;return arguments.length?([N,$]=j,g=z(N,$),P):[g(0),g(1)]}}return P.range=C(dm),P.rangeRound=C(l1),P.unknown=function(z){return arguments.length?(E=z,P):E},function(z){return y=z,i=z(e),o=z(t),d=i===o?0:1/(o-i),P}}function mf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jM(){var e=pf(y0()(ho));return e.copy=function(){return mf(e,jM())},sh.apply(e,arguments)}function NM(){var e=d1(y0()).domain([1,10]);return e.copy=function(){return mf(e,NM()).base(e.base())},sh.apply(e,arguments)}function FM(){var e=p1(y0());return e.copy=function(){return mf(e,FM()).constant(e.constant())},sh.apply(e,arguments)}function M1(){var e=m1(y0());return e.copy=function(){return mf(e,M1()).exponent(e.exponent())},sh.apply(e,arguments)}function O5(){return M1.apply(null,arguments).exponent(.5)}function UM(){var e=[],t=ho;function i(o){if(o!=null&&!isNaN(o=+o))return t((ry(e,o,1)-1)/(e.length-1))}return i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let d of o)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(cf),i},i.interpolator=function(o){return arguments.length?(t=o,i):t},i.range=function(){return e.map((o,d)=>t(d/(e.length-1)))},i.quantiles=function(o){return Array.from({length:o+1},(d,y)=>yO(e,y/o))},i.copy=function(){return UM(t).domain(e)},sh.apply(i,arguments)}function v0(){var e=0,t=.5,i=1,o=1,d,y,g,u,E,P=ho,C,z=!1,j;function N(X){return isNaN(X=+X)?j:(X=.5+((X=+C(X))-y)*(o*X<o*y?u:E),P(z?Math.max(0,Math.min(1,X)):X))}N.domain=function(X){return arguments.length?([e,t,i]=X,d=C(e=+e),y=C(t=+t),g=C(i=+i),u=d===y?0:.5/(y-d),E=y===g?0:.5/(g-y),o=y<d?-1:1,N):[e,t,i]},N.clamp=function(X){return arguments.length?(z=!!X,N):z},N.interpolator=function(X){return arguments.length?(P=X,N):P};function $(X){return function(W){var oe,le,ue;return arguments.length?([oe,le,ue]=W,P=qO(X,[oe,le,ue]),N):[P(0),P(.5),P(1)]}}return N.range=$(dm),N.rangeRound=$(l1),N.unknown=function(X){return arguments.length?(j=X,N):j},function(X){return C=X,d=X(e),y=X(t),g=X(i),u=d===y?0:.5/(y-d),E=y===g?0:.5/(g-y),o=y<d?-1:1,N}}function GM(){var e=pf(v0()(ho));return e.copy=function(){return mf(e,GM())},sh.apply(e,arguments)}function VM(){var e=d1(v0()).domain([.1,1,10]);return e.copy=function(){return mf(e,VM()).base(e.base())},sh.apply(e,arguments)}function qM(){var e=p1(v0());return e.copy=function(){return mf(e,qM()).constant(e.constant())},sh.apply(e,arguments)}function E1(){var e=m1(v0());return e.copy=function(){return mf(e,E1()).exponent(e.exponent())},sh.apply(e,arguments)}function z5(){return E1.apply(null,arguments).exponent(.5)}const $M={BrewerYlGn3:["#f7fcb9","#addd8e","#31a354"],BrewerYlGn4:["#ffffcc","#c2e699","#78c679","#238443"],BrewerYlGn5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],BrewerYlGn6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],BrewerYlGn7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],BrewerYlGnBu3:["#edf8b1","#7fcdbb","#2c7fb8"],BrewerYlGnBu4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],BrewerYlGnBu5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BrewerGnBu3:["#e0f3db","#a8ddb5","#43a2ca"],BrewerGnBu4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],BrewerGnBu5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BrewerBuGn3:["#e5f5f9","#99d8c9","#2ca25f"],BrewerBuGn4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],BrewerBuGn5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BrewerPuBuGn3:["#ece2f0","#a6bddb","#1c9099"],BrewerPuBuGn4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],BrewerPuBuGn5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],BrewerPuBu3:["#ece7f2","#a6bddb","#2b8cbe"],BrewerPuBu4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],BrewerPuBu5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BrewerBuPu3:["#e0ecf4","#9ebcda","#8856a7"],BrewerBuPu4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],BrewerBuPu5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],BrewerBuPu6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],BrewerBuPu7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],BrewerRdPu3:["#fde0dd","#fa9fb5","#c51b8a"],BrewerRdPu4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],BrewerRdPu5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],BrewerRdPu6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],BrewerRdPu7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],BrewerPuRd3:["#e7e1ef","#c994c7","#dd1c77"],BrewerPuRd4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],BrewerPuRd5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],BrewerPuRd6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],BrewerPuRd7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],BrewerOrRd3:["#fee8c8","#fdbb84","#e34a33"],BrewerOrRd4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],BrewerOrRd5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],BrewerOrRd6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],BrewerOrRd7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],BrewerYlOrRd3:["#ffeda0","#feb24c","#f03b20"],BrewerYlOrRd4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],BrewerYlOrRd5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],BrewerYlOrBr3:["#fff7bc","#fec44f","#d95f0e"],BrewerYlOrBr4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],BrewerYlOrBr5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],BrewerYlOrBr6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],BrewerYlOrBr7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],BrewerPurples3:["#efedf5","#bcbddc","#756bb1"],BrewerPurples4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],BrewerPurples5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],BrewerPurples6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],BrewerPurples7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],BrewerBlues3:["#deebf7","#9ecae1","#3182bd"],BrewerBlues4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],BrewerBlues5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],BrewerBlues6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],BrewerBlues7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],BrewerGreens3:["#e5f5e0","#a1d99b","#31a354"],BrewerGreens4:["#edf8e9","#bae4b3","#74c476","#238b45"],BrewerGreens5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],BrewerGreens6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],BrewerGreens7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],BrewerOranges3:["#fee6ce","#fdae6b","#e6550d"],BrewerOranges4:["#feedde","#fdbe85","#fd8d3c","#d94701"],BrewerOranges5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],BrewerOranges6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],BrewerOranges7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BrewerReds3:["#fee0d2","#fc9272","#de2d26"],BrewerReds4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],BrewerReds5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],BrewerReds6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],BrewerReds7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],BrewerGreys3:["#f0f0f0","#bdbdbd","#636363"],BrewerGreys4:["#f7f7f7","#cccccc","#969696","#525252"],BrewerGreys5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],BrewerGreys6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],BrewerGreys7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],BrewerPuOr3:["#f1a340","#f7f7f7","#998ec3"],BrewerPuOr4:["#e66101","#fdb863","#b2abd2","#5e3c99"],BrewerPuOr5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],BrewerPuOr6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],BrewerPuOr7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],BrewerPuOr8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerPuOr11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerBrBG3:["#d8b365","#f5f5f5","#5ab4ac"],BrewerBrBG4:["#a6611a","#dfc27d","#80cdc1","#018571"],BrewerBrBG5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],BrewerBrBG6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerBrBG11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerPRGn3:["#af8dc3","#f7f7f7","#7fbf7b"],BrewerPRGn4:["#7b3294","#c2a5cf","#a6dba0","#008837"],BrewerPRGn5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],BrewerPRGn6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPRGn11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPiYG3:["#e9a3c9","#f7f7f7","#a1d76a"],BrewerPiYG4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],BrewerPiYG5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],BrewerPiYG6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerPiYG11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerRdBu3:["#ef8a62","#f7f7f7","#67a9cf"],BrewerRdBu4:["#ca0020","#f4a582","#92c5de","#0571b0"],BrewerRdBu5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],BrewerRdBu6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdBu11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdGy3:["#ef8a62","#ffffff","#999999"],BrewerRdGy4:["#ca0020","#f4a582","#bababa","#404040"],BrewerRdGy5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],BrewerRdGy6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdGy11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdYlBu3:["#fc8d59","#ffffbf","#91bfdb"],BrewerRdYlBu4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],BrewerRdYlBu5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],BrewerRdYlBu6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerRdYlBu11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerSpectral3:["#fc8d59","#ffffbf","#99d594"],BrewerSpectral4:["#d7191c","#fdae61","#abdda4","#2b83ba"],BrewerSpectral5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],BrewerSpectral6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],BrewerSpectral7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],BrewerSpectral8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerSpectral11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerRdYlGn3:["#fc8d59","#ffffbf","#91cf60"],BrewerRdYlGn4:["#d7191c","#fdae61","#a6d96a","#1a9641"],BrewerRdYlGn5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],BrewerRdYlGn6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerRdYlGn11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerAccent3:["#7fc97f","#beaed4","#fdc086"],BrewerAccent4:["#7fc97f","#beaed4","#fdc086","#ffff99"],BrewerAccent5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],BrewerAccent6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],BrewerAccent7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],BrewerAccent8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],BrewerDark23:["#1b9e77","#d95f02","#7570b3"],BrewerDark24:["#1b9e77","#d95f02","#7570b3","#e7298a"],BrewerDark25:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],BrewerDark26:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],BrewerDark27:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],BrewerDark28:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],BrewerPaired3:["#a6cee3","#1f78b4","#b2df8a"],BrewerPaired4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],BrewerPaired5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],BrewerPaired6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],BrewerPaired7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],BrewerPaired8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],BrewerPaired9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],BrewerPaired10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],BrewerPaired11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],BrewerPaired12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],BrewerPastel13:["#fbb4ae","#b3cde3","#ccebc5"],BrewerPastel14:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],BrewerPastel15:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],BrewerPastel16:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],BrewerPastel17:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],BrewerPastel18:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],BrewerPastel19:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],BrewerPastel23:["#b3e2cd","#fdcdac","#cbd5e8"],BrewerPastel24:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],BrewerPastel25:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],BrewerPastel26:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],BrewerPastel27:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],BrewerPastel28:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],BrewerSet13:["#e41a1c","#377eb8","#4daf4a"],BrewerSet14:["#e41a1c","#377eb8","#4daf4a","#984ea3"],BrewerSet15:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],BrewerSet16:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],BrewerSet17:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],BrewerSet18:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],BrewerSet19:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],BrewerSet23:["#66c2a5","#fc8d62","#8da0cb"],BrewerSet24:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],BrewerSet25:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],BrewerSet26:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],BrewerSet27:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],BrewerSet28:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],BrewerSet33:["#8dd3c7","#ffffb3","#bebada"],BrewerSet34:["#8dd3c7","#ffffb3","#bebada","#fb8072"],BrewerSet35:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],BrewerSet36:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],BrewerSet37:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],BrewerSet38:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],BrewerSet39:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],BrewerSet310:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],BrewerSet311:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],BrewerSet312:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],CartoBurg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],CartoBurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],CartoRedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],CartoOrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],CartoPeach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],CartoPinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],CartoMint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],CartoBluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],CartoDarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],CartoEmrld:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],CartoBluYl:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],CartoTeal:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],CartoTealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],CartoPurp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],CartoPurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],CartoSunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],CartoMagenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],CartoSunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],CartoBrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],CartoArmyRose:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],CartoFall:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoGeyser:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoTemps:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],CartoTealRose:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],CartoTropic:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],CartoEarth:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"]},R5=Object.keys($M);function k5(e){return R5.includes(e)}const B5=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,L5=e=>{const t=B5.exec(e);if(t!==null)return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)];throw new Error(`Cannot parse hex color "${e}"`)},j5=(e,t,i)=>Array.from({length:i},(o,d)=>e+d*(t-e)/(i-1)),N5=(e,t,i)=>Array.from({length:i-1},(o,d)=>e+(d+1)*(t-e)/i),F5=({colorScheme:e,customColors:t,min:i,max:o,isReverse:d=!1,isContinuous:y=!1})=>{let g;if(e)if(k5(e))g=$M[e];else throw new Error(`"${e}" is not a supported color scheme`);else if(t&&t.length>=2)g=t;else throw new Error("You must provide a colorScheme or an array of at least 2 customColors");const u=g.map(L5),E=d?u.reverse():u;if(y){const P=j5(i,o,E.length);return f1(P,E).clamp(!0)}else{const P=N5(i,o,E.length);return y1(P,E)}},uf=256,U5=(e,{offset:t,scale:i,noData:o,colorScale:d})=>{const y=uf*uf,g=e.length/y,u=new Uint8ClampedArray(y*4),E=F5(d);for(let P=0;P<y;P++){const C=t+e[P*g]*i;if(C===o||isNaN(C)||C===1/0)u[4*P]=0,u[4*P+1]=0,u[4*P+2]=0,u[4*P+3]=0;else{const z=E(C);u[4*P]=z[0],u[4*P+1]=z[1],u[4*P+2]=z[2],u[4*P+3]=255}}return u},Os=uf*uf,qd=e=>e.length/Os;function G5(e,t,i){const o=new Uint8ClampedArray(Os*4),d=qd(e);let y;for(let g=0;g<Os;g++)y=255-e[g*d]/t*255,o[g*4]=y,o[g*4+1]=y,o[g*4+2]=y,o[g*4+3]=e[g*d]===i?0:255;return o}function V5(e,t,i){const o=new Uint8ClampedArray(Os*4),d=qd(e);let y;for(let g=0;g<Os;g++)y=e[g*d]/t*255,o[g*4]=y,o[g*4+1]=y,o[g*4+2]=y,o[g*4+3]=e[g*d]===i?0:255;return o}function q5(e,t){const i=new Uint8ClampedArray(Os*4),o=qd(e);for(let d=0;d<Os;d++)i[d*4]=e[d*o],i[d*4+1]=e[d*o+1],i[d*4+2]=e[d*o+2],i[d*4+3]=e[d*o]===t&&e[d*o+1]===t&&e[d*o+2]===t?0:255;return i}function $5(e,t,i){const o=new Uint8ClampedArray(Os*4),d=qd(e),y=t.length/3,g=t.length/3*2;for(let u=0;u<Os;u++){const E=e[u*d];o[u*4]=t[E]/65536*256,o[u*4+1]=t[E+y]/65536*256,o[u*4+2]=t[E+g]/65536*256,o[u*4+3]=e[u*d]===i?0:255}return o}function Z5(e,t){const i=new Uint8ClampedArray(Os*4),o=qd(e);for(let d=0;d<e.length;d++){const y=e[d*o],g=e[d*o+1],u=e[d*o+2],E=e[d*o+3];i[d*4]=255*((255-y)/256)*((255-E)/256),i[d*4+1]=255*((255-g)/256)*((255-E)/256),i[d*4+2]=255*((255-u)/256)*((255-E)/256),i[d*4+3]=y===t&&g===t&&u===t&&E===t?0:255}return i}function H5(e,t){const i=new Uint8ClampedArray(Os*4),o=qd(e);for(let d=0;d<Os;d++){const y=e[d*o],g=e[d*o+1],u=e[d*o+2];i[d*4]=y+1.402*(u-128),i[d*4+1]=y-.34414*(g-128)-.71414*(u-128),i[d*4+2]=y+1.772*(g-128),i[d*4+3]=y===t&&g==t&&u==t?0:255}return i}const Y5=.95047,X5=1,K5=1.08883;function W5(e,t){const i=new Uint8ClampedArray(Os),o=qd(e);for(let d=0;d<e.length;d++){const y=e[d*o],g=e[d*o+1]<<24>>24,u=e[d*o+2]<<24>>24;let E=(y+16)/116,P=g/500+E,C=E-u/200,z,j,N;P=Y5*(P*P*P>.008856?P*P*P:(P-16/116)/7.787),E=X5*(E*E*E>.008856?E*E*E:(E-16/116)/7.787),C=K5*(C*C*C>.008856?C*C*C:(C-16/116)/7.787),z=P*3.2406+E*-1.5372+C*-.4986,j=P*-.9689+E*1.8758+C*.0415,N=P*.0557+E*-.204+C*1.057,z=z>.0031308?1.055*z**(1/2.4)-.055:12.92*z,j=j>.0031308?1.055*j**(1/2.4)-.055:12.92*j,N=N>.0031308?1.055*N**(1/2.4)-.055:12.92*N,i[4*d]=Math.max(0,Math.min(1,z))*255,i[4*d+1]=Math.max(0,Math.min(1,j))*255,i[4*d+2]=Math.max(0,Math.min(1,N))*255,i[d*4+3]=y===t&&g==t&&u==t?0:255}return i}var Yu;(function(e){e[e.WhiteIsZero=0]="WhiteIsZero",e[e.BlackIsZero=1]="BlackIsZero",e[e.RGB=2]="RGB",e[e.Palette=3]="Palette",e[e.TransparencyMask=4]="TransparencyMask",e[e.CMYK=5]="CMYK",e[e.YCbCr=6]="YCbCr",e[e.CIELab=8]="CIELab",e[e.ICCLab=9]="ICCLab"})(Yu||(Yu={}));const Q5=(e,{noData:t,photometricInterpretation:i,bitsPerSample:o,colorMap:d})=>{const y=o&&o[0]?2**o[0]:NaN,g=t??0;let u;switch(i){case Yu.WhiteIsZero:u=G5(e,y,g);break;case Yu.BlackIsZero:u=V5(e,y,g);break;case Yu.RGB:u=q5(e,g);break;case Yu.Palette:if(d)u=$5(e,d,g);else throw new Error("colorMap for paletted image not found.");break;case Yu.CMYK:u=Z5(e,g);break;case Yu.YCbCr:u=H5(e,g);break;case Yu.CIELab:u=W5(e,g);break;default:throw new Error("Unsupported photometric interpretation.")}return u},J5=(e,{offset:t,scale:i,noData:o})=>{const d=uf*uf,y=e.length/d,g=new Uint8ClampedArray(d*4),u=-1e4,E=.1;for(let P=0;P<d;P++){const C=t+e[P*y]*i,j=((C==o?0:C)-u)/E;g[4*P]=Math.floor(j/256/256)%256,g[4*P+1]=Math.floor(j/256)%256,g[4*P+2]=j%256,g[4*P+3]=255}return g},X2={},e6={get:e=>X2[e],set:(e,t)=>{X2[e]=t}},t6=async e=>{const t=new RegExp(/cog:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=e.match(t);if(!i)throw new Error(`Invalid COG protocol URL '${e}'`);const o=i[1].split("#"),d=o[0];o.shift();const y=o.join("#")??"",g=parseInt(i[2]),u=parseInt(i[3]),E=parseInt(i[4]),P=fM(d),C=await P.getRawTile({z:g,x:u,y:E}),z=await P.getMetadata();let j;const N=e6.get(d);if(N!==void 0)j=N(C,z);else if(y.startsWith("dem"))j=J5(C,z);else if(y.startsWith("color")){const $=y.split("color").pop()?.substring(1);if($){const X=$.match(/\[("#([0-9a-fA-F]{3,6})"(,(\s)?)?)+]/)?.[0];let W="",oe=[],le,ue,Oe;X?(oe=JSON.parse(X),[le,ue,Oe]=$.replace(`${X},`,"").split(",")):[W,le,ue,Oe]=$.split(",");const Be=parseFloat(le),Le=parseFloat(ue),qe=Oe?.includes("-")||!1,at=Oe?.includes("c")||!1;j=U5(C,{...z,colorScale:{colorScheme:W,customColors:oe,min:Be,max:Le,isReverse:qe,isContinuous:at}})}else throw new Error("Color params are not defined")}else j=Q5(C,z);return await createImageBitmap(new ImageData(j,uf,uf))},ix=async e=>{if(e.type=="json"){const t=e.url.replace("cog://","").split("#")[0];return{data:await fM(t).getTilejson(e.url)}}else{if(e.type=="image")return{data:await t6(e.url)};throw new Error(`Unsupported request type '${e.type}'`)}};var Cs=Uint8Array,Kp=Uint16Array,r6=Int32Array,ZM=new Cs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HM=new Cs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n6=new Cs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YM=function(e,t){for(var i=new Kp(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];for(var d=new r6(i[30]),o=1;o<30;++o)for(var y=i[o];y<i[o+1];++y)d[y]=y-i[o]<<5|o;return{b:i,r:d}},XM=YM(ZM,2),KM=XM.b,i6=XM.r;KM[28]=258,i6[258]=28;var a6=YM(HM,0),o6=a6.b,ax=new Kp(32768);for(var Qn=0;Qn<32768;++Qn){var af=(Qn&43690)>>1|(Qn&21845)<<1;af=(af&52428)>>2|(af&13107)<<2,af=(af&61680)>>4|(af&3855)<<4,ax[Qn]=((af&65280)>>8|(af&255)<<8)>>1}var Ng=(function(e,t,i){for(var o=e.length,d=0,y=new Kp(t);d<o;++d)e[d]&&++y[e[d]-1];var g=new Kp(t);for(d=1;d<t;++d)g[d]=g[d-1]+y[d-1]<<1;var u;if(i){u=new Kp(1<<t);var E=15-t;for(d=0;d<o;++d)if(e[d])for(var P=d<<4|e[d],C=t-e[d],z=g[e[d]-1]++<<C,j=z|(1<<C)-1;z<=j;++z)u[ax[z]>>E]=P}else for(u=new Kp(o),d=0;d<o;++d)e[d]&&(u[d]=ax[g[e[d]-1]++]>>15-e[d]);return u}),oy=new Cs(288);for(var Qn=0;Qn<144;++Qn)oy[Qn]=8;for(var Qn=144;Qn<256;++Qn)oy[Qn]=9;for(var Qn=256;Qn<280;++Qn)oy[Qn]=7;for(var Qn=280;Qn<288;++Qn)oy[Qn]=8;var WM=new Cs(32);for(var Qn=0;Qn<32;++Qn)WM[Qn]=5;var s6=Ng(oy,9,1),l6=Ng(WM,5,1),T_=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},cc=function(e,t,i){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&i},A_=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},c6=function(e){return(e+7)/8|0},u6=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new Cs(e.subarray(t,i))},h6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ms=function(e,t,i){var o=new Error(t||h6[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Ms),!i)throw o;return o},P1=function(e,t,i,o){var d=e.length,y=0;if(!d||t.f&&!t.l)return i||new Cs(0);var g=!i,u=g||t.i!=2,E=t.i;g&&(i=new Cs(d*3));var P=function(ur){var dt=i.length;if(ur>dt){var _r=new Cs(Math.max(dt*2,ur));_r.set(i),i=_r}},C=t.f||0,z=t.p||0,j=t.b||0,N=t.l,$=t.d,X=t.m,W=t.n,oe=d*8;do{if(!N){C=cc(e,z,1);var le=cc(e,z+1,3);if(z+=3,le)if(le==1)N=s6,$=l6,X=9,W=5;else if(le==2){var Le=cc(e,z,31)+257,qe=cc(e,z+10,15)+4,at=Le+cc(e,z+5,31)+1;z+=14;for(var Mt=new Cs(at),Ot=new Cs(19),ft=0;ft<qe;++ft)Ot[n6[ft]]=cc(e,z+ft*3,7);z+=qe*3;for(var gt=T_(Ot),Ft=(1<<gt)-1,Ht=Ng(Ot,gt,1),ft=0;ft<at;){var Kt=Ht[cc(e,z,Ft)];z+=Kt&15;var ue=Kt>>4;if(ue<16)Mt[ft++]=ue;else{var $e=0,ot=0;for(ue==16?(ot=3+cc(e,z,3),z+=2,$e=Mt[ft-1]):ue==17?(ot=3+cc(e,z,7),z+=3):ue==18&&(ot=11+cc(e,z,127),z+=7);ot--;)Mt[ft++]=$e}}var Dt=Mt.subarray(0,Le),bt=Mt.subarray(Le);X=T_(Dt),W=T_(bt),N=Ng(Dt,X,1),$=Ng(bt,W,1)}else Ms(1);else{var ue=c6(z)+4,Oe=e[ue-4]|e[ue-3]<<8,Be=ue+Oe;if(Be>d){E&&Ms(0);break}u&&P(j+Oe),i.set(e.subarray(ue,Be),j),t.b=j+=Oe,t.p=z=Be*8,t.f=C;continue}if(z>oe){E&&Ms(0);break}}u&&P(j+131072);for(var tr=(1<<X)-1,Ae=(1<<W)-1,Ve=z;;Ve=z){var $e=N[A_(e,z)&tr],xt=$e>>4;if(z+=$e&15,z>oe){E&&Ms(0);break}if($e||Ms(2),xt<256)i[j++]=xt;else if(xt==256){Ve=z,N=null;break}else{var Pt=xt-254;if(xt>264){var ft=xt-257,Rt=ZM[ft];Pt=cc(e,z,(1<<Rt)-1)+KM[ft],z+=Rt}var Gt=$[A_(e,z)&Ae],or=Gt>>4;Gt||Ms(3),z+=Gt&15;var bt=o6[or];if(or>3){var Rt=HM[or];bt+=A_(e,z)&(1<<Rt)-1,z+=Rt}if(z>oe){E&&Ms(0);break}u&&P(j+131072);var kr=j+Pt;if(j<bt){var vt=y-bt,Wt=Math.min(bt,kr);for(vt+j<0&&Ms(3);j<Wt;++j)i[j]=o[vt+j]}for(;j<kr;++j)i[j]=i[j-bt]}}t.l=N,t.p=Ve,t.b=j,t.f=C,N&&(C=1,t.m=X,t.d=$,t.n=W)}while(!C);return j!=i.length&&g?u6(i,0,j):i.subarray(0,j)},f6=new Cs(0),d6=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Ms(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[i++]);return i+(t&2)},p6=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},m6=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ms(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ms(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function g6(e,t){return P1(e,{i:2},t,t)}function y6(e,t){var i=d6(e);return i+8>e.length&&Ms(6,"invalid gzip data"),P1(e.subarray(i,-8),{i:2},new Cs(p6(e)),t)}function v6(e,t){return P1(e.subarray(m6(e),-4),{i:2},t,t)}function _6(e,t){return e[0]==31&&e[1]==139&&e[2]==8?y6(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?g6(e,t):v6(e,t)}var b6=typeof TextDecoder<"u"&&new TextDecoder,x6=0;try{b6.decode(f6,{stream:!0}),x6=1}catch{}var w6=Object.defineProperty,Fg=Math.pow,Tn=(e,t)=>w6(e,"name",{value:t,configurable:!0}),ba=(e,t,i)=>new Promise((o,d)=>{var y=E=>{try{u(i.next(E))}catch(P){d(P)}},g=E=>{try{u(i.throw(E))}catch(P){d(P)}},u=E=>E.done?o(E.value):Promise.resolve(E.value).then(y,g);u((i=i.apply(e,t)).next())});Tn((e,t)=>{let i=!1,o="",d=L.GridLayer.extend({createTile:Tn((y,g)=>{let u=document.createElement("img"),E=new AbortController,P=E.signal;return u.cancel=()=>{E.abort()},i||(e.getHeader().then(C=>{C.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):C.tileType===2?o="image/png":C.tileType===3?o="image/jpeg":C.tileType===4?o="image/webp":C.tileType===5&&(o="image/avif")}),i=!0),e.getZxy(y.z,y.x,y.y,P).then(C=>{if(C){let z=new Blob([C.data],{type:o}),j=window.URL.createObjectURL(z);u.src=j,u.cancel=void 0,g(void 0,u)}}).catch(C=>{if(C.name!=="AbortError")throw C}),u},"createTile"),_removeTile:Tn(function(y){let g=this._tiles[y];g&&(g.el.cancel&&g.el.cancel(),g.el.width=0,g.el.height=0,g.el.deleted=!0,L.DomUtil.remove(g.el),delete this._tiles[y],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(y)}))},"_removeTile")});return new d(t)},"leafletRasterLayer");var S6=Tn(e=>(t,i)=>{if(i instanceof AbortController)return e(t,i);let o=new AbortController;return e(t,o).then(d=>i(void 0,d.data,d.cacheControl||"",d.expires||""),d=>i(d)).catch(d=>i(d)),{cancel:Tn(()=>o.abort(),"cancel")}},"v3compat"),QM=class{constructor(t){this.tilev4=Tn((i,o)=>ba(this,null,function*(){if(i.type==="json"){let N=i.url.substr(10),$=this.tiles.get(N);if($||($=new K2(N),this.tiles.set(N,$)),this.metadata)return{data:yield $.getTileJson(i.url)};let X=yield $.getHeader();return(X.minLon>=X.maxLon||X.minLat>=X.maxLat)&&console.error(`Bounds of PMTiles archive ${X.minLon},${X.minLat},${X.maxLon},${X.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:X.minZoom,maxzoom:X.maxZoom,bounds:[X.minLon,X.minLat,X.maxLon,X.maxLat]}}}let d=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),y=i.url.match(d);if(!y)throw new Error("Invalid PMTiles protocol URL");let g=y[1],u=this.tiles.get(g);u||(u=new K2(g),this.tiles.set(g,u));let E=y[2],P=y[3],C=y[4],z=yield u.getHeader(),j=yield u?.getZxy(+E,+P,+C,o.signal);if(j)return{data:new Uint8Array(j.data),cacheControl:j.cacheControl,expires:j.expires};if(z.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=S6(this.tilev4),this.tiles=new Map,this.metadata=t?.metadata||!1,this.errorOnMissingTile=t?.errorOnMissingTile||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};Tn(QM,"Protocol");var JM=QM;function eE(e,t){return(t>>>0)*4294967296+(e>>>0)}Tn(eE,"toNum");function tE(e,t){let i=t.buf,o=i[t.pos++],d=(o&112)>>4;if(o<128||(o=i[t.pos++],d|=(o&127)<<3,o<128)||(o=i[t.pos++],d|=(o&127)<<10,o<128)||(o=i[t.pos++],d|=(o&127)<<17,o<128)||(o=i[t.pos++],d|=(o&127)<<24,o<128)||(o=i[t.pos++],d|=(o&1)<<31,o<128))return eE(e,d);throw new Error("Expected varint not more than 10 bytes")}Tn(tE,"readVarintRemainder");function Xp(e){let t=e.buf,i=t[e.pos++],o=i&127;return i<128||(i=t[e.pos++],o|=(i&127)<<7,i<128)||(i=t[e.pos++],o|=(i&127)<<14,i<128)||(i=t[e.pos++],o|=(i&127)<<21,i<128)?o:(i=t[e.pos],o|=(i&15)<<28,tE(o,e))}Tn(Xp,"readVarint");function C1(e,t,i,o){if(o===0){i===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);let d=t[0];t[0]=t[1],t[1]=d}}Tn(C1,"rotate");function rE(e,t){let i=Fg(2,e),o=t,d=t,y=t,g=[0,0],u=1;for(;u<i;)o=1&y/2,d=1&(y^o),C1(u,g,o,d),g[0]+=u*o,g[1]+=u*d,y=y/4,u*=2;return[e,g[0],g[1]]}Tn(rE,"idOnLevel");var T6=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function nE(e,t,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(t>Fg(2,e)-1||i>Fg(2,e)-1)throw new Error("tile x/y outside zoom level bounds");let o=T6[e],d=Fg(2,e),y=0,g=0,u=0,E=[t,i],P=d/2;for(;P>0;)y=(E[0]&P)>0?1:0,g=(E[1]&P)>0?1:0,u+=P*P*(3*y^g),C1(P,E,y,g),P=P/2;return o+u}Tn(nE,"zxyToTileId");function A6(e){let t=0;for(let i=0;i<27;i++){let o=(1<<i)*(1<<i);if(t+o>e)return rE(i,e-t);t+=o}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Tn(A6,"tileIdToZxy");var M6=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(M6||{});function _0(e,t){return ba(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return _6(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let o=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw new Error("Compression method not supported")})}Tn(_0,"defaultDecompress");var E6=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(E6||{});function iE(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}Tn(iE,"tileTypeExt");var P6=127;function aE(e,t){let i=0,o=e.length-1;for(;i<=o;){let d=o+i>>1,y=t-e[d].tileId;if(y>0)i=d+1;else if(y<0)o=d-1;else return e[d]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}Tn(aE,"findTile");var C6=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,i){return ba(this,null,function*(){return{data:yield this.file.slice(t,t+i).arrayBuffer()}})}};Tn(C6,"FileSource");var oE=class{constructor(t,i=new Headers){this.url=t,this.customHeaders=i,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=globalThis.navigator.userAgent||"");let d=o.indexOf("Windows")>-1,y=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,d&&y&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,i,o,d){return ba(this,null,function*(){let y,g;o?g=o:(y=new AbortController,g=y.signal);let u=new Headers(this.customHeaders);u.set("range",`bytes=${t}-${t+i-1}`);let E;this.mustReload?E="reload":this.chromeWindowsNoCache&&(E="no-store");let P=yield fetch(this.url,{signal:g,cache:E,headers:u});if(t===0&&P.status===416){let j=P.headers.get("Content-Range");if(!j||!j.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let N=+j.substr(8);P=yield fetch(this.url,{signal:g,cache:"reload",headers:{range:`bytes=0-${N-1}`}})}let C=P.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),P.status===416||d&&C&&C!==d)throw this.mustReload=!0,new ox(`Server returned non-matching ETag ${d} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(P.status>=300)throw new Error(`Bad response code: ${P.status}`);let z=P.headers.get("Content-Length");if(P.status===200&&(!z||+z>i))throw y&&y.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield P.arrayBuffer(),etag:C||void 0,cacheControl:P.headers.get("Cache-Control")||void 0,expires:P.headers.get("Expires")||void 0}})}};Tn(oE,"FetchSource");var D6=oE;function _l(e,t){let i=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return i*Fg(2,32)+o}Tn(_l,"getUint64");function sE(e,t){let i=new DataView(e),o=i.getUint8(7);if(o>3)throw new Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:_l(i,8),rootDirectoryLength:_l(i,16),jsonMetadataOffset:_l(i,24),jsonMetadataLength:_l(i,32),leafDirectoryOffset:_l(i,40),leafDirectoryLength:_l(i,48),tileDataOffset:_l(i,56),tileDataLength:_l(i,64),numAddressedTiles:_l(i,72),numTileEntries:_l(i,80),numTileContents:_l(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}Tn(sE,"bytesToHeader");function D1(e){let t={buf:new Uint8Array(e),pos:0},i=Xp(t),o=[],d=0;for(let y=0;y<i;y++){let g=Xp(t);o.push({tileId:d+g,offset:0,length:0,runLength:1}),d+=g}for(let y=0;y<i;y++)o[y].runLength=Xp(t);for(let y=0;y<i;y++)o[y].length=Xp(t);for(let y=0;y<i;y++){let g=Xp(t);g===0&&y>0?o[y].offset=o[y-1].offset+o[y-1].length:o[y].offset=g-1}return o}Tn(D1,"deserializeIndex");var lE=class extends Error{};Tn(lE,"EtagMismatch");var ox=lE;function I1(e,t){return ba(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let o=i.data.slice(0,P6),d=sE(o,i.etag),y=i.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),g=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,u=D1(yield t(y,d.internalCompression));return[d,[g,u.length,u]]})}Tn(I1,"getHeaderAndRoot");function O1(e,t,i,o,d){return ba(this,null,function*(){let y=yield e.getBytes(i,o,void 0,d.etag),g=yield t(y.data,d.internalCompression),u=D1(g);if(u.length===0)throw new Error("Empty directory is invalid");return u})}Tn(O1,"getDirectory");var I6=class{constructor(t=100,i=!0,o=_0){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=o}getHeader(t){return ba(this,null,function*(){let i=t.getKey(),o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,o.data;let d=yield I1(t,this.decompress);return d[1]&&this.cache.set(d[1][0],{lastUsed:this.counter++,data:d[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:d[0]}),this.prune(),d[0]})}getDirectory(t,i,o,d){return ba(this,null,function*(){let y=`${t.getKey()}|${d.etag||""}|${i}|${o}`,g=this.cache.get(y);if(g)return g.lastUsed=this.counter++,g.data;let u=yield O1(t,this.decompress,i,o,d);return this.cache.set(y,{lastUsed:this.counter++,data:u}),this.prune(),u})}prune(){if(this.cache.size>this.maxCacheEntries){let t=1/0,i;this.cache.forEach((o,d)=>{o.lastUsed<t&&(t=o.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return ba(this,null,function*(){this.cache.delete(t.getKey())})}};Tn(I6,"ResolvedValueCache");var cE=class{constructor(t=100,i=!0,o=_0){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=o}getHeader(t){return ba(this,null,function*(){let i=t.getKey(),o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,yield o.data;let d=new Promise((y,g)=>{I1(t,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),y(u[0]),this.prune()}).catch(u=>{g(u)})});return this.cache.set(i,{lastUsed:this.counter++,data:d}),d})}getDirectory(t,i,o,d){return ba(this,null,function*(){let y=`${t.getKey()}|${d.etag||""}|${i}|${o}`,g=this.cache.get(y);if(g)return g.lastUsed=this.counter++,yield g.data;let u=new Promise((E,P)=>{O1(t,this.decompress,i,o,d).then(C=>{E(C),this.prune()}).catch(C=>{P(C)})});return this.cache.set(y,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,i;this.cache.forEach((o,d)=>{o.lastUsed<t&&(t=o.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return ba(this,null,function*(){let i=t.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(t.getKey());let o=new Promise((d,y)=>{this.getHeader(t).then(g=>{d(),this.invalidations.delete(i)}).catch(g=>{y(g)})});this.invalidations.set(i,o)})}};Tn(cE,"SharedPromiseCache");var O6=cE,uE=class{constructor(t,i,o){typeof t=="string"?this.source=new D6(t):this.source=t,o?this.decompress=o:this.decompress=_0,i?this.cache=i:this.cache=new O6}getHeader(){return ba(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,i,o,d){return ba(this,null,function*(){let y=nE(t,i,o),g=yield this.cache.getHeader(this.source);if(t<g.minZoom||t>g.maxZoom)return;let u=g.rootDirectoryOffset,E=g.rootDirectoryLength;for(let P=0;P<=3;P++){let C=yield this.cache.getDirectory(this.source,u,E,g),z=aE(C,y);if(z){if(z.runLength>0){let j=yield this.source.getBytes(g.tileDataOffset+z.offset,z.length,d,g.etag);return{data:yield this.decompress(j.data,g.tileCompression),cacheControl:j.cacheControl,expires:j.expires}}u=g.leafDirectoryOffset+z.offset,E=z.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(t,i,o,d){return ba(this,null,function*(){try{return yield this.getZxyAttempt(t,i,o,d)}catch(y){if(y instanceof ox)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,i,o,d);throw y}})}getMetadataAttempt(){return ba(this,null,function*(){let t=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),o=yield this.decompress(i.data,t.internalCompression),d=new TextDecoder("utf-8");return JSON.parse(d.decode(o))})}getMetadata(){return ba(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof ox)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}})}getTileJson(t){return ba(this,null,function*(){let i=yield this.getHeader(),o=yield this.getMetadata(),d=iE(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${d}`],vector_layers:o.vector_layers,attribution:o.attribution,description:o.description,name:o.name,version:o.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};Tn(uE,"PMTiles");var K2=uE;function z6(){const e=ae.useRef(null),t=ae.useRef(null);ae.useRef(null);const i=ae.useRef(null),[o,d]=ae.useState(-10),[y,g]=ae.useState(!1),u=ae.useRef(null),E=ae.useRef(null),P=[{year:"2012",url:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2012_builtup.tif"},{year:"2024",url:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2024_builtup.tif"}],[C,z]=ae.useState(P[0].url),[j,N]=ae.useState(P[1].url);return ae.useEffect(()=>{if(i.current){const X=i.current.getBoundingClientRect();d(X.width/2)}const $=()=>{if(i.current){const X=i.current.getBoundingClientRect();d(X.width/2)}};return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),ae.useEffect(()=>{Xu.addProtocol("cog",ix);const $=new JM;return Xu.addProtocol("pmtiles",$.tile),()=>{Xu.removeProtocol("pmtiles")}},[]),ae.useEffect(()=>{Xu.addProtocol("cog",ix);const $="8",X=[84.90014,21.11117946909088];u.current=new Xu.Map({container:e.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256},leftNDVI:{type:"raster",url:'cog://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2012_builtup.tif#color:["#000000","#000000"],1,1,c',tileSize:512},leftVector:{type:"vector",url:"pmtiles://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/anugul_boundary.pmtiles"}},layers:[{id:"osm-left",type:"raster",source:"osm"},{id:"ndvi-left",type:"raster",source:"leftNDVI",paint:{"raster-opacity":1}},{id:"vector-outline",type:"line",source:"leftVector","source-layer":"zcta",paint:{"line-color":"black","line-width":1}}]},center:X,zoom:$}),E.current=new Xu.Map({container:t.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256},rightNDVI:{type:"raster",url:'cog://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2024_builtup.tif#color:["#000000","#000000"],1,1,c',tileSize:512},rightVector:{type:"vector",url:"pmtiles://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/anugul_boundary.pmtiles"}},layers:[{id:"osm-right",type:"raster",source:"osm"},{id:"ndvi-right",type:"raster",source:"rightNDVI",paint:{"raster-opacity":1}},{id:"vector-outline",type:"line",source:"rightVector","source-layer":"zcta",paint:{"line-color":"black","line-width":1}}]},center:X,zoom:$});let W=!1;const oe=(le,ue)=>{le.on("move",()=>{W||(W=!0,ue.jumpTo({center:le.getCenter(),zoom:le.getZoom(),bearing:le.getBearing(),pitch:le.getPitch()}),W=!1)})};return oe(u.current,E.current),oe(E.current,u.current),()=>{u.current.remove(),E.current.remove()}},[]),ae.useEffect(()=>{u.current&&u.current.getSource("leftNDVI")&&u.current.getSource("leftNDVI").setUrl('cog://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2012_builtup.tif#color:["#000000","#000000"],1,1,c')},[C]),ae.useEffect(()=>{E.current&&E.current.getSource("rightNDVI")&&E.current.getSource("rightNDVI").setUrl('cog://https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2024_builtup.tif#color:["#000000","#000000"],1,1,c')},[j]),ae.useEffect(()=>{const $=W=>{if(!y)return;const oe=W.clientX||W.touches&&W.touches[0].clientX;if(!i.current)return;const le=i.current.getBoundingClientRect(),ue=Math.max(0,Math.min(le.width,oe-le.left));d(ue)},X=()=>g(!1);return window.addEventListener("mousemove",$),window.addEventListener("mouseup",X),window.addEventListener("touchmove",$),window.addEventListener("touchend",X),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",X),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",X)}},[y]),Ee.jsx("div",{className:"relative w-full rounded-lg",children:Ee.jsxs("div",{ref:i,className:"relative w-full h-[600px] overflow-hidden select-none rounded-lg",children:[Ee.jsx("div",{ref:e,className:"relative w-full h-[600px] overflow-hidden select-none"}),Ee.jsx("div",{ref:t,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",clipPath:`inset(0 0 0 ${o}px)`,pointerEvents:"none",overflow:"hidden"}}),Ee.jsx("div",{onMouseDown:()=>g(!0),onTouchStart:()=>g(!0),className:"absolute top-0 z-20 flex items-center justify-center w-0.5 h-full bg-sky-500 cursor-ew-resize",style:{left:`${o-.5}px`},children:Ee.jsx("div",{className:"absolute w-6 h-6 rounded-full bg-sky-500 border-2 border-white shadow-lg flex items-center justify-center",children:Ee.jsxs("span",{className:"text-white text-sm",children:["< ",""," >"]})})})]})})}function hE(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(t=0;t<d;t++)e[t]&&(i=hE(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function kn(){for(var e,t,i=0,o="",d=arguments.length;i<d;i++)(e=arguments[i])&&(t=hE(e))&&(o&&(o+=" "),o+=t);return o}var M_={},E_={},W2;function R6(){return W2||(W2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==="__proto__"}e.isUnsafeProperty=t})(E_)),E_}var P_={},Q2;function fE(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=t})(P_)),P_}var C_={},J2;function z1(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=t})(C_)),C_}var D_={},I_={},eS;function k6(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(i==null)return"";if(typeof i=="string")return i;if(Array.isArray(i))return i.map(t).join(",");const o=String(i);return o==="0"&&Object.is(Number(i),-0)?"-0":o}e.toString=t})(I_)),I_}var tS;function R1(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k6(),i=z1();function o(d){if(Array.isArray(d))return d.map(i.toKey);if(typeof d=="symbol")return[d];d=t.toString(d);const y=[],g=d.length;if(g===0)return y;let u=0,E="",P="",C=!1;for(d.charCodeAt(0)===46&&(y.push(""),u++);u<g;){const z=d[u];P?z==="\\"&&u+1<g?(u++,E+=d[u]):z===P?P="":E+=z:C?z==='"'||z==="'"?P=z:z==="]"?(C=!1,y.push(E),E=""):E+=z:z==="["?(C=!0,E&&(y.push(E),E="")):z==="."?E&&(y.push(E),E=""):E+=z,u++}return E&&y.push(E),y}e.toPath=o})(D_)),D_}var rS;function k1(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R6(),i=fE(),o=z1(),d=R1();function y(u,E,P){if(u==null)return P;switch(typeof E){case"string":{if(t.isUnsafeProperty(E))return P;const C=u[E];return C===void 0?i.isDeepKey(E)?y(u,d.toPath(E),P):P:C}case"number":case"symbol":{typeof E=="number"&&(E=o.toKey(E));const C=u[E];return C===void 0?P:C}default:{if(Array.isArray(E))return g(u,E,P);if(Object.is(E?.valueOf(),-0)?E="-0":E=String(E),t.isUnsafeProperty(E))return P;const C=u[E];return C===void 0?P:C}}}function g(u,E,P){if(E.length===0)return P;let C=u;for(let z=0;z<E.length;z++){if(C==null||t.isUnsafeProperty(E[z]))return P;C=C[E[z]]}return C===void 0?P:C}e.get=y})(M_)),M_}var O_,nS;function B6(){return nS||(nS=1,O_=k1().get),O_}var L6=B6();const b0=El(L6);var Sl=e=>e===0?0:e>0?1:-1,Tl=e=>typeof e=="number"&&e!=+e,Id=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,mr=e=>(typeof e=="number"||e instanceof Number)&&!Tl(e),nu=e=>mr(e)||typeof e=="string",j6=0,Yg=e=>{var t=++j6;return"".concat(e||"").concat(t)},hf=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mr(t)&&typeof t!="string")return o;var y;if(Id(t)){if(i==null)return o;var g=t.indexOf("%");y=i*parseFloat(t.slice(0,g))/100}else y=+t;return Tl(y)&&(y=o),d&&i!=null&&y>i&&(y=i),y},dE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,i={},o=0;o<t;o++)if(!i[e[o]])i[e[o]]=!0;else return!0;return!1};function Ku(e,t,i){return mr(e)&&mr(t)?e+i*(t-e):t}function pE(e,t,i){if(!(!e||!e.length))return e.find(o=>o&&(typeof t=="function"?t(o):b0(o,t))===i)}var xa=e=>e===null||typeof e>"u",sy=e=>xa(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),N6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function B1(e){if(typeof e!="string")return!1;var t=N6;return t.includes(e)}var F6=["viewBox","children"],iS=["points","pathLength"],z_={svg:F6,polygon:iS,polyline:iS},L1=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(ae.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var o={};return Object.keys(i).forEach(d=>{B1(d)&&(o[d]=(y=>i[d](i,y)))}),o},U6=(e,t,i)=>o=>(e(t,i,o),null),mE=(e,t,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var o=null;return Object.keys(e).forEach(d=>{var y=e[d];B1(d)&&typeof y=="function"&&(o||(o={}),o[d]=U6(y,t,i))}),o},G6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function gE(e){if(typeof e!="string")return!1;var t=G6;return t.includes(e)}function $d(e){var t=Object.entries(e).filter(i=>{var[o]=i;return gE(o)});return Object.fromEntries(t)}var yE=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,V6=(e,t,i,o)=>{var d;if(typeof t=="symbol"||typeof t=="number")return!0;var y=(d=o&&z_?.[o])!==null&&d!==void 0?d:[],g=t.startsWith("data-"),u=typeof e!="function"&&(!!o&&y.includes(t)||gE(t)),E=!!i&&B1(t);return g||u||E},wa=(e,t,i)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(ae.isValidElement(e)&&(o=e.props),typeof o!="object"&&typeof o!="function")return null;var d={};return Object.keys(o).forEach(y=>{var g;V6((g=o)===null||g===void 0?void 0:g[y],y,t,i)&&(d[y]=o[y])}),d},q6=["children","width","height","viewBox","className","style","title","desc"];function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},sx.apply(null,arguments)}function $6(e,t){if(e==null)return{};var i,o,d=Z6(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Z6(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var j1=ae.forwardRef((e,t)=>{var{children:i,width:o,height:d,viewBox:y,className:g,style:u,title:E,desc:P}=e,C=$6(e,q6),z=y||{width:o,height:d,x:0,y:0},j=kn("recharts-surface",g);return ae.createElement("svg",sx({},wa(C,!0,"svg"),{className:j,width:o,height:d,style:u,viewBox:"".concat(z.x," ").concat(z.y," ").concat(z.width," ").concat(z.height),ref:t}),ae.createElement("title",null,E),ae.createElement("desc",null,P),i)}),H6=["children","className"];function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},lx.apply(null,arguments)}function Y6(e,t){if(e==null)return{};var i,o,d=X6(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function X6(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var pm=ae.forwardRef((e,t)=>{var{children:i,className:o}=e,d=Y6(e,H6),y=kn("recharts-layer",o);return ae.createElement("g",lx({className:y},wa(d,!0),{ref:t}),i)}),vE=HA(),_E=ae.createContext(null),K6=()=>ae.useContext(_E);function Fn(e){return function(){return e}}const bE=Math.cos,Nv=Math.sin,dc=Math.sqrt,Fv=Math.PI,x0=2*Fv,cx=Math.PI,ux=2*cx,Md=1e-6,W6=ux-Md;function xE(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function Q6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xE;const i=10**t;return function(o){this._+=o[0];for(let d=1,y=o.length;d<y;++d)this._+=Math.round(arguments[d]*i)/i+o[d]}}class J6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xE:Q6(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,o,d){this._append`Q${+t},${+i},${this._x1=+o},${this._y1=+d}`}bezierCurveTo(t,i,o,d,y,g){this._append`C${+t},${+i},${+o},${+d},${this._x1=+y},${this._y1=+g}`}arcTo(t,i,o,d,y){if(t=+t,i=+i,o=+o,d=+d,y=+y,y<0)throw new Error(`negative radius: ${y}`);let g=this._x1,u=this._y1,E=o-t,P=d-i,C=g-t,z=u-i,j=C*C+z*z;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(j>Md)if(!(Math.abs(z*E-P*C)>Md)||!y)this._append`L${this._x1=t},${this._y1=i}`;else{let N=o-g,$=d-u,X=E*E+P*P,W=N*N+$*$,oe=Math.sqrt(X),le=Math.sqrt(j),ue=y*Math.tan((cx-Math.acos((X+j-W)/(2*oe*le)))/2),Oe=ue/le,Be=ue/oe;Math.abs(Oe-1)>Md&&this._append`L${t+Oe*C},${i+Oe*z}`,this._append`A${y},${y},0,0,${+(z*N>C*$)},${this._x1=t+Be*E},${this._y1=i+Be*P}`}}arc(t,i,o,d,y,g){if(t=+t,i=+i,o=+o,g=!!g,o<0)throw new Error(`negative radius: ${o}`);let u=o*Math.cos(d),E=o*Math.sin(d),P=t+u,C=i+E,z=1^g,j=g?d-y:y-d;this._x1===null?this._append`M${P},${C}`:(Math.abs(this._x1-P)>Md||Math.abs(this._y1-C)>Md)&&this._append`L${P},${C}`,o&&(j<0&&(j=j%ux+ux),j>W6?this._append`A${o},${o},0,1,${z},${t-u},${i-E}A${o},${o},0,1,${z},${this._x1=P},${this._y1=C}`:j>Md&&this._append`A${o},${o},0,${+(j>=cx)},${z},${this._x1=t+o*Math.cos(y)},${this._y1=i+o*Math.sin(y)}`)}rect(t,i,o,d){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${o=+o}v${+d}h${-o}Z`}toString(){return this._}}function N1(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const o=Math.floor(i);if(!(o>=0))throw new RangeError(`invalid digits: ${i}`);t=o}return e},()=>new J6(t)}function F1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wE(e){this._context=e}wE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function w0(e){return new wE(e)}function SE(e){return e[0]}function TE(e){return e[1]}function AE(e,t){var i=Fn(!0),o=null,d=w0,y=null,g=N1(u);e=typeof e=="function"?e:e===void 0?SE:Fn(e),t=typeof t=="function"?t:t===void 0?TE:Fn(t);function u(E){var P,C=(E=F1(E)).length,z,j=!1,N;for(o==null&&(y=d(N=g())),P=0;P<=C;++P)!(P<C&&i(z=E[P],P,E))===j&&((j=!j)?y.lineStart():y.lineEnd()),j&&y.point(+e(z,P,E),+t(z,P,E));if(N)return y=null,N+""||null}return u.x=function(E){return arguments.length?(e=typeof E=="function"?E:Fn(+E),u):e},u.y=function(E){return arguments.length?(t=typeof E=="function"?E:Fn(+E),u):t},u.defined=function(E){return arguments.length?(i=typeof E=="function"?E:Fn(!!E),u):i},u.curve=function(E){return arguments.length?(d=E,o!=null&&(y=d(o)),u):d},u.context=function(E){return arguments.length?(E==null?o=y=null:y=d(o=E),u):o},u}function mv(e,t,i){var o=null,d=Fn(!0),y=null,g=w0,u=null,E=N1(P);e=typeof e=="function"?e:e===void 0?SE:Fn(+e),t=typeof t=="function"?t:Fn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?TE:Fn(+i);function P(z){var j,N,$,X=(z=F1(z)).length,W,oe=!1,le,ue=new Array(X),Oe=new Array(X);for(y==null&&(u=g(le=E())),j=0;j<=X;++j){if(!(j<X&&d(W=z[j],j,z))===oe)if(oe=!oe)N=j,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),$=j-1;$>=N;--$)u.point(ue[$],Oe[$]);u.lineEnd(),u.areaEnd()}oe&&(ue[j]=+e(W,j,z),Oe[j]=+t(W,j,z),u.point(o?+o(W,j,z):ue[j],i?+i(W,j,z):Oe[j]))}if(le)return u=null,le+""||null}function C(){return AE().defined(d).curve(g).context(y)}return P.x=function(z){return arguments.length?(e=typeof z=="function"?z:Fn(+z),o=null,P):e},P.x0=function(z){return arguments.length?(e=typeof z=="function"?z:Fn(+z),P):e},P.x1=function(z){return arguments.length?(o=z==null?null:typeof z=="function"?z:Fn(+z),P):o},P.y=function(z){return arguments.length?(t=typeof z=="function"?z:Fn(+z),i=null,P):t},P.y0=function(z){return arguments.length?(t=typeof z=="function"?z:Fn(+z),P):t},P.y1=function(z){return arguments.length?(i=z==null?null:typeof z=="function"?z:Fn(+z),P):i},P.lineX0=P.lineY0=function(){return C().x(e).y(t)},P.lineY1=function(){return C().x(e).y(i)},P.lineX1=function(){return C().x(o).y(t)},P.defined=function(z){return arguments.length?(d=typeof z=="function"?z:Fn(!!z),P):d},P.curve=function(z){return arguments.length?(g=z,y!=null&&(u=g(y)),P):g},P.context=function(z){return arguments.length?(z==null?y=u=null:u=g(y=z),P):y},P}class ME{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function e4(e){return new ME(e,!0)}function t4(e){return new ME(e,!1)}const U1={draw(e,t){const i=dc(t/Fv);e.moveTo(i,0),e.arc(0,0,i,0,x0)}},r4={draw(e,t){const i=dc(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},EE=dc(1/3),n4=EE*2,i4={draw(e,t){const i=dc(t/n4),o=i*EE;e.moveTo(0,-i),e.lineTo(o,0),e.lineTo(0,i),e.lineTo(-o,0),e.closePath()}},a4={draw(e,t){const i=dc(t),o=-i/2;e.rect(o,o,i,i)}},o4=.8908130915292852,PE=Nv(Fv/10)/Nv(7*Fv/10),s4=Nv(x0/10)*PE,l4=-bE(x0/10)*PE,c4={draw(e,t){const i=dc(t*o4),o=s4*i,d=l4*i;e.moveTo(0,-i),e.lineTo(o,d);for(let y=1;y<5;++y){const g=x0*y/5,u=bE(g),E=Nv(g);e.lineTo(E*i,-u*i),e.lineTo(u*o-E*d,E*o+u*d)}e.closePath()}},R_=dc(3),u4={draw(e,t){const i=-dc(t/(R_*3));e.moveTo(0,i*2),e.lineTo(-R_*i,-i),e.lineTo(R_*i,-i),e.closePath()}},gl=-.5,yl=dc(3)/2,hx=1/dc(12),h4=(hx/2+1)*3,f4={draw(e,t){const i=dc(t/h4),o=i/2,d=i*hx,y=o,g=i*hx+i,u=-y,E=g;e.moveTo(o,d),e.lineTo(y,g),e.lineTo(u,E),e.lineTo(gl*o-yl*d,yl*o+gl*d),e.lineTo(gl*y-yl*g,yl*y+gl*g),e.lineTo(gl*u-yl*E,yl*u+gl*E),e.lineTo(gl*o+yl*d,gl*d-yl*o),e.lineTo(gl*y+yl*g,gl*g-yl*y),e.lineTo(gl*u+yl*E,gl*E-yl*u),e.closePath()}};function d4(e,t){let i=null,o=N1(d);e=typeof e=="function"?e:Fn(e||U1),t=typeof t=="function"?t:Fn(t===void 0?64:+t);function d(){let y;if(i||(i=y=o()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),y)return i=null,y+""||null}return d.type=function(y){return arguments.length?(e=typeof y=="function"?y:Fn(y),d):e},d.size=function(y){return arguments.length?(t=typeof y=="function"?y:Fn(+y),d):t},d.context=function(y){return arguments.length?(i=y??null,d):i},d}function Uv(){}function Gv(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function CE(e){this._context=e}CE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p4(e){return new CE(e)}function DE(e){this._context=e}DE.prototype={areaStart:Uv,areaEnd:Uv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m4(e){return new DE(e)}function IE(e){this._context=e}IE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,o=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,o):this._context.moveTo(i,o);break;case 3:this._point=4;default:Gv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g4(e){return new IE(e)}function OE(e){this._context=e}OE.prototype={areaStart:Uv,areaEnd:Uv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function y4(e){return new OE(e)}function aS(e){return e<0?-1:1}function oS(e,t,i){var o=e._x1-e._x0,d=t-e._x1,y=(e._y1-e._y0)/(o||d<0&&-0),g=(i-e._y1)/(d||o<0&&-0),u=(y*d+g*o)/(o+d);return(aS(y)+aS(g))*Math.min(Math.abs(y),Math.abs(g),.5*Math.abs(u))||0}function sS(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function k_(e,t,i){var o=e._x0,d=e._y0,y=e._x1,g=e._y1,u=(y-o)/3;e._context.bezierCurveTo(o+u,d+u*t,y-u,g-u*i,y,g)}function Vv(e){this._context=e}Vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k_(this,this._t0,sS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k_(this,sS(this,i=oS(this,e,t)),i);break;default:k_(this,this._t0,i=oS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function zE(e){this._context=new RE(e)}(zE.prototype=Object.create(Vv.prototype)).point=function(e,t){Vv.prototype.point.call(this,t,e)};function RE(e){this._context=e}RE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,o,d,y){this._context.bezierCurveTo(t,e,o,i,y,d)}};function v4(e){return new Vv(e)}function _4(e){return new zE(e)}function kE(e){this._context=e}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var o=lS(e),d=lS(t),y=0,g=1;g<i;++y,++g)this._context.bezierCurveTo(o[0][y],d[0][y],o[1][y],d[1][y],e[g],t[g]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lS(e){var t,i=e.length-1,o,d=new Array(i),y=new Array(i),g=new Array(i);for(d[0]=0,y[0]=2,g[0]=e[0]+2*e[1],t=1;t<i-1;++t)d[t]=1,y[t]=4,g[t]=4*e[t]+2*e[t+1];for(d[i-1]=2,y[i-1]=7,g[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)o=d[t]/y[t-1],y[t]-=o,g[t]-=o*g[t-1];for(d[i-1]=g[i-1]/y[i-1],t=i-2;t>=0;--t)d[t]=(g[t]-d[t+1])/y[t];for(y[i-1]=(e[i]+d[i-1])/2,t=0;t<i-1;++t)y[t]=2*e[t+1]-d[t+1];return[d,y]}function b4(e){return new kE(e)}function S0(e,t){this._context=e,this._t=t}S0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function x4(e){return new S0(e,.5)}function w4(e){return new S0(e,0)}function S4(e){return new S0(e,1)}function am(e,t){if((g=e.length)>1)for(var i=1,o,d,y=e[t[0]],g,u=y.length;i<g;++i)for(d=y,y=e[t[i]],o=0;o<u;++o)y[o][1]+=y[o][0]=isNaN(d[o][1])?d[o][0]:d[o][1]}function fx(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function T4(e,t){return e[t]}function A4(e){const t=[];return t.key=e,t}function M4(){var e=Fn([]),t=fx,i=am,o=T4;function d(y){var g=Array.from(e.apply(this,arguments),A4),u,E=g.length,P=-1,C;for(const z of y)for(u=0,++P;u<E;++u)(g[u][P]=[0,+o(z,g[u].key,P,y)]).data=z;for(u=0,C=F1(t(g));u<E;++u)g[C[u]].index=u;return i(g,C),g}return d.keys=function(y){return arguments.length?(e=typeof y=="function"?y:Fn(Array.from(y)),d):e},d.value=function(y){return arguments.length?(o=typeof y=="function"?y:Fn(+y),d):o},d.order=function(y){return arguments.length?(t=y==null?fx:typeof y=="function"?y:Fn(Array.from(y)),d):t},d.offset=function(y){return arguments.length?(i=y??am,d):i},d}function E4(e,t){if((o=e.length)>0){for(var i,o,d=0,y=e[0].length,g;d<y;++d){for(g=i=0;i<o;++i)g+=e[i][d][1]||0;if(g)for(i=0;i<o;++i)e[i][d][1]/=g}am(e,t)}}function P4(e,t){if((d=e.length)>0){for(var i=0,o=e[t[0]],d,y=o.length;i<y;++i){for(var g=0,u=0;g<d;++g)u+=e[g][i][1]||0;o[i][1]+=o[i][0]=-u/2}am(e,t)}}function C4(e,t){if(!(!((g=e.length)>0)||!((y=(d=e[t[0]]).length)>0))){for(var i=0,o=1,d,y,g;o<y;++o){for(var u=0,E=0,P=0;u<g;++u){for(var C=e[t[u]],z=C[o][1]||0,j=C[o-1][1]||0,N=(z-j)/2,$=0;$<u;++$){var X=e[t[$]],W=X[o][1]||0,oe=X[o-1][1]||0;N+=W-oe}E+=z,P+=N*z}d[o-1][1]+=d[o-1][0]=i,E&&(i-=P/E)}d[o-1][1]+=d[o-1][0]=i,am(e,t)}}var D4=["type","size","sizeType"];function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},dx.apply(null,arguments)}function cS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function uS(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cS(Object(i),!0).forEach(function(o){I4(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cS(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function I4(e,t,i){return(t=O4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function O4(e){var t=z4(e,"string");return typeof t=="symbol"?t:t+""}function z4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R4(e,t){if(e==null)return{};var i,o,d=k4(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function k4(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var BE={symbolCircle:U1,symbolCross:r4,symbolDiamond:i4,symbolSquare:a4,symbolStar:c4,symbolTriangle:u4,symbolWye:f4},B4=Math.PI/180,L4=e=>{var t="symbol".concat(sy(e));return BE[t]||U1},j4=(e,t,i)=>{if(t==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*B4;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.tan(o)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},N4=(e,t)=>{BE["symbol".concat(sy(e))]=t},LE=e=>{var{type:t="circle",size:i=64,sizeType:o="area"}=e,d=R4(e,D4),y=uS(uS({},d),{},{type:t,size:i,sizeType:o}),g="circle";typeof t=="string"&&(g=t);var u=()=>{var j=L4(g),N=d4().type(j).size(j4(i,o,g));return N()},{className:E,cx:P,cy:C}=y,z=wa(y,!0);return P===+P&&C===+C&&i===+i?ae.createElement("path",dx({},z,{className:kn("recharts-symbols",E),transform:"translate(".concat(P,", ").concat(C,")"),d:u()})):null};LE.registerSymbol=N4;function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},px.apply(null,arguments)}function hS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function F4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(i),!0).forEach(function(o){G1(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hS(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function G1(e,t,i){return(t=U4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U4(e){var t=G4(e,"string");return typeof t=="symbol"?t:t+""}function G4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vl=32;class V1 extends ae.PureComponent{renderIcon(t,i){var{inactiveColor:o}=this.props,d=vl/2,y=vl/6,g=vl/3,u=t.inactive?o:t.color,E=i??t.type;if(E==="none")return null;if(E==="plainline")return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:d,x2:vl,y2:d,className:"recharts-legend-icon"});if(E==="line")return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(d,"h").concat(g,`
            A`).concat(y,",").concat(y,",0,1,1,").concat(2*g,",").concat(d,`
            H`).concat(vl,"M").concat(2*g,",").concat(d,`
            A`).concat(y,",").concat(y,",0,1,1,").concat(g,",").concat(d),className:"recharts-legend-icon"});if(E==="rect")return ae.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(vl/8,"h").concat(vl,"v").concat(vl*3/4,"h").concat(-vl,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(t.legendIcon)){var P=F4({},t);return delete P.legendIcon,ae.cloneElement(t.legendIcon,P)}return ae.createElement(LE,{fill:u,cx:d,cy:d,size:vl,sizeType:"diameter",type:E})}renderItems(){var{payload:t,iconSize:i,layout:o,formatter:d,inactiveColor:y,iconType:g}=this.props,u={x:0,y:0,width:vl,height:vl},E={display:o==="horizontal"?"inline-block":"block",marginRight:10},P={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((C,z)=>{var j=C.formatter||d,N=kn({"recharts-legend-item":!0,["legend-item-".concat(z)]:!0,inactive:C.inactive});if(C.type==="none")return null;var $=C.inactive?y:C.color,X=j?j(C.value,C,z):C.value;return ae.createElement("li",px({className:N,style:E,key:"legend-item-".concat(z)},mE(this.props,C,z)),ae.createElement(j1,{width:i,height:i,viewBox:u,style:P,"aria-label":"".concat(X," legend icon")},this.renderIcon(C,g)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:$}},X))})}render(){var{payload:t,layout:i,align:o}=this.props;if(!t||!t.length)return null;var d={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}G1(V1,"displayName","Legend");G1(V1,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var B_={},L_={},fS;function V4(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,o){const d=new Map;for(let y=0;y<i.length;y++){const g=i[y],u=o(g);d.has(u)||d.set(u,g)}return Array.from(d.values())}e.uniqBy=t})(L_)),L_}var j_={},dS;function jE(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i}e.identity=t})(j_)),j_}var N_={},F_={},U_={},pS;function q4(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=t})(U_)),U_}var mS;function q1(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q4();function i(o){return o!=null&&typeof o!="function"&&t.isLength(o.length)}e.isArrayLike=i})(F_)),F_}var G_={},gS;function $4(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="object"&&i!==null}e.isObjectLike=t})(G_)),G_}var yS;function Z4(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q1(),i=$4();function o(d){return i.isObjectLike(d)&&t.isArrayLike(d)}e.isArrayLikeObject=o})(N_)),N_}var V_={},q_={},vS;function H4(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k1();function i(o){return function(d){return t.get(d,o)}}e.property=i})(q_)),q_}var $_={},Z_={},H_={},Y_={},_S;function NE(){return _S||(_S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=t})(Y_)),Y_}var X_={},bS;function FE(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=t})(X_)),X_}var K_={},xS;function UE(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,o){return i===o||Number.isNaN(i)&&Number.isNaN(o)}e.eq=t})(K_)),K_}var wS;function Y4(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$1(),i=NE(),o=FE(),d=UE();function y(z,j,N){return typeof N!="function"?t.isMatch(z,j):g(z,j,function $(X,W,oe,le,ue,Oe){const Be=N(X,W,oe,le,ue,Oe);return Be!==void 0?!!Be:g(X,W,$,Oe)},new Map)}function g(z,j,N,$){if(j===z)return!0;switch(typeof j){case"object":return u(z,j,N,$);case"function":return Object.keys(j).length>0?g(z,{...j},N,$):d.eq(z,j);default:return i.isObject(z)?typeof j=="string"?j==="":!0:d.eq(z,j)}}function u(z,j,N,$){if(j==null)return!0;if(Array.isArray(j))return P(z,j,N,$);if(j instanceof Map)return E(z,j,N,$);if(j instanceof Set)return C(z,j,N,$);const X=Object.keys(j);if(z==null)return X.length===0;if(X.length===0)return!0;if($&&$.has(j))return $.get(j)===z;$&&$.set(j,z);try{for(let W=0;W<X.length;W++){const oe=X[W];if(!o.isPrimitive(z)&&!(oe in z)||j[oe]===void 0&&z[oe]!==void 0||j[oe]===null&&z[oe]!==null||!N(z[oe],j[oe],oe,z,j,$))return!1}return!0}finally{$&&$.delete(j)}}function E(z,j,N,$){if(j.size===0)return!0;if(!(z instanceof Map))return!1;for(const[X,W]of j.entries()){const oe=z.get(X);if(N(oe,W,X,z,j,$)===!1)return!1}return!0}function P(z,j,N,$){if(j.length===0)return!0;if(!Array.isArray(z))return!1;const X=new Set;for(let W=0;W<j.length;W++){const oe=j[W];let le=!1;for(let ue=0;ue<z.length;ue++){if(X.has(ue))continue;const Oe=z[ue];let Be=!1;if(N(Oe,oe,W,z,j,$)&&(Be=!0),Be){X.add(ue),le=!0;break}}if(!le)return!1}return!0}function C(z,j,N,$){return j.size===0?!0:z instanceof Set?P([...z],[...j],N,$):!1}e.isMatchWith=y,e.isSetMatch=C})(H_)),H_}var SS;function $1(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y4();function i(o,d){return t.isMatchWith(o,d,()=>{})}e.isMatch=i})(Z_)),Z_}var W_={},Q_={},J_={},TS;function X4(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Object.getOwnPropertySymbols(i).filter(o=>Object.prototype.propertyIsEnumerable.call(i,o))}e.getSymbols=t})(J_)),J_}var eb={},AS;function GE(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=t})(eb)),eb}var tb={},MS;function VE(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",i="[object String]",o="[object Number]",d="[object Boolean]",y="[object Arguments]",g="[object Symbol]",u="[object Date]",E="[object Map]",P="[object Set]",C="[object Array]",z="[object Function]",j="[object ArrayBuffer]",N="[object Object]",$="[object Error]",X="[object DataView]",W="[object Uint8Array]",oe="[object Uint8ClampedArray]",le="[object Uint16Array]",ue="[object Uint32Array]",Oe="[object BigUint64Array]",Be="[object Int8Array]",Le="[object Int16Array]",qe="[object Int32Array]",at="[object BigInt64Array]",Mt="[object Float32Array]",Ot="[object Float64Array]";e.argumentsTag=y,e.arrayBufferTag=j,e.arrayTag=C,e.bigInt64ArrayTag=at,e.bigUint64ArrayTag=Oe,e.booleanTag=d,e.dataViewTag=X,e.dateTag=u,e.errorTag=$,e.float32ArrayTag=Mt,e.float64ArrayTag=Ot,e.functionTag=z,e.int16ArrayTag=Le,e.int32ArrayTag=qe,e.int8ArrayTag=Be,e.mapTag=E,e.numberTag=o,e.objectTag=N,e.regexpTag=t,e.setTag=P,e.stringTag=i,e.symbolTag=g,e.uint16ArrayTag=le,e.uint32ArrayTag=ue,e.uint8ArrayTag=W,e.uint8ClampedArrayTag=oe})(tb)),tb}var rb={},ES;function K4(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=t})(rb)),rb}var PS;function qE(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X4(),i=GE(),o=VE(),d=FE(),y=K4();function g(C,z){return u(C,void 0,C,new Map,z)}function u(C,z,j,N=new Map,$=void 0){const X=$?.(C,z,j,N);if(X!==void 0)return X;if(d.isPrimitive(C))return C;if(N.has(C))return N.get(C);if(Array.isArray(C)){const W=new Array(C.length);N.set(C,W);for(let oe=0;oe<C.length;oe++)W[oe]=u(C[oe],oe,j,N,$);return Object.hasOwn(C,"index")&&(W.index=C.index),Object.hasOwn(C,"input")&&(W.input=C.input),W}if(C instanceof Date)return new Date(C.getTime());if(C instanceof RegExp){const W=new RegExp(C.source,C.flags);return W.lastIndex=C.lastIndex,W}if(C instanceof Map){const W=new Map;N.set(C,W);for(const[oe,le]of C)W.set(oe,u(le,oe,j,N,$));return W}if(C instanceof Set){const W=new Set;N.set(C,W);for(const oe of C)W.add(u(oe,void 0,j,N,$));return W}if(typeof Buffer<"u"&&Buffer.isBuffer(C))return C.subarray();if(y.isTypedArray(C)){const W=new(Object.getPrototypeOf(C)).constructor(C.length);N.set(C,W);for(let oe=0;oe<C.length;oe++)W[oe]=u(C[oe],oe,j,N,$);return W}if(C instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&C instanceof SharedArrayBuffer)return C.slice(0);if(C instanceof DataView){const W=new DataView(C.buffer.slice(0),C.byteOffset,C.byteLength);return N.set(C,W),E(W,C,j,N,$),W}if(typeof File<"u"&&C instanceof File){const W=new File([C],C.name,{type:C.type});return N.set(C,W),E(W,C,j,N,$),W}if(typeof Blob<"u"&&C instanceof Blob){const W=new Blob([C],{type:C.type});return N.set(C,W),E(W,C,j,N,$),W}if(C instanceof Error){const W=new C.constructor;return N.set(C,W),W.message=C.message,W.name=C.name,W.stack=C.stack,W.cause=C.cause,E(W,C,j,N,$),W}if(C instanceof Boolean){const W=new Boolean(C.valueOf());return N.set(C,W),E(W,C,j,N,$),W}if(C instanceof Number){const W=new Number(C.valueOf());return N.set(C,W),E(W,C,j,N,$),W}if(C instanceof String){const W=new String(C.valueOf());return N.set(C,W),E(W,C,j,N,$),W}if(typeof C=="object"&&P(C)){const W=Object.create(Object.getPrototypeOf(C));return N.set(C,W),E(W,C,j,N,$),W}return C}function E(C,z,j=C,N,$){const X=[...Object.keys(z),...t.getSymbols(z)];for(let W=0;W<X.length;W++){const oe=X[W],le=Object.getOwnPropertyDescriptor(C,oe);(le==null||le.writable)&&(C[oe]=u(z[oe],oe,j,N,$))}}function P(C){switch(i.getTag(C)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=g,e.cloneDeepWithImpl=u,e.copyProperties=E})(Q_)),Q_}var CS;function W4(){return CS||(CS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qE();function i(o){return t.cloneDeepWithImpl(o,void 0,o,new Map,void 0)}e.cloneDeep=i})(W_)),W_}var DS;function Q4(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$1(),i=W4();function o(d){return d=i.cloneDeep(d),y=>t.isMatch(y,d)}e.matches=o})($_)),$_}var nb={},ib={},ab={},IS;function J4(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qE(),i=VE();function o(d,y){return t.cloneDeepWith(d,(g,u,E,P)=>{const C=y?.(g,u,E,P);if(C!==void 0)return C;if(typeof d=="object")switch(Object.prototype.toString.call(d)){case i.numberTag:case i.stringTag:case i.booleanTag:{const z=new d.constructor(d?.valueOf());return t.copyProperties(z,d),z}case i.argumentsTag:{const z={};return t.copyProperties(z,d),z.length=d.length,z[Symbol.iterator]=d[Symbol.iterator],z}default:return}})}e.cloneDeepWith=o})(ab)),ab}var OS;function eR(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J4();function i(o){return t.cloneDeepWith(o)}e.cloneDeep=i})(ib)),ib}var ob={},sb={},zS;function $E(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function i(o,d=Number.MAX_SAFE_INTEGER){switch(typeof o){case"number":return Number.isInteger(o)&&o>=0&&o<d;case"symbol":return!1;case"string":return t.test(o)}}e.isIndex=i})(sb)),sb}var lb={},RS;function tR(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE();function i(o){return o!==null&&typeof o=="object"&&t.getTag(o)==="[object Arguments]"}e.isArguments=i})(lb)),lb}var kS;function rR(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fE(),i=$E(),o=tR(),d=R1();function y(g,u){let E;if(Array.isArray(u)?E=u:typeof u=="string"&&t.isDeepKey(u)&&g?.[u]==null?E=d.toPath(u):E=[u],E.length===0)return!1;let P=g;for(let C=0;C<E.length;C++){const z=E[C];if((P==null||!Object.hasOwn(P,z))&&!((Array.isArray(P)||o.isArguments(P))&&i.isIndex(z)&&z<P.length))return!1;P=P[z]}return!0}e.has=y})(ob)),ob}var BS;function nR(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$1(),i=z1(),o=eR(),d=k1(),y=rR();function g(u,E){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=i.toKey(u);break}}return E=o.cloneDeep(E),function(P){const C=d.get(P,u);return C===void 0?y.has(P,u):E===void 0?C===void 0:t.isMatch(C,E)}}e.matchesProperty=g})(nb)),nb}var LS;function iR(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jE(),i=H4(),o=Q4(),d=nR();function y(g){if(g==null)return t.identity;switch(typeof g){case"function":return g;case"object":return Array.isArray(g)&&g.length===2?d.matchesProperty(g[0],g[1]):o.matches(g);case"string":case"symbol":case"number":return i.property(g)}}e.iteratee=y})(V_)),V_}var jS;function aR(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V4(),i=jE(),o=Z4(),d=iR();function y(g,u=i.identity){return o.isArrayLikeObject(g)?t.uniqBy(Array.from(g),d.iteratee(u)):[]}e.uniqBy=y})(B_)),B_}var cb,NS;function oR(){return NS||(NS=1,cb=aR().uniqBy),cb}var sR=oR();const FS=El(sR);function ZE(e,t,i){return t===!0?FS(e,i):typeof t=="function"?FS(e,t):e}var ub={exports:{}},hb={},fb={exports:{}},db={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function lR(){if(US)return db;US=1;var e=um();function t(z,j){return z===j&&(z!==0||1/z===1/j)||z!==z&&j!==j}var i=typeof Object.is=="function"?Object.is:t,o=e.useState,d=e.useEffect,y=e.useLayoutEffect,g=e.useDebugValue;function u(z,j){var N=j(),$=o({inst:{value:N,getSnapshot:j}}),X=$[0].inst,W=$[1];return y(function(){X.value=N,X.getSnapshot=j,E(X)&&W({inst:X})},[z,N,j]),d(function(){return E(X)&&W({inst:X}),z(function(){E(X)&&W({inst:X})})},[z]),g(N),N}function E(z){var j=z.getSnapshot;z=z.value;try{var N=j();return!i(z,N)}catch{return!0}}function P(z,j){return j()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:u;return db.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C,db}var GS;function cR(){return GS||(GS=1,fb.exports=lR()),fb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function uR(){if(VS)return hb;VS=1;var e=um(),t=cR();function i(P,C){return P===C&&(P!==0||1/P===1/C)||P!==P&&C!==C}var o=typeof Object.is=="function"?Object.is:i,d=t.useSyncExternalStore,y=e.useRef,g=e.useEffect,u=e.useMemo,E=e.useDebugValue;return hb.useSyncExternalStoreWithSelector=function(P,C,z,j,N){var $=y(null);if($.current===null){var X={hasValue:!1,value:null};$.current=X}else X=$.current;$=u(function(){function oe(Le){if(!le){if(le=!0,ue=Le,Le=j(Le),N!==void 0&&X.hasValue){var qe=X.value;if(N(qe,Le))return Oe=qe}return Oe=Le}if(qe=Oe,o(ue,Le))return qe;var at=j(Le);return N!==void 0&&N(qe,at)?(ue=Le,qe):(ue=Le,Oe=at)}var le=!1,ue,Oe,Be=z===void 0?null:z;return[function(){return oe(C())},Be===null?void 0:function(){return oe(Be())}]},[C,z,j,N]);var W=d(P,$[0],$[1]);return g(function(){X.hasValue=!0,X.value=W},[W]),E(W),W},hb}var qS;function hR(){return qS||(qS=1,ub.exports=uR()),ub.exports}var fR=hR(),Z1=ae.createContext(null),dR=e=>e,Ba=()=>{var e=ae.useContext(Z1);return e?e.store.dispatch:dR},Pv=()=>{},pR=()=>Pv,mR=(e,t)=>e===t;function nr(e){var t=ae.useContext(Z1);return fR.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:pR,t?t.store.getState:Pv,t?t.store.getState:Pv,t?e:Pv,mR)}function gR(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yR(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vR(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${t}[${i}]`)}}var $S=e=>Array.isArray(e)?e:[e];function _R(e){const t=Array.isArray(e[0])?e[0]:e;return vR(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function bR(e,t){const i=[],{length:o}=e;for(let d=0;d<o;d++)i.push(e[d].apply(null,t));return i}var xR=class{constructor(e){this.value=e}deref(){return this.value}},wR=typeof WeakRef<"u"?WeakRef:xR,SR=0,ZS=1;function gv(){return{s:SR,v:void 0,o:null,p:null}}function HE(e,t={}){let i=gv();const{resultEqualityCheck:o}=t;let d,y=0;function g(){let u=i;const{length:E}=arguments;for(let z=0,j=E;z<j;z++){const N=arguments[z];if(typeof N=="function"||typeof N=="object"&&N!==null){let $=u.o;$===null&&(u.o=$=new WeakMap);const X=$.get(N);X===void 0?(u=gv(),$.set(N,u)):u=X}else{let $=u.p;$===null&&(u.p=$=new Map);const X=$.get(N);X===void 0?(u=gv(),$.set(N,u)):u=X}}const P=u;let C;if(u.s===ZS)C=u.v;else if(C=e.apply(null,arguments),y++,o){const z=d?.deref?.()??d;z!=null&&o(z,C)&&(C=z,y!==0&&y--),d=typeof C=="object"&&C!==null||typeof C=="function"?new wR(C):C}return P.s=ZS,P.v=C,C}return g.clearCache=()=>{i=gv(),g.resetResultsCount()},g.resultsCount=()=>y,g.resetResultsCount=()=>{y=0},g}function TR(e,...t){const i=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,o=(...d)=>{let y=0,g=0,u,E={},P=d.pop();typeof P=="object"&&(E=P,P=d.pop()),gR(P,`createSelector expects an output function after the inputs, but received: [${typeof P}]`);const C={...i,...E},{memoize:z,memoizeOptions:j=[],argsMemoize:N=HE,argsMemoizeOptions:$=[]}=C,X=$S(j),W=$S($),oe=_R(d),le=z(function(){return y++,P.apply(null,arguments)},...X),ue=N(function(){g++;const Be=bR(oe,arguments);return u=le.apply(null,Be),u},...W);return Object.assign(ue,{resultFunc:P,memoizedResultFunc:le,dependencies:oe,dependencyRecomputations:()=>g,resetDependencyRecomputations:()=>{g=0},lastResult:()=>u,recomputations:()=>y,resetRecomputations:()=>{y=0},memoize:z,argsMemoize:N})};return Object.assign(o,{withTypes:()=>o}),o}var it=TR(HE),AR=Object.assign((e,t=it)=>{yR(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),o=i.map(y=>e[y]);return t(o,(...y)=>y.reduce((g,u,E)=>(g[i[E]]=u,g),{}))},{withTypes:()=>AR}),pb={},mb={},gb={},HS;function MR(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(o){return typeof o=="symbol"?1:o===null?2:o===void 0?3:o!==o?4:0}const i=(o,d,y)=>{if(o!==d){const g=t(o),u=t(d);if(g===u&&g===0){if(o<d)return y==="desc"?1:-1;if(o>d)return y==="desc"?-1:1}return y==="desc"?u-g:g-u}return 0};e.compareValues=i})(gb)),gb}var yb={},vb={},YS;function YE(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=t})(vb)),vb}var XS;function ER(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YE(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function d(y,g){return Array.isArray(y)?!1:typeof y=="number"||typeof y=="boolean"||y==null||t.isSymbol(y)?!0:typeof y=="string"&&(o.test(y)||!i.test(y))||g!=null&&Object.hasOwn(g,y)}e.isKey=d})(yb)),yb}var KS;function PR(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MR(),i=ER(),o=R1();function d(y,g,u,E){if(y==null)return[];u=E?void 0:u,Array.isArray(y)||(y=Object.values(y)),Array.isArray(g)||(g=g==null?[null]:[g]),g.length===0&&(g=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(N=>String(N));const P=(N,$)=>{let X=N;for(let W=0;W<$.length&&X!=null;++W)X=X[$[W]];return X},C=(N,$)=>$==null||N==null?$:typeof N=="object"&&"key"in N?Object.hasOwn($,N.key)?$[N.key]:P($,N.path):typeof N=="function"?N($):Array.isArray(N)?P($,N):typeof $=="object"?$[N]:$,z=g.map(N=>(Array.isArray(N)&&N.length===1&&(N=N[0]),N==null||typeof N=="function"||Array.isArray(N)||i.isKey(N)?N:{key:N,path:o.toPath(N)}));return y.map(N=>({original:N,criteria:z.map($=>C($,N))})).slice().sort((N,$)=>{for(let X=0;X<z.length;X++){const W=t.compareValues(N.criteria[X],$.criteria[X],u[X]);if(W!==0)return W}return 0}).map(N=>N.original)}e.orderBy=d})(mb)),mb}var _b={},WS;function CR(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,o=1){const d=[],y=Math.floor(o),g=(u,E)=>{for(let P=0;P<u.length;P++){const C=u[P];Array.isArray(C)&&E<y?g(C,E+1):d.push(C)}};return g(i,0),d}e.flatten=t})(_b)),_b}var bb={},QS;function XE(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$E(),i=q1(),o=NE(),d=UE();function y(g,u,E){return o.isObject(E)&&(typeof u=="number"&&i.isArrayLike(E)&&t.isIndex(u)&&u<E.length||typeof u=="string"&&u in E)?d.eq(E[u],g):!1}e.isIterateeCall=y})(bb)),bb}var JS;function DR(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PR(),i=CR(),o=XE();function d(y,...g){const u=g.length;return u>1&&o.isIterateeCall(y,g[0],g[1])?g=[]:u>2&&o.isIterateeCall(g[0],g[1],g[2])&&(g=[g[0]]),t.orderBy(y,i.flatten(g),["asc"])}e.sortBy=d})(pb)),pb}var xb,eT;function IR(){return eT||(eT=1,xb=DR().sortBy),xb}var OR=IR();const T0=El(OR);var KE=e=>e.legend.settings,zR=e=>e.legend.size,RR=e=>e.legend.payload,kR=it([RR,KE],(e,t)=>{var{itemSorter:i}=t,o=e.flat(1);return i?T0(o,i):o});function BR(){return nr(kR)}var yv=1;function WE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,i]=ae.useState({height:0,left:0,top:0,width:0}),o=ae.useCallback(d=>{if(d!=null){var y=d.getBoundingClientRect(),g={height:y.height,left:y.left,top:y.top,width:y.width};(Math.abs(g.height-t.height)>yv||Math.abs(g.left-t.left)>yv||Math.abs(g.top-t.top)>yv||Math.abs(g.width-t.width)>yv)&&i({height:g.height,left:g.left,top:g.top,width:g.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,o]}function Oa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LR=typeof Symbol=="function"&&Symbol.observable||"@@observable",tT=LR,wb=()=>Math.random().toString(36).substring(7).split("").join("."),jR={INIT:`@@redux/INIT${wb()}`,REPLACE:`@@redux/REPLACE${wb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wb()}`},qv=jR;function H1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function QE(e,t,i){if(typeof e!="function")throw new Error(Oa(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Oa(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Oa(1));return i(QE)(e,t)}let o=e,d=t,y=new Map,g=y,u=0,E=!1;function P(){g===y&&(g=new Map,y.forEach((W,oe)=>{g.set(oe,W)}))}function C(){if(E)throw new Error(Oa(3));return d}function z(W){if(typeof W!="function")throw new Error(Oa(4));if(E)throw new Error(Oa(5));let oe=!0;P();const le=u++;return g.set(le,W),function(){if(oe){if(E)throw new Error(Oa(6));oe=!1,P(),g.delete(le),y=null}}}function j(W){if(!H1(W))throw new Error(Oa(7));if(typeof W.type>"u")throw new Error(Oa(8));if(typeof W.type!="string")throw new Error(Oa(17));if(E)throw new Error(Oa(9));try{E=!0,d=o(d,W)}finally{E=!1}return(y=g).forEach(le=>{le()}),W}function N(W){if(typeof W!="function")throw new Error(Oa(10));o=W,j({type:qv.REPLACE})}function $(){const W=z;return{subscribe(oe){if(typeof oe!="object"||oe===null)throw new Error(Oa(11));function le(){const Oe=oe;Oe.next&&Oe.next(C())}return le(),{unsubscribe:W(le)}},[tT](){return this}}}return j({type:qv.INIT}),{dispatch:j,subscribe:z,getState:C,replaceReducer:N,[tT]:$}}function NR(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:qv.INIT})>"u")throw new Error(Oa(12));if(typeof i(void 0,{type:qv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Oa(13))})}function JE(e){const t=Object.keys(e),i={};for(let y=0;y<t.length;y++){const g=t[y];typeof e[g]=="function"&&(i[g]=e[g])}const o=Object.keys(i);let d;try{NR(i)}catch(y){d=y}return function(g={},u){if(d)throw d;let E=!1;const P={};for(let C=0;C<o.length;C++){const z=o[C],j=i[z],N=g[z],$=j(N,u);if(typeof $>"u")throw u&&u.type,new Error(Oa(14));P[z]=$,E=E||$!==N}return E=E||o.length!==Object.keys(g).length,E?P:g}}function $v(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...o)=>t(i(...o)))}function FR(...e){return t=>(i,o)=>{const d=t(i,o);let y=()=>{throw new Error(Oa(15))};const g={getState:d.getState,dispatch:(E,...P)=>y(E,...P)},u=e.map(E=>E(g));return y=$v(...u)(d.dispatch),{...d,dispatch:y}}}function eP(e){return H1(e)&&"type"in e&&typeof e.type=="string"}var tP=Symbol.for("immer-nothing"),rT=Symbol.for("immer-draftable"),zs=Symbol.for("immer-state");function hc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var om=Object.getPrototypeOf;function Ld(e){return!!e&&!!e[zs]}function oh(e){return e?rP(e)||Array.isArray(e)||!!e[rT]||!!e.constructor?.[rT]||ly(e)||M0(e):!1}var UR=Object.prototype.constructor.toString();function rP(e){if(!e||typeof e!="object")return!1;const t=om(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===UR}function Zv(e,t){A0(e)===0?Reflect.ownKeys(e).forEach(i=>{t(i,e[i],e)}):e.forEach((i,o)=>t(o,i,e))}function A0(e){const t=e[zs];return t?t.type_:Array.isArray(e)?1:ly(e)?2:M0(e)?3:0}function mx(e,t){return A0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nP(e,t,i){const o=A0(e);o===2?e.set(t,i):o===3?e.add(i):e[t]=i}function GR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ly(e){return e instanceof Map}function M0(e){return e instanceof Set}function Ed(e){return e.copy_||e.base_}function gx(e,t){if(ly(e))return new Map(e);if(M0(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=rP(e);if(t===!0||t==="class_only"&&!i){const o=Object.getOwnPropertyDescriptors(e);delete o[zs];let d=Reflect.ownKeys(o);for(let y=0;y<d.length;y++){const g=d[y],u=o[g];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(o[g]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[g]})}return Object.create(om(e),o)}else{const o=om(e);if(o!==null&&i)return{...e};const d=Object.create(o);return Object.assign(d,e)}}function Y1(e,t=!1){return E0(e)||Ld(e)||!oh(e)||(A0(e)>1&&Object.defineProperties(e,{set:{value:vv},add:{value:vv},clear:{value:vv},delete:{value:vv}}),Object.freeze(e),t&&Object.values(e).forEach(i=>Y1(i,!0))),e}function vv(){hc(2)}function E0(e){return Object.isFrozen(e)}var VR={};function jd(e){const t=VR[e];return t||hc(0,e),t}var Xg;function iP(){return Xg}function qR(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nT(e,t){t&&(jd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yx(e){vx(e),e.drafts_.forEach($R),e.drafts_=null}function vx(e){e===Xg&&(Xg=e.parent_)}function iT(e){return Xg=qR(Xg,e)}function $R(e){const t=e[zs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function aT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[zs].modified_&&(yx(t),hc(4)),oh(e)&&(e=Hv(t,e),t.parent_||Yv(t,e)),t.patches_&&jd("Patches").generateReplacementPatches_(i[zs].base_,e,t.patches_,t.inversePatches_)):e=Hv(t,i,[]),yx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tP?e:void 0}function Hv(e,t,i){if(E0(t))return t;const o=t[zs];if(!o)return Zv(t,(d,y)=>oT(e,o,t,d,y,i)),t;if(o.scope_!==e)return t;if(!o.modified_)return Yv(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const d=o.copy_;let y=d,g=!1;o.type_===3&&(y=new Set(d),d.clear(),g=!0),Zv(y,(u,E)=>oT(e,o,d,u,E,i,g)),Yv(e,d,!1),i&&e.patches_&&jd("Patches").generatePatches_(o,i,e.patches_,e.inversePatches_)}return o.copy_}function oT(e,t,i,o,d,y,g){if(Ld(d)){const u=y&&t&&t.type_!==3&&!mx(t.assigned_,o)?y.concat(o):void 0,E=Hv(e,d,u);if(nP(i,o,E),Ld(E))e.canAutoFreeze_=!1;else return}else g&&i.add(d);if(oh(d)&&!E0(d)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Hv(e,d),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&(ly(i)?i.has(o):Object.prototype.propertyIsEnumerable.call(i,o))&&Yv(e,d)}}function Yv(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Y1(t,i)}function ZR(e,t){const i=Array.isArray(e),o={type_:i?1:0,scope_:t?t.scope_:iP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let d=o,y=X1;i&&(d=[o],y=Kg);const{revoke:g,proxy:u}=Proxy.revocable(d,y);return o.draft_=u,o.revoke_=g,u}var X1={get(e,t){if(t===zs)return e;const i=Ed(e);if(!mx(i,t))return HR(e,i,t);const o=i[t];return e.finalized_||!oh(o)?o:o===Sb(e.base_,t)?(Tb(e),e.copy_[t]=bx(o,e)):o},has(e,t){return t in Ed(e)},ownKeys(e){return Reflect.ownKeys(Ed(e))},set(e,t,i){const o=aP(Ed(e),t);if(o?.set)return o.set.call(e.draft_,i),!0;if(!e.modified_){const d=Sb(Ed(e),t),y=d?.[zs];if(y&&y.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(GR(i,d)&&(i!==void 0||mx(e.base_,t)))return!0;Tb(e),_x(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Sb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Tb(e),_x(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Ed(e),o=Reflect.getOwnPropertyDescriptor(i,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:i[t]}},defineProperty(){hc(11)},getPrototypeOf(e){return om(e.base_)},setPrototypeOf(){hc(12)}},Kg={};Zv(X1,(e,t)=>{Kg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Kg.deleteProperty=function(e,t){return Kg.set.call(this,e,t,void 0)};Kg.set=function(e,t,i){return X1.set.call(this,e[0],t,i,e[0])};function Sb(e,t){const i=e[zs];return(i?Ed(i):e)[t]}function HR(e,t,i){const o=aP(t,i);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function aP(e,t){if(!(t in e))return;let i=om(e);for(;i;){const o=Object.getOwnPropertyDescriptor(i,t);if(o)return o;i=om(i)}}function _x(e){e.modified_||(e.modified_=!0,e.parent_&&_x(e.parent_))}function Tb(e){e.copy_||(e.copy_=gx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var YR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,o)=>{if(typeof t=="function"&&typeof i!="function"){const y=i;i=t;const g=this;return function(E=y,...P){return g.produce(E,C=>i.call(this,C,...P))}}typeof i!="function"&&hc(6),o!==void 0&&typeof o!="function"&&hc(7);let d;if(oh(t)){const y=iT(this),g=bx(t,void 0);let u=!0;try{d=i(g),u=!1}finally{u?yx(y):vx(y)}return nT(y,o),aT(d,y)}else if(!t||typeof t!="object"){if(d=i(t),d===void 0&&(d=t),d===tP&&(d=void 0),this.autoFreeze_&&Y1(d,!0),o){const y=[],g=[];jd("Patches").generateReplacementPatches_(t,d,y,g),o(y,g)}return d}else hc(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(g,...u)=>this.produceWithPatches(g,E=>t(E,...u));let o,d;return[this.produce(t,i,(g,u)=>{o=g,d=u}),o,d]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){oh(e)||hc(8),Ld(e)&&(e=th(e));const t=iT(this),i=bx(e,void 0);return i[zs].isManual_=!0,vx(t),i}finishDraft(e,t){const i=e&&e[zs];(!i||!i.isManual_)&&hc(9);const{scope_:o}=i;return nT(o,t),aT(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const d=t[i];if(d.path.length===0&&d.op==="replace"){e=d.value;break}}i>-1&&(t=t.slice(i+1));const o=jd("Patches").applyPatches_;return Ld(e)?o(e,t):this.produce(e,d=>o(d,t))}};function bx(e,t){const i=ly(e)?jd("MapSet").proxyMap_(e,t):M0(e)?jd("MapSet").proxySet_(e,t):ZR(e,t);return(t?t.scope_:iP()).drafts_.push(i),i}function th(e){return Ld(e)||hc(10,e),oP(e)}function oP(e){if(!oh(e)||E0(e))return e;const t=e[zs];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=gx(e,t.scope_.immer_.useStrictShallowCopy_)}else i=gx(e,!0);return Zv(i,(o,d)=>{nP(i,o,oP(d))}),t&&(t.finalized_=!1),i}var XR=new YR,sP=XR.produce;function lP(e){return({dispatch:i,getState:o})=>d=>y=>typeof y=="function"?y(i,o,e):d(y)}var KR=lP(),WR=lP,QR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$v:$v.apply(null,arguments)};function Al(e,t){function i(...o){if(t){let d=t(...o);if(!d)throw new Error(Is(0));return{type:e,payload:d.payload,..."meta"in d&&{meta:d.meta},..."error"in d&&{error:d.error}}}return{type:e,payload:o[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=o=>eP(o)&&o.type===e,i}var cP=class Bg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Bg.prototype)}static get[Symbol.species](){return Bg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Bg(...t[0].concat(this)):new Bg(...t.concat(this))}};function sT(e){return oh(e)?sP(e,()=>{}):e}function _v(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function JR(e){return typeof e=="boolean"}var ek=()=>function(t){const{thunk:i=!0,immutableCheck:o=!0,serializableCheck:d=!0,actionCreatorCheck:y=!0}=t??{};let g=new cP;return i&&(JR(i)?g.push(KR):g.push(WR(i.extraArgument))),g},tk="RTK_autoBatch",lT=e=>t=>{setTimeout(t,e)},rk=(e={type:"raf"})=>t=>(...i)=>{const o=t(...i);let d=!0,y=!1,g=!1;const u=new Set,E=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lT(10):e.type==="callback"?e.queueNotification:lT(e.timeout),P=()=>{g=!1,y&&(y=!1,u.forEach(C=>C()))};return Object.assign({},o,{subscribe(C){const z=()=>d&&C(),j=o.subscribe(z);return u.add(C),()=>{j(),u.delete(C)}},dispatch(C){try{return d=!C?.meta?.[tk],y=!d,y&&(g||(g=!0,E(P))),o.dispatch(C)}finally{d=!0}}})},nk=e=>function(i){const{autoBatch:o=!0}=i??{};let d=new cP(e);return o&&d.push(rk(typeof o=="object"?o:void 0)),d};function ik(e){const t=ek(),{reducer:i=void 0,middleware:o,devTools:d=!0,preloadedState:y=void 0,enhancers:g=void 0}=e||{};let u;if(typeof i=="function")u=i;else if(H1(i))u=JE(i);else throw new Error(Is(1));let E;typeof o=="function"?E=o(t):E=t();let P=$v;d&&(P=QR({trace:!1,...typeof d=="object"&&d}));const C=FR(...E),z=nk(C);let j=typeof g=="function"?g(z):z();const N=P(...j);return QE(u,y,N)}function uP(e){const t={},i=[];let o;const d={addCase(y,g){const u=typeof y=="string"?y:y.type;if(!u)throw new Error(Is(28));if(u in t)throw new Error(Is(29));return t[u]=g,d},addAsyncThunk(y,g){return g.pending&&(t[y.pending.type]=g.pending),g.rejected&&(t[y.rejected.type]=g.rejected),g.fulfilled&&(t[y.fulfilled.type]=g.fulfilled),g.settled&&i.push({matcher:y.settled,reducer:g.settled}),d},addMatcher(y,g){return i.push({matcher:y,reducer:g}),d},addDefaultCase(y){return o=y,d}};return e(d),[t,i,o]}function ak(e){return typeof e=="function"}function ok(e,t){let[i,o,d]=uP(t),y;if(ak(e))y=()=>sT(e());else{const u=sT(e);y=()=>u}function g(u=y(),E){let P=[i[E.type],...o.filter(({matcher:C})=>C(E)).map(({reducer:C})=>C)];return P.filter(C=>!!C).length===0&&(P=[d]),P.reduce((C,z)=>{if(z)if(Ld(C)){const N=z(C,E);return N===void 0?C:N}else{if(oh(C))return sP(C,j=>z(j,E));{const j=z(C,E);if(j===void 0){if(C===null)return C;throw Error("A case reducer on a non-draftable value must not return undefined")}return j}}return C},u)}return g.getInitialState=y,g}var sk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lk=(e=21)=>{let t="",i=e;for(;i--;)t+=sk[Math.random()*64|0];return t},ck=Symbol.for("rtk-slice-createasyncthunk");function uk(e,t){return`${e}/${t}`}function hk({creators:e}={}){const t=e?.asyncThunk?.[ck];return function(o){const{name:d,reducerPath:y=d}=o;if(!d)throw new Error(Is(11));const g=(typeof o.reducers=="function"?o.reducers(dk()):o.reducers)||{},u=Object.keys(g),E={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},P={addCase(ue,Oe){const Be=typeof ue=="string"?ue:ue.type;if(!Be)throw new Error(Is(12));if(Be in E.sliceCaseReducersByType)throw new Error(Is(13));return E.sliceCaseReducersByType[Be]=Oe,P},addMatcher(ue,Oe){return E.sliceMatchers.push({matcher:ue,reducer:Oe}),P},exposeAction(ue,Oe){return E.actionCreators[ue]=Oe,P},exposeCaseReducer(ue,Oe){return E.sliceCaseReducersByName[ue]=Oe,P}};u.forEach(ue=>{const Oe=g[ue],Be={reducerName:ue,type:uk(d,ue),createNotation:typeof o.reducers=="function"};mk(Oe)?yk(Be,Oe,P,t):pk(Be,Oe,P)});function C(){const[ue={},Oe=[],Be=void 0]=typeof o.extraReducers=="function"?uP(o.extraReducers):[o.extraReducers],Le={...ue,...E.sliceCaseReducersByType};return ok(o.initialState,qe=>{for(let at in Le)qe.addCase(at,Le[at]);for(let at of E.sliceMatchers)qe.addMatcher(at.matcher,at.reducer);for(let at of Oe)qe.addMatcher(at.matcher,at.reducer);Be&&qe.addDefaultCase(Be)})}const z=ue=>ue,j=new Map,N=new WeakMap;let $;function X(ue,Oe){return $||($=C()),$(ue,Oe)}function W(){return $||($=C()),$.getInitialState()}function oe(ue,Oe=!1){function Be(qe){let at=qe[ue];return typeof at>"u"&&Oe&&(at=_v(N,Be,W)),at}function Le(qe=z){const at=_v(j,Oe,()=>new WeakMap);return _v(at,qe,()=>{const Mt={};for(const[Ot,ft]of Object.entries(o.selectors??{}))Mt[Ot]=fk(ft,qe,()=>_v(N,qe,W),Oe);return Mt})}return{reducerPath:ue,getSelectors:Le,get selectors(){return Le(Be)},selectSlice:Be}}const le={name:d,reducer:X,actions:E.actionCreators,caseReducers:E.sliceCaseReducersByName,getInitialState:W,...oe(y),injectInto(ue,{reducerPath:Oe,...Be}={}){const Le=Oe??y;return ue.inject({reducerPath:Le,reducer:X},Be),{...le,...oe(Le,!0)}}};return le}}function fk(e,t,i,o){function d(y,...g){let u=t(y);return typeof u>"u"&&o&&(u=i()),e(u,...g)}return d.unwrapped=e,d}var Rs=hk();function dk(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function pk({type:e,reducerName:t,createNotation:i},o,d){let y,g;if("reducer"in o){if(i&&!gk(o))throw new Error(Is(17));y=o.reducer,g=o.prepare}else y=o;d.addCase(e,y).exposeCaseReducer(t,y).exposeAction(t,g?Al(e,g):Al(e))}function mk(e){return e._reducerDefinitionType==="asyncThunk"}function gk(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yk({type:e,reducerName:t},i,o,d){if(!d)throw new Error(Is(18));const{payloadCreator:y,fulfilled:g,pending:u,rejected:E,settled:P,options:C}=i,z=d(e,y,C);o.exposeAction(t,z),g&&o.addCase(z.fulfilled,g),u&&o.addCase(z.pending,u),E&&o.addCase(z.rejected,E),P&&o.addMatcher(z.settled,P),o.exposeCaseReducer(t,{fulfilled:g||bv,pending:u||bv,rejected:E||bv,settled:P||bv})}function bv(){}var vk="task",hP="listener",fP="completed",K1="cancelled",_k=`task-${K1}`,bk=`task-${fP}`,xx=`${hP}-${K1}`,xk=`${hP}-${fP}`,P0=class{constructor(e){this.code=e,this.message=`${vk} ${K1} (reason: ${e})`}name="TaskAbortError";message},W1=(e,t)=>{if(typeof e!="function")throw new TypeError(Is(32))},Xv=()=>{},dP=(e,t=Xv)=>(e.catch(t),e),pP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Rd=(e,t)=>{const i=e.signal;i.aborted||("reason"in i||Object.defineProperty(i,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},kd=e=>{if(e.aborted){const{reason:t}=e;throw new P0(t)}};function mP(e,t){let i=Xv;return new Promise((o,d)=>{const y=()=>d(new P0(e.reason));if(e.aborted){y();return}i=pP(e,y),t.finally(()=>i()).then(o,d)}).finally(()=>{i=Xv})}var wk=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof P0?"cancelled":"rejected",error:i}}finally{t?.()}},Kv=e=>t=>dP(mP(e,t).then(i=>(kd(e),i))),gP=e=>{const t=Kv(e);return i=>t(new Promise(o=>setTimeout(o,i)))},{assign:em}=Object,cT={},C0="listenerMiddleware",Sk=(e,t)=>{const i=o=>pP(e,()=>Rd(o,e.reason));return(o,d)=>{W1(o);const y=new AbortController;i(y);const g=wk(async()=>{kd(e),kd(y.signal);const u=await o({pause:Kv(y.signal),delay:gP(y.signal),signal:y.signal});return kd(y.signal),u},()=>Rd(y,bk));return d?.autoJoin&&t.push(g.catch(Xv)),{result:Kv(e)(g),cancel(){Rd(y,_k)}}}},Tk=(e,t)=>{const i=async(o,d)=>{kd(t);let y=()=>{};const u=[new Promise((E,P)=>{let C=e({predicate:o,effect:(z,j)=>{j.unsubscribe(),E([z,j.getState(),j.getOriginalState()])}});y=()=>{C(),P()}})];d!=null&&u.push(new Promise(E=>setTimeout(E,d,null)));try{const E=await mP(t,Promise.race(u));return kd(t),E}finally{y()}};return(o,d)=>dP(i(o,d))},yP=e=>{let{type:t,actionCreator:i,matcher:o,predicate:d,effect:y}=e;if(t)d=Al(t).match;else if(i)t=i.type,d=i.match;else if(o)d=o;else if(!d)throw new Error(Is(21));return W1(y),{predicate:d,type:t,effect:y}},vP=em(e=>{const{type:t,predicate:i,effect:o}=yP(e);return{id:lk(),effect:o,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Is(22))}}},{withTypes:()=>vP}),uT=(e,t)=>{const{type:i,effect:o,predicate:d}=yP(t);return Array.from(e.values()).find(y=>(typeof i=="string"?y.type===i:y.predicate===d)&&y.effect===o)},wx=e=>{e.pending.forEach(t=>{Rd(t,xx)})},Ak=e=>()=>{e.forEach(wx),e.clear()},hT=(e,t,i)=>{try{e(t,i)}catch(o){setTimeout(()=>{throw o},0)}},_P=em(Al(`${C0}/add`),{withTypes:()=>_P}),Mk=Al(`${C0}/removeAll`),bP=em(Al(`${C0}/remove`),{withTypes:()=>bP}),Ek=(...e)=>{console.error(`${C0}/error`,...e)},cy=(e={})=>{const t=new Map,{extra:i,onError:o=Ek}=e;W1(o);const d=C=>(C.unsubscribe=()=>t.delete(C.id),t.set(C.id,C),z=>{C.unsubscribe(),z?.cancelActive&&wx(C)}),y=C=>{const z=uT(t,C)??vP(C);return d(z)};em(y,{withTypes:()=>y});const g=C=>{const z=uT(t,C);return z&&(z.unsubscribe(),C.cancelActive&&wx(z)),!!z};em(g,{withTypes:()=>g});const u=async(C,z,j,N)=>{const $=new AbortController,X=Tk(y,$.signal),W=[];try{C.pending.add($),await Promise.resolve(C.effect(z,em({},j,{getOriginalState:N,condition:(oe,le)=>X(oe,le).then(Boolean),take:X,delay:gP($.signal),pause:Kv($.signal),extra:i,signal:$.signal,fork:Sk($.signal,W),unsubscribe:C.unsubscribe,subscribe:()=>{t.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((oe,le,ue)=>{oe!==$&&(Rd(oe,xx),ue.delete(oe))})},cancel:()=>{Rd($,xx),C.pending.delete($)},throwIfCancelled:()=>{kd($.signal)}})))}catch(oe){oe instanceof P0||hT(o,oe,{raisedBy:"effect"})}finally{await Promise.all(W),Rd($,xk),C.pending.delete($)}},E=Ak(t);return{middleware:C=>z=>j=>{if(!eP(j))return z(j);if(_P.match(j))return y(j.payload);if(Mk.match(j)){E();return}if(bP.match(j))return g(j.payload);let N=C.getState();const $=()=>{if(N===cT)throw new Error(Is(23));return N};let X;try{if(X=z(j),t.size>0){const W=C.getState(),oe=Array.from(t.values());for(const le of oe){let ue=!1;try{ue=le.predicate(j,W,N)}catch(Oe){ue=!1,hT(o,Oe,{raisedBy:"predicate"})}ue&&u(le,j,C,$)}}}finally{N=cT}return X},startListening:y,stopListening:g,clearListeners:E}};function Is(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Pk={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xP=Rs({name:"chartLayout",initialState:Pk,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var i,o,d,y;e.margin.top=(i=t.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(o=t.payload.right)!==null&&o!==void 0?o:0,e.margin.bottom=(d=t.payload.bottom)!==null&&d!==void 0?d:0,e.margin.left=(y=t.payload.left)!==null&&y!==void 0?y:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Ck,setLayout:Dk,setChartSize:Ik,setScale:Ok}=xP.actions,zk=xP.reducer;function fT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function dT(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(i),!0).forEach(function(o){Rk(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Rk(e,t,i){return(t=kk(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kk(e){var t=Bk(e,"string");return typeof t=="symbol"?t:t+""}function Bk(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wv=Math.PI/180,Lk=e=>e*180/Math.PI,Ra=(e,t,i,o)=>({x:e+Math.cos(-Wv*o)*i,y:t+Math.sin(-Wv*o)*i}),jk=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(o.left||0)-(o.right||0)),Math.abs(i-(o.top||0)-(o.bottom||0)))/2},Nk=(e,t)=>{var{x:i,y:o}=e,{x:d,y}=t;return Math.sqrt((i-d)**2+(o-y)**2)},Fk=(e,t)=>{var{x:i,y:o}=e,{cx:d,cy:y}=t,g=Nk({x:i,y:o},{x:d,y});if(g<=0)return{radius:g,angle:0};var u=(i-d)/g,E=Math.acos(u);return o>y&&(E=2*Math.PI-E),{radius:g,angle:Lk(E),angleInRadian:E}},Uk=e=>{var{startAngle:t,endAngle:i}=e,o=Math.floor(t/360),d=Math.floor(i/360),y=Math.min(o,d);return{startAngle:t-y*360,endAngle:i-y*360}},Gk=(e,t)=>{var{startAngle:i,endAngle:o}=t,d=Math.floor(i/360),y=Math.floor(o/360),g=Math.min(d,y);return e+g*360},Vk=(e,t)=>{var{x:i,y:o}=e,{radius:d,angle:y}=Fk({x:i,y:o},t),{innerRadius:g,outerRadius:u}=t;if(d<g||d>u||d===0)return null;var{startAngle:E,endAngle:P}=Uk(t),C=y,z;if(E<=P){for(;C>P;)C-=360;for(;C<E;)C+=360;z=C>=E&&C<=P}else{for(;C>E;)C-=360;for(;C<P;)C+=360;z=C>=P&&C<=E}return z?dT(dT({},t),{},{radius:d,angle:Gk(C,t)}):null};function wP(e,t,i){return Array.isArray(e)&&e&&t+i!==0?e.slice(t,i+1):e}function pT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function xl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(i),!0).forEach(function(o){qk(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function qk(e,t,i){return(t=$k(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $k(e){var t=Zk(e,"string");return typeof t=="symbol"?t:t+""}function Zk(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fo(e,t,i){return xa(e)||xa(t)?i:nu(t)?b0(e,t,i):typeof t=="function"?t(e):i}var Hk=(e,t,i,o,d)=>{var y,g=-1,u=(y=t?.length)!==null&&y!==void 0?y:0;if(u<=1||e==null)return 0;if(o==="angleAxis"&&d!=null&&Math.abs(Math.abs(d[1]-d[0])-360)<=1e-6)for(var E=0;E<u;E++){var P=E>0?i[E-1].coordinate:i[u-1].coordinate,C=i[E].coordinate,z=E>=u-1?i[0].coordinate:i[E+1].coordinate,j=void 0;if(Sl(C-P)!==Sl(z-C)){var N=[];if(Sl(z-C)===Sl(d[1]-d[0])){j=z;var $=C+d[1]-d[0];N[0]=Math.min($,($+P)/2),N[1]=Math.max($,($+P)/2)}else{j=P;var X=z+d[1]-d[0];N[0]=Math.min(C,(X+C)/2),N[1]=Math.max(C,(X+C)/2)}var W=[Math.min(C,(j+C)/2),Math.max(C,(j+C)/2)];if(e>W[0]&&e<=W[1]||e>=N[0]&&e<=N[1]){({index:g}=i[E]);break}}else{var oe=Math.min(P,z),le=Math.max(P,z);if(e>(oe+C)/2&&e<=(le+C)/2){({index:g}=i[E]);break}}}else if(t){for(var ue=0;ue<u;ue++)if(ue===0&&e<=(t[ue].coordinate+t[ue+1].coordinate)/2||ue>0&&ue<u-1&&e>(t[ue].coordinate+t[ue-1].coordinate)/2&&e<=(t[ue].coordinate+t[ue+1].coordinate)/2||ue===u-1&&e>(t[ue].coordinate+t[ue-1].coordinate)/2){({index:g}=t[ue]);break}}return g},Yk=(e,t,i)=>{if(t&&i){var{width:o,height:d}=i,{align:y,verticalAlign:g,layout:u}=t;if((u==="vertical"||u==="horizontal"&&g==="middle")&&y!=="center"&&mr(e[y]))return xl(xl({},e),{},{[y]:e[y]+(o||0)});if((u==="horizontal"||u==="vertical"&&y==="center")&&g!=="middle"&&mr(e[g]))return xl(xl({},e),{},{[g]:e[g]+(d||0)})}return e},gf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",SP=(e,t,i,o)=>{if(o)return e.map(u=>u.coordinate);var d,y,g=e.map(u=>(u.coordinate===t&&(d=!0),u.coordinate===i&&(y=!0),u.coordinate));return d||g.push(t),y||g.push(i),g},TP=(e,t,i)=>{if(!e)return null;var{duplicateDomain:o,type:d,range:y,scale:g,realScaleType:u,isCategorical:E,categoricalDomain:P,tickCount:C,ticks:z,niceTicks:j,axisType:N}=e;if(!g)return null;var $=u==="scaleBand"&&g.bandwidth?g.bandwidth()/2:2,X=d==="category"&&g.bandwidth?g.bandwidth()/$:0;if(X=N==="angleAxis"&&y&&y.length>=2?Sl(y[0]-y[1])*2*X:X,z||j){var W=(z||j||[]).map((oe,le)=>{var ue=o?o.indexOf(oe):oe;return{coordinate:g(ue)+X,value:oe,offset:X,index:le}});return W.filter(oe=>!Tl(oe.coordinate))}return E&&P?P.map((oe,le)=>({coordinate:g(oe)+X,value:oe,index:le,offset:X})):g.ticks&&C!=null?g.ticks(C).map((oe,le)=>({coordinate:g(oe)+X,value:oe,offset:X,index:le})):g.domain().map((oe,le)=>({coordinate:g(oe)+X,value:o?o[oe]:oe,index:le,offset:X}))},mT=1e-4,Xk=e=>{var t=e.domain();if(!(!t||t.length<=2)){var i=t.length,o=e.range(),d=Math.min(o[0],o[1])-mT,y=Math.max(o[0],o[1])+mT,g=e(t[0]),u=e(t[i-1]);(g<d||g>y||u<d||u>y)&&e.domain([t[0],t[i-1]])}},Kk=e=>{var t=e.length;if(!(t<=0))for(var i=0,o=e[0].length;i<o;++i)for(var d=0,y=0,g=0;g<t;++g){var u=Tl(e[g][i][1])?e[g][i][0]:e[g][i][1];u>=0?(e[g][i][0]=d,e[g][i][1]=d+u,d=e[g][i][1]):(e[g][i][0]=y,e[g][i][1]=y+u,y=e[g][i][1])}},Wk=e=>{var t=e.length;if(!(t<=0))for(var i=0,o=e[0].length;i<o;++i)for(var d=0,y=0;y<t;++y){var g=Tl(e[y][i][1])?e[y][i][0]:e[y][i][1];g>=0?(e[y][i][0]=d,e[y][i][1]=d+g,d=e[y][i][1]):(e[y][i][0]=0,e[y][i][1]=0)}},Qk={sign:Kk,expand:E4,none:am,silhouette:P4,wiggle:C4,positive:Wk},Jk=(e,t,i)=>{var o=Qk[i],d=M4().keys(t).value((y,g)=>+fo(y,g,0)).order(fx).offset(o);return d(e)};function gT(e){var{axis:t,ticks:i,bandSize:o,entry:d,index:y,dataKey:g}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!xa(d[t.dataKey])){var u=pE(i,"value",d[t.dataKey]);if(u)return u.coordinate+o/2}return i[y]?i[y].coordinate+o/2:null}var E=fo(d,xa(g)?t.dataKey:g);return xa(E)?null:t.scale(E)}var eB=e=>{var t=e.flat(2).filter(mr);return[Math.min(...t),Math.max(...t)]},tB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],rB=(e,t,i)=>{if(e!=null)return tB(Object.keys(e).reduce((o,d)=>{var y=e[d],{stackedData:g}=y,u=g.reduce((E,P)=>{var C=wP(P,t,i),z=eB(C);return[Math.min(E[0],z[0]),Math.max(E[1],z[1])]},[1/0,-1/0]);return[Math.min(u[0],o[0]),Math.max(u[1],o[1])]},[1/0,-1/0]))},yT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Sx=(e,t,i)=>{if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!i||o>0)return o}if(e&&t&&t.length>=2){for(var d=T0(t,C=>C.coordinate),y=1/0,g=1,u=d.length;g<u;g++){var E=d[g],P=d[g-1];y=Math.min((E.coordinate||0)-(P.coordinate||0),y)}return y===1/0?0:y}return i?void 0:0};function _T(e){var{tooltipEntrySettings:t,dataKey:i,payload:o,value:d,name:y}=e;return xl(xl({},t),{},{dataKey:i,payload:o,value:d,name:y})}function AP(e,t){if(e)return String(e);if(typeof t=="string")return t}function nB(e,t,i,o,d){if(i==="horizontal"||i==="vertical"){var y=e>=d.left&&e<=d.left+d.width&&t>=d.top&&t<=d.top+d.height;return y?{x:e,y:t}:null}return o?Vk({x:e,y:t},o):null}var iB=(e,t,i,o)=>{var d=t.find(P=>P&&P.index===i);if(d){if(e==="horizontal")return{x:d.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:d.coordinate};if(e==="centric"){var y=d.coordinate,{radius:g}=o;return xl(xl(xl({},o),Ra(o.cx,o.cy,g,y)),{},{angle:y,radius:g})}var u=d.coordinate,{angle:E}=o;return xl(xl(xl({},o),Ra(o.cx,o.cy,u,E)),{},{angle:E,radius:u})}return{x:0,y:0}},aB=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,lh=e=>e.layout.width,ch=e=>e.layout.height,oB=e=>e.layout.scale,MP=e=>e.layout.margin,D0=it(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),I0=it(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),sB="data-recharts-item-index",lB="data-recharts-item-data-key",uy=60;function bT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function xv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(i),!0).forEach(function(o){cB(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function cB(e,t,i){return(t=uB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uB(e){var t=hB(e,"string");return typeof t=="symbol"?t:t+""}function hB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fB=e=>e.brush.height;function dB(e){var t=I0(e);return t.reduce((i,o)=>{if(o.orientation==="left"&&!o.mirror&&!o.hide){var d=typeof o.width=="number"?o.width:uy;return i+d}return i},0)}function pB(e){var t=I0(e);return t.reduce((i,o)=>{if(o.orientation==="right"&&!o.mirror&&!o.hide){var d=typeof o.width=="number"?o.width:uy;return i+d}return i},0)}function mB(e){var t=D0(e);return t.reduce((i,o)=>o.orientation==="top"&&!o.mirror&&!o.hide?i+o.height:i,0)}function gB(e){var t=D0(e);return t.reduce((i,o)=>o.orientation==="bottom"&&!o.mirror&&!o.hide?i+o.height:i,0)}var La=it([lh,ch,MP,fB,dB,pB,mB,gB,KE,zR],(e,t,i,o,d,y,g,u,E,P)=>{var C={left:(i.left||0)+d,right:(i.right||0)+y},z={top:(i.top||0)+g,bottom:(i.bottom||0)+u},j=xv(xv({},z),C),N=j.bottom;j.bottom+=o,j=Yk(j,E,P);var $=e-j.left-j.right,X=t-j.top-j.bottom;return xv(xv({brushBottom:N},j),{},{width:Math.max($,0),height:Math.max(X,0)})}),yB=it(La,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),EP=it(lh,ch,(e,t)=>({x:0,y:0,width:e,height:t})),vB=ae.createContext(null),Cl=()=>ae.useContext(vB)!=null,O0=e=>e.brush,z0=it([O0,La,MP],(e,t,i)=>({height:e.height,x:mr(e.x)?e.x:t.left,y:mr(e.y)?e.y:t.top+t.height+t.brushBottom-(i?.bottom||0),width:mr(e.width)?e.width:t.width})),Q1=()=>{var e,t=Cl(),i=nr(yB),o=nr(z0),d=(e=nr(O0))===null||e===void 0?void 0:e.padding;return!t||!o||!d?i:{width:o.width-d.left-d.right,height:o.height-d.top-d.bottom,x:d.left,y:d.top}},_B={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},PP=()=>{var e;return(e=nr(La))!==null&&e!==void 0?e:_B},J1=()=>nr(lh),ew=()=>nr(ch),bB=()=>nr(e=>e.layout.margin),Jn=e=>e.layout.layoutType,tw=()=>nr(Jn),xB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CP=Rs({name:"legend",initialState:xB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var i=th(e).payload.indexOf(t.payload);i>-1&&e.payload.splice(i,1)}}}),{setLegendSize:xT,setLegendSettings:wB,addLegendPayload:SB,removeLegendPayload:TB}=CP.actions,AB=CP.reducer,MB=["contextPayload"];function Tx(){return Tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Tx.apply(null,arguments)}function wT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function sm(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(i),!0).forEach(function(o){rw(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function rw(e,t,i){return(t=EB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function EB(e){var t=PB(e,"string");return typeof t=="symbol"?t:t+""}function PB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CB(e,t){if(e==null)return{};var i,o,d=DB(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function DB(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function IB(e){return e.value}function OB(e){var{contextPayload:t}=e,i=CB(e,MB),o=ZE(t,e.payloadUniqBy,IB),d=sm(sm({},i),{},{payload:o});return ae.isValidElement(e.content)?ae.cloneElement(e.content,d):typeof e.content=="function"?ae.createElement(e.content,d):ae.createElement(V1,d)}function zB(e,t,i,o,d,y){var{layout:g,align:u,verticalAlign:E}=t,P,C;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&g==="vertical"?P={left:((o||0)-y.width)/2}:P=u==="right"?{right:i&&i.right||0}:{left:i&&i.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(E==="middle"?C={top:((d||0)-y.height)/2}:C=E==="bottom"?{bottom:i&&i.bottom||0}:{top:i&&i.top||0}),sm(sm({},P),C)}function RB(e){var t=Ba();return ae.useEffect(()=>{t(wB(e))},[t,e]),null}function kB(e){var t=Ba();return ae.useEffect(()=>(t(xT(e)),()=>{t(xT({width:0,height:0}))}),[t,e]),null}function BB(e){var t=BR(),i=K6(),o=bB(),{width:d,height:y,wrapperStyle:g,portal:u}=e,[E,P]=WE([t]),C=J1(),z=ew();if(C==null||z==null)return null;var j=C-(o.left||0)-(o.right||0),N=R0.getWidthOrHeight(e.layout,y,d,j),$=u?g:sm(sm({position:"absolute",width:N?.width||d||"auto",height:N?.height||y||"auto"},zB(g,e,o,C,z,E)),g),X=u??i;if(X==null)return null;var W=ae.createElement("div",{className:"recharts-legend-wrapper",style:$,ref:P},ae.createElement(RB,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),ae.createElement(kB,{width:E.width,height:E.height}),ae.createElement(OB,Tx({},e,N,{margin:o,chartWidth:C,chartHeight:z,contextPayload:t})));return vE.createPortal(W,X)}class R0 extends ae.PureComponent{static getWidthOrHeight(t,i,o,d){return t==="vertical"&&mr(i)?{height:i}:t==="horizontal"?{width:o||d}:null}render(){return ae.createElement(BB,this.props)}}rw(R0,"displayName","Legend");rw(R0,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ax.apply(null,arguments)}function ST(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Ab(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ST(Object(i),!0).forEach(function(o){LB(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ST(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function LB(e,t,i){return(t=jB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jB(e){var t=NB(e,"string");return typeof t=="symbol"?t:t+""}function NB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FB(e){return Array.isArray(e)&&nu(e[0])&&nu(e[1])?e.join(" ~ "):e}var UB=e=>{var{separator:t=" : ",contentStyle:i={},itemStyle:o={},labelStyle:d={},payload:y,formatter:g,itemSorter:u,wrapperClassName:E,labelClassName:P,label:C,labelFormatter:z,accessibilityLayer:j=!1}=e,N=()=>{if(y&&y.length){var Be={padding:0,margin:0},Le=(u?T0(y,u):y).map((qe,at)=>{if(qe.type==="none")return null;var Mt=qe.formatter||g||FB,{value:Ot,name:ft}=qe,gt=Ot,Ft=ft;if(Mt){var Ht=Mt(Ot,ft,qe,at,y);if(Array.isArray(Ht))[gt,Ft]=Ht;else if(Ht!=null)gt=Ht;else return null}var Kt=Ab({display:"block",paddingTop:4,paddingBottom:4,color:qe.color||"#000"},o);return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(at),style:Kt},nu(Ft)?ae.createElement("span",{className:"recharts-tooltip-item-name"},Ft):null,nu(Ft)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},gt),ae.createElement("span",{className:"recharts-tooltip-item-unit"},qe.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:Be},Le)}return null},$=Ab({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),X=Ab({margin:0},d),W=!xa(C),oe=W?C:"",le=kn("recharts-default-tooltip",E),ue=kn("recharts-tooltip-label",P);W&&z&&y!==void 0&&y!==null&&(oe=z(C,y));var Oe=j?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",Ax({className:le,style:$},Oe),ae.createElement("p",{className:ue,style:X},ae.isValidElement(oe)?oe:"".concat(oe)),N())},zg="recharts-tooltip-wrapper",GB={visibility:"hidden"};function VB(e){var{coordinate:t,translateX:i,translateY:o}=e;return kn(zg,{["".concat(zg,"-right")]:mr(i)&&t&&mr(t.x)&&i>=t.x,["".concat(zg,"-left")]:mr(i)&&t&&mr(t.x)&&i<t.x,["".concat(zg,"-bottom")]:mr(o)&&t&&mr(t.y)&&o>=t.y,["".concat(zg,"-top")]:mr(o)&&t&&mr(t.y)&&o<t.y})}function TT(e){var{allowEscapeViewBox:t,coordinate:i,key:o,offsetTopLeft:d,position:y,reverseDirection:g,tooltipDimension:u,viewBox:E,viewBoxDimension:P}=e;if(y&&mr(y[o]))return y[o];var C=i[o]-u-(d>0?d:0),z=i[o]+d;if(t[o])return g[o]?C:z;var j=E[o];if(j==null)return 0;if(g[o]){var N=C,$=j;return N<$?Math.max(z,j):Math.max(C,j)}if(P==null)return 0;var X=z+u,W=j+P;return X>W?Math.max(C,j):Math.max(z,j)}function qB(e){var{translateX:t,translateY:i,useTranslate3d:o}=e;return{transform:o?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function $B(e){var{allowEscapeViewBox:t,coordinate:i,offsetTopLeft:o,position:d,reverseDirection:y,tooltipBox:g,useTranslate3d:u,viewBox:E}=e,P,C,z;return g.height>0&&g.width>0&&i?(C=TT({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:o,position:d,reverseDirection:y,tooltipDimension:g.width,viewBox:E,viewBoxDimension:E.width}),z=TT({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:o,position:d,reverseDirection:y,tooltipDimension:g.height,viewBox:E,viewBoxDimension:E.height}),P=qB({translateX:C,translateY:z,useTranslate3d:u})):P=GB,{cssProperties:P,cssClasses:VB({translateX:C,translateY:z,coordinate:i})}}function AT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function wv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(i),!0).forEach(function(o){Mx(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Mx(e,t,i){return(t=ZB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ZB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YB extends ae.PureComponent{constructor(){super(...arguments),Mx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Mx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var i,o,d,y;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&i!==void 0?i:0,y:(d=(y=this.props.coordinate)===null||y===void 0?void 0:y.y)!==null&&d!==void 0?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,i;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:i,animationDuration:o,animationEasing:d,children:y,coordinate:g,hasPayload:u,isAnimationActive:E,offset:P,position:C,reverseDirection:z,useTranslate3d:j,viewBox:N,wrapperStyle:$,lastBoundingBox:X,innerRef:W,hasPortalFromProps:oe}=this.props,{cssClasses:le,cssProperties:ue}=$B({allowEscapeViewBox:i,coordinate:g,offsetTopLeft:P,position:C,reverseDirection:z,tooltipBox:{height:X.height,width:X.width},useTranslate3d:j,viewBox:N}),Oe=oe?{}:wv(wv({transition:E&&t?"transform ".concat(o,"ms ").concat(d):void 0},ue),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),Be=wv(wv({},Oe),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},$);return ae.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:le,style:Be,ref:W},y)}}var XB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),mm={devToolsEnabled:!1,isSsr:XB()},DP=()=>nr(e=>e.rootProps.accessibilityLayer);function fc(e){return Number.isFinite(e)}function Qv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ex.apply(null,arguments)}function MT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function ET(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(i),!0).forEach(function(o){KB(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function KB(e,t,i){return(t=WB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function WB(e){var t=QB(e,"string");return typeof t=="symbol"?t:t+""}function QB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PT={curveBasisClosed:m4,curveBasisOpen:g4,curveBasis:p4,curveBumpX:e4,curveBumpY:t4,curveLinearClosed:y4,curveLinear:w0,curveMonotoneX:v4,curveMonotoneY:_4,curveNatural:b4,curveStep:x4,curveStepAfter:S4,curveStepBefore:w4},Sv=e=>fc(e.x)&&fc(e.y),Rg=e=>e.x,kg=e=>e.y,JB=(e,t)=>{if(typeof e=="function")return e;var i="curve".concat(sy(e));return(i==="curveMonotone"||i==="curveBump")&&t?PT["".concat(i).concat(t==="vertical"?"Y":"X")]:PT[i]||w0},eL=e=>{var{type:t="linear",points:i=[],baseLine:o,layout:d,connectNulls:y=!1}=e,g=JB(t,d),u=y?i.filter(Sv):i,E;if(Array.isArray(o)){var P=y?o.filter(z=>Sv(z)):o,C=u.map((z,j)=>ET(ET({},z),{},{base:P[j]}));return d==="vertical"?E=mv().y(kg).x1(Rg).x0(z=>z.base.x):E=mv().x(Rg).y1(kg).y0(z=>z.base.y),E.defined(Sv).curve(g),E(C)}return d==="vertical"&&mr(o)?E=mv().y(kg).x1(Rg).x0(o):mr(o)?E=mv().x(Rg).y1(kg).y0(o):E=AE().x(Rg).y(kg),E.defined(Sv).curve(g),E(u)},IP=e=>{var{className:t,points:i,path:o,pathRef:d}=e;if((!i||!i.length)&&!o)return null;var y=i&&i.length?eL(e):o;return ae.createElement("path",Ex({},$d(e),L1(e),{className:kn("recharts-curve",t),d:y===null?void 0:y,ref:d}))},tL=["x","y","top","left","width","height","className"];function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Px.apply(null,arguments)}function CT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function rL(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(i),!0).forEach(function(o){nL(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function nL(e,t,i){return(t=iL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iL(e){var t=aL(e,"string");return typeof t=="symbol"?t:t+""}function aL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oL(e,t){if(e==null)return{};var i,o,d=sL(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function sL(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var lL=(e,t,i,o,d,y)=>"M".concat(e,",").concat(d,"v").concat(o,"M").concat(y,",").concat(t,"h").concat(i),cL=e=>{var{x:t=0,y:i=0,top:o=0,left:d=0,width:y=0,height:g=0,className:u}=e,E=oL(e,tL),P=rL({x:t,y:i,top:o,left:d,width:y,height:g},E);return!mr(t)||!mr(i)||!mr(y)||!mr(g)||!mr(o)||!mr(d)?null:ae.createElement("path",Px({},wa(P,!0),{className:kn("recharts-cross",u),d:lL(t,i,y,g,o,d)}))};function uL(e,t,i,o){var d=o/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-d:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-d,width:e==="horizontal"?o:i.width-1,height:e==="horizontal"?i.height-1:o}}function DT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function hL(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(i),!0).forEach(function(o){fL(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function fL(e,t,i){return(t=dL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function dL(e){var t=pL(e,"string");return typeof t=="symbol"?t:t+""}function pL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dl(e,t){var i=hL({},e),o=t,d=Object.keys(t),y=d.reduce((g,u)=>(g[u]===void 0&&o[u]!==void 0&&(g[u]=o[u]),g),i);return y}function mL(){}function IT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function OT(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(i),!0).forEach(function(o){gL(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function gL(e,t,i){return(t=yL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yL(e){var t=vL(e,"string");return typeof t=="symbol"?t:t+""}function vL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _L=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),bL=(e,t,i)=>e.map(o=>"".concat(_L(o)," ").concat(t,"ms ").concat(i)).join(","),xL=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((i,o)=>i.filter(d=>o.includes(d))),Wg=(e,t)=>Object.keys(t).reduce((i,o)=>OT(OT({},i),{},{[o]:e(o,t[o])}),{});function zT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function za(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zT(Object(i),!0).forEach(function(o){wL(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function wL(e,t,i){return(t=SL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SL(e){var t=TL(e,"string");return typeof t=="symbol"?t:t+""}function TL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jv=(e,t,i)=>e+(t-e)*i,Cx=e=>{var{from:t,to:i}=e;return t!==i},OP=(e,t,i)=>{var o=Wg((d,y)=>{if(Cx(y)){var[g,u]=e(y.from,y.to,y.velocity);return za(za({},y),{},{from:g,velocity:u})}return y},t);return i<1?Wg((d,y)=>Cx(y)?za(za({},y),{},{velocity:Jv(y.velocity,o[d].velocity,i),from:Jv(y.from,o[d].from,i)}):y,t):OP(e,o,i-1)};function AL(e,t,i,o,d,y){var g,u=o.reduce((j,N)=>za(za({},j),{},{[N]:{from:e[N],velocity:0,to:t[N]}}),{}),E=()=>Wg((j,N)=>N.from,u),P=()=>!Object.values(u).filter(Cx).length,C=null,z=j=>{g||(g=j);var N=j-g,$=N/i.dt;u=OP(i,u,$),d(za(za(za({},e),t),E())),g=j,P()||(C=y.setTimeout(z))};return()=>(C=y.setTimeout(z),()=>{C()})}function ML(e,t,i,o,d,y,g){var u=null,E=d.reduce((z,j)=>za(za({},z),{},{[j]:[e[j],t[j]]}),{}),P,C=z=>{P||(P=z);var j=(z-P)/o,N=Wg((X,W)=>Jv(...W,i(j)),E);if(y(za(za(za({},e),t),N)),j<1)u=g.setTimeout(C);else{var $=Wg((X,W)=>Jv(...W,i(1)),E);y(za(za(za({},e),t),$))}};return()=>(u=g.setTimeout(C),()=>{u()})}const EL=(e,t,i,o,d,y)=>{var g=xL(e,t);return i.isStepper===!0?AL(e,t,i,g,d,y):ML(e,t,i,o,g,d,y)};var e0=1e-4,zP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],RP=(e,t)=>e.map((i,o)=>i*t**o).reduce((i,o)=>i+o),RT=(e,t)=>i=>{var o=zP(e,t);return RP(o,i)},PL=(e,t)=>i=>{var o=zP(e,t),d=[...o.map((y,g)=>y*g).slice(1),0];return RP(d,i)},kT=function(){for(var t,i,o,d,y=arguments.length,g=new Array(y),u=0;u<y;u++)g[u]=arguments[u];if(g.length===1)switch(g[0]){case"linear":[t,o,i,d]=[0,0,1,1];break;case"ease":[t,o,i,d]=[.25,.1,.25,1];break;case"ease-in":[t,o,i,d]=[.42,0,1,1];break;case"ease-out":[t,o,i,d]=[.42,0,.58,1];break;case"ease-in-out":[t,o,i,d]=[0,0,.58,1];break;default:{var E=g[0].split("(");E[0]==="cubic-bezier"&&E[1].split(")")[0].split(",").length===4&&([t,o,i,d]=E[1].split(")")[0].split(",").map($=>parseFloat($)))}}else g.length===4&&([t,o,i,d]=g);var P=RT(t,i),C=RT(o,d),z=PL(t,i),j=$=>$>1?1:$<0?0:$,N=$=>{for(var X=$>1?1:$,W=X,oe=0;oe<8;++oe){var le=P(W)-X,ue=z(W);if(Math.abs(le-X)<e0||ue<e0)return C(W);W=j(W-le/ue)}return C(W)};return N.isStepper=!1,N},CL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:o=8,dt:d=17}=t,y=(g,u,E)=>{var P=-(g-u)*i,C=E*o,z=E+(P-C)*d/1e3,j=E*d/1e3+g;return Math.abs(j-u)<e0&&Math.abs(z)<e0?[u,0]:[j,z]};return y.isStepper=!0,y.dt=d,y},DL=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kT(e);case"spring":return CL();default:if(e.split("(")[0]==="cubic-bezier")return kT(e)}return typeof e=="function"?e:null};function IL(e){var t,i=()=>null,o=!1,d=null,y=g=>{if(!o){if(Array.isArray(g)){if(!g.length)return;var u=g,[E,...P]=u;if(typeof E=="number"){d=e.setTimeout(y.bind(null,P),E);return}y(E),d=e.setTimeout(y.bind(null,P));return}typeof g=="string"&&(t=g,i(t)),typeof g=="object"&&(t=g,i(t)),typeof g=="function"&&g()}};return{stop:()=>{o=!0},start:g=>{o=!1,d&&(d(),d=null),y(g)},subscribe:g=>(i=g,()=>{i=()=>null}),getTimeoutController:()=>e}}class OL{setTimeout(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=performance.now(),d=null,y=g=>{g-o>=i?t(g):typeof requestAnimationFrame=="function"&&(d=requestAnimationFrame(y))};return d=requestAnimationFrame(y),()=>{cancelAnimationFrame(d)}}}function zL(){return IL(new OL)}var RL=ae.createContext(zL);function kL(e,t){var i=ae.useContext(RL);return ae.useMemo(()=>t??i(e),[e,t,i])}var BL={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},BT={t:0},Mb={t:1};function kP(e){var t=Dl(e,BL),{isActive:i,canBegin:o,duration:d,easing:y,begin:g,onAnimationEnd:u,onAnimationStart:E,children:P}=t,C=kL(t.animationId,t.animationManager),[z,j]=ae.useState(i?BT:Mb),N=ae.useRef(null);return ae.useEffect(()=>{i||j(Mb)},[i]),ae.useEffect(()=>{if(!i||!o)return mL;var $=EL(BT,Mb,DL(y),d,j,C.getTimeoutController()),X=()=>{N.current=$()};return C.start([E,g,X,d,u]),()=>{C.stop(),N.current&&N.current(),u()}},[i,o,d,y,g,E,u,C]),P(z.t)}function BP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=ae.useRef(Yg(t)),o=ae.useRef(e);return o.current!==e&&(i.current=Yg(t),o.current=e),i.current}function LT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function jT(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(i),!0).forEach(function(o){LL(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function LL(e,t,i){return(t=jL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jL(e){var t=NL(e,"string");return typeof t=="symbol"?t:t+""}function NL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},t0.apply(null,arguments)}var NT=(e,t,i,o,d)=>{var y=Math.min(Math.abs(i)/2,Math.abs(o)/2),g=o>=0?1:-1,u=i>=0?1:-1,E=o>=0&&i>=0||o<0&&i<0?1:0,P;if(y>0&&d instanceof Array){for(var C=[0,0,0,0],z=0,j=4;z<j;z++)C[z]=d[z]>y?y:d[z];P="M".concat(e,",").concat(t+g*C[0]),C[0]>0&&(P+="A ".concat(C[0],",").concat(C[0],",0,0,").concat(E,",").concat(e+u*C[0],",").concat(t)),P+="L ".concat(e+i-u*C[1],",").concat(t),C[1]>0&&(P+="A ".concat(C[1],",").concat(C[1],",0,0,").concat(E,`,
        `).concat(e+i,",").concat(t+g*C[1])),P+="L ".concat(e+i,",").concat(t+o-g*C[2]),C[2]>0&&(P+="A ".concat(C[2],",").concat(C[2],",0,0,").concat(E,`,
        `).concat(e+i-u*C[2],",").concat(t+o)),P+="L ".concat(e+u*C[3],",").concat(t+o),C[3]>0&&(P+="A ".concat(C[3],",").concat(C[3],",0,0,").concat(E,`,
        `).concat(e,",").concat(t+o-g*C[3])),P+="Z"}else if(y>0&&d===+d&&d>0){var N=Math.min(y,d);P="M ".concat(e,",").concat(t+g*N,`
            A `).concat(N,",").concat(N,",0,0,").concat(E,",").concat(e+u*N,",").concat(t,`
            L `).concat(e+i-u*N,",").concat(t,`
            A `).concat(N,",").concat(N,",0,0,").concat(E,",").concat(e+i,",").concat(t+g*N,`
            L `).concat(e+i,",").concat(t+o-g*N,`
            A `).concat(N,",").concat(N,",0,0,").concat(E,",").concat(e+i-u*N,",").concat(t+o,`
            L `).concat(e+u*N,",").concat(t+o,`
            A `).concat(N,",").concat(N,",0,0,").concat(E,",").concat(e,",").concat(t+o-g*N," Z")}else P="M ".concat(e,",").concat(t," h ").concat(i," v ").concat(o," h ").concat(-i," Z");return P},FL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UL=e=>{var t=Dl(e,FL),i=ae.useRef(null),[o,d]=ae.useState(-1);ae.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var Ht=i.current.getTotalLength();Ht&&d(Ht)}catch{}},[]);var{x:y,y:g,width:u,height:E,radius:P,className:C}=t,{animationEasing:z,animationDuration:j,animationBegin:N,isAnimationActive:$,isUpdateAnimationActive:X}=t,W=ae.useRef(u),oe=ae.useRef(E),le=ae.useRef(y),ue=ae.useRef(g),Oe=ae.useMemo(()=>({x:y,y:g,width:u,height:E,radius:P}),[y,g,u,E,P]),Be=BP(Oe,"rectangle-");if(y!==+y||g!==+g||u!==+u||E!==+E||u===0||E===0)return null;var Le=kn("recharts-rectangle",C);if(!X)return ae.createElement("path",t0({},wa(t,!0),{className:Le,d:NT(y,g,u,E,P)}));var qe=W.current,at=oe.current,Mt=le.current,Ot=ue.current,ft="0px ".concat(o===-1?1:o,"px"),gt="".concat(o,"px 0px"),Ft=bL(["strokeDasharray"],j,typeof z=="string"?z:void 0);return ae.createElement(kP,{animationId:Be,key:Be,canBegin:o>0,duration:j,easing:z,isActive:X,begin:N},Ht=>{var Kt=Ku(qe,u,Ht),$e=Ku(at,E,Ht),ot=Ku(Mt,y,Ht),Dt=Ku(Ot,g,Ht);i.current&&(W.current=Kt,oe.current=$e,le.current=ot,ue.current=Dt);var bt;return $?Ht>0?bt={transition:Ft,strokeDasharray:gt}:bt={strokeDasharray:ft}:bt={strokeDasharray:gt},ae.createElement("path",t0({},wa(t,!0),{className:Le,d:NT(ot,Dt,Kt,$e,P),ref:i,style:jT(jT({},bt),t.style)}))})};function LP(e){var{cx:t,cy:i,radius:o,startAngle:d,endAngle:y}=e,g=Ra(t,i,o,d),u=Ra(t,i,o,y);return{points:[g,u],cx:t,cy:i,radius:o,startAngle:d,endAngle:y}}function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Dx.apply(null,arguments)}var GL=(e,t)=>{var i=Sl(t-e),o=Math.min(Math.abs(t-e),359.999);return i*o},Tv=e=>{var{cx:t,cy:i,radius:o,angle:d,sign:y,isExternal:g,cornerRadius:u,cornerIsExternal:E}=e,P=u*(g?1:-1)+o,C=Math.asin(u/P)/Wv,z=E?d:d+y*C,j=Ra(t,i,P,z),N=Ra(t,i,o,z),$=E?d-y*C:d,X=Ra(t,i,P*Math.cos(C*Wv),$);return{center:j,circleTangency:N,lineTangency:X,theta:C}},jP=e=>{var{cx:t,cy:i,innerRadius:o,outerRadius:d,startAngle:y,endAngle:g}=e,u=GL(y,g),E=y+u,P=Ra(t,i,d,y),C=Ra(t,i,d,E),z="M ".concat(P.x,",").concat(P.y,`
    A `).concat(d,",").concat(d,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(y>E),`,
    `).concat(C.x,",").concat(C.y,`
  `);if(o>0){var j=Ra(t,i,o,y),N=Ra(t,i,o,E);z+="L ".concat(N.x,",").concat(N.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(y<=E),`,
            `).concat(j.x,",").concat(j.y," Z")}else z+="L ".concat(t,",").concat(i," Z");return z},VL=e=>{var{cx:t,cy:i,innerRadius:o,outerRadius:d,cornerRadius:y,forceCornerRadius:g,cornerIsExternal:u,startAngle:E,endAngle:P}=e,C=Sl(P-E),{circleTangency:z,lineTangency:j,theta:N}=Tv({cx:t,cy:i,radius:d,angle:E,sign:C,cornerRadius:y,cornerIsExternal:u}),{circleTangency:$,lineTangency:X,theta:W}=Tv({cx:t,cy:i,radius:d,angle:P,sign:-C,cornerRadius:y,cornerIsExternal:u}),oe=u?Math.abs(E-P):Math.abs(E-P)-N-W;if(oe<0)return g?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(y,",").concat(y,",0,0,1,").concat(y*2,`,0
        a`).concat(y,",").concat(y,",0,0,1,").concat(-y*2,`,0
      `):jP({cx:t,cy:i,innerRadius:o,outerRadius:d,startAngle:E,endAngle:P});var le="M ".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,0,").concat(+(C<0),",").concat(z.x,",").concat(z.y,`
    A`).concat(d,",").concat(d,",0,").concat(+(oe>180),",").concat(+(C<0),",").concat($.x,",").concat($.y,`
    A`).concat(y,",").concat(y,",0,0,").concat(+(C<0),",").concat(X.x,",").concat(X.y,`
  `);if(o>0){var{circleTangency:ue,lineTangency:Oe,theta:Be}=Tv({cx:t,cy:i,radius:o,angle:E,sign:C,isExternal:!0,cornerRadius:y,cornerIsExternal:u}),{circleTangency:Le,lineTangency:qe,theta:at}=Tv({cx:t,cy:i,radius:o,angle:P,sign:-C,isExternal:!0,cornerRadius:y,cornerIsExternal:u}),Mt=u?Math.abs(E-P):Math.abs(E-P)-Be-at;if(Mt<0&&y===0)return"".concat(le,"L").concat(t,",").concat(i,"Z");le+="L".concat(qe.x,",").concat(qe.y,`
      A`).concat(y,",").concat(y,",0,0,").concat(+(C<0),",").concat(Le.x,",").concat(Le.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(Mt>180),",").concat(+(C>0),",").concat(ue.x,",").concat(ue.y,`
      A`).concat(y,",").concat(y,",0,0,").concat(+(C<0),",").concat(Oe.x,",").concat(Oe.y,"Z")}else le+="L".concat(t,",").concat(i,"Z");return le},qL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$L=e=>{var t=Dl(e,qL),{cx:i,cy:o,innerRadius:d,outerRadius:y,cornerRadius:g,forceCornerRadius:u,cornerIsExternal:E,startAngle:P,endAngle:C,className:z}=t;if(y<d||P===C)return null;var j=kn("recharts-sector",z),N=y-d,$=hf(g,N,0,!0),X;return $>0&&Math.abs(P-C)<360?X=VL({cx:i,cy:o,innerRadius:d,outerRadius:y,cornerRadius:Math.min($,N/2),forceCornerRadius:u,cornerIsExternal:E,startAngle:P,endAngle:C}):X=jP({cx:i,cy:o,innerRadius:d,outerRadius:y,startAngle:P,endAngle:C}),ae.createElement("path",Dx({},wa(t,!0),{className:j,d:X}))};function ZL(e,t,i){var o,d,y,g;if(e==="horizontal")o=t.x,y=o,d=i.top,g=i.top+i.height;else if(e==="vertical")d=t.y,g=d,o=i.left,y=i.left+i.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:E,innerRadius:P,outerRadius:C,angle:z}=t,j=Ra(u,E,P,z),N=Ra(u,E,C,z);o=j.x,d=j.y,y=N.x,g=N.y}else return LP(t);return[{x:o,y:d},{x:y,y:g}]}var Eb={},Pb={},Cb={},FT;function HL(){return FT||(FT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YE();function i(o){return t.isSymbol(o)?NaN:Number(o)}e.toNumber=i})(Cb)),Cb}var UT;function YL(){return UT||(UT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HL();function i(o){return o?(o=t.toNumber(o),o===1/0||o===-1/0?(o<0?-1:1)*Number.MAX_VALUE:o===o?o:0):o===0?o:0}e.toFinite=i})(Pb)),Pb}var GT;function XL(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE(),i=YL();function o(d,y,g){g&&typeof g!="number"&&t.isIterateeCall(d,y,g)&&(y=g=void 0),d=i.toFinite(d),y===void 0?(y=d,d=0):y=i.toFinite(y),g=g===void 0?d<y?1:-1:i.toFinite(g);const u=Math.max(Math.ceil((y-d)/(g||1)),0),E=new Array(u);for(let P=0;P<u;P++)E[P]=d,d+=g;return E}e.range=o})(Eb)),Eb}var Db,VT;function KL(){return VT||(VT=1,Db=XL().range),Db}var WL=KL();const NP=El(WL),Lg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:a1,scaleDiverging:GM,scaleDivergingLog:VM,scaleDivergingPow:E1,scaleDivergingSqrt:z5,scaleDivergingSymlog:qM,scaleIdentity:SM,scaleImplicit:ex,scaleLinear:f1,scaleLog:AM,scaleOrdinal:i1,scalePoint:bO,scalePow:g1,scaleQuantile:PM,scaleQuantize:CM,scaleRadial:EM,scaleSequential:jM,scaleSequentialLog:NM,scaleSequentialPow:M1,scaleSequentialQuantile:UM,scaleSequentialSqrt:O5,scaleSequentialSymlog:FM,scaleSqrt:dz,scaleSymlog:MM,scaleThreshold:y1,scaleTime:D5,scaleUtc:I5,tickFormat:wM},Symbol.toStringTag,{value:"Module"}));var yf=e=>e.chartData,QL=it([yf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),nw=(e,t,i,o)=>o?QL(e):yf(e);function lm(e){if(Array.isArray(e)&&e.length===2){var[t,i]=e;if(fc(t)&&fc(i))return!0}return!1}function qT(e,t,i){return i?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function JL(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,o]=e,d,y;if(fc(i))d=i;else if(typeof i=="function")return;if(fc(o))y=o;else if(typeof o=="function")return;var g=[d,y];if(lm(g))return g}}function e8(e,t,i){if(!(!i&&t==null)){if(typeof e=="function"&&t!=null)try{var o=e(t,i);if(lm(o))return qT(o,t,i)}catch{}if(Array.isArray(e)&&e.length===2){var[d,y]=e,g,u;if(d==="auto")t!=null&&(g=Math.min(...t));else if(mr(d))g=d;else if(typeof d=="function")try{t!=null&&(g=d(t?.[0]))}catch{}else if(typeof d=="string"&&yT.test(d)){var E=yT.exec(d);if(E==null||t==null)g=void 0;else{var P=+E[1];g=t[0]-P}}else g=t?.[0];if(y==="auto")t!=null&&(u=Math.max(...t));else if(mr(y))u=y;else if(typeof y=="function")try{t!=null&&(u=y(t?.[1]))}catch{}else if(typeof y=="string"&&vT.test(y)){var C=vT.exec(y);if(C==null||t==null)u=void 0;else{var z=+C[1];u=t[1]+z}}else u=t?.[1];var j=[g,u];if(lm(j))return t==null?j:qT(j,t,i)}}}var gm=1e9,t8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},aw,si=!0,Ml="[DecimalError] ",Bd=Ml+"Invalid argument: ",iw=Ml+"Exponent out of range: ",ym=Math.floor,Pd=Math.pow,r8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ds,_a=1e7,Wn=7,FP=9007199254740991,r0=ym(FP/Wn),Vt={};Vt.absoluteValue=Vt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Vt.comparedTo=Vt.cmp=function(e){var t,i,o,d,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(o=y.d.length,d=e.d.length,t=0,i=o<d?o:d;t<i;++t)if(y.d[t]!==e.d[t])return y.d[t]>e.d[t]^y.s<0?1:-1;return o===d?0:o>d^y.s<0?1:-1};Vt.decimalPlaces=Vt.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Wn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Vt.dividedBy=Vt.div=function(e){return rh(this,new this.constructor(e))};Vt.dividedToIntegerBy=Vt.idiv=function(e){var t=this,i=t.constructor;return Rn(rh(t,new i(e),0,1),i.precision)};Vt.equals=Vt.eq=function(e){return!this.cmp(e)};Vt.exponent=function(){return Gi(this)};Vt.greaterThan=Vt.gt=function(e){return this.cmp(e)>0};Vt.greaterThanOrEqualTo=Vt.gte=function(e){return this.cmp(e)>=0};Vt.isInteger=Vt.isint=function(){return this.e>this.d.length-2};Vt.isNegative=Vt.isneg=function(){return this.s<0};Vt.isPositive=Vt.ispos=function(){return this.s>0};Vt.isZero=function(){return this.s===0};Vt.lessThan=Vt.lt=function(e){return this.cmp(e)<0};Vt.lessThanOrEqualTo=Vt.lte=function(e){return this.cmp(e)<1};Vt.logarithm=Vt.log=function(e){var t,i=this,o=i.constructor,d=o.precision,y=d+5;if(e===void 0)e=new o(10);else if(e=new o(e),e.s<1||e.eq(Ds))throw Error(Ml+"NaN");if(i.s<1)throw Error(Ml+(i.s?"NaN":"-Infinity"));return i.eq(Ds)?new o(0):(si=!1,t=rh(Qg(i,y),Qg(e,y),y),si=!0,Rn(t,d))};Vt.minus=Vt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VP(t,e):UP(t,(e.s=-e.s,e))};Vt.modulo=Vt.mod=function(e){var t,i=this,o=i.constructor,d=o.precision;if(e=new o(e),!e.s)throw Error(Ml+"NaN");return i.s?(si=!1,t=rh(i,e,0,1).times(e),si=!0,i.minus(t)):Rn(new o(i),d)};Vt.naturalExponential=Vt.exp=function(){return GP(this)};Vt.naturalLogarithm=Vt.ln=function(){return Qg(this)};Vt.negated=Vt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Vt.plus=Vt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UP(t,e):VP(t,(e.s=-e.s,e))};Vt.precision=Vt.sd=function(e){var t,i,o,d=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bd+e);if(t=Gi(d)+1,o=d.d.length-1,i=o*Wn+1,o=d.d[o],o){for(;o%10==0;o/=10)i--;for(o=d.d[0];o>=10;o/=10)i++}return e&&t>i?t:i};Vt.squareRoot=Vt.sqrt=function(){var e,t,i,o,d,y,g,u=this,E=u.constructor;if(u.s<1){if(!u.s)return new E(0);throw Error(Ml+"NaN")}for(e=Gi(u),si=!1,d=Math.sqrt(+u),d==0||d==1/0?(t=tu(u.d),(t.length+e)%2==0&&(t+="0"),d=Math.sqrt(t),e=ym((e+1)/2)-(e<0||e%2),d==1/0?t="5e"+e:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),o=new E(t)):o=new E(d.toString()),i=E.precision,d=g=i+3;;)if(y=o,o=y.plus(rh(u,y,g+2)).times(.5),tu(y.d).slice(0,g)===(t=tu(o.d)).slice(0,g)){if(t=t.slice(g-3,g+1),d==g&&t=="4999"){if(Rn(y,i+1,0),y.times(y).eq(u)){o=y;break}}else if(t!="9999")break;g+=4}return si=!0,Rn(o,i)};Vt.times=Vt.mul=function(e){var t,i,o,d,y,g,u,E,P,C=this,z=C.constructor,j=C.d,N=(e=new z(e)).d;if(!C.s||!e.s)return new z(0);for(e.s*=C.s,i=C.e+e.e,E=j.length,P=N.length,E<P&&(y=j,j=N,N=y,g=E,E=P,P=g),y=[],g=E+P,o=g;o--;)y.push(0);for(o=P;--o>=0;){for(t=0,d=E+o;d>o;)u=y[d]+N[o]*j[d-o-1]+t,y[d--]=u%_a|0,t=u/_a|0;y[d]=(y[d]+t)%_a|0}for(;!y[--g];)y.pop();return t?++i:y.shift(),e.d=y,e.e=i,si?Rn(e,z.precision):e};Vt.toDecimalPlaces=Vt.todp=function(e,t){var i=this,o=i.constructor;return i=new o(i),e===void 0?i:(iu(e,0,gm),t===void 0?t=o.rounding:iu(t,0,8),Rn(i,e+Gi(i)+1,t))};Vt.toExponential=function(e,t){var i,o=this,d=o.constructor;return e===void 0?i=Nd(o,!0):(iu(e,0,gm),t===void 0?t=d.rounding:iu(t,0,8),o=Rn(new d(o),e+1,t),i=Nd(o,!0,e+1)),i};Vt.toFixed=function(e,t){var i,o,d=this,y=d.constructor;return e===void 0?Nd(d):(iu(e,0,gm),t===void 0?t=y.rounding:iu(t,0,8),o=Rn(new y(d),e+Gi(d)+1,t),i=Nd(o.abs(),!1,e+Gi(o)+1),d.isneg()&&!d.isZero()?"-"+i:i)};Vt.toInteger=Vt.toint=function(){var e=this,t=e.constructor;return Rn(new t(e),Gi(e)+1,t.rounding)};Vt.toNumber=function(){return+this};Vt.toPower=Vt.pow=function(e){var t,i,o,d,y,g,u=this,E=u.constructor,P=12,C=+(e=new E(e));if(!e.s)return new E(Ds);if(u=new E(u),!u.s){if(e.s<1)throw Error(Ml+"Infinity");return u}if(u.eq(Ds))return u;if(o=E.precision,e.eq(Ds))return Rn(u,o);if(t=e.e,i=e.d.length-1,g=t>=i,y=u.s,g){if((i=C<0?-C:C)<=FP){for(d=new E(Ds),t=Math.ceil(o/Wn+4),si=!1;i%2&&(d=d.times(u),ZT(d.d,t)),i=ym(i/2),i!==0;)u=u.times(u),ZT(u.d,t);return si=!0,e.s<0?new E(Ds).div(d):Rn(d,o)}}else if(y<0)throw Error(Ml+"NaN");return y=y<0&&e.d[Math.max(t,i)]&1?-1:1,u.s=1,si=!1,d=e.times(Qg(u,o+P)),si=!0,d=GP(d),d.s=y,d};Vt.toPrecision=function(e,t){var i,o,d=this,y=d.constructor;return e===void 0?(i=Gi(d),o=Nd(d,i<=y.toExpNeg||i>=y.toExpPos)):(iu(e,1,gm),t===void 0?t=y.rounding:iu(t,0,8),d=Rn(new y(d),e,t),i=Gi(d),o=Nd(d,e<=i||i<=y.toExpNeg,e)),o};Vt.toSignificantDigits=Vt.tosd=function(e,t){var i=this,o=i.constructor;return e===void 0?(e=o.precision,t=o.rounding):(iu(e,1,gm),t===void 0?t=o.rounding:iu(t,0,8)),Rn(new o(i),e,t)};Vt.toString=Vt.valueOf=Vt.val=Vt.toJSON=Vt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gi(e),i=e.constructor;return Nd(e,t<=i.toExpNeg||t>=i.toExpPos)};function UP(e,t){var i,o,d,y,g,u,E,P,C=e.constructor,z=C.precision;if(!e.s||!t.s)return t.s||(t=new C(e)),si?Rn(t,z):t;if(E=e.d,P=t.d,g=e.e,d=t.e,E=E.slice(),y=g-d,y){for(y<0?(o=E,y=-y,u=P.length):(o=P,d=g,u=E.length),g=Math.ceil(z/Wn),u=g>u?g+1:u+1,y>u&&(y=u,o.length=1),o.reverse();y--;)o.push(0);o.reverse()}for(u=E.length,y=P.length,u-y<0&&(y=u,o=P,P=E,E=o),i=0;y;)i=(E[--y]=E[y]+P[y]+i)/_a|0,E[y]%=_a;for(i&&(E.unshift(i),++d),u=E.length;E[--u]==0;)E.pop();return t.d=E,t.e=d,si?Rn(t,z):t}function iu(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Bd+e)}function tu(e){var t,i,o,d=e.length-1,y="",g=e[0];if(d>0){for(y+=g,t=1;t<d;t++)o=e[t]+"",i=Wn-o.length,i&&(y+=of(i)),y+=o;g=e[t],o=g+"",i=Wn-o.length,i&&(y+=of(i))}else if(g===0)return"0";for(;g%10===0;)g/=10;return y+g}var rh=(function(){function e(o,d){var y,g=0,u=o.length;for(o=o.slice();u--;)y=o[u]*d+g,o[u]=y%_a|0,g=y/_a|0;return g&&o.unshift(g),o}function t(o,d,y,g){var u,E;if(y!=g)E=y>g?1:-1;else for(u=E=0;u<y;u++)if(o[u]!=d[u]){E=o[u]>d[u]?1:-1;break}return E}function i(o,d,y){for(var g=0;y--;)o[y]-=g,g=o[y]<d[y]?1:0,o[y]=g*_a+o[y]-d[y];for(;!o[0]&&o.length>1;)o.shift()}return function(o,d,y,g){var u,E,P,C,z,j,N,$,X,W,oe,le,ue,Oe,Be,Le,qe,at,Mt=o.constructor,Ot=o.s==d.s?1:-1,ft=o.d,gt=d.d;if(!o.s)return new Mt(o);if(!d.s)throw Error(Ml+"Division by zero");for(E=o.e-d.e,qe=gt.length,Be=ft.length,N=new Mt(Ot),$=N.d=[],P=0;gt[P]==(ft[P]||0);)++P;if(gt[P]>(ft[P]||0)&&--E,y==null?le=y=Mt.precision:g?le=y+(Gi(o)-Gi(d))+1:le=y,le<0)return new Mt(0);if(le=le/Wn+2|0,P=0,qe==1)for(C=0,gt=gt[0],le++;(P<Be||C)&&le--;P++)ue=C*_a+(ft[P]||0),$[P]=ue/gt|0,C=ue%gt|0;else{for(C=_a/(gt[0]+1)|0,C>1&&(gt=e(gt,C),ft=e(ft,C),qe=gt.length,Be=ft.length),Oe=qe,X=ft.slice(0,qe),W=X.length;W<qe;)X[W++]=0;at=gt.slice(),at.unshift(0),Le=gt[0],gt[1]>=_a/2&&++Le;do C=0,u=t(gt,X,qe,W),u<0?(oe=X[0],qe!=W&&(oe=oe*_a+(X[1]||0)),C=oe/Le|0,C>1?(C>=_a&&(C=_a-1),z=e(gt,C),j=z.length,W=X.length,u=t(z,X,j,W),u==1&&(C--,i(z,qe<j?at:gt,j))):(C==0&&(u=C=1),z=gt.slice()),j=z.length,j<W&&z.unshift(0),i(X,z,W),u==-1&&(W=X.length,u=t(gt,X,qe,W),u<1&&(C++,i(X,qe<W?at:gt,W))),W=X.length):u===0&&(C++,X=[0]),$[P++]=C,u&&X[0]?X[W++]=ft[Oe]||0:(X=[ft[Oe]],W=1);while((Oe++<Be||X[0]!==void 0)&&le--)}return $[0]||$.shift(),N.e=E,Rn(N,g?y+Gi(N)+1:y)}})();function GP(e,t){var i,o,d,y,g,u,E=0,P=0,C=e.constructor,z=C.precision;if(Gi(e)>16)throw Error(iw+Gi(e));if(!e.s)return new C(Ds);for(si=!1,u=z,g=new C(.03125);e.abs().gte(.1);)e=e.times(g),P+=5;for(o=Math.log(Pd(2,P))/Math.LN10*2+5|0,u+=o,i=d=y=new C(Ds),C.precision=u;;){if(d=Rn(d.times(e),u),i=i.times(++E),g=y.plus(rh(d,i,u)),tu(g.d).slice(0,u)===tu(y.d).slice(0,u)){for(;P--;)y=Rn(y.times(y),u);return C.precision=z,t==null?(si=!0,Rn(y,z)):y}y=g}}function Gi(e){for(var t=e.e*Wn,i=e.d[0];i>=10;i/=10)t++;return t}function Ib(e,t,i){if(t>e.LN10.sd())throw si=!0,i&&(e.precision=i),Error(Ml+"LN10 precision limit exceeded");return Rn(new e(e.LN10),t)}function of(e){for(var t="";e--;)t+="0";return t}function Qg(e,t){var i,o,d,y,g,u,E,P,C,z=1,j=10,N=e,$=N.d,X=N.constructor,W=X.precision;if(N.s<1)throw Error(Ml+(N.s?"NaN":"-Infinity"));if(N.eq(Ds))return new X(0);if(t==null?(si=!1,P=W):P=t,N.eq(10))return t==null&&(si=!0),Ib(X,P);if(P+=j,X.precision=P,i=tu($),o=i.charAt(0),y=Gi(N),Math.abs(y)<15e14){for(;o<7&&o!=1||o==1&&i.charAt(1)>3;)N=N.times(e),i=tu(N.d),o=i.charAt(0),z++;y=Gi(N),o>1?(N=new X("0."+i),y++):N=new X(o+"."+i.slice(1))}else return E=Ib(X,P+2,W).times(y+""),N=Qg(new X(o+"."+i.slice(1)),P-j).plus(E),X.precision=W,t==null?(si=!0,Rn(N,W)):N;for(u=g=N=rh(N.minus(Ds),N.plus(Ds),P),C=Rn(N.times(N),P),d=3;;){if(g=Rn(g.times(C),P),E=u.plus(rh(g,new X(d),P)),tu(E.d).slice(0,P)===tu(u.d).slice(0,P))return u=u.times(2),y!==0&&(u=u.plus(Ib(X,P+2,W).times(y+""))),u=rh(u,new X(z),P),X.precision=W,t==null?(si=!0,Rn(u,W)):u;u=E,d+=2}}function $T(e,t){var i,o,d;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charCodeAt(o)===48;)++o;for(d=t.length;t.charCodeAt(d-1)===48;)--d;if(t=t.slice(o,d),t){if(d-=o,i=i-o-1,e.e=ym(i/Wn),e.d=[],o=(i+1)%Wn,i<0&&(o+=Wn),o<d){for(o&&e.d.push(+t.slice(0,o)),d-=Wn;o<d;)e.d.push(+t.slice(o,o+=Wn));t=t.slice(o),o=Wn-t.length}else o-=d;for(;o--;)t+="0";if(e.d.push(+t),si&&(e.e>r0||e.e<-r0))throw Error(iw+i)}else e.s=0,e.e=0,e.d=[0];return e}function Rn(e,t,i){var o,d,y,g,u,E,P,C,z=e.d;for(g=1,y=z[0];y>=10;y/=10)g++;if(o=t-g,o<0)o+=Wn,d=t,P=z[C=0];else{if(C=Math.ceil((o+1)/Wn),y=z.length,C>=y)return e;for(P=y=z[C],g=1;y>=10;y/=10)g++;o%=Wn,d=o-Wn+g}if(i!==void 0&&(y=Pd(10,g-d-1),u=P/y%10|0,E=t<0||z[C+1]!==void 0||P%y,E=i<4?(u||E)&&(i==0||i==(e.s<0?3:2)):u>5||u==5&&(i==4||E||i==6&&(o>0?d>0?P/Pd(10,g-d):0:z[C-1])%10&1||i==(e.s<0?8:7))),t<1||!z[0])return E?(y=Gi(e),z.length=1,t=t-y-1,z[0]=Pd(10,(Wn-t%Wn)%Wn),e.e=ym(-t/Wn)||0):(z.length=1,z[0]=e.e=e.s=0),e;if(o==0?(z.length=C,y=1,C--):(z.length=C+1,y=Pd(10,Wn-o),z[C]=d>0?(P/Pd(10,g-d)%Pd(10,d)|0)*y:0),E)for(;;)if(C==0){(z[0]+=y)==_a&&(z[0]=1,++e.e);break}else{if(z[C]+=y,z[C]!=_a)break;z[C--]=0,y=1}for(o=z.length;z[--o]===0;)z.pop();if(si&&(e.e>r0||e.e<-r0))throw Error(iw+Gi(e));return e}function VP(e,t){var i,o,d,y,g,u,E,P,C,z,j=e.constructor,N=j.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new j(e),si?Rn(t,N):t;if(E=e.d,z=t.d,o=t.e,P=e.e,E=E.slice(),g=P-o,g){for(C=g<0,C?(i=E,g=-g,u=z.length):(i=z,o=P,u=E.length),d=Math.max(Math.ceil(N/Wn),u)+2,g>d&&(g=d,i.length=1),i.reverse(),d=g;d--;)i.push(0);i.reverse()}else{for(d=E.length,u=z.length,C=d<u,C&&(u=d),d=0;d<u;d++)if(E[d]!=z[d]){C=E[d]<z[d];break}g=0}for(C&&(i=E,E=z,z=i,t.s=-t.s),u=E.length,d=z.length-u;d>0;--d)E[u++]=0;for(d=z.length;d>g;){if(E[--d]<z[d]){for(y=d;y&&E[--y]===0;)E[y]=_a-1;--E[y],E[d]+=_a}E[d]-=z[d]}for(;E[--u]===0;)E.pop();for(;E[0]===0;E.shift())--o;return E[0]?(t.d=E,t.e=o,si?Rn(t,N):t):new j(0)}function Nd(e,t,i){var o,d=Gi(e),y=tu(e.d),g=y.length;return t?(i&&(o=i-g)>0?y=y.charAt(0)+"."+y.slice(1)+of(o):g>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(d<0?"e":"e+")+d):d<0?(y="0."+of(-d-1)+y,i&&(o=i-g)>0&&(y+=of(o))):d>=g?(y+=of(d+1-g),i&&(o=i-d-1)>0&&(y=y+"."+of(o))):((o=d+1)<g&&(y=y.slice(0,o)+"."+y.slice(o)),i&&(o=i-g)>0&&(d+1===g&&(y+="."),y+=of(o))),e.s<0?"-"+y:y}function ZT(e,t){if(e.length>t)return e.length=t,!0}function qP(e){var t,i,o;function d(y){var g=this;if(!(g instanceof d))return new d(y);if(g.constructor=d,y instanceof d){g.s=y.s,g.e=y.e,g.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(Bd+y);if(y>0)g.s=1;else if(y<0)y=-y,g.s=-1;else{g.s=0,g.e=0,g.d=[0];return}if(y===~~y&&y<1e7){g.e=0,g.d=[y];return}return $T(g,y.toString())}else if(typeof y!="string")throw Error(Bd+y);if(y.charCodeAt(0)===45?(y=y.slice(1),g.s=-1):g.s=1,r8.test(y))$T(g,y);else throw Error(Bd+y)}if(d.prototype=Vt,d.ROUND_UP=0,d.ROUND_DOWN=1,d.ROUND_CEIL=2,d.ROUND_FLOOR=3,d.ROUND_HALF_UP=4,d.ROUND_HALF_DOWN=5,d.ROUND_HALF_EVEN=6,d.ROUND_HALF_CEIL=7,d.ROUND_HALF_FLOOR=8,d.clone=qP,d.config=d.set=n8,e===void 0&&(e={}),e)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<o.length;)e.hasOwnProperty(i=o[t++])||(e[i]=this[i]);return d.config(e),d}function n8(e){if(!e||typeof e!="object")throw Error(Ml+"Object expected");var t,i,o,d=["precision",1,gm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<d.length;t+=3)if((o=e[i=d[t]])!==void 0)if(ym(o)===o&&o>=d[t+1]&&o<=d[t+2])this[i]=o;else throw Error(Bd+i+": "+o);if((o=e[i="LN10"])!==void 0)if(o==Math.LN10)this[i]=new this(o);else throw Error(Bd+i+": "+o);return this}var aw=qP(t8);Ds=new aw(1);const xn=aw;var i8=e=>e,$P={},ZP=e=>e===$P,HT=e=>function t(){return arguments.length===0||arguments.length===1&&ZP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},HP=(e,t)=>e===1?t:HT(function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];var y=o.filter(g=>g!==$P).length;return y>=e?t(...o):HP(e-y,HT(function(){for(var g=arguments.length,u=new Array(g),E=0;E<g;E++)u[E]=arguments[E];var P=o.map(C=>ZP(C)?u.shift():C);return t(...P,...u)}))}),k0=e=>HP(e.length,e),Ix=(e,t)=>{for(var i=[],o=e;o<t;++o)i[o-e]=o;return i},a8=k0((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(i=>t[i]).map(e)),o8=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(!i.length)return i8;var d=i.reverse(),y=d[0],g=d.slice(1);return function(){return g.reduce((u,E)=>E(u),y(...arguments))}},Ox=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),YP=e=>{var t=null,i=null;return function(){for(var o=arguments.length,d=new Array(o),y=0;y<o;y++)d[y]=arguments[y];return t&&d.every((g,u)=>{var E;return g===((E=t)===null||E===void 0?void 0:E[u])})||(t=d,i=e(...d)),i}};function XP(e){var t;return e===0?t=1:t=Math.floor(new xn(e).abs().log(10).toNumber())+1,t}function KP(e,t,i){for(var o=new xn(e),d=0,y=[];o.lt(t)&&d<1e5;)y.push(o.toNumber()),o=o.add(i),d++;return y}k0((e,t,i)=>{var o=+e,d=+t;return o+i*(d-o)});k0((e,t,i)=>{var o=t-+e;return o=o||1/0,(i-e)/o});k0((e,t,i)=>{var o=t-+e;return o=o||1/0,Math.max(0,Math.min(1,(i-e)/o))});var WP=e=>{var[t,i]=e,[o,d]=[t,i];return t>i&&([o,d]=[i,t]),[o,d]},QP=(e,t,i)=>{if(e.lte(0))return new xn(0);var o=XP(e.toNumber()),d=new xn(10).pow(o),y=e.div(d),g=o!==1?.05:.1,u=new xn(Math.ceil(y.div(g).toNumber())).add(i).mul(g),E=u.mul(d);return t?new xn(E.toNumber()):new xn(Math.ceil(E.toNumber()))},s8=(e,t,i)=>{var o=new xn(1),d=new xn(e);if(!d.isint()&&i){var y=Math.abs(e);y<1?(o=new xn(10).pow(XP(e)-1),d=new xn(Math.floor(d.div(o).toNumber())).mul(o)):y>1&&(d=new xn(Math.floor(e)))}else e===0?d=new xn(Math.floor((t-1)/2)):i||(d=new xn(Math.floor(e)));var g=Math.floor((t-1)/2),u=o8(a8(E=>d.add(new xn(E-g).mul(o)).toNumber()),Ix);return u(0,t)},JP=function(t,i,o,d){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-t)/(o-1)))return{step:new xn(0),tickMin:new xn(0),tickMax:new xn(0)};var g=QP(new xn(i).sub(t).div(o-1),d,y),u;t<=0&&i>=0?u=new xn(0):(u=new xn(t).add(i).div(2),u=u.sub(new xn(u).mod(g)));var E=Math.ceil(u.sub(t).div(g).toNumber()),P=Math.ceil(new xn(i).sub(u).div(g).toNumber()),C=E+P+1;return C>o?JP(t,i,o,d,y+1):(C<o&&(P=i>0?P+(o-C):P,E=i>0?E:E+(o-C)),{step:g,tickMin:u.sub(new xn(E).mul(g)),tickMax:u.add(new xn(P).mul(g))})};function l8(e){var[t,i]=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y=Math.max(o,2),[g,u]=WP([t,i]);if(g===-1/0||u===1/0){var E=u===1/0?[g,...Ix(0,o-1).map(()=>1/0)]:[...Ix(0,o-1).map(()=>-1/0),u];return t>i?Ox(E):E}if(g===u)return s8(g,o,d);var{step:P,tickMin:C,tickMax:z}=JP(g,u,y,d,0),j=KP(C,z.add(new xn(.1).mul(P)),P);return t>i?Ox(j):j}function c8(e,t){var[i,o]=e,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[y,g]=WP([i,o]);if(y===-1/0||g===1/0)return[i,o];if(y===g)return[y];var u=Math.max(t,2),E=QP(new xn(g).sub(y).div(u-1),d,0),P=[...KP(new xn(y),new xn(g),E),g];return d===!1&&(P=P.map(C=>Math.round(C))),i>o?Ox(P):P}var u8=YP(l8),h8=YP(c8),f8=e=>e.rootProps.barCategoryGap,B0=e=>e.rootProps.stackOffset,ow=e=>e.options.chartName,sw=e=>e.rootProps.syncId,eC=e=>e.rootProps.syncMethod,lw=e=>e.options.eventEmitter,Wu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Es={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},L0=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},d8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Wu.angleAxisId,includeHidden:!1,name:void 0,reversed:Wu.reversed,scale:Wu.scale,tick:Wu.tick,tickCount:void 0,ticks:void 0,type:Wu.type,unit:void 0},p8={allowDataOverflow:Es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Es.scale,tick:Es.tick,tickCount:Es.tickCount,ticks:void 0,type:Es.type,unit:void 0},m8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Wu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wu.scale,tick:Wu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},g8={allowDataOverflow:Es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Es.scale,tick:Es.tick,tickCount:Es.tickCount,ticks:void 0,type:"category",unit:void 0},cw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?m8:d8,uw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?g8:p8,j0=e=>e.polarOptions,hw=it([lh,ch,La],jk),tC=it([j0,hw],(e,t)=>{if(e!=null)return hf(e.innerRadius,t,0)}),rC=it([j0,hw],(e,t)=>{if(e!=null)return hf(e.outerRadius,t,t*.8)}),y8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:i}=e;return[t,i]},nC=it([j0],y8);it([cw,nC],L0);var iC=it([hw,tC,rC],(e,t,i)=>{if(!(e==null||t==null||i==null))return[t,i]});it([uw,iC],L0);var aC=it([Jn,j0,tC,rC,lh,ch],(e,t,i,o,d,y)=>{if(!(e!=="centric"&&e!=="radial"||t==null||i==null||o==null)){var{cx:g,cy:u,startAngle:E,endAngle:P}=t;return{cx:hf(g,d,d/2),cy:hf(u,y,y/2),innerRadius:i,outerRadius:o,startAngle:E,endAngle:P,clockWise:!1}}}),Vi=(e,t)=>t,N0=(e,t,i)=>i;function oC(e){return e?.id}var ra=e=>{var t=Jn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},vm=e=>e.tooltip.settings.axisId,Ta=e=>{var t=ra(e),i=vm(e);return hy(e,t,i)},sC=it([Ta],e=>e?.dataKey);function lC(e,t,i){var{chartData:o=[]}=t,{allowDuplicatedCategory:d,dataKey:y}=i,g=new Map;return e.forEach(u=>{var E,P=(E=u.data)!==null&&E!==void 0?E:o;if(!(P==null||P.length===0)){var C=oC(u);P.forEach((z,j)=>{var N=y==null||d?j:String(fo(z,y,null)),$=fo(z,u.dataKey,0),X;g.has(N)?X=g.get(N):X={},Object.assign(X,{[C]:$}),g.set(N,X)})}}),Array.from(g.values())}function fw(e){return e.stackId!=null&&e.dataKey!=null}function YT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function n0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(i),!0).forEach(function(o){v8(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function v8(e,t,i){return(t=_8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _8(e){var t=b8(e,"string");return typeof t=="symbol"?t:t+""}function b8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zx=[0,"auto"],Ts={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},cC=(e,t)=>e.cartesianAxis.xAxis[t],uh=(e,t)=>{var i=cC(e,t);return i??Ts},As={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:uy},uC=(e,t)=>e.cartesianAxis.yAxis[t],hh=(e,t)=>{var i=uC(e,t);return i??As},x8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},dw=(e,t)=>{var i=e.cartesianAxis.zAxis[t];return i??x8},Xo=(e,t,i)=>{switch(t){case"xAxis":return uh(e,i);case"yAxis":return hh(e,i);case"zAxis":return dw(e,i);case"angleAxis":return cw(e,i);case"radiusAxis":return uw(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},w8=(e,t,i)=>{switch(t){case"xAxis":return uh(e,i);case"yAxis":return hh(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},hy=(e,t,i)=>{switch(t){case"xAxis":return uh(e,i);case"yAxis":return hh(e,i);case"angleAxis":return cw(e,i);case"radiusAxis":return uw(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},hC=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function fC(e,t){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===t;case"yAxis":return"yAxisId"in i&&i.yAxisId===t;case"zAxis":return"zAxisId"in i&&i.zAxisId===t;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===t;default:return!1}}}var dC=e=>e.graphicalItems.cartesianItems,S8=it([Vi,N0],fC),pC=(e,t,i)=>e.filter(i).filter(o=>t?.includeHidden===!0?!0:!o.hide),fy=it([dC,Xo,S8],pC),mC=it([fy],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(fw)),gC=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),yC=it([fy],gC),vC=e=>e.map(t=>t.data).filter(Boolean).flat(1),T8=it([fy],vC),_C=(e,t)=>{var{chartData:i=[],dataStartIndex:o,dataEndIndex:d}=t;return e.length>0?e:i.slice(o,d+1)},pw=it([T8,nw],_C),bC=(e,t,i)=>t?.dataKey!=null?e.map(o=>({value:fo(o,t.dataKey)})):i.length>0?i.map(o=>o.dataKey).flatMap(o=>e.map(d=>({value:fo(d,o)}))):e.map(o=>({value:o})),F0=it([pw,Xo,fy],bC);function xC(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zd(e){return e.filter(t=>nu(t)||t instanceof Date).map(Number).filter(t=>Tl(t)===!1)}function A8(e,t,i){return!i||typeof t!="number"||Tl(t)?[]:i.length?Zd(i.flatMap(o=>{var d=fo(e,o.dataKey),y,g;if(Array.isArray(d)?[y,g]=d:y=g=d,!(!fc(y)||!fc(g)))return[t-y,t+g]})):[]}var M8=it([mC,nw,Ta],lC),wC=(e,t,i)=>{var o={},d=t.reduce((y,g)=>(g.stackId==null||(y[g.stackId]==null&&(y[g.stackId]=[]),y[g.stackId].push(g)),y),o);return Object.fromEntries(Object.entries(d).map(y=>{var[g,u]=y,E=u.map(oC);return[g,{stackedData:Jk(e,E,i),graphicalItems:u}]}))},E8=it([M8,mC,B0],wC),SC=(e,t,i)=>{var{dataStartIndex:o,dataEndIndex:d}=t;if(i!=="zAxis"){var y=rB(e,o,d);if(!(y!=null&&y[0]===0&&y[1]===0))return y}},P8=it([E8,yf,Vi],SC),TC=(e,t,i,o,d)=>i.length>0?e.flatMap(y=>i.flatMap(g=>{var u,E,P=(u=o[g.id])===null||u===void 0?void 0:u.filter(z=>xC(d,z)),C=fo(y,(E=t.dataKey)!==null&&E!==void 0?E:g.dataKey);return{value:C,errorDomain:A8(y,C,P)}})).filter(Boolean):t?.dataKey!=null?e.map(y=>({value:fo(y,t.dataKey),errorDomain:[]})):e.map(y=>({value:y,errorDomain:[]})),U0=e=>e.errorBars,AC=(e,t,i)=>e.flatMap(o=>t[o.id]).filter(Boolean).filter(o=>xC(i,o));it([yC,U0,Vi],AC);var C8=it([pw,Xo,yC,U0,Vi],TC);function D8(e){var{value:t}=e;if(nu(t)||t instanceof Date)return t}var XT=e=>{var t=e.flatMap(o=>[o.value,o.errorDomain]).flat(1),i=Zd(t);if(i.length!==0)return[Math.min(...i),Math.max(...i)]},I8=(e,t,i)=>{var o=e.map(D8).filter(d=>d!=null);return i&&(t.dataKey==null||t.allowDuplicatedCategory&&dE(o))?NP(0,e.length):t.allowDuplicatedCategory?o:Array.from(new Set(o))},mw=e=>{var t;if(e==null||!("domain"in e))return zx;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var i=Zd(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:zx},i0=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var d=i.filter(Boolean);if(d.length!==0){var y=d.flat(),g=Math.min(...y),u=Math.max(...y);return[g,u]}},MC=e=>e.referenceElements.dots,_m=(e,t,i)=>e.filter(o=>o.ifOverflow==="extendDomain").filter(o=>t==="xAxis"?o.xAxisId===i:o.yAxisId===i),O8=it([MC,Vi,N0],_m),EC=e=>e.referenceElements.areas,z8=it([EC,Vi,N0],_m),PC=e=>e.referenceElements.lines,R8=it([PC,Vi,N0],_m),CC=(e,t)=>{var i=Zd(e.map(o=>t==="xAxis"?o.x:o.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},k8=it(O8,Vi,CC),DC=(e,t)=>{var i=Zd(e.flatMap(o=>[t==="xAxis"?o.x1:o.y1,t==="xAxis"?o.x2:o.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},B8=it([z8,Vi],DC),IC=(e,t)=>{var i=Zd(e.map(o=>t==="xAxis"?o.x:o.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},L8=it(R8,Vi,IC),j8=it(k8,L8,B8,(e,t,i)=>i0(e,i,t)),N8=it([Xo],mw),OC=(e,t,i,o,d,y,g)=>{var u=JL(t,e.allowDataOverflow);if(u!=null)return u;var E=y==="vertical"&&g==="xAxis"||y==="horizontal"&&g==="yAxis",P=E?i0(i,d,XT(o)):i0(d,XT(o));return e8(t,P,e.allowDataOverflow)},F8=it([Xo,N8,P8,C8,j8,Jn,Vi],OC),U8=[0,1],zC=(e,t,i,o,d,y,g)=>{if(!((e==null||i==null||i.length===0)&&g===void 0)){var{dataKey:u,type:E}=e,P=gf(t,y);return P&&u==null?NP(0,i.length):E==="category"?I8(o,e,P):d==="expand"?U8:g}},gw=it([Xo,Jn,pw,F0,B0,Vi,F8],zC),RC=(e,t,i,o,d)=>{if(e!=null){var{scale:y,type:g}=e;if(y==="auto")return t==="radial"&&d==="radiusAxis"?"band":t==="radial"&&d==="angleAxis"?"linear":g==="category"&&o&&(o.indexOf("LineChart")>=0||o.indexOf("AreaChart")>=0||o.indexOf("ComposedChart")>=0&&!i)?"point":g==="category"?"band":"linear";if(typeof y=="string"){var u="scale".concat(sy(y));return u in Lg?u:"point"}}},dy=it([Xo,Jn,hC,ow,Vi],RC);function G8(e){if(e!=null){if(e in Lg)return Lg[e]();var t="scale".concat(sy(e));if(t in Lg)return Lg[t]()}}function yw(e,t,i,o){if(!(i==null||o==null)){if(typeof e.scale=="function")return e.scale.copy().domain(i).range(o);var d=G8(t);if(d!=null){var y=d.domain(i).range(o);return Xk(y),y}}}var kC=(e,t,i)=>{var o=mw(t);if(!(i!=="auto"&&i!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(o)&&(o[0]==="auto"||o[1]==="auto")&&lm(e))return u8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&lm(e))return h8(e,t.tickCount,t.allowDecimals)}},vw=it([gw,hy,dy],kC),BC=(e,t,i,o)=>{if(o!=="angleAxis"&&e?.type==="number"&&lm(t)&&Array.isArray(i)&&i.length>0){var d=t[0],y=i[0],g=t[1],u=i[i.length-1];return[Math.min(d,y),Math.max(g,u)]}return t},V8=it([Xo,gw,vw,Vi],BC),q8=it(F0,Xo,(e,t)=>{if(!(!t||t.type!=="number")){var i=1/0,o=Array.from(Zd(e.map(u=>u.value))).sort((u,E)=>u-E);if(o.length<2)return 1/0;var d=o[o.length-1]-o[0];if(d===0)return 1/0;for(var y=0;y<o.length-1;y++){var g=o[y+1]-o[y];i=Math.min(i,g)}return i/d}}),LC=it(q8,Jn,f8,La,(e,t,i,o)=>o,(e,t,i,o,d)=>{if(!fc(e))return 0;var y=t==="vertical"?o.height:o.width;if(d==="gap")return e*y/2;if(d==="no-gap"){var g=hf(i,e*y),u=e*y/2;return u-g-(u-g)/y*g}return 0}),$8=(e,t)=>{var i=uh(e,t);return i==null||typeof i.padding!="string"?0:LC(e,"xAxis",t,i.padding)},Z8=(e,t)=>{var i=hh(e,t);return i==null||typeof i.padding!="string"?0:LC(e,"yAxis",t,i.padding)},H8=it(uh,$8,(e,t)=>{var i,o;if(e==null)return{left:0,right:0};var{padding:d}=e;return typeof d=="string"?{left:t,right:t}:{left:((i=d.left)!==null&&i!==void 0?i:0)+t,right:((o=d.right)!==null&&o!==void 0?o:0)+t}}),Y8=it(hh,Z8,(e,t)=>{var i,o;if(e==null)return{top:0,bottom:0};var{padding:d}=e;return typeof d=="string"?{top:t,bottom:t}:{top:((i=d.top)!==null&&i!==void 0?i:0)+t,bottom:((o=d.bottom)!==null&&o!==void 0?o:0)+t}}),X8=it([La,H8,z0,O0,(e,t,i)=>i],(e,t,i,o,d)=>{var{padding:y}=o;return d?[y.left,i.width-y.right]:[e.left+t.left,e.left+e.width-t.right]}),K8=it([La,Jn,Y8,z0,O0,(e,t,i)=>i],(e,t,i,o,d,y)=>{var{padding:g}=d;return y?[o.height-g.bottom,g.top]:t==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),py=(e,t,i,o)=>{var d;switch(t){case"xAxis":return X8(e,i,o);case"yAxis":return K8(e,i,o);case"zAxis":return(d=dw(e,i))===null||d===void 0?void 0:d.range;case"angleAxis":return nC(e);case"radiusAxis":return iC(e,i);default:return}},jC=it([Xo,py],L0),bm=it([Xo,dy,V8,jC],yw);it([fy,U0,Vi],AC);function NC(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var G0=(e,t)=>t,V0=(e,t,i)=>i,W8=it(D0,G0,V0,(e,t,i)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===i).sort(NC)),Q8=it(I0,G0,V0,(e,t,i)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===i).sort(NC)),FC=(e,t)=>({width:e.width,height:t.height}),J8=(e,t)=>{var i=typeof t.width=="number"?t.width:uy;return{width:i,height:e.height}},ej=it(La,uh,FC),tj=(e,t,i)=>{switch(t){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},rj=(e,t,i)=>{switch(t){case"left":return e.left;case"right":return i-e.right;default:return 0}},nj=it(ch,La,W8,G0,V0,(e,t,i,o,d)=>{var y={},g;return i.forEach(u=>{var E=FC(t,u);g==null&&(g=tj(t,o,e));var P=o==="top"&&!d||o==="bottom"&&d;y[u.id]=g-Number(P)*E.height,g+=(P?-1:1)*E.height}),y}),ij=it(lh,La,Q8,G0,V0,(e,t,i,o,d)=>{var y={},g;return i.forEach(u=>{var E=J8(t,u);g==null&&(g=rj(t,o,e));var P=o==="left"&&!d||o==="right"&&d;y[u.id]=g-Number(P)*E.width,g+=(P?-1:1)*E.width}),y}),aj=(e,t)=>{var i=uh(e,t);if(i!=null)return nj(e,i.orientation,i.mirror)},oj=it([La,uh,aj,(e,t)=>t],(e,t,i,o)=>{if(t!=null){var d=i?.[o];return d==null?{x:e.left,y:0}:{x:e.left,y:d}}}),sj=(e,t)=>{var i=hh(e,t);if(i!=null)return ij(e,i.orientation,i.mirror)},lj=it([La,hh,sj,(e,t)=>t],(e,t,i,o)=>{if(t!=null){var d=i?.[o];return d==null?{x:0,y:e.top}:{x:d,y:e.top}}}),cj=it(La,hh,(e,t)=>{var i=typeof t.width=="number"?t.width:uy;return{width:i,height:e.height}}),UC=(e,t,i,o)=>{if(i!=null){var{allowDuplicatedCategory:d,type:y,dataKey:g}=i,u=gf(e,o),E=t.map(P=>P.value);if(g&&u&&y==="category"&&d&&dE(E))return E}},_w=it([Jn,F0,Xo,Vi],UC),GC=(e,t,i,o)=>{if(!(i==null||i.dataKey==null)){var{type:d,scale:y}=i,g=gf(e,o);if(g&&(d==="number"||y!=="auto"))return t.map(u=>u.value)}},bw=it([Jn,F0,hy,Vi],GC),KT=it([Jn,w8,dy,bm,_w,bw,py,vw,Vi],(e,t,i,o,d,y,g,u,E)=>{if(t==null)return null;var P=gf(e,E);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:E,categoricalDomain:y,duplicateDomain:d,isCategorical:P,niceTicks:u,range:g,realScaleType:i,scale:o}}),uj=(e,t,i,o,d,y,g,u,E)=>{if(!(t==null||o==null)){var P=gf(e,E),{type:C,ticks:z,tickCount:j}=t,N=i==="scaleBand"&&typeof o.bandwidth=="function"?o.bandwidth()/2:2,$=C==="category"&&o.bandwidth?o.bandwidth()/N:0;$=E==="angleAxis"&&y!=null&&y.length>=2?Sl(y[0]-y[1])*2*$:$;var X=z||d;if(X){var W=X.map((oe,le)=>{var ue=g?g.indexOf(oe):oe;return{index:le,coordinate:o(ue)+$,value:oe,offset:$}});return W.filter(oe=>!Tl(oe.coordinate))}return P&&u?u.map((oe,le)=>({coordinate:o(oe)+$,value:oe,index:le,offset:$})):o.ticks?o.ticks(j).map(oe=>({coordinate:o(oe)+$,value:oe,offset:$})):o.domain().map((oe,le)=>({coordinate:o(oe)+$,value:g?g[oe]:oe,index:le,offset:$}))}},VC=it([Jn,hy,dy,bm,vw,py,_w,bw,Vi],uj),hj=(e,t,i,o,d,y,g)=>{if(!(t==null||i==null||o==null||o[0]===o[1])){var u=gf(e,g),{tickCount:E}=t,P=0;return P=g==="angleAxis"&&o?.length>=2?Sl(o[0]-o[1])*2*P:P,u&&y?y.map((C,z)=>({coordinate:i(C)+P,value:C,index:z,offset:P})):i.ticks?i.ticks(E).map(C=>({coordinate:i(C)+P,value:C,offset:P})):i.domain().map((C,z)=>({coordinate:i(C)+P,value:d?d[C]:C,index:z,offset:P}))}},qC=it([Jn,hy,bm,py,_w,bw,Vi],hj),$C=it(Xo,bm,(e,t)=>{if(!(e==null||t==null))return n0(n0({},e),{},{scale:t})}),fj=it([Xo,dy,gw,jC],yw);it((e,t,i)=>dw(e,i),fj,(e,t)=>{if(!(e==null||t==null))return n0(n0({},e),{},{scale:t})});var dj=it([Jn,D0,I0],(e,t,i)=>{switch(e){case"horizontal":return t.some(o=>o.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(o=>o.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZC=e=>e.options.defaultTooltipEventType,HC=e=>e.options.validateTooltipEventTypes;function YC(e,t,i){if(e==null)return t;var o=e?"axis":"item";return i==null?t:i.includes(o)?o:t}function xw(e,t){var i=ZC(e),o=HC(e);return YC(t,i,o)}function pj(e){return nr(t=>xw(t,e))}var XC=(e,t)=>{var i,o=Number(t);if(!(Tl(o)||t==null))return o>=0?e==null||(i=e[o])===null||i===void 0?void 0:i.value:void 0},mj=e=>e.tooltip.settings,lf={active:!1,index:null,dataKey:void 0,coordinate:void 0},gj={itemInteraction:{click:lf,hover:lf},axisInteraction:{click:lf,hover:lf},keyboardInteraction:lf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},KC=Rs({name:"tooltip",initialState:gj,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var i=th(e).tooltipItemPayloads.indexOf(t.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:yj,removeTooltipEntrySettings:vj,setTooltipSettingsState:_j,setActiveMouseOverItemIndex:bj,mouseLeaveItem:dV,mouseLeaveChart:WC,setActiveClickItemIndex:pV,setMouseOverAxisIndex:QC,setMouseClickAxisIndex:xj,setSyncInteraction:Rx,setKeyboardInteraction:kx}=KC.actions,wj=KC.reducer;function WT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Av(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(i),!0).forEach(function(o){Sj(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Sj(e,t,i){return(t=Tj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Tj(e){var t=Aj(e,"string");return typeof t=="symbol"?t:t+""}function Aj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mj(e,t,i){return t==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Ej(e){return e.index!=null}var JC=(e,t,i,o)=>{if(t==null)return lf;var d=Mj(e,t,i);if(d==null)return lf;if(d.active)return d;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var y=e.settings.active===!0;if(Ej(d)){if(y)return Av(Av({},d),{},{active:!0})}else if(o!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:o};return Av(Av({},lf),{},{coordinate:d.coordinate})},ww=(e,t)=>{var i=e?.index;if(i==null)return null;var o=Number(i);if(!fc(o))return i;var d=0,y=1/0;return t.length>0&&(y=t.length-1),String(Math.max(d,Math.min(o,y)))},e3=(e,t,i,o,d,y,g,u)=>{if(!(y==null||u==null)){var E=g[0],P=E==null?void 0:u(E.positions,y);if(P!=null)return P;var C=d?.[Number(y)];if(C)switch(i){case"horizontal":return{x:C.coordinate,y:(o.top+t)/2};default:return{x:(o.left+e)/2,y:C.coordinate}}}},t3=(e,t,i,o)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var d;return i==="hover"?d=e.itemInteraction.hover.dataKey:d=e.itemInteraction.click.dataKey,d==null&&o!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(y=>{var g;return((g=y.settings)===null||g===void 0?void 0:g.dataKey)===d})},my=e=>e.options.tooltipPayloadSearcher,xm=e=>e.tooltip;function QT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function JT(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QT(Object(i),!0).forEach(function(o){Pj(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QT(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function Pj(e,t,i){return(t=Cj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Cj(e){var t=Dj(e,"string");return typeof t=="symbol"?t:t+""}function Dj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ij(e,t){return e??t}var r3=(e,t,i,o,d,y,g)=>{if(!(t==null||y==null)){var{chartData:u,computedData:E,dataStartIndex:P,dataEndIndex:C}=i,z=[];return e.reduce((j,N)=>{var $,{dataDefinedOnItem:X,settings:W}=N,oe=Ij(X,u),le=Array.isArray(oe)?wP(oe,P,C):oe,ue=($=W?.dataKey)!==null&&$!==void 0?$:o,Oe=W?.nameKey,Be;if(o&&Array.isArray(le)&&!Array.isArray(le[0])&&g==="axis"?Be=pE(le,o,d):Be=y(le,t,E,Oe),Array.isArray(Be))Be.forEach(qe=>{var at=JT(JT({},W),{},{name:qe.name,unit:qe.unit,color:void 0,fill:void 0});j.push(_T({tooltipEntrySettings:at,dataKey:qe.dataKey,payload:qe.payload,value:fo(qe.payload,qe.dataKey),name:qe.name}))});else{var Le;j.push(_T({tooltipEntrySettings:W,dataKey:ue,payload:Be,value:fo(Be,ue),name:(Le=fo(Be,Oe))!==null&&Le!==void 0?Le:W?.name}))}return j},z)}},Sw=it([Ta,Jn,hC,ow,ra],RC),Oj=it([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),zj=it([ra,vm],fC),gy=it([Oj,Ta,zj],pC),Rj=it([gy],e=>e.filter(fw)),kj=it([gy],vC),wm=it([kj,yf],_C),Bj=it([Rj,yf,Ta],lC),Tw=it([wm,Ta,gy],bC),Lj=it([Ta],mw),jj=it([gy],e=>e.filter(fw)),Nj=it([Bj,jj,B0],wC),Fj=it([Nj,yf,ra],SC),Uj=it([gy],gC),Gj=it([wm,Ta,Uj,U0,ra],TC),Vj=it([MC,ra,vm],_m),qj=it([Vj,ra],CC),$j=it([EC,ra,vm],_m),Zj=it([$j,ra],DC),Hj=it([PC,ra,vm],_m),Yj=it([Hj,ra],IC),Xj=it([qj,Yj,Zj],i0),Kj=it([Ta,Lj,Fj,Gj,Xj,Jn,ra],OC),n3=it([Ta,Jn,wm,Tw,B0,ra,Kj],zC),Wj=it([n3,Ta,Sw],kC),Qj=it([Ta,n3,Wj,ra],BC),i3=e=>{var t=ra(e),i=vm(e),o=!1;return py(e,t,i,o)},a3=it([Ta,i3],L0),o3=it([Ta,Sw,Qj,a3],yw),Jj=it([Jn,Tw,Ta,ra],UC),eN=it([Jn,Tw,Ta,ra],GC),tN=(e,t,i,o,d,y,g,u)=>{if(t){var{type:E}=t,P=gf(e,u);if(o){var C=i==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,z=E==="category"&&o.bandwidth?o.bandwidth()/C:0;return z=u==="angleAxis"&&d!=null&&d?.length>=2?Sl(d[0]-d[1])*2*z:z,P&&g?g.map((j,N)=>({coordinate:o(j)+z,value:j,index:N,offset:z})):o.domain().map((j,N)=>({coordinate:o(j)+z,value:y?y[j]:j,index:N,offset:z}))}}},fh=it([Jn,Ta,Sw,o3,i3,Jj,eN,ra],tN),Aw=it([ZC,HC,mj],(e,t,i)=>YC(i.shared,e,t)),s3=e=>e.tooltip.settings.trigger,Mw=e=>e.tooltip.settings.defaultIndex,q0=it([xm,Aw,s3,Mw],JC),Jg=it([q0,wm],ww),l3=it([fh,Jg],XC),rN=it([q0],e=>{if(e)return e.dataKey}),c3=it([xm,Aw,s3,Mw],t3),nN=it([lh,ch,Jn,La,fh,Mw,c3,my],e3),iN=it([q0,nN],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),aN=it([q0],e=>e.active),oN=it([c3,Jg,yf,sC,l3,my,Aw],r3),sN=it([oN],e=>{if(e!=null){var t=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(t))}});function eA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function tA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(i),!0).forEach(function(o){lN(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function lN(e,t,i){return(t=cN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function cN(e){var t=uN(e,"string");return typeof t=="symbol"?t:t+""}function uN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hN=()=>nr(Ta),fN=()=>{var e=hN(),t=nr(fh),i=nr(o3);return Sx(tA(tA({},e),{},{scale:i}),t)},dN=()=>nr(ow),Ew=(e,t)=>t,u3=(e,t,i)=>i,Pw=(e,t,i,o)=>o,pN=it(fh,e=>T0(e,t=>t.coordinate)),Cw=it([xm,Ew,u3,Pw],JC),h3=it([Cw,wm],ww),mN=(e,t,i)=>{if(t!=null){var o=xm(e);return t==="axis"?i==="hover"?o.axisInteraction.hover.dataKey:o.axisInteraction.click.dataKey:i==="hover"?o.itemInteraction.hover.dataKey:o.itemInteraction.click.dataKey}},f3=it([xm,Ew,u3,Pw],t3),a0=it([lh,ch,Jn,La,fh,Pw,f3,my],e3),gN=it([Cw,a0],(e,t)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:t}),d3=it(fh,h3,XC),yN=it([f3,h3,yf,sC,d3,my,Ew],r3),vN=it([Cw],e=>({isActive:e.active,activeIndex:e.index})),_N=(e,t,i,o,d,y,g,u)=>{if(!(!e||!t||!o||!d||!y)){var E=nB(e.chartX,e.chartY,t,i,u);if(E){var P=aB(E,t),C=Hk(P,g,y,o,d),z=iB(t,y,C,E);return{activeIndex:String(C),activeCoordinate:z}}}};function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Bx.apply(null,arguments)}function rA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Mv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(i),!0).forEach(function(o){bN(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function bN(e,t,i){return(t=xN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function xN(e){var t=wN(e,"string");return typeof t=="symbol"?t:t+""}function wN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SN(e){var{coordinate:t,payload:i,index:o,offset:d,tooltipAxisBandSize:y,layout:g,cursor:u,tooltipEventType:E,chartName:P}=e,C=t,z=i,j=o;if(!u||!C||P!=="ScatterChart"&&E!=="axis")return null;var N,$;if(P==="ScatterChart")N=C,$=cL;else if(P==="BarChart")N=uL(g,C,d,y),$=UL;else if(g==="radial"){var{cx:X,cy:W,radius:oe,startAngle:le,endAngle:ue}=LP(C);N={cx:X,cy:W,startAngle:le,endAngle:ue,innerRadius:oe,outerRadius:oe},$=$L}else N={points:ZL(g,C,d)},$=IP;var Oe=typeof u=="object"&&"className"in u?u.className:void 0,Be=Mv(Mv(Mv(Mv({stroke:"#ccc",pointerEvents:"none"},d),N),wa(u,!1)),{},{payload:z,payloadIndex:j,className:kn("recharts-tooltip-cursor",Oe)});return ae.isValidElement(u)?ae.cloneElement(u,Be):ae.createElement($,Be)}function TN(e){var t=fN(),i=PP(),o=tw(),d=dN();return ae.createElement(SN,Bx({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:i,layout:o,tooltipAxisBandSize:t,chartName:d}))}var p3=ae.createContext(null),AN=()=>ae.useContext(p3),Ob={exports:{}},nA;function MN(){return nA||(nA=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function d(E,P,C){this.fn=E,this.context=P,this.once=C||!1}function y(E,P,C,z,j){if(typeof C!="function")throw new TypeError("The listener must be a function");var N=new d(C,z||E,j),$=i?i+P:P;return E._events[$]?E._events[$].fn?E._events[$]=[E._events[$],N]:E._events[$].push(N):(E._events[$]=N,E._eventsCount++),E}function g(E,P){--E._eventsCount===0?E._events=new o:delete E._events[P]}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var P=[],C,z;if(this._eventsCount===0)return P;for(z in C=this._events)t.call(C,z)&&P.push(i?z.slice(1):z);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(C)):P},u.prototype.listeners=function(P){var C=i?i+P:P,z=this._events[C];if(!z)return[];if(z.fn)return[z.fn];for(var j=0,N=z.length,$=new Array(N);j<N;j++)$[j]=z[j].fn;return $},u.prototype.listenerCount=function(P){var C=i?i+P:P,z=this._events[C];return z?z.fn?1:z.length:0},u.prototype.emit=function(P,C,z,j,N,$){var X=i?i+P:P;if(!this._events[X])return!1;var W=this._events[X],oe=arguments.length,le,ue;if(W.fn){switch(W.once&&this.removeListener(P,W.fn,void 0,!0),oe){case 1:return W.fn.call(W.context),!0;case 2:return W.fn.call(W.context,C),!0;case 3:return W.fn.call(W.context,C,z),!0;case 4:return W.fn.call(W.context,C,z,j),!0;case 5:return W.fn.call(W.context,C,z,j,N),!0;case 6:return W.fn.call(W.context,C,z,j,N,$),!0}for(ue=1,le=new Array(oe-1);ue<oe;ue++)le[ue-1]=arguments[ue];W.fn.apply(W.context,le)}else{var Oe=W.length,Be;for(ue=0;ue<Oe;ue++)switch(W[ue].once&&this.removeListener(P,W[ue].fn,void 0,!0),oe){case 1:W[ue].fn.call(W[ue].context);break;case 2:W[ue].fn.call(W[ue].context,C);break;case 3:W[ue].fn.call(W[ue].context,C,z);break;case 4:W[ue].fn.call(W[ue].context,C,z,j);break;default:if(!le)for(Be=1,le=new Array(oe-1);Be<oe;Be++)le[Be-1]=arguments[Be];W[ue].fn.apply(W[ue].context,le)}}return!0},u.prototype.on=function(P,C,z){return y(this,P,C,z,!1)},u.prototype.once=function(P,C,z){return y(this,P,C,z,!0)},u.prototype.removeListener=function(P,C,z,j){var N=i?i+P:P;if(!this._events[N])return this;if(!C)return g(this,N),this;var $=this._events[N];if($.fn)$.fn===C&&(!j||$.once)&&(!z||$.context===z)&&g(this,N);else{for(var X=0,W=[],oe=$.length;X<oe;X++)($[X].fn!==C||j&&!$[X].once||z&&$[X].context!==z)&&W.push($[X]);W.length?this._events[N]=W.length===1?W[0]:W:g(this,N)}return this},u.prototype.removeAllListeners=function(P){var C;return P?(C=i?i+P:P,this._events[C]&&g(this,C)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u})(Ob)),Ob.exports}var EN=MN();const PN=El(EN);var ey=new PN,Lx="recharts.syncEvent.tooltip",iA="recharts.syncEvent.brush";function CN(e,t){if(t){var i=Number.parseInt(t,10);if(!Tl(i))return e?.[i]}}var DN={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},m3=Rs({name:"options",initialState:DN,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),IN=m3.reducer,{createEventEmitter:ON}=m3.actions;function zN(e){return e.tooltip.syncInteraction}var RN={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},g3=Rs({name:"chartData",initialState:RN,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:i,endIndex:o}=t.payload;i!=null&&(e.dataStartIndex=i),o!=null&&(e.dataEndIndex=o)}}}),{setChartData:aA,setDataStartEndIndexes:kN,setComputedData:mV}=g3.actions,BN=g3.reducer,LN=["x","y"];function oA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Ad(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(i),!0).forEach(function(o){jN(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function jN(e,t,i){return(t=NN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NN(e){var t=FN(e,"string");return typeof t=="symbol"?t:t+""}function FN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UN(e,t){if(e==null)return{};var i,o,d=GN(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function GN(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var y3=()=>{};function VN(){var e=nr(sw),t=nr(lw),i=Ba(),o=nr(eC),d=nr(fh),y=tw(),g=Q1(),u=nr(E=>E.rootProps.className);ae.useEffect(()=>{if(e==null)return y3;var E=(P,C,z)=>{if(t!==z&&e===P){if(o==="index"){var j;if(g&&C!==null&&C!==void 0&&(j=C.payload)!==null&&j!==void 0&&j.coordinate){var N=C.payload.coordinate,{x:$,y:X}=N,W=UN(N,LN),oe=Ad(Ad(Ad({},W),typeof $=="number"&&{x:Math.max(g.x,Math.min($,g.x+g.width))}),typeof X=="number"&&{y:Math.max(g.y,Math.min(X,g.y+g.height))}),le=Ad(Ad({},C),{},{payload:Ad(Ad({},C.payload),{},{coordinate:oe})});i(le)}else i(C);return}if(d!=null){var ue;if(typeof o=="function"){var Oe={activeTooltipIndex:C.payload.index==null?void 0:Number(C.payload.index),isTooltipActive:C.payload.active,activeIndex:C.payload.index==null?void 0:Number(C.payload.index),activeLabel:C.payload.label,activeDataKey:C.payload.dataKey,activeCoordinate:C.payload.coordinate},Be=o(d,Oe);ue=d[Be]}else o==="value"&&(ue=d.find(Ft=>String(Ft.value)===C.payload.label));var{coordinate:Le}=C.payload;if(ue==null||C.payload.active===!1||Le==null||g==null){i(Rx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:qe,y:at}=Le,Mt=Math.min(qe,g.x+g.width),Ot=Math.min(at,g.y+g.height),ft={x:y==="horizontal"?ue.coordinate:Mt,y:y==="horizontal"?Ot:ue.coordinate},gt=Rx({active:C.payload.active,coordinate:ft,dataKey:C.payload.dataKey,index:String(ue.index),label:C.payload.label});i(gt)}}};return ey.on(Lx,E),()=>{ey.off(Lx,E)}},[u,i,t,e,o,d,y,g])}function qN(){var e=nr(sw),t=nr(lw),i=Ba();ae.useEffect(()=>{if(e==null)return y3;var o=(d,y,g)=>{t!==g&&e===d&&i(kN(y))};return ey.on(iA,o),()=>{ey.off(iA,o)}},[i,t,e])}function $N(){var e=Ba();ae.useEffect(()=>{e(ON())},[e]),VN(),qN()}function ZN(e,t,i,o,d,y){var g=nr(j=>mN(j,e,t)),u=nr(lw),E=nr(sw),P=nr(eC),C=nr(zN),z=C?.active;ae.useEffect(()=>{if(!z&&E!=null&&u!=null){var j=Rx({active:y,coordinate:i,dataKey:g,index:d,label:typeof o=="number"?String(o):o});ey.emit(Lx,E,j,u)}},[z,i,g,d,o,u,E,P,y])}function sA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function lA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(i),!0).forEach(function(o){HN(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function HN(e,t,i){return(t=YN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function YN(e){var t=XN(e,"string");return typeof t=="symbol"?t:t+""}function XN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KN(e){return e.dataKey}function WN(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):typeof e=="function"?ae.createElement(e,t):ae.createElement(UB,t)}var cA=[],QN={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!mm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function JN(e){var t=Dl(e,QN),{active:i,allowEscapeViewBox:o,animationDuration:d,animationEasing:y,content:g,filterNull:u,isAnimationActive:E,offset:P,payloadUniqBy:C,position:z,reverseDirection:j,useTranslate3d:N,wrapperStyle:$,cursor:X,shared:W,trigger:oe,defaultIndex:le,portal:ue,axisId:Oe}=t,Be=Ba(),Le=typeof le=="number"?String(le):le;ae.useEffect(()=>{Be(_j({shared:W,trigger:oe,axisId:Oe,active:i,defaultIndex:Le}))},[Be,W,oe,Oe,i,Le]);var qe=Q1(),at=DP(),Mt=pj(W),{activeIndex:Ot,isActive:ft}=nr(Rt=>vN(Rt,Mt,oe,Le)),gt=nr(Rt=>yN(Rt,Mt,oe,Le)),Ft=nr(Rt=>d3(Rt,Mt,oe,Le)),Ht=nr(Rt=>gN(Rt,Mt,oe,Le)),Kt=gt,$e=AN(),ot=i??ft,[Dt,bt]=WE([Kt,ot]),tr=Mt==="axis"?Ft:void 0;ZN(Mt,oe,Ht,tr,Ot,ot);var Ae=ue??$e;if(Ae==null)return null;var Ve=Kt??cA;ot||(Ve=cA),u&&Ve.length&&(Ve=ZE(Kt.filter(Rt=>Rt.value!=null&&(Rt.hide!==!0||t.includeHidden)),C,KN));var xt=Ve.length>0,Pt=ae.createElement(YB,{allowEscapeViewBox:o,animationDuration:d,animationEasing:y,isAnimationActive:E,active:ot,coordinate:Ht,hasPayload:xt,offset:P,position:z,reverseDirection:j,useTranslate3d:N,viewBox:qe,wrapperStyle:$,lastBoundingBox:Dt,innerRef:bt,hasPortalFromProps:!!ue},WN(g,lA(lA({},t),{},{payload:Ve,label:tr,active:ot,coordinate:Ht,accessibilityLayer:at})));return ae.createElement(ae.Fragment,null,vE.createPortal(Pt,Ae),ot&&ae.createElement(TN,{cursor:X,tooltipEventType:Mt,coordinate:Ht,payload:Kt,index:Ot}))}var zb={},Rb={},kb={},uA;function e7(){return uA||(uA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,o,{signal:d,edges:y}={}){let g,u=null;const E=y!=null&&y.includes("leading"),P=y==null||y.includes("trailing"),C=()=>{u!==null&&(i.apply(g,u),g=void 0,u=null)},z=()=>{P&&C(),X()};let j=null;const N=()=>{j!=null&&clearTimeout(j),j=setTimeout(()=>{j=null,z()},o)},$=()=>{j!==null&&(clearTimeout(j),j=null)},X=()=>{$(),g=void 0,u=null},W=()=>{C()},oe=function(...le){if(d?.aborted)return;g=this,u=le;const ue=j==null;N(),E&&ue&&C()};return oe.schedule=N,oe.cancel=X,oe.flush=W,d?.addEventListener("abort",X,{once:!0}),oe}e.debounce=t})(kb)),kb}var hA;function t7(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e7();function i(o,d=0,y={}){typeof y!="object"&&(y={});const{leading:g=!1,trailing:u=!0,maxWait:E}=y,P=Array(2);g&&(P[0]="leading"),u&&(P[1]="trailing");let C,z=null;const j=t.debounce(function(...X){C=o.apply(this,X),z=null},d,{edges:P}),N=function(...X){return E!=null&&(z===null&&(z=Date.now()),Date.now()-z>=E)?(C=o.apply(this,X),z=Date.now(),j.cancel(),j.schedule(),C):(j.apply(this,X),C)},$=()=>(j.flush(),C);return N.cancel=j.cancel,N.flush=$,N}e.debounce=i})(Rb)),Rb}var fA;function r7(){return fA||(fA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t7();function i(o,d=0,y={}){const{leading:g=!0,trailing:u=!0}=y;return t.debounce(o,d,{leading:g,maxWait:d,trailing:u})}e.throttle=i})(zb)),zb}var Bb,dA;function n7(){return dA||(dA=1,Bb=r7().throttle),Bb}var i7=n7();const a7=El(i7);var Ug=function(t,i){for(var o=arguments.length,d=new Array(o>2?o-2:0),y=2;y<o;y++)d[y-2]=arguments[y]};function pA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Lb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(i),!0).forEach(function(o){o7(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function o7(e,t,i){return(t=s7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s7(e){var t=l7(e,"string");return typeof t=="symbol"?t:t+""}function l7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c7=ae.forwardRef((e,t)=>{var{aspect:i,initialDimension:o={width:-1,height:-1},width:d="100%",height:y="100%",minWidth:g=0,minHeight:u,maxHeight:E,children:P,debounce:C=0,id:z,className:j,onResize:N,style:$={}}=e,X=ae.useRef(null),W=ae.useRef();W.current=N,ae.useImperativeHandle(t,()=>X.current);var[oe,le]=ae.useState({containerWidth:o.width,containerHeight:o.height}),ue=ae.useCallback((Be,Le)=>{le(qe=>{var at=Math.round(Be),Mt=Math.round(Le);return qe.containerWidth===at&&qe.containerHeight===Mt?qe:{containerWidth:at,containerHeight:Mt}})},[]);ae.useEffect(()=>{var Be=Mt=>{var Ot,{width:ft,height:gt}=Mt[0].contentRect;ue(ft,gt),(Ot=W.current)===null||Ot===void 0||Ot.call(W,ft,gt)};C>0&&(Be=a7(Be,C,{trailing:!0,leading:!1}));var Le=new ResizeObserver(Be),{width:qe,height:at}=X.current.getBoundingClientRect();return ue(qe,at),Le.observe(X.current),()=>{Le.disconnect()}},[ue,C]);var Oe=ae.useMemo(()=>{var{containerWidth:Be,containerHeight:Le}=oe;if(Be<0||Le<0)return null;Ug(Id(d)||Id(y),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,d,y),Ug(!i||i>0,"The aspect(%s) must be greater than zero.",i);var qe=Id(d)?Be:d,at=Id(y)?Le:y;return i&&i>0&&(qe?at=qe/i:at&&(qe=at*i),E&&at>E&&(at=E)),Ug(qe>0||at>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,qe,at,d,y,g,u,i),ae.Children.map(P,Mt=>ae.cloneElement(Mt,{width:qe,height:at,style:Lb({width:qe,height:at},Mt.props.style)}))},[i,P,y,E,u,g,oe,d]);return ae.createElement("div",{id:z?"".concat(z):void 0,className:kn("recharts-responsive-container",j),style:Lb(Lb({},$),{},{width:d,height:y,minWidth:g,minHeight:u,maxHeight:E}),ref:X},ae.createElement("div",{style:{width:0,height:0,overflow:"visible"}},Oe))});function u7(e,t,i){return(t=h7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h7(e){var t=f7(e,"string");return typeof t=="symbol"?t:t+""}function f7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class d7{constructor(t){u7(this,"cache",new Map),this.maxSize=t}get(t){var i=this.cache.get(t);return i!==void 0&&(this.cache.delete(t),this.cache.set(t,i)),i}set(t,i){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function mA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function p7(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(i),!0).forEach(function(o){m7(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function m7(e,t,i){return(t=g7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v7={cacheSize:2e3,enableCache:!0},v3=p7({},v7),gA=new d7(v3.cacheSize),_7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},yA="recharts_measurement_span";function b7(e,t){var i=t.fontSize||"",o=t.fontFamily||"",d=t.fontWeight||"",y=t.fontStyle||"",g=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(o,"|").concat(d,"|").concat(y,"|").concat(g,"|").concat(u)}var vA=(e,t)=>{try{var i=document.getElementById(yA);i||(i=document.createElement("span"),i.setAttribute("id",yA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,_7,t),i.textContent="".concat(e);var o=i.getBoundingClientRect();return{width:o.width,height:o.height}}catch{return{width:0,height:0}}},Gg=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||mm.isSsr)return{width:0,height:0};if(!v3.enableCache)return vA(t,i);var o=b7(t,i),d=gA.get(o);if(d)return d;var y=vA(t,i);return gA.set(o,y),y},_A=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,w7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},S7=Object.keys(_3),Wp="NaN";function T7(e,t){return e*_3[t]}class Ho{static parse(t){var i,[,o,d]=(i=w7.exec(t))!==null&&i!==void 0?i:[];return new Ho(parseFloat(o),d??"")}constructor(t,i){this.num=t,this.unit=i,this.num=t,this.unit=i,Tl(t)&&(this.unit=""),i!==""&&!x7.test(i)&&(this.num=NaN,this.unit=""),S7.includes(i)&&(this.num=T7(t,i),this.unit="px")}add(t){return this.unit!==t.unit?new Ho(NaN,""):new Ho(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ho(NaN,""):new Ho(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ho(NaN,""):new Ho(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ho(NaN,""):new Ho(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tl(this.num)}}function b3(e){if(e.includes(Wp))return Wp;for(var t=e;t.includes("*")||t.includes("/");){var i,[,o,d,y]=(i=_A.exec(t))!==null&&i!==void 0?i:[],g=Ho.parse(o??""),u=Ho.parse(y??""),E=d==="*"?g.multiply(u):g.divide(u);if(E.isNaN())return Wp;t=t.replace(_A,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,[,C,z,j]=(P=bA.exec(t))!==null&&P!==void 0?P:[],N=Ho.parse(C??""),$=Ho.parse(j??""),X=z==="+"?N.add($):N.subtract($);if(X.isNaN())return Wp;t=t.replace(bA,X.toString())}return t}var xA=/\(([^()]*)\)/;function A7(e){for(var t=e,i;(i=xA.exec(t))!=null;){var[,o]=i;t=t.replace(xA,b3(o))}return t}function M7(e){var t=e.replace(/\s+/g,"");return t=A7(t),t=b3(t),t}function E7(e){try{return M7(e)}catch{return Wp}}function jb(e){var t=E7(e.slice(5,-1));return t===Wp?"":t}var P7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],C7=["dx","dy","angle","className","breakAll"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},jx.apply(null,arguments)}function wA(e,t){if(e==null)return{};var i,o,d=D7(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function D7(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var x3=/[ \f\n\r\t\v\u2028\u2029]+/,w3=e=>{var{children:t,breakAll:i,style:o}=e;try{var d=[];xa(t)||(i?d=t.toString().split(""):d=t.toString().split(x3));var y=d.map(u=>({word:u,width:Gg(u,o).width})),g=i?0:Gg("",o).width;return{wordsWithComputedWidth:y,spaceWidth:g}}catch{return null}},I7=(e,t,i,o,d)=>{var{maxLines:y,children:g,style:u,breakAll:E}=e,P=mr(y),C=g,z=function(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ft.reduce((gt,Ft)=>{var{word:Ht,width:Kt}=Ft,$e=gt[gt.length-1];if($e&&(o==null||d||$e.width+Kt+i<Number(o)))$e.words.push(Ht),$e.width+=Kt+i;else{var ot={words:[Ht],width:Kt};gt.push(ot)}return gt},[])},j=z(t),N=Ot=>Ot.reduce((ft,gt)=>ft.width>gt.width?ft:gt);if(!P||d)return j;var $=j.length>y||N(j).width>Number(o);if(!$)return j;for(var X="",W=Ot=>{var ft=C.slice(0,Ot),gt=w3({breakAll:E,style:u,children:ft+X}).wordsWithComputedWidth,Ft=z(gt),Ht=Ft.length>y||N(Ft).width>Number(o);return[Ht,Ft]},oe=0,le=C.length-1,ue=0,Oe;oe<=le&&ue<=C.length-1;){var Be=Math.floor((oe+le)/2),Le=Be-1,[qe,at]=W(Le),[Mt]=W(Be);if(!qe&&!Mt&&(oe=Be+1),qe&&Mt&&(le=Be-1),!qe&&Mt){Oe=at;break}ue++}return Oe||j},SA=e=>{var t=xa(e)?[]:e.toString().split(x3);return[{words:t}]},O7=e=>{var{width:t,scaleToFit:i,children:o,style:d,breakAll:y,maxLines:g}=e;if((t||i)&&!mm.isSsr){var u,E,P=w3({breakAll:y,children:o,style:d});if(P){var{wordsWithComputedWidth:C,spaceWidth:z}=P;u=C,E=z}else return SA(o);return I7({breakAll:y,children:o,maxLines:g,style:d},u,E,t,i)}return SA(o)},TA="#808080",Dw=ae.forwardRef((e,t)=>{var{x:i=0,y:o=0,lineHeight:d="1em",capHeight:y="0.71em",scaleToFit:g=!1,textAnchor:u="start",verticalAnchor:E="end",fill:P=TA}=e,C=wA(e,P7),z=ae.useMemo(()=>O7({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:g,style:C.style,width:C.width}),[C.breakAll,C.children,C.maxLines,g,C.style,C.width]),{dx:j,dy:N,angle:$,className:X,breakAll:W}=C,oe=wA(C,C7);if(!nu(i)||!nu(o)||z.length===0)return null;var le=i+(mr(j)?j:0),ue=o+(mr(N)?N:0),Oe;switch(E){case"start":Oe=jb("calc(".concat(y,")"));break;case"middle":Oe=jb("calc(".concat((z.length-1)/2," * -").concat(d," + (").concat(y," / 2))"));break;default:Oe=jb("calc(".concat(z.length-1," * -").concat(d,")"));break}var Be=[];if(g){var Le=z[0].width,{width:qe}=C;Be.push("scale(".concat(mr(qe)?qe/Le:1,")"))}return $&&Be.push("rotate(".concat($,", ").concat(le,", ").concat(ue,")")),Be.length&&(oe.transform=Be.join(" ")),ae.createElement("text",jx({},wa(oe,!0),{ref:t,x:le,y:ue,className:kn("recharts-text",X),textAnchor:u,fill:P.includes("url")?TA:P}),z.map((at,Mt)=>{var Ot=at.words.join(W?"":" ");return ae.createElement("tspan",{x:le,dy:Mt===0?Oe:d,key:"".concat(Ot,"-").concat(Mt)},Ot)}))});Dw.displayName="Text";var z7=["labelRef"];function R7(e,t){if(e==null)return{};var i,o,d=k7(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function k7(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function AA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Oi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(i),!0).forEach(function(o){B7(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function B7(e,t,i){return(t=L7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function L7(e){var t=j7(e,"string");return typeof t=="symbol"?t:t+""}function j7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qu.apply(null,arguments)}var S3=ae.createContext(null),N7=e=>{var{x:t,y:i,width:o,height:d,children:y}=e,g=ae.useMemo(()=>({x:t,y:i,width:o,height:d}),[t,i,o,d]);return ae.createElement(S3.Provider,{value:g},y)},T3=()=>{var e=ae.useContext(S3),t=Q1();return e||t},F7=ae.createContext(null),U7=()=>{var e=ae.useContext(F7),t=nr(aC);return e||t},G7=e=>{var{value:t,formatter:i}=e,o=xa(e.children)?t:e.children;return typeof i=="function"?i(o):o},Iw=e=>e!=null&&typeof e=="function",V7=(e,t)=>{var i=Sl(t-e),o=Math.min(Math.abs(t-e),360);return i*o},q7=(e,t,i,o,d)=>{var{offset:y,className:g}=e,{cx:u,cy:E,innerRadius:P,outerRadius:C,startAngle:z,endAngle:j,clockWise:N}=d,$=(P+C)/2,X=V7(z,j),W=X>=0?1:-1,oe,le;switch(t){case"insideStart":oe=z+W*y,le=N;break;case"insideEnd":oe=j-W*y,le=!N;break;case"end":oe=j+W*y,le=N;break;default:throw new Error("Unsupported position ".concat(t))}le=X<=0?le:!le;var ue=Ra(u,E,$,oe),Oe=Ra(u,E,$,oe+(le?1:-1)*359),Be="M".concat(ue.x,",").concat(ue.y,`
    A`).concat($,",").concat($,",0,1,").concat(le?0:1,`,
    `).concat(Oe.x,",").concat(Oe.y),Le=xa(e.id)?Yg("recharts-radial-line-"):e.id;return ae.createElement("text",Qu({},o,{dominantBaseline:"central",className:kn("recharts-radial-bar-label",g)}),ae.createElement("defs",null,ae.createElement("path",{id:Le,d:Be})),ae.createElement("textPath",{xlinkHref:"#".concat(Le)},i))},$7=(e,t,i)=>{var{cx:o,cy:d,innerRadius:y,outerRadius:g,startAngle:u,endAngle:E}=e,P=(u+E)/2;if(i==="outside"){var{x:C,y:z}=Ra(o,d,g+t,P);return{x:C,y:z,textAnchor:C>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:d,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:d,textAnchor:"middle",verticalAnchor:"end"};var j=(y+g)/2,{x:N,y:$}=Ra(o,d,j,P);return{x:N,y:$,textAnchor:"middle",verticalAnchor:"middle"}},A3=e=>"cx"in e&&mr(e.cx),Z7=(e,t)=>{var{parentViewBox:i,offset:o,position:d}=e,y;i!=null&&!A3(i)&&(y=i);var{x:g,y:u,width:E,height:P}=t,C=P>=0?1:-1,z=C*o,j=C>0?"end":"start",N=C>0?"start":"end",$=E>=0?1:-1,X=$*o,W=$>0?"end":"start",oe=$>0?"start":"end";if(d==="top"){var le={x:g+E/2,y:u-C*o,textAnchor:"middle",verticalAnchor:j};return Oi(Oi({},le),y?{height:Math.max(u-y.y,0),width:E}:{})}if(d==="bottom"){var ue={x:g+E/2,y:u+P+z,textAnchor:"middle",verticalAnchor:N};return Oi(Oi({},ue),y?{height:Math.max(y.y+y.height-(u+P),0),width:E}:{})}if(d==="left"){var Oe={x:g-X,y:u+P/2,textAnchor:W,verticalAnchor:"middle"};return Oi(Oi({},Oe),y?{width:Math.max(Oe.x-y.x,0),height:P}:{})}if(d==="right"){var Be={x:g+E+X,y:u+P/2,textAnchor:oe,verticalAnchor:"middle"};return Oi(Oi({},Be),y?{width:Math.max(y.x+y.width-Be.x,0),height:P}:{})}var Le=y?{width:E,height:P}:{};return d==="insideLeft"?Oi({x:g+X,y:u+P/2,textAnchor:oe,verticalAnchor:"middle"},Le):d==="insideRight"?Oi({x:g+E-X,y:u+P/2,textAnchor:W,verticalAnchor:"middle"},Le):d==="insideTop"?Oi({x:g+E/2,y:u+z,textAnchor:"middle",verticalAnchor:N},Le):d==="insideBottom"?Oi({x:g+E/2,y:u+P-z,textAnchor:"middle",verticalAnchor:j},Le):d==="insideTopLeft"?Oi({x:g+X,y:u+z,textAnchor:oe,verticalAnchor:N},Le):d==="insideTopRight"?Oi({x:g+E-X,y:u+z,textAnchor:W,verticalAnchor:N},Le):d==="insideBottomLeft"?Oi({x:g+X,y:u+P-z,textAnchor:oe,verticalAnchor:j},Le):d==="insideBottomRight"?Oi({x:g+E-X,y:u+P-z,textAnchor:W,verticalAnchor:j},Le):d&&typeof d=="object"&&(mr(d.x)||Id(d.x))&&(mr(d.y)||Id(d.y))?Oi({x:g+hf(d.x,E),y:u+hf(d.y,P),textAnchor:"end",verticalAnchor:"end"},Le):Oi({x:g+E/2,y:u+P/2,textAnchor:"middle",verticalAnchor:"middle"},Le)},H7={offset:5};function sf(e){var t=Dl(e,H7),{viewBox:i,position:o,value:d,children:y,content:g,className:u="",textBreakAll:E,labelRef:P}=t,C=U7(),z=T3(),j=o==="center"?z:C??z,N=i||j;if(!N||xa(d)&&xa(y)&&!ae.isValidElement(g)&&typeof g!="function")return null;var $=Oi(Oi({},t),{},{viewBox:N});if(ae.isValidElement(g)){var{labelRef:X}=$,W=R7($,z7);return ae.cloneElement(g,W)}var oe;if(typeof g=="function"){if(oe=ae.createElement(g,$),ae.isValidElement(oe))return oe}else oe=G7(t);var le=A3(N),ue=wa(t,!0);if(le&&(o==="insideStart"||o==="insideEnd"||o==="end"))return q7(t,o,oe,ue,N);var Oe=le?$7(N,t.offset,t.position):Z7(t,N);return ae.createElement(Dw,Qu({ref:P,className:kn("recharts-label",u)},ue,Oe,{breakAll:E}),oe)}sf.displayName="Label";var Y7=(e,t,i)=>{if(!e)return null;var o={viewBox:t,labelRef:i};return e===!0?ae.createElement(sf,Qu({key:"label-implicit"},o)):nu(e)?ae.createElement(sf,Qu({key:"label-implicit",value:e},o)):ae.isValidElement(e)?e.type===sf?ae.cloneElement(e,Oi({key:"label-implicit"},o)):ae.createElement(sf,Qu({key:"label-implicit",content:e},o)):Iw(e)?ae.createElement(sf,Qu({key:"label-implicit",content:e},o)):e&&typeof e=="object"?ae.createElement(sf,Qu({},e,{key:"label-implicit"},o)):null};function X7(e){var{label:t}=e,i=T3();return Y7(t,i)||null}var Nb={},Fb={},MA;function K7(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i[i.length-1]}e.last=t})(Fb)),Fb}var Ub={},EA;function W7(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=t})(Ub)),Ub}var PA;function Q7(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K7(),i=W7(),o=q1();function d(y){if(o.isArrayLike(y))return t.last(i.toArray(y))}e.last=d})(Nb)),Nb}var Gb,CA;function J7(){return CA||(CA=1,Gb=Q7().last),Gb}var e9=J7();const t9=El(e9);var r9=["valueAccessor"],n9=["dataKey","clockWise","id","textBreakAll"];function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},o0.apply(null,arguments)}function DA(e,t){if(e==null)return{};var i,o,d=i9(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function i9(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var a9=e=>Array.isArray(e.value)?t9(e.value):e.value,M3=ae.createContext(void 0),o9=M3.Provider,E3=ae.createContext(void 0);E3.Provider;function s9(){return ae.useContext(M3)}function l9(){return ae.useContext(E3)}function Cv(e){var{valueAccessor:t=a9}=e,i=DA(e,r9),{dataKey:o,clockWise:d,id:y,textBreakAll:g}=i,u=DA(i,n9),E=s9(),P=l9(),C=E||P;return!C||!C.length?null:ae.createElement(pm,{className:"recharts-label-list"},C.map((z,j)=>{var N,$=xa(o)?t(z,j):fo(z&&z.payload,o),X=xa(y)?{}:{id:"".concat(y,"-").concat(j)};return ae.createElement(sf,o0({},wa(z,!0),u,X,{fill:(N=i.fill)!==null&&N!==void 0?N:z.fill,parentViewBox:z.parentViewBox,value:$,textBreakAll:g,viewBox:z.viewBox,key:"label-".concat(j),index:j}))}))}Cv.displayName="LabelList";function c9(e){var{label:t}=e;return t?t===!0?ae.createElement(Cv,{key:"labelList-implicit"}):ae.isValidElement(t)||Iw(t)?ae.createElement(Cv,{key:"labelList-implicit",content:t}):typeof t=="object"?ae.createElement(Cv,o0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Nx.apply(null,arguments)}var P3=e=>{var{cx:t,cy:i,r:o,className:d}=e,y=kn("recharts-dot",d);return t===+t&&i===+i&&o===+o?ae.createElement("circle",Nx({},$d(e),L1(e),{className:y,cx:t,cy:i,r:o})):null},u9={radiusAxis:{},angleAxis:{}},C3=Rs({name:"polarAxis",initialState:u9,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gV,removeRadiusAxis:yV,addAngleAxis:vV,removeAngleAxis:_V}=C3.actions,h9=C3.reducer;function f9(e){var{fn:t,args:i}=e,o=Ba(),d=Cl();return ae.useEffect(()=>{if(!d){var y=t(i);return o(yj(y)),()=>{o(vj(y))}}},[t,i,o,d]),null}var d9=()=>{};function p9(e){var{legendPayload:t}=e,i=Ba(),o=Cl();return ae.useEffect(()=>o?d9:(i(SB(t)),()=>{i(TB(t))}),[i,o,t]),null}var Vb,m9=()=>{var[e]=ae.useState(()=>Yg("uid-"));return e},g9=(Vb=uD.useId)!==null&&Vb!==void 0?Vb:m9;function y9(e,t){var i=g9();return t||(e?"".concat(e,"-").concat(i):i)}var v9=ae.createContext(void 0),_9=e=>{var{id:t,type:i,children:o}=e,d=y9("recharts-".concat(i),t);return ae.createElement(v9.Provider,{value:d},o(d))},b9={cartesianItems:[],polarItems:[]},D3=Rs({name:"graphicalItems",initialState:b9,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:i,next:o}=t.payload,d=th(e).cartesianItems.indexOf(i);d>-1&&(e.cartesianItems[d]=o)},removeCartesianGraphicalItem(e,t){var i=th(e).cartesianItems.indexOf(t.payload);i>-1&&e.cartesianItems.splice(i,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var i=th(e).polarItems.indexOf(t.payload);i>-1&&e.polarItems.splice(i,1)}}}),{addCartesianGraphicalItem:x9,replaceCartesianGraphicalItem:w9,removeCartesianGraphicalItem:S9,addPolarGraphicalItem:bV,removePolarGraphicalItem:xV}=D3.actions,T9=D3.reducer;function A9(e){var t=Ba(),i=ae.useRef(null);return ae.useEffect(()=>{i.current===null?t(x9(e)):i.current!==e&&t(w9({prev:i.current,next:e})),i.current=e},[t,e]),ae.useEffect(()=>()=>{i.current&&(t(S9(i.current)),i.current=null)},[t]),null}function IA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function OA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(i),!0).forEach(function(o){M9(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function M9(e,t,i){return(t=E9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E9(e){var t=P9(e,"string");return typeof t=="symbol"?t:t+""}function P9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C9={xAxis:{},yAxis:{},zAxis:{}},I3=Rs({name:"cartesianAxis",initialState:C9,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:i,width:o}=t.payload;e.yAxis[i]&&(e.yAxis[i]=OA(OA({},e.yAxis[i]),{},{width:o}))}}}),{addXAxis:D9,removeXAxis:I9,addYAxis:O9,removeYAxis:z9,addZAxis:wV,removeZAxis:SV,updateYAxisWidth:R9}=I3.actions,k9=I3.reducer,B9=it([La],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),L9=it([B9,lh,ch],(e,t,i)=>{if(!(!e||t==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),Ow=()=>nr(L9),j9=()=>nr(sN);function zA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function RA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(i),!0).forEach(function(o){N9(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function N9(e,t,i){return(t=F9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function F9(e){var t=U9(e,"string");return typeof t=="symbol"?t:t+""}function U9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G9=e=>{var{point:t,childIndex:i,mainColor:o,activeDot:d,dataKey:y}=e;if(d===!1||t.x==null||t.y==null)return null;var g=RA(RA({index:i,dataKey:y,cx:t.x,cy:t.y,r:4,fill:o??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},wa(d,!1)),L1(d)),u;return ae.isValidElement(d)?u=ae.cloneElement(d,g):typeof d=="function"?u=d(g):u=ae.createElement(P3,g),ae.createElement(pm,{className:"recharts-active-dot"},u)};function V9(e){var{points:t,mainColor:i,activeDot:o,itemDataKey:d}=e,y=nr(Jg),g=j9();if(t==null||g==null)return null;var u=t.find(E=>g.includes(E.payload));return xa(u)?null:G9({point:u,childIndex:Number(y),mainColor:i,dataKey:d,activeDot:o})}var q9={},O3=Rs({name:"errorBars",initialState:q9,reducers:{addErrorBar:(e,t)=>{var{itemId:i,errorBar:o}=t.payload;e[i]||(e[i]=[]),e[i].push(o)},replaceErrorBar:(e,t)=>{var{itemId:i,prev:o,next:d}=t.payload;e[i]&&(e[i]=e[i].map(y=>y.dataKey===o.dataKey&&y.direction===o.direction?d:y))},removeErrorBar:(e,t)=>{var{itemId:i,errorBar:o}=t.payload;e[i]&&(e[i]=e[i].filter(d=>d.dataKey!==o.dataKey||d.direction!==o.direction))}}}),{addErrorBar:TV,replaceErrorBar:AV,removeErrorBar:MV}=O3.actions,$9=O3.reducer,Z9=["children"];function H9(e,t){if(e==null)return{};var i,o,d=Y9(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Y9(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var X9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},K9=ae.createContext(X9);function W9(e){var{children:t}=e,i=H9(e,Z9);return ae.createElement(K9.Provider,{value:i},t)}function z3(e,t){var i,o,d=nr(P=>uh(P,e)),y=nr(P=>hh(P,t)),g=(i=d?.allowDataOverflow)!==null&&i!==void 0?i:Ts.allowDataOverflow,u=(o=y?.allowDataOverflow)!==null&&o!==void 0?o:As.allowDataOverflow,E=g||u;return{needClip:E,needClipX:g,needClipY:u}}function Q9(e){var{xAxisId:t,yAxisId:i,clipPathId:o}=e,d=Ow(),{needClipX:y,needClipY:g,needClip:u}=z3(t,i);if(!u)return null;var{x:E,y:P,width:C,height:z}=d;return ae.createElement("clipPath",{id:"clipPath-".concat(o)},ae.createElement("rect",{x:y?E:E-C/2,y:g?P:P-z/2,width:y?C:C*2,height:g?z:z*2}))}var J9=e=>{var{chartData:t}=e,i=Ba(),o=Cl();return ae.useEffect(()=>o?()=>{}:(i(aA(t)),()=>{i(aA(void 0))}),[t,i,o]),null},kA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},R3=Rs({name:"brush",initialState:kA,reducers:{setBrushSettings(e,t){return t.payload==null?kA:t.payload}}}),{setBrushSettings:EV}=R3.actions,eF=R3.reducer;function tF(e,t,i){return(t=rF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rF(e){var t=nF(e,"string");return typeof t=="symbol"?t:t+""}function nF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zw{static create(t){return new zw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:i,position:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+d}case"end":{var y=this.bandwidth?this.bandwidth():0;return this.scale(t)+y}default:return this.scale(t)}if(i){var g=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+g}return this.scale(t)}}isInRange(t){var i=this.range(),o=i[0],d=i[i.length-1];return o<=d?t>=o&&t<=d:t>=d&&t<=o}}tF(zw,"EPS",1e-4);function iF(e){return(e%180+180)%180}var aF=function(t){var{width:i,height:o}=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=iF(d),g=y*Math.PI/180,u=Math.atan(o/i),E=g>u&&g<Math.PI-u?o/Math.sin(g):i/Math.cos(g);return Math.abs(E)},oF={dots:[],areas:[],lines:[]},k3=Rs({name:"referenceElements",initialState:oF,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var i=th(e).dots.findIndex(o=>o===t.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var i=th(e).areas.findIndex(o=>o===t.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var i=th(e).lines.findIndex(o=>o===t.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:PV,removeDot:CV,addArea:DV,removeArea:IV,addLine:OV,removeLine:zV}=k3.actions,sF=k3.reducer,lF=ae.createContext(void 0),cF=e=>{var{children:t}=e,[i]=ae.useState("".concat(Yg("recharts"),"-clip")),o=Ow();if(o==null)return null;var{x:d,y,width:g,height:u}=o;return ae.createElement(lF.Provider,{value:i},ae.createElement("defs",null,ae.createElement("clipPath",{id:i},ae.createElement("rect",{x:d,y,height:u,width:g}))),t)};function cm(e,t){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(t,i)||e[i]!==t[i]))return!1;for(var o in t)if({}.hasOwnProperty.call(t,o)&&!{}.hasOwnProperty.call(e,o))return!1;return!0}function B3(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var o=[],d=0;d<e.length;d+=t)o.push(e[d]);return o}function uF(e,t,i){var o={width:e.width+t.width,height:e.height+t.height};return aF(o,i)}function hF(e,t,i){var o=i==="width",{x:d,y,width:g,height:u}=e;return t===1?{start:o?d:y,end:o?d+g:y+u}:{start:o?d+g:y+u,end:o?d:y}}function s0(e,t,i,o,d){if(e*t<e*o||e*t>e*d)return!1;var y=i();return e*(t-e*y/2-o)>=0&&e*(t+e*y/2-d)<=0}function fF(e,t){return B3(e,t+1)}function dF(e,t,i,o,d){for(var y=(o||[]).slice(),{start:g,end:u}=t,E=0,P=1,C=g,z=function(){var $=o?.[E];if($===void 0)return{v:B3(o,P)};var X=E,W,oe=()=>(W===void 0&&(W=i($,X)),W),le=$.coordinate,ue=E===0||s0(e,le,oe,C,u);ue||(E=0,C=g,P+=1),ue&&(C=le+e*(oe()/2+d),E+=P)},j;P<=y.length;)if(j=z(),j)return j.v;return[]}function BA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Ja(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(i),!0).forEach(function(o){pF(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function pF(e,t,i){return(t=mF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mF(e){var t=gF(e,"string");return typeof t=="symbol"?t:t+""}function gF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yF(e,t,i,o,d){for(var y=(o||[]).slice(),g=y.length,{start:u}=t,{end:E}=t,P=function(j){var N=y[j],$,X=()=>($===void 0&&($=i(N,j)),$);if(j===g-1){var W=e*(N.coordinate+e*X()/2-E);y[j]=N=Ja(Ja({},N),{},{tickCoord:W>0?N.coordinate-W*e:N.coordinate})}else y[j]=N=Ja(Ja({},N),{},{tickCoord:N.coordinate});var oe=s0(e,N.tickCoord,X,u,E);oe&&(E=N.tickCoord-e*(X()/2+d),y[j]=Ja(Ja({},N),{},{isShow:!0}))},C=g-1;C>=0;C--)P(C);return y}function vF(e,t,i,o,d,y){var g=(o||[]).slice(),u=g.length,{start:E,end:P}=t;if(y){var C=o[u-1],z=i(C,u-1),j=e*(C.coordinate+e*z/2-P);g[u-1]=C=Ja(Ja({},C),{},{tickCoord:j>0?C.coordinate-j*e:C.coordinate});var N=s0(e,C.tickCoord,()=>z,E,P);N&&(P=C.tickCoord-e*(z/2+d),g[u-1]=Ja(Ja({},C),{},{isShow:!0}))}for(var $=y?u-1:u,X=function(le){var ue=g[le],Oe,Be=()=>(Oe===void 0&&(Oe=i(ue,le)),Oe);if(le===0){var Le=e*(ue.coordinate-e*Be()/2-E);g[le]=ue=Ja(Ja({},ue),{},{tickCoord:Le<0?ue.coordinate-Le*e:ue.coordinate})}else g[le]=ue=Ja(Ja({},ue),{},{tickCoord:ue.coordinate});var qe=s0(e,ue.tickCoord,Be,E,P);qe&&(E=ue.tickCoord+e*(Be()/2+d),g[le]=Ja(Ja({},ue),{},{isShow:!0}))},W=0;W<$;W++)X(W);return g}function Rw(e,t,i){var{tick:o,ticks:d,viewBox:y,minTickGap:g,orientation:u,interval:E,tickFormatter:P,unit:C,angle:z}=e;if(!d||!d.length||!o)return[];if(mr(E)||mm.isSsr){var j;return(j=fF(d,mr(E)?E:0))!==null&&j!==void 0?j:[]}var N=[],$=u==="top"||u==="bottom"?"width":"height",X=C&&$==="width"?Gg(C,{fontSize:t,letterSpacing:i}):{width:0,height:0},W=(ue,Oe)=>{var Be=typeof P=="function"?P(ue.value,Oe):ue.value;return $==="width"?uF(Gg(Be,{fontSize:t,letterSpacing:i}),X,z):Gg(Be,{fontSize:t,letterSpacing:i})[$]},oe=d.length>=2?Sl(d[1].coordinate-d[0].coordinate):1,le=hF(y,oe,$);return E==="equidistantPreserveStart"?dF(oe,le,W,d,g):(E==="preserveStart"||E==="preserveStartEnd"?N=vF(oe,le,W,d,g,E==="preserveStartEnd"):N=yF(oe,le,W,d,g),N.filter(ue=>ue.isShow))}var _F=e=>{var{ticks:t,label:i,labelGapWithTick:o=5,tickSize:d=0,tickMargin:y=0}=e,g=0;if(t){t.forEach(C=>{if(C){var z=C.getBoundingClientRect();z.width>g&&(g=z.width)}});var u=i?i.getBoundingClientRect().width:0,E=d+y,P=g+E+u+(i?o:0);return Math.round(P)}return 0},bF=["axisLine","width","height","className","hide","ticks"],xF=["viewBox"],wF=["viewBox"];function Fx(e,t){if(e==null)return{};var i,o,d=SF(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function SF(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fd.apply(null,arguments)}function LA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function ea(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(i),!0).forEach(function(o){TF(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function TF(e,t,i){return(t=AF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AF(e){var t=MF(e,"string");return typeof t=="symbol"?t:t+""}function MF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kw={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function EF(e){var{x:t,y:i,width:o,height:d,orientation:y,mirror:g,axisLine:u,otherSvgProps:E}=e;if(!u)return null;var P=ea(ea(ea({},E),wa(u,!1)),{},{fill:"none"});if(y==="top"||y==="bottom"){var C=+(y==="top"&&!g||y==="bottom"&&g);P=ea(ea({},P),{},{x1:t,y1:i+C*d,x2:t+o,y2:i+C*d})}else{var z=+(y==="left"&&!g||y==="right"&&g);P=ea(ea({},P),{},{x1:t+z*o,y1:i,x2:t+z*o,y2:i+d})}return ae.createElement("line",Fd({},P,{className:kn("recharts-cartesian-axis-line",b0(u,"className"))}))}function PF(e,t,i,o,d,y,g,u,E){var P,C,z,j,N,$,X=u?-1:1,W=e.tickSize||g,oe=mr(e.tickCoord)?e.tickCoord:e.coordinate;switch(y){case"top":P=C=e.coordinate,j=i+ +!u*d,z=j-X*W,$=z-X*E,N=oe;break;case"left":z=j=e.coordinate,C=t+ +!u*o,P=C-X*W,N=P-X*E,$=oe;break;case"right":z=j=e.coordinate,C=t+ +u*o,P=C+X*W,N=P+X*E,$=oe;break;default:P=C=e.coordinate,j=i+ +u*d,z=j+X*W,$=z+X*E,N=oe;break}return{line:{x1:P,y1:z,x2:C,y2:j},tick:{x:N,y:$}}}function CF(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function DF(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function IF(e){var{option:t,tickProps:i,value:o}=e,d,y=kn(i.className,"recharts-cartesian-axis-tick-value");if(ae.isValidElement(t))d=ae.cloneElement(t,ea(ea({},i),{},{className:y}));else if(typeof t=="function")d=t(ea(ea({},i),{},{className:y}));else{var g="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(g=kn(g,t?.className)),d=ae.createElement(Dw,Fd({},i,{className:g}),o)}return d}function OF(e){var{ticks:t=[],tick:i,tickLine:o,stroke:d,tickFormatter:y,unit:g,padding:u,tickTextProps:E,orientation:P,mirror:C,x:z,y:j,width:N,height:$,tickSize:X,tickMargin:W,fontSize:oe,letterSpacing:le,getTicksConfig:ue,events:Oe}=e,Be=Rw(ea(ea({},ue),{},{ticks:t}),oe,le),Le=CF(P,C),qe=DF(P,C),at=$d(ue),Mt=wa(i,!1),Ot=ea(ea({},at),{},{fill:"none"},wa(o,!1)),ft=Be.map((gt,Ft)=>{var{line:Ht,tick:Kt}=PF(gt,z,j,N,$,P,X,C,W),$e=ea(ea(ea(ea({textAnchor:Le,verticalAnchor:qe},at),{},{stroke:"none",fill:d},Mt),Kt),{},{index:Ft,payload:gt,visibleTicksCount:Be.length,tickFormatter:y,padding:u},E);return ae.createElement(pm,Fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(gt.value,"-").concat(gt.coordinate,"-").concat(gt.tickCoord)},mE(Oe,gt,Ft)),o&&ae.createElement("line",Fd({},Ot,Ht,{className:kn("recharts-cartesian-axis-tick-line",b0(o,"className"))})),i&&ae.createElement(IF,{option:i,tickProps:$e,value:"".concat(typeof y=="function"?y(gt.value,Ft):gt.value).concat(g||"")}))});return ft.length>0?ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},ft):null}var zF=ae.forwardRef((e,t)=>{var{axisLine:i,width:o,height:d,className:y,hide:g,ticks:u}=e,E=Fx(e,bF),[P,C]=ae.useState(""),[z,j]=ae.useState(""),N=ae.useRef([]);ae.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var X;return _F({ticks:N.current,label:(X=e.labelRef)===null||X===void 0?void 0:X.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var $=ae.useCallback(X=>{if(X){var W=X.getElementsByClassName("recharts-cartesian-axis-tick-value");N.current=Array.from(W);var oe=W[0];if(oe){var le=window.getComputedStyle(oe),ue=le.fontSize,Oe=le.letterSpacing;(ue!==P||Oe!==z)&&(C(ue),j(Oe))}}},[P,z]);return g||o!=null&&o<=0||d!=null&&d<=0?null:ae.createElement(pm,{className:kn("recharts-cartesian-axis",y),ref:$},ae.createElement(EF,{x:e.x,y:e.y,width:o,height:d,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:$d(e)}),ae.createElement(OF,{ticks:u,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:P,letterSpacing:z,getTicksConfig:e,events:E}),ae.createElement(N7,{x:e.x,y:e.y,width:e.width,height:e.height},ae.createElement(X7,{label:e.label}),e.children))}),RF=ae.memo(zF,(e,t)=>{var{viewBox:i}=e,o=Fx(e,xF),{viewBox:d}=t,y=Fx(t,wF);return cm(i,d)&&cm(o,y)}),Bw=ae.forwardRef((e,t)=>{var i=Dl(e,kw);return ae.createElement(RF,Fd({},i,{ref:t}))});Bw.displayName="CartesianAxis";var kF=["x1","y1","x2","y2","key"],BF=["offset"],LF=["xAxisId","yAxisId"],jF=["xAxisId","yAxisId"];function jA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function eo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(i),!0).forEach(function(o){NF(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function NF(e,t,i){return(t=FF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function FF(e){var t=UF(e,"string");return typeof t=="symbol"?t:t+""}function UF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Od(){return Od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Od.apply(null,arguments)}function l0(e,t){if(e==null)return{};var i,o,d=GF(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function GF(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var VF=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:i,x:o,y:d,width:y,height:g,ry:u}=e;return ae.createElement("rect",{x:o,y:d,ry:u,width:y,height:g,stroke:"none",fill:t,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function L3(e,t){var i;if(ae.isValidElement(e))i=ae.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var{x1:o,y1:d,x2:y,y2:g,key:u}=t,E=l0(t,kF),P=$d(E),{offset:C}=P,z=l0(P,BF);i=ae.createElement("line",Od({},z,{x1:o,y1:d,x2:y,y2:g,fill:"none",key:u}))}return i}function qF(e){var{x:t,width:i,horizontal:o=!0,horizontalPoints:d}=e;if(!o||!d||!d.length)return null;var{xAxisId:y,yAxisId:g}=e,u=l0(e,LF),E=d.map((P,C)=>{var z=eo(eo({},u),{},{x1:t,y1:P,x2:t+i,y2:P,key:"line-".concat(C),index:C});return L3(o,z)});return ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},E)}function $F(e){var{y:t,height:i,vertical:o=!0,verticalPoints:d}=e;if(!o||!d||!d.length)return null;var{xAxisId:y,yAxisId:g}=e,u=l0(e,jF),E=d.map((P,C)=>{var z=eo(eo({},u),{},{x1:P,y1:t,x2:P,y2:t+i,key:"line-".concat(C),index:C});return L3(o,z)});return ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},E)}function ZF(e){var{horizontalFill:t,fillOpacity:i,x:o,y:d,width:y,height:g,horizontalPoints:u,horizontal:E=!0}=e;if(!E||!t||!t.length)return null;var P=u.map(z=>Math.round(z+d-d)).sort((z,j)=>z-j);d!==P[0]&&P.unshift(0);var C=P.map((z,j)=>{var N=!P[j+1],$=N?d+g-z:P[j+1]-z;if($<=0)return null;var X=j%t.length;return ae.createElement("rect",{key:"react-".concat(j),y:z,x:o,height:$,width:y,stroke:"none",fill:t[X],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},C)}function HF(e){var{vertical:t=!0,verticalFill:i,fillOpacity:o,x:d,y,width:g,height:u,verticalPoints:E}=e;if(!t||!i||!i.length)return null;var P=E.map(z=>Math.round(z+d-d)).sort((z,j)=>z-j);d!==P[0]&&P.unshift(0);var C=P.map((z,j)=>{var N=!P[j+1],$=N?d+g-z:P[j+1]-z;if($<=0)return null;var X=j%i.length;return ae.createElement("rect",{key:"react-".concat(j),x:z,y,width:$,height:u,stroke:"none",fill:i[X],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},C)}var YF=(e,t)=>{var{xAxis:i,width:o,height:d,offset:y}=e;return SP(Rw(eo(eo(eo({},kw),i),{},{ticks:TP(i),viewBox:{x:0,y:0,width:o,height:d}})),y.left,y.left+y.width,t)},XF=(e,t)=>{var{yAxis:i,width:o,height:d,offset:y}=e;return SP(Rw(eo(eo(eo({},kw),i),{},{ticks:TP(i),viewBox:{x:0,y:0,width:o,height:d}})),y.top,y.top+y.height,t)},KF={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function j3(e){var t=J1(),i=ew(),o=PP(),d=eo(eo({},Dl(e,KF)),{},{x:mr(e.x)?e.x:o.left,y:mr(e.y)?e.y:o.top,width:mr(e.width)?e.width:o.width,height:mr(e.height)?e.height:o.height}),{xAxisId:y,yAxisId:g,x:u,y:E,width:P,height:C,syncWithTicks:z,horizontalValues:j,verticalValues:N}=d,$=Cl(),X=nr(Mt=>KT(Mt,"xAxis",y,$)),W=nr(Mt=>KT(Mt,"yAxis",g,$));if(!mr(P)||P<=0||!mr(C)||C<=0||!mr(u)||u!==+u||!mr(E)||E!==+E)return null;var oe=d.verticalCoordinatesGenerator||YF,le=d.horizontalCoordinatesGenerator||XF,{horizontalPoints:ue,verticalPoints:Oe}=d;if((!ue||!ue.length)&&typeof le=="function"){var Be=j&&j.length,Le=le({yAxis:W?eo(eo({},W),{},{ticks:Be?j:W.ticks}):void 0,width:t,height:i,offset:o},Be?!0:z);Ug(Array.isArray(Le),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Le,"]")),Array.isArray(Le)&&(ue=Le)}if((!Oe||!Oe.length)&&typeof oe=="function"){var qe=N&&N.length,at=oe({xAxis:X?eo(eo({},X),{},{ticks:qe?N:X.ticks}):void 0,width:t,height:i,offset:o},qe?!0:z);Ug(Array.isArray(at),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof at,"]")),Array.isArray(at)&&(Oe=at)}return ae.createElement("g",{className:"recharts-cartesian-grid"},ae.createElement(VF,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ae.createElement(ZF,Od({},d,{horizontalPoints:ue})),ae.createElement(HF,Od({},d,{verticalPoints:Oe})),ae.createElement(qF,Od({},d,{offset:o,horizontalPoints:ue,xAxis:X,yAxis:W})),ae.createElement($F,Od({},d,{offset:o,verticalPoints:Oe,xAxis:X,yAxis:W})))}j3.displayName="CartesianGrid";var N3=(e,t,i,o)=>$C(e,"xAxis",t,o),F3=(e,t,i,o)=>qC(e,"xAxis",t,o),U3=(e,t,i,o)=>$C(e,"yAxis",i,o),G3=(e,t,i,o)=>qC(e,"yAxis",i,o),WF=it([Jn,N3,U3,F3,G3],(e,t,i,o,d)=>gf(e,"xAxis")?Sx(t,o,!1):Sx(i,d,!1)),QF=(e,t,i,o,d)=>d;function JF(e){return e.type==="line"}var eU=it([dC,QF],(e,t)=>e.filter(JF).find(i=>i.id===t)),tU=it([Jn,N3,U3,F3,G3,eU,WF,nw],(e,t,i,o,d,y,g,u)=>{var{chartData:E,dataStartIndex:P,dataEndIndex:C}=u;if(!(y==null||t==null||i==null||o==null||d==null||o.length===0||d.length===0||g==null)){var{dataKey:z,data:j}=y,N;if(j!=null&&j.length>0?N=j:N=E?.slice(P,C+1),N!=null)return SU({layout:e,xAxis:t,yAxis:i,xAxisTicks:o,yAxisTicks:d,dataKey:z,bandSize:g,displayedData:N})}}),rU=["id"],nU=["type","layout","connectNulls","needClip"],iU=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function NA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function Ps(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(i),!0).forEach(function(o){aU(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function aU(e,t,i){return(t=oU(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lw(e,t){if(e==null)return{};var i,o,d=lU(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function lU(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ud.apply(null,arguments)}var cU=e=>{var{dataKey:t,name:i,stroke:o,legendType:d,hide:y}=e;return[{inactive:y,dataKey:t,type:d,color:o,value:AP(i,t),payload:e}]};function uU(e){var{dataKey:t,data:i,stroke:o,strokeWidth:d,fill:y,name:g,hide:u,unit:E}=e;return{dataDefinedOnItem:i,positions:void 0,settings:{stroke:o,strokeWidth:d,fill:y,dataKey:t,nameKey:void 0,name:AP(g,t),hide:u,type:e.tooltipType,color:e.stroke,unit:E}}}var V3=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function hU(e,t){for(var i=e.length%2!==0?[...e,0]:e,o=[],d=0;d<t;++d)o=[...o,...i];return o}var fU=(e,t,i)=>{var o=i.reduce((z,j)=>z+j);if(!o)return V3(t,e);for(var d=Math.floor(e/o),y=e%o,g=t-e,u=[],E=0,P=0;E<i.length;P+=i[E],++E)if(P+i[E]>y){u=[...i.slice(0,E),y-P];break}var C=u.length%2===0?[0,g]:[g];return[...hU(i,d),...u,...C].map(z=>"".concat(z,"px")).join(", ")};function dU(e,t){var i;if(ae.isValidElement(e))i=ae.cloneElement(e,t);else if(typeof e=="function")i=e(t);else{var o=kn("recharts-line-dot",typeof e!="boolean"?e.className:"");i=ae.createElement(P3,Ud({},t,{className:o}))}return i}function pU(e,t){return e==null?!1:t?!0:e.length===1}function mU(e){var{clipPathId:t,points:i,props:o}=e,{dot:d,dataKey:y,needClip:g}=o;if(!pU(i,d))return null;var{id:u}=o,E=Lw(o,rU),P=yE(d),C=$d(E),z=wa(d,!0),j=i.map(($,X)=>{var W=Ps(Ps(Ps({key:"dot-".concat(X),r:3},C),z),{},{index:X,cx:$.x,cy:$.y,dataKey:y,value:$.value,payload:$.payload,points:i});return dU(d,W)}),N={clipPath:g?"url(#clipPath-".concat(P?"":"dots-").concat(t,")"):void 0};return ae.createElement(pm,Ud({className:"recharts-line-dots",key:"dots"},N),j)}function gU(e){var{showLabels:t,children:i,points:o}=e,d=ae.useMemo(()=>o?.map(y=>{var g={x:y.x,y:y.y,width:0,height:0};return Ps(Ps({},g),{},{value:y.value,payload:y.payload,viewBox:g,parentViewBox:void 0,fill:void 0})}),[o]);return ae.createElement(o9,{value:t?d:null},i)}function FA(e){var{clipPathId:t,pathRef:i,points:o,strokeDasharray:d,props:y}=e,{type:g,layout:u,connectNulls:E,needClip:P}=y,C=Lw(y,nU),z=Ps(Ps({},wa(C,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:P?"url(#clipPath-".concat(t,")"):void 0,points:o,type:g,layout:u,connectNulls:E,strokeDasharray:d??y.strokeDasharray});return ae.createElement(ae.Fragment,null,o?.length>1&&ae.createElement(IP,Ud({},z,{pathRef:i})),ae.createElement(mU,{points:o,clipPathId:t,props:y}))}function yU(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function vU(e){var{clipPathId:t,props:i,pathRef:o,previousPointsRef:d,longestAnimatedLengthRef:y}=e,{points:g,strokeDasharray:u,isAnimationActive:E,animationBegin:P,animationDuration:C,animationEasing:z,animateNewValues:j,width:N,height:$,onAnimationEnd:X,onAnimationStart:W}=i,oe=d.current,le=BP(i,"recharts-line-"),[ue,Oe]=ae.useState(!1),Be=!ue,Le=ae.useCallback(()=>{typeof X=="function"&&X(),Oe(!1)},[X]),qe=ae.useCallback(()=>{typeof W=="function"&&W(),Oe(!0)},[W]),at=yU(o.current),Mt=y.current;return ae.createElement(gU,{points:g,showLabels:Be},i.children,ae.createElement(kP,{animationId:le,begin:P,duration:C,isActive:E,easing:z,onAnimationEnd:Le,onAnimationStart:qe,key:le},Ot=>{var ft=Ku(Mt,at+Mt,Ot),gt=Math.min(ft,at),Ft;if(E)if(u){var Ht="".concat(u).split(/[,\s]+/gim).map(ot=>parseFloat(ot));Ft=fU(gt,at,Ht)}else Ft=V3(at,gt);else Ft=u==null?void 0:String(u);if(oe){var Kt=oe.length/g.length,$e=Ot===1?g:g.map((ot,Dt)=>{var bt=Math.floor(Dt*Kt);if(oe[bt]){var tr=oe[bt];return Ps(Ps({},ot),{},{x:Ku(tr.x,ot.x,Ot),y:Ku(tr.y,ot.y,Ot)})}return j?Ps(Ps({},ot),{},{x:Ku(N*2,ot.x,Ot),y:Ku($/2,ot.y,Ot)}):Ps(Ps({},ot),{},{x:ot.x,y:ot.y})});return d.current=$e,ae.createElement(FA,{props:i,points:$e,clipPathId:t,pathRef:o,strokeDasharray:Ft})}return Ot>0&&at>0&&(d.current=g,y.current=gt),ae.createElement(FA,{props:i,points:g,clipPathId:t,pathRef:o,strokeDasharray:Ft})}),ae.createElement(c9,{label:i.label}))}function _U(e){var{clipPathId:t,props:i}=e,o=ae.useRef(null),d=ae.useRef(0),y=ae.useRef(null);return ae.createElement(vU,{props:i,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:d,pathRef:y})}var bU=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:fo(e.payload,t)});class xU extends ae.Component{render(){var t,{hide:i,dot:o,points:d,className:y,xAxisId:g,yAxisId:u,top:E,left:P,width:C,height:z,id:j,needClip:N}=this.props;if(i)return null;var $=kn("recharts-line",y),X=j,{r:W=3,strokeWidth:oe=2}=(t=wa(o,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},le=yE(o),ue=W*2+oe;return ae.createElement(ae.Fragment,null,ae.createElement(pm,{className:$},N&&ae.createElement("defs",null,ae.createElement(Q9,{clipPathId:X,xAxisId:g,yAxisId:u}),!le&&ae.createElement("clipPath",{id:"clipPath-dots-".concat(X)},ae.createElement("rect",{x:P-ue/2,y:E-ue/2,width:C+ue,height:z+ue}))),ae.createElement(W9,{xAxisId:g,yAxisId:u,data:d,dataPointFormatter:bU,errorBarOffset:0},ae.createElement(_U,{props:this.props,clipPathId:X}))),ae.createElement(V9,{activeDot:this.props.activeDot,points:d,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var q3={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!mm.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function wU(e){var t=Dl(e,q3),{activeDot:i,animateNewValues:o,animationBegin:d,animationDuration:y,animationEasing:g,connectNulls:u,dot:E,hide:P,isAnimationActive:C,label:z,legendType:j,xAxisId:N,yAxisId:$,id:X}=t,W=Lw(t,iU),{needClip:oe}=z3(N,$),le=Ow(),ue=tw(),Oe=Cl(),Be=nr(Ot=>tU(Ot,N,$,Oe,X));if(ue!=="horizontal"&&ue!=="vertical"||Be==null||le==null)return null;var{height:Le,width:qe,x:at,y:Mt}=le;return ae.createElement(xU,Ud({},W,{id:X,connectNulls:u,dot:E,activeDot:i,animateNewValues:o,animationBegin:d,animationDuration:y,animationEasing:g,isAnimationActive:C,hide:P,label:z,legendType:j,xAxisId:N,yAxisId:$,points:Be,layout:ue,height:Le,width:qe,left:at,top:Mt,needClip:oe}))}function SU(e){var{layout:t,xAxis:i,yAxis:o,xAxisTicks:d,yAxisTicks:y,dataKey:g,bandSize:u,displayedData:E}=e;return E.map((P,C)=>{var z=fo(P,g);if(t==="horizontal"){var j=gT({axis:i,ticks:d,bandSize:u,entry:P,index:C}),N=xa(z)?null:o.scale(z);return{x:j,y:N,value:z,payload:P}}var $=xa(z)?null:i.scale(z),X=gT({axis:o,ticks:y,bandSize:u,entry:P,index:C});return $==null||X==null?null:{x:$,y:X,value:z,payload:P}}).filter(Boolean)}function TU(e){var t=Dl(e,q3),i=Cl();return ae.createElement(_9,{id:t.id,type:"line"},o=>ae.createElement(ae.Fragment,null,ae.createElement(p9,{legendPayload:cU(t)}),ae.createElement(f9,{fn:uU,args:t}),ae.createElement(A9,{type:"line",id:o,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:i}),ae.createElement(wU,Ud({},t,{id:o}))))}var $3=ae.memo(TU);$3.displayName="Line";var AU=["dangerouslySetInnerHTML","ticks"],MU=["id"],EU=["domain"],PU=["domain"];function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ux.apply(null,arguments)}function c0(e,t){if(e==null)return{};var i,o,d=CU(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function CU(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function DU(e){var t=Ba();return ae.useEffect(()=>(t(D9(e)),()=>{t(I9(e))}),[e,t]),null}var IU=e=>{var{xAxisId:t,className:i}=e,o=nr(EP),d=Cl(),y="xAxis",g=nr(W=>bm(W,y,t,d)),u=nr(W=>VC(W,y,t,d)),E=nr(W=>ej(W,t)),P=nr(W=>oj(W,t)),C=nr(W=>cC(W,t));if(E==null||P==null||C==null)return null;var{dangerouslySetInnerHTML:z,ticks:j}=e,N=c0(e,AU),{id:$}=C,X=c0(C,MU);return ae.createElement(Bw,Ux({},N,X,{scale:g,x:P.x,y:P.y,width:E.width,height:E.height,className:kn("recharts-".concat(y," ").concat(y),i),viewBox:o,ticks:u}))},OU={allowDataOverflow:Ts.allowDataOverflow,allowDecimals:Ts.allowDecimals,allowDuplicatedCategory:Ts.allowDuplicatedCategory,height:Ts.height,hide:!1,mirror:Ts.mirror,orientation:Ts.orientation,padding:Ts.padding,reversed:Ts.reversed,scale:Ts.scale,tickCount:Ts.tickCount,type:Ts.type,xAxisId:0},zU=e=>{var t,i,o,d,y,g=Dl(e,OU);return ae.createElement(ae.Fragment,null,ae.createElement(DU,{interval:(t=g.interval)!==null&&t!==void 0?t:"preserveEnd",id:g.xAxisId,scale:g.scale,type:g.type,padding:g.padding,allowDataOverflow:g.allowDataOverflow,domain:g.domain,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,includeHidden:(i=g.includeHidden)!==null&&i!==void 0?i:!1,reversed:g.reversed,ticks:g.ticks,height:g.height,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:(o=g.angle)!==null&&o!==void 0?o:0,minTickGap:(d=g.minTickGap)!==null&&d!==void 0?d:5,tick:(y=g.tick)!==null&&y!==void 0?y:!0,tickFormatter:g.tickFormatter}),ae.createElement(IU,g))},RU=(e,t)=>{var{domain:i}=e,o=c0(e,EU),{domain:d}=t,y=c0(t,PU);return cm(o,y)?Array.isArray(i)&&i.length===2&&Array.isArray(d)&&d.length===2?i[0]===d[0]&&i[1]===d[1]:cm({domain:i},{domain:d}):!1},Z3=ae.memo(zU,RU);Z3.displayName="XAxis";var kU=["dangerouslySetInnerHTML","ticks"],BU=["id"],LU=["domain"],jU=["domain"];function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Gx.apply(null,arguments)}function u0(e,t){if(e==null)return{};var i,o,d=NU(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function NU(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function FU(e){var t=Ba();return ae.useEffect(()=>(t(O9(e)),()=>{t(z9(e))}),[e,t]),null}var UU=e=>{var{yAxisId:t,className:i,width:o,label:d}=e,y=ae.useRef(null),g=ae.useRef(null),u=nr(EP),E=Cl(),P=Ba(),C="yAxis",z=nr(Be=>bm(Be,C,t,E)),j=nr(Be=>cj(Be,t)),N=nr(Be=>lj(Be,t)),$=nr(Be=>VC(Be,C,t,E)),X=nr(Be=>uC(Be,t));if(ae.useLayoutEffect(()=>{if(!(o!=="auto"||!j||Iw(d)||ae.isValidElement(d)||X==null)){var Be=y.current;if(Be){var Le=Be.getCalculatedWidth();Math.round(j.width)!==Math.round(Le)&&P(R9({id:t,width:Le}))}}},[$,j,P,d,t,o,X]),j==null||N==null||X==null)return null;var{dangerouslySetInnerHTML:W,ticks:oe}=e,le=u0(e,kU),{id:ue}=X,Oe=u0(X,BU);return ae.createElement(Bw,Gx({},le,Oe,{ref:y,labelRef:g,scale:z,x:N.x,y:N.y,tickTextProps:o==="auto"?{width:void 0}:{width:o},width:j.width,height:j.height,className:kn("recharts-".concat(C," ").concat(C),i),viewBox:u,ticks:$}))},GU={allowDataOverflow:As.allowDataOverflow,allowDecimals:As.allowDecimals,allowDuplicatedCategory:As.allowDuplicatedCategory,hide:!1,mirror:As.mirror,orientation:As.orientation,padding:As.padding,reversed:As.reversed,scale:As.scale,tickCount:As.tickCount,type:As.type,width:As.width,yAxisId:0},VU=e=>{var t,i,o,d,y,g=Dl(e,GU);return ae.createElement(ae.Fragment,null,ae.createElement(FU,{interval:(t=g.interval)!==null&&t!==void 0?t:"preserveEnd",id:g.yAxisId,scale:g.scale,type:g.type,domain:g.domain,allowDataOverflow:g.allowDataOverflow,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,padding:g.padding,includeHidden:(i=g.includeHidden)!==null&&i!==void 0?i:!1,reversed:g.reversed,ticks:g.ticks,width:g.width,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:(o=g.angle)!==null&&o!==void 0?o:0,minTickGap:(d=g.minTickGap)!==null&&d!==void 0?d:5,tick:(y=g.tick)!==null&&y!==void 0?y:!0,tickFormatter:g.tickFormatter}),ae.createElement(UU,g))},qU=(e,t)=>{var{domain:i}=e,o=u0(e,LU),{domain:d}=t,y=u0(t,jU);return cm(o,y)?Array.isArray(i)&&i.length===2&&Array.isArray(d)&&d.length===2?i[0]===d[0]&&i[1]===d[1]:cm({domain:i},{domain:d}):!1},H3=ae.memo(VU,qU);H3.displayName="YAxis";var qb={exports:{}},$b={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA;function $U(){if(UA)return $b;UA=1;var e=um();function t(E,P){return E===P&&(E!==0||1/E===1/P)||E!==E&&P!==P}var i=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,d=e.useRef,y=e.useEffect,g=e.useMemo,u=e.useDebugValue;return $b.useSyncExternalStoreWithSelector=function(E,P,C,z,j){var N=d(null);if(N.current===null){var $={hasValue:!1,value:null};N.current=$}else $=N.current;N=g(function(){function W(Be){if(!oe){if(oe=!0,le=Be,Be=z(Be),j!==void 0&&$.hasValue){var Le=$.value;if(j(Le,Be))return ue=Le}return ue=Be}if(Le=ue,i(le,Be))return Le;var qe=z(Be);return j!==void 0&&j(Le,qe)?(le=Be,Le):(le=Be,ue=qe)}var oe=!1,le,ue,Oe=C===void 0?null:C;return[function(){return W(P())},Oe===null?void 0:function(){return W(Oe())}]},[P,C,z,j]);var X=o(E,N[0],N[1]);return y(function(){$.hasValue=!0,$.value=X},[X]),u(X),X},$b}var GA;function ZU(){return GA||(GA=1,qb.exports=$U()),qb.exports}ZU();function HU(e){e()}function YU(){let e=null,t=null;return{clear(){e=null,t=null},notify(){HU(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let o=e;for(;o;)i.push(o),o=o.next;return i},subscribe(i){let o=!0;const d=t={callback:i,next:null,prev:t};return d.prev?d.prev.next=d:e=d,function(){!o||e===null||(o=!1,d.next?d.next.prev=d.prev:t=d.prev,d.prev?d.prev.next=d.next:e=d.next)}}}}var VA={notify(){},get:()=>[]};function XU(e,t){let i,o=VA,d=0,y=!1;function g(X){C();const W=o.subscribe(X);let oe=!1;return()=>{oe||(oe=!0,W(),z())}}function u(){o.notify()}function E(){$.onStateChange&&$.onStateChange()}function P(){return y}function C(){d++,i||(i=e.subscribe(E),o=YU())}function z(){d--,i&&d===0&&(i(),i=void 0,o.clear(),o=VA)}function j(){y||(y=!0,C())}function N(){y&&(y=!1,z())}const $={addNestedSub:g,notifyNestedSubs:u,handleChangeWrapper:E,isSubscribed:P,trySubscribe:j,tryUnsubscribe:N,getListeners:()=>o};return $}var KU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WU=KU(),QU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JU=QU(),eG=()=>WU||JU?ae.useLayoutEffect:ae.useEffect,tG=eG(),rG=Symbol.for("react-redux-context"),nG=typeof globalThis<"u"?globalThis:{};function iG(){if(!ae.createContext)return{};const e=nG[rG]??=new Map;let t=e.get(ae.createContext);return t||(t=ae.createContext(null),e.set(ae.createContext,t)),t}var aG=iG();function oG(e){const{children:t,context:i,serverState:o,store:d}=e,y=ae.useMemo(()=>{const E=XU(d);return{store:d,subscription:E,getServerState:o?()=>o:void 0}},[d,o]),g=ae.useMemo(()=>d.getState(),[d]);tG(()=>{const{subscription:E}=y;return E.onStateChange=E.notifyNestedSubs,E.trySubscribe(),g!==d.getState()&&E.notifyNestedSubs(),()=>{E.tryUnsubscribe(),E.onStateChange=void 0}},[y,g]);const u=i||aG;return ae.createElement(u.Provider,{value:y},t)}var sG=oG,lG=(e,t)=>t,jw=it([lG,Jn,aC,ra,a3,fh,pN,La],_N),Nw=e=>{var t=e.currentTarget.getBoundingClientRect(),i=t.width/e.currentTarget.offsetWidth,o=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/i),chartY:Math.round((e.clientY-t.top)/o)}},Y3=Al("mouseClick"),X3=cy();X3.startListening({actionCreator:Y3,effect:(e,t)=>{var i=e.payload,o=jw(t.getState(),Nw(i));o?.activeIndex!=null&&t.dispatch(xj({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}});var Vx=Al("mouseMove"),K3=cy();K3.startListening({actionCreator:Vx,effect:(e,t)=>{var i=e.payload,o=t.getState(),d=xw(o,o.tooltip.settings.shared),y=jw(o,Nw(i));d==="axis"&&(y?.activeIndex!=null?t.dispatch(QC({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate})):t.dispatch(WC()))}});var qA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},W3=Rs({name:"rootProps",initialState:qA,reducers:{updateOptions:(e,t)=>{var i;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(i=t.payload.barGap)!==null&&i!==void 0?i:qA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),cG=W3.reducer,{updateOptions:uG}=W3.actions,Q3=Rs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:RV}=Q3.actions,hG=Q3.reducer,J3=Al("keyDown"),eD=Al("focus"),Fw=cy();Fw.startListening({actionCreator:J3,effect:(e,t)=>{var i=t.getState(),o=i.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:d}=i.tooltip,y=e.payload;if(!(y!=="ArrowRight"&&y!=="ArrowLeft"&&y!=="Enter")){var g=Number(ww(d,wm(i))),u=fh(i);if(y==="Enter"){var E=a0(i,"axis","hover",String(d.index));t.dispatch(kx({active:!d.active,activeIndex:d.index,activeDataKey:d.dataKey,activeCoordinate:E}));return}var P=dj(i),C=P==="left-to-right"?1:-1,z=y==="ArrowRight"?1:-1,j=g+z*C;if(!(u==null||j>=u.length||j<0)){var N=a0(i,"axis","hover",String(j));t.dispatch(kx({active:!0,activeIndex:j.toString(),activeDataKey:void 0,activeCoordinate:N}))}}}}});Fw.startListening({actionCreator:eD,effect:(e,t)=>{var i=t.getState(),o=i.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:d}=i.tooltip;if(!d.active&&d.index==null){var y="0",g=a0(i,"axis","hover",String(y));t.dispatch(kx({activeDataKey:void 0,active:!0,activeIndex:y,activeCoordinate:g}))}}}});var bl=Al("externalEvent"),tD=cy();tD.startListening({actionCreator:bl,effect:(e,t)=>{if(e.payload.handler!=null){var i=t.getState(),o={activeCoordinate:iN(i),activeDataKey:rN(i),activeIndex:Jg(i),activeLabel:l3(i),activeTooltipIndex:Jg(i),isTooltipActive:aN(i)};e.payload.handler(o,e.payload.reactEvent)}}});var fG=it([xm],e=>e.tooltipItemPayloads),dG=it([fG,my,(e,t,i)=>t,(e,t,i)=>i],(e,t,i,o)=>{var d=e.find(u=>u.settings.dataKey===o);if(d!=null){var{positions:y}=d;if(y!=null){var g=t(y,i);return g}}}),rD=Al("touchMove"),nD=cy();nD.startListening({actionCreator:rD,effect:(e,t)=>{var i=e.payload,o=t.getState(),d=xw(o,o.tooltip.settings.shared);if(d==="axis"){var y=jw(o,Nw({clientX:i.touches[0].clientX,clientY:i.touches[0].clientY,currentTarget:i.currentTarget}));y?.activeIndex!=null&&t.dispatch(QC({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate}))}else if(d==="item"){var g,u=i.touches[0],E=document.elementFromPoint(u.clientX,u.clientY);if(!E||!E.getAttribute)return;var P=E.getAttribute(sB),C=(g=E.getAttribute(lB))!==null&&g!==void 0?g:void 0,z=dG(t.getState(),P,C);t.dispatch(bj({activeDataKey:C,activeIndex:P,activeCoordinate:z}))}}});var pG=JE({brush:eF,cartesianAxis:k9,chartData:BN,errorBars:$9,graphicalItems:T9,layout:zk,legend:AB,options:IN,polarAxis:h9,polarOptions:hG,referenceElements:sF,rootProps:cG,tooltip:wj}),mG=function(t){return ik({reducer:pG,preloadedState:t,middleware:i=>i({serializableCheck:!1}).concat([X3.middleware,K3.middleware,Fw.middleware,tD.middleware,nD.middleware]),devTools:mm.devToolsEnabled})};function gG(e){var{preloadedState:t,children:i,reduxStoreName:o}=e,d=Cl(),y=ae.useRef(null);if(d)return i;y.current==null&&(y.current=mG(t));var g=Z1;return ae.createElement(sG,{context:g,store:y.current},i)}function yG(e){var{layout:t,width:i,height:o,margin:d}=e,y=Ba(),g=Cl();return ae.useEffect(()=>{g||(y(Dk(t)),y(Ik({width:i,height:o})),y(Ck(d)))},[y,g,t,i,o,d]),null}function vG(e){var t=Ba();return ae.useEffect(()=>{t(uG(e))},[t,e]),null}var _G=["children"];function bG(e,t){if(e==null)return{};var i,o,d=xG(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function xG(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h0.apply(null,arguments)}var wG={width:"100%",height:"100%"},SG=ae.forwardRef((e,t)=>{var i=J1(),o=ew(),d=DP();if(!Qv(i)||!Qv(o))return null;var{children:y,otherAttributes:g,title:u,desc:E}=e,P,C;return typeof g.tabIndex=="number"?P=g.tabIndex:P=d?0:void 0,typeof g.role=="string"?C=g.role:C=d?"application":void 0,ae.createElement(j1,h0({},g,{title:u,desc:E,role:C,tabIndex:P,width:i,height:o,style:wG,ref:t}),y)}),TG=e=>{var{children:t}=e,i=nr(z0);if(!i)return null;var{width:o,height:d,y,x:g}=i;return ae.createElement(j1,{width:o,height:d,x:g,y},t)},$A=ae.forwardRef((e,t)=>{var{children:i}=e,o=bG(e,_G),d=Cl();return d?ae.createElement(TG,null,i):ae.createElement(SG,h0({ref:t},o),i)});function AG(){var e=Ba(),[t,i]=ae.useState(null),o=nr(oB);return ae.useEffect(()=>{if(t!=null){var d=t.getBoundingClientRect(),y=d.width/t.offsetWidth;fc(y)&&y!==o&&e(Ok(y))}},[t,e,o]),i}function ZA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,o)}return i}function MG(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(i),!0).forEach(function(o){EG(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZA(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function EG(e,t,i){return(t=PG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function PG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DG=ae.forwardRef((e,t)=>{var{children:i,className:o,height:d,onClick:y,onContextMenu:g,onDoubleClick:u,onMouseDown:E,onMouseEnter:P,onMouseLeave:C,onMouseMove:z,onMouseUp:j,onTouchEnd:N,onTouchMove:$,onTouchStart:X,style:W,width:oe}=e,le=Ba(),[ue,Oe]=ae.useState(null),[Be,Le]=ae.useState(null);$N();var qe=AG(),at=ae.useCallback(Ve=>{qe(Ve),typeof t=="function"&&t(Ve),Oe(Ve),Le(Ve)},[qe,t,Oe,Le]),Mt=ae.useCallback(Ve=>{le(Y3(Ve)),le(bl({handler:y,reactEvent:Ve}))},[le,y]),Ot=ae.useCallback(Ve=>{le(Vx(Ve)),le(bl({handler:P,reactEvent:Ve}))},[le,P]),ft=ae.useCallback(Ve=>{le(WC()),le(bl({handler:C,reactEvent:Ve}))},[le,C]),gt=ae.useCallback(Ve=>{le(Vx(Ve)),le(bl({handler:z,reactEvent:Ve}))},[le,z]),Ft=ae.useCallback(()=>{le(eD())},[le]),Ht=ae.useCallback(Ve=>{le(J3(Ve.key))},[le]),Kt=ae.useCallback(Ve=>{le(bl({handler:g,reactEvent:Ve}))},[le,g]),$e=ae.useCallback(Ve=>{le(bl({handler:u,reactEvent:Ve}))},[le,u]),ot=ae.useCallback(Ve=>{le(bl({handler:E,reactEvent:Ve}))},[le,E]),Dt=ae.useCallback(Ve=>{le(bl({handler:j,reactEvent:Ve}))},[le,j]),bt=ae.useCallback(Ve=>{le(bl({handler:X,reactEvent:Ve}))},[le,X]),tr=ae.useCallback(Ve=>{le(rD(Ve)),le(bl({handler:$,reactEvent:Ve}))},[le,$]),Ae=ae.useCallback(Ve=>{le(bl({handler:N,reactEvent:Ve}))},[le,N]);return ae.createElement(p3.Provider,{value:ue},ae.createElement(_E.Provider,{value:Be},ae.createElement("div",{className:kn("recharts-wrapper",o),style:MG({position:"relative",cursor:"default",width:oe,height:d},W),onClick:Mt,onContextMenu:Kt,onDoubleClick:$e,onFocus:Ft,onKeyDown:Ht,onMouseDown:ot,onMouseEnter:Ot,onMouseLeave:ft,onMouseMove:gt,onMouseUp:Dt,onTouchEnd:Ae,onTouchMove:tr,onTouchStart:bt,ref:at},i)))}),IG=["children","className","width","height","style","compact","title","desc"];function OG(e,t){if(e==null)return{};var i,o,d=zG(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function zG(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var RG=ae.forwardRef((e,t)=>{var{children:i,className:o,width:d,height:y,style:g,compact:u,title:E,desc:P}=e,C=OG(e,IG),z=$d(C);return u?ae.createElement($A,{otherAttributes:z,title:E,desc:P},i):ae.createElement(DG,{className:o,style:g,width:d,height:y,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},ae.createElement($A,{otherAttributes:z,title:E,desc:P,ref:t},ae.createElement(cF,null,i)))}),kG=["width","height"];function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},qx.apply(null,arguments)}function BG(e,t){if(e==null)return{};var i,o,d=LG(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function LG(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}var jG={top:5,right:5,bottom:5,left:5},NG={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:jG,reverseStackOrder:!1,syncMethod:"index"},FG=ae.forwardRef(function(t,i){var o,d=Dl(t.categoricalChartProps,NG),{width:y,height:g}=d,u=BG(d,kG);if(!Qv(y)||!Qv(g))return null;var{chartName:E,defaultTooltipEventType:P,validateTooltipEventTypes:C,tooltipPayloadSearcher:z,categoricalChartProps:j}=t,N={chartName:E,defaultTooltipEventType:P,validateTooltipEventTypes:C,tooltipPayloadSearcher:z,eventEmitter:void 0};return ae.createElement(gG,{preloadedState:{options:N},reduxStoreName:(o=j.id)!==null&&o!==void 0?o:E},ae.createElement(J9,{chartData:j.data}),ae.createElement(yG,{width:y,height:g,layout:d.layout,margin:d.margin}),ae.createElement(vG,{accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className}),ae.createElement(RG,qx({},u,{width:y,height:g,ref:i})))}),UG=["axis"],GG=ae.forwardRef((e,t)=>ae.createElement(FG,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UG,tooltipPayloadSearcher:CN,categoricalChartProps:e,ref:t}));const Zb=({data:e,dataKey:t,yLabel:i,domain:o})=>Ee.jsx("div",{className:"w-full h-[500px] p-4 bg-white rounded shadow-md",children:Ee.jsx(c7,{width:"100%",height:"90%",children:Ee.jsxs(GG,{data:e,margin:{top:20,right:30,left:50,bottom:-10},children:[Ee.jsx(j3,{strokeDasharray:"3 3"}),Ee.jsx(Z3,{dataKey:"year",label:{value:"Year",position:"insideBottom",offset:-10}}),Ee.jsx(H3,{domain:[o,"auto"],label:{value:i,angle:-90,position:"insideLeft",offset:-40,style:{textAnchor:"middle"}}}),Ee.jsx(JN,{formatter:d=>d.toLocaleString()}),Ee.jsx(R0,{verticalAlign:"bottom",align:"right"}),Ee.jsx($3,{type:"monotone",dataKey:t,stroke:"#32A5F4",strokeWidth:2,dot:{r:5},activeDot:{r:8}})]})})}),VG="/assets/anugul-hS4UaIce.png",qG="/assets/pop_builtup-cP4PHLks.png";function $G(){const e=ae.useRef(null),t=ae.useRef(null),[i,o]=ae.useState(!0),[d,y]=ae.useState(!1),[g,u]=ae.useState(1),[E,P]=ae.useState(1),C="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2011_builtup.tif",z="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/lulc_2024_builtup.tif",j="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/anugul_boundary.pmtiles";return ae.useEffect(()=>{Xu.addProtocol("cog",ix);const N=new JM;return Xu.addProtocol("pmtiles",N.tile),t.current=new Xu.Map({container:e.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256},population:{type:"raster",url:`cog://${C}#color:["#000000","#000000"],0,1,c`,tileSize:256},light:{type:"raster",url:`cog://${z}#color:["#000000","#000000"],0,1,c`,tileSize:256},boundary:{type:"vector",url:`pmtiles://${j}`}},layers:[{id:"osm",type:"raster",source:"osm"},{id:"population",type:"raster",source:"population",layout:{visibility:i?"visible":"none"},paint:{"raster-opacity":g}},{id:"light",type:"raster",source:"light",layout:{visibility:d?"visible":"none"},paint:{"raster-opacity":E}},{id:"boundary",type:"line",source:"boundary","source-layer":"zcta",paint:{"line-color":"#000000","line-width":1}}]},center:[84.90014,21.11117946909088],zoom:8}),t.current.on("load",()=>{t.current.setPaintProperty("population","raster-opacity",g),t.current.setPaintProperty("light","raster-opacity",E)}),()=>{t.current&&t.current.remove()}},[]),ae.useEffect(()=>{t.current.getLayer("population")&&t.current.setLayoutProperty("population","visibility",i?"visible":"none")},[i]),ae.useEffect(()=>{t.current.getLayer("light")&&t.current.setLayoutProperty("light","visibility",d?"visible":"none")},[d]),ae.useEffect(()=>{t.current.getLayer("population")&&t.current.setPaintProperty("population","raster-opacity",g)},[g]),ae.useEffect(()=>{t.current.getLayer("light")&&t.current.setPaintProperty("light","raster-opacity",E)},[E]),Ee.jsxs("div",{className:"relative w-full h-[600px] rounded-lg",children:[Ee.jsxs("div",{className:"absolute top-2 left-2 z-30 bg-white p-3 rounded shadow-md space-y-2 ",children:[Ee.jsxs("div",{children:[Ee.jsxs("label",{children:[Ee.jsx("input",{type:"checkbox",checked:i,onChange:N=>o(N.target.checked),className:"mr-1"}),"Population"]}),i&&Ee.jsx("input",{type:"range",min:0,max:1,step:.01,value:g,onChange:N=>u(parseFloat(N.target.value)),className:"w-full"})]}),Ee.jsxs("div",{children:[Ee.jsxs("label",{children:[Ee.jsx("input",{type:"checkbox",checked:d,onChange:N=>y(N.target.checked),className:"mr-1"}),"Light"]}),d&&Ee.jsx("input",{type:"range",min:0,max:1,step:.01,value:E,onChange:N=>P(parseFloat(N.target.value)),className:"w-full"})]})]}),Ee.jsx("div",{ref:e,className:"w-full h-full rounded-lg overflow-hidden"})]})}const ZG="/assets/dnb_2012_24-vIgr8umq.gif",HG="/assets/spatial_impact-KnG2DEan.png",YG="/assets/dnb_mining_1-T_Ul0BXb.gif",XG="/assets/dnb_mining_2-zbn-Q5q9.gif",KG=[{year:2013,Population:2067023},{year:2015,Population:2069451},{year:2017,Population:2134666},{year:2019,Population:2146097},{year:2021,Population:2112485},{year:2023,Population:2187409},{year:2024,Population:2203277}],WG=[{year:2011,"Builtup Area":191.54},{year:2012,"Builtup Area":191.92},{year:2013,"Builtup Area":189.99},{year:2014,"Builtup Area":192.19},{year:2015,"Builtup Area":201.16},{year:2016,"Builtup Area":214.56},{year:2017,"Builtup Area":256.37},{year:2018,"Builtup Area":266.34},{year:2019,"Builtup Area":295.39},{year:2020,"Builtup Area":327.52},{year:2021,"Builtup Area":257.69},{year:2022,"Builtup Area":345.42},{year:2023,"Builtup Area":339.3},{year:2024,"Builtup Area":386.12}],QG=[{year:2012,DNB:3577},{year:2013,DNB:4490},{year:2014,DNB:5103},{year:2015,DNB:5304},{year:2016,DNB:4473},{year:2017,DNB:5397.22},{year:2018,DNB:5574.22},{year:2019,DNB:4752},{year:2020,DNB:4772},{year:2021,DNB:5346.22},{year:2022,DNB:5870.22},{year:2023,DNB:7028.22},{year:2024,DNB:7664}],JG=[{name:"Colliery",percent:"-27.49%",values:"(103,133  74,777,  -28,356)"},{name:"Banarpal",percent:"-8.14%",values:"(120,117  110,336,  -9,781)"},{name:"Talcher Sadar",percent:"-5.65%",values:"(108,762  102,615,  -6,147)"},{name:"Khamar",percent:"-2.95%",values:"(99,273  96,340,  -2,933)"},{name:"Bikrampur",percent:"-0.74%",values:"(61,970  61,512,  -458)"}],eV=()=>Ee.jsx("section",{className:"py-12 bg-white",children:Ee.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[Ee.jsxs("div",{className:"mb-8 text-gray-600",children:[Ee.jsx("p",{className:"text-sm mb-2",children:Ee.jsxs("strong",{children:[" ","How mining, urban growth, and forest change have reshaped where people live in the heart of Odisha."]})}),Ee.jsx("p",{className:"text-sm",children:"PUBLISHED JUNE 24, 2022"})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"Introduction  The Pulse of Anugul"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Anugul (also known as Angul), in central Odisha, is a land of contrasts  dense mining towns like Talcher surrounded by forests, rivers, and agricultural villages. Over the past two decades, Satellite imagery reveals a powerful story of change: people shifting, towns expanding, and forests retreating."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Angul, Odisha - A quiet district in the heart of Odisha, Angul has transformed into a bustling industrial hub over the past two decades. Home to major coal mines, power plants, and steel industries, the district has witnessed significant economic growth. But how has this rapid industrialization impacted its population? With the last official census conducted in 2011, a clear picture of Angul's current demographic landscape has been missing. Now, by harnessing the power of satellite imagery and machine learning, a new data-driven narrative is emerging, offering a glimpse into the district's unseen population dynamics."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"A data visualization story prepared on the subject reveals a compelling correlation between industrial expansion, land use changes, and estimated population growth in Angul. By analyzing various satellite data streams, it's possible to piece together a story of a district in transition, where economic opportunities are drawing in new residents, leading to significant changes in the physical and social fabric of the region."})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h3",{className:"text-xl md:text-2xl font-medium text-gray-800 mb-6",children:"Baseline snapshot"}),Ee.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12",children:[Ee.jsxs("div",{children:[Ee.jsx("div",{className:"overflow-hidden rounded-lg",children:Ee.jsx("img",{src:VG,alt:"Angul",className:"w-full"})}),Ee.jsx("p",{className:"mt-2 italic text-gray-600",children:"Population statistics of Angul, Odisha based on 2011 census."})]}),Ee.jsxs("div",{className:"md:w-1/2 grid grid-cols-2 gap-x-12 gap-y-8",children:[Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]}),Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]}),Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]}),Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]}),Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]}),Ee.jsxs("div",{children:[Ee.jsx("p",{className:"text-gray-500 uppercase tracking-wider text-sm",children:"Population"}),Ee.jsx("p",{className:"text-3xl font-medium",children:"30 M"})]})]})]})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h3",{className:"text-xl md:text-2xl font-medium text-gray-800 mb-6",children:"Where people live today"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc condimentum finibus ante ac vulputate. Maecenas efficitur consectetur fermentum."}),Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("img",{src:qG,alt:"Where people live today",className:"w-full h-auto rounded-lg shadow-md"})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"Growing Towns, Shifting Villages"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Between 2011 and 2024, Anuguls urban centers grew dramatically. Landsat and Sentinel imagery show built-up areas expanding  especially around Talchers coal belt and Anguls industrial zones."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx(z6,{}),Ee.jsx("p",{className:"mt-2 italic text-gray-600",children:"Built-up area 2012 vs 2024"})]})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc condimentum finibus ante ac vulputate. Maecenas efficitur consectetur fermentum. Phasellus feugiat a mi luctus blandit. Integer augue orci, varius vel pretium eget, luctus ac dolor. Ut mollis pretium lacus pulvinar blandit. Integer a dapibus augue."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Ut id tellus viverra, facilisis risus dictum, dictum turpis. Nunc sed lorem libero. Quisque vitae aliquam mauris, vitae pharetra nunc. Proin iaculis tellus eu massa imperdiet ultrices. Sed volutpat, sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"prose prose-lg max-w-none mb-12",children:Ee.jsx(Zb,{data:WG,dataKey:"Builtup Area",yLabel:"Total Builtup Area (aq km)",domain:"[100, 'auto']"})})})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h3",{className:"text-xl md:text-2xl font-medium text-gray-800 mb-6",children:"Urban sprawl evolution"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Ut id tellus viverra, facilisis risus dictum, dictum turpis. Nunc sed lorem libero. Quisque vitae aliquam mauris, vitae pharetra nunc. Proin iaculis tellus eu massa imperdiet ultrices. Sed volutpat, sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"Animated Satellite GIF : Urban sprawl evolution (2012  2016  2020  2024)"})})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"The Mining Belt Effect"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Mining has been the districts economic engine  and its biggest environmental challenge. Talchers coalfields expanded rapidly, transforming landscapes and attracting workers."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"Thematic Map: Forest loss (Hansen Global Forest Change) + mining boundaries + population clusters"})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"Slider Mining Area (vs forest area if available) 2012 / Slider Mining Area (vs forest area if available) 2024"})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("img",{src:YG,alt:"dnb animated gif",className:"w-full h-auto rounded-lg shadow-md p-6"})})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("img",{src:XG,alt:"dnb animated gif",className:"w-full h-auto rounded-lg shadow-md p-6"})})})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h3",{className:"text-xl md:text-2xl font-medium text-gray-800 mb-6",children:"Insights to Highlight:"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsxs("ul",{className:"list-disc text-left text-gray-700 text-lg pl-10",children:[Ee.jsx("li",{children:"X hectares of forest lost near Talcher mines since 2000"}),Ee.jsx("li",{children:"Y% rise in population within 5 km of mines  driven by workers & support towns"})]})})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"Night Lights and Economic Activity"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Mining has been the districts economic engine  and its biggest environmental challenge. Talchers coalfields expanded rapidly, transforming landscapes and attracting workers."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("img",{src:ZG,alt:"dnb animated gif",className:"w-full h-auto rounded-lg shadow-md p-6"})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"prose prose-lg max-w-none mb-12",children:Ee.jsx(Zb,{data:QG,dataKey:"DNB",yLabel:"DNB Count",domain:"[2000, 'auto']"})})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsxs("p",{className:"text-gray-700 leading-relaxed mb-6",children:[Ee.jsx("div",{className:"prose prose-lg max-w-none",children:Ee.jsx($G,{})}),Ee.jsx("p",{className:"mt-2 font-medium text-gray-800",children:"Story Angle:"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Brightening zones align with industrial corridors and new roads  while many rural interiors remain dim, signaling uneven growth."})]})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"Uneven Density: Who Lives Where"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Despite industrialization, a majority of Anuguls population remains rural  but density is uneven. Villages near main roads and rivers are far more populated than hilly interiors."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"3D Population Density Map : Extruded pixels (using Deck.gl or Mapbox GL JS)"})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"Choropleth: Population density by sub district or village"})})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"sem at volutpat rutrum, sapien metus sollicitudin enim, quis congue lectus urna in arcu. Etiam tempus accumsan commodo. Sed eget libero eget nisi cursus volutpat. Vestibulum eleifend augue id vehicula pharetra. Vivamus nulla felis, venenatis nec mattis vitae, consequat et libero."}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsx("p",{className:"text-center mb-6",children:Ee.jsx("div",{className:"w-full h-[500px] rounded-lg shadow-md bg-gray-300 flex items-center justify-center text-gray-700 text-lg",children:"Interactive Table: subdistrict-wise stats (population)"})})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"Population Estimation for Anugul"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"The major proxy datasets are used in this study are :"}),Ee.jsx("div",{className:"prose prose-lg max-w-none mb-12",children:Ee.jsx(Zb,{data:KG,dataKey:"Population",yLabel:"Total Population",domain:"[8000000, 'auto']"})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h3",{className:"text-xl md:text-2xl font-medium text-gray-800 mb-6",children:"Analysing the trend"}),Ee.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12 p-2",children:[Ee.jsx("div",{className:"md:w-1/2",children:Ee.jsx("div",{className:"overflow-hidden",children:Ee.jsx("img",{src:HG,alt:"Angul spatial impact",className:"w-full h-auto object-cover"})})}),Ee.jsx("div",{className:"md:w-1/2 grid grid-cols-1 gap-y-8",children:Ee.jsxs("div",{children:[Ee.jsx("h5",{className:"text-md md:text-md font-medium text-gray-800 mb-6",children:"Top 5 Sub Districts with Largest Population Decline (2019 - 2021)"}),Ee.jsx("div",{className:"bg-white w-full text-sm md:text-sm font-small text-gray-800 mb-6 p-2",children:JG.map(e=>Ee.jsxs("div",{className:"flex justify-between",children:[Ee.jsxs("span",{className:"text-gray-600",children:[e.name,": ",e.percent]}),Ee.jsx("span",{className:"text-gray-600",children:e.values})]},e.name))}),Ee.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-600",children:[Ee.jsx("li",{children:"Population in 2021: 2,112,485"}),Ee.jsx("li",{children:"Dip magnityde (2019 - 2021): -1.57%"}),Ee.jsx("li",{children:"Absolute decline: -33,612"})]})]})})]}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsxs("p",{className:"mb-6",children:[Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Total district population change 2019 - 2021 : 33,612"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-600",children:[Ee.jsx("li",{children:"Colliery contributed 84.4% to overall dip"}),Ee.jsx("li",{children:"Banarpal contributed 29.1% to overall dip"}),Ee.jsx("li",{children:"Talcher Sadar contributed 18.3% to overall dip"}),Ee.jsx("li",{children:"Bikrampur contributed 1.4% to overall dip"})]})}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"DNB Change 2019 - 2021: -0.08%"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-600",children:[Ee.jsx("li",{children:"DNB 2019: 24752.28"}),Ee.jsx("li",{children:"DNB 2021: 24732.29"})]})}),Ee.jsxs("p",{className:"text-gray-700 leading-relaxed mb-6",children:[Ee.jsx("div",{className:"font-medium",children:"DNB decline coincides with population dip - suggests economic downturn due to Covid Night Light Proxy for economic activity is increasing wrt the industrial growth"}),Ee.jsx("div",{children:"(used pollution data for the correlation, Sentinel 5p)"})]})]})})]}),Ee.jsxs("div",{className:"prose prose-lg max-w-none mb-12",children:[Ee.jsx("h2",{className:"text-2xl md:text-3xl font-medium text-gray-800 mb-6",children:"What the Data Tells Us"}),Ee.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:Ee.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[Ee.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Key Insights"}),Ee.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ee.jsx("li",{children:"Anuguls population likely exceeds 1.5 million (2024)  a ~20% rise since 2011"}),Ee.jsx("li",{children:"Built-up area expanded by over 40%, driven by mining towns"}),Ee.jsx("li",{children:"~15,000 hectares of forest lost since 2000"}),Ee.jsx("li",{children:"VIIRS brightness tripled around Talcher, reflecting rapid industrial growth"}),Ee.jsx("li",{children:"Rural interiors lag behind  both in light and accessibility"})]})]})})]})]})}),tV=()=>Ee.jsx("footer",{className:"bg-gray-800 text-white py-0",style:{backgroundColor:"#333333"},children:Ee.jsx("div",{className:"container mx-auto px-4",children:Ee.jsx("div",{className:"mt-0 pt-8 pb-8 text-center text-gray-400",children:Ee.jsx("p",{children:" 2025 UNFPA. All rights reserved."})})})});function rV(){return Ee.jsxs("div",{className:"min-h-screen bg-white ",children:[Ee.jsx(yD,{}),Ee.jsx(_D,{}),Ee.jsx(eV,{}),Ee.jsx(tV,{})]})}gD.createRoot(document.getElementById("root")).render(Ee.jsx(ae.StrictMode,{children:Ee.jsx(rV,{})}));export{nV as L,iV as a,El as g};
